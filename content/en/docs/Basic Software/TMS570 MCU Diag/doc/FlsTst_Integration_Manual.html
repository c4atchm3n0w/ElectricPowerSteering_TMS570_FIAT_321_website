---
title: FlsTst_Integration_Manual
linkTitle: FlsTst_Integration_Manual
weight: 6
---

<h1 class="TOC-Heading" id="contents">Contents</h1>
<p>1 Dependencies 1</p>
<p>1.1 SWCs 2</p>
<p>1.2 Functions to be provided to Integration Project 2</p>
<p>2 Configuration 2</p>
<p>2.1 Build Time Config 2</p>
<p>2.2 Configuration Files to be provided by Integration Project 2</p>
<p>2.2.1 Da Vinci Parameter Configuration Changes 3</p>
<p>2.2.2 DaVinci Interrupt Configuration Changes 3</p>
<p>2.2.3 Manual Configuration Changes 3</p>
<p>3 Integration 4</p>
<p>3.1 Required Global Data Inputs 4</p>
<p>3.2 Optional Global Data Inputs 4</p>
<p>3.3 Specific Include Path present 4</p>
<p>4 Runnable Scheduling 4</p>
<p>5 Memory Mapping 4</p>
<p>5.1 Mapping 4</p>
<p>5.2 Usage 5</p>
<p>5.3 NvM Blocks 5</p>
<p>6 Compiler Settings 5</p>
<p>6.1 Preprocessor MACRO 5</p>
<p>6.2 Optimization Settings 5</p>
<p>7 Revision Control Log 5</p>
<h1 id="dependencies">Dependencies</h1>
<p>NOTE – the TMS570_uDiag component includes both uDiag and FlsTst functionality. For complete integration information on the TMS570_uDiag component, also see the Cd_uDiag integration manual (in the TMS570_uDiag\doc folder).</p>
<h2 id="swcs">SWCs</h2>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="header">
<th>Module</th>
<th>Required Feature</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>NxtrLib</td>
<td><p>DtrmnElapsedTime_uS_u32()</p>
<p>GetSystemTime_uS_u32()</p></td>
</tr>
<tr class="even">
<td>TMS570 CRC peripheral</td>
<td>Exclusive access to the CRC peripheral registers.</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>DiagMgr (Nexteer DEM)</td>
<td>NxtrDiagMgr_ReportNTCStatus() API</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Basic System Services</td>
<td>EnableCRCInterrupt()</td>
</tr>
<tr class="even">
<td>DMA</td>
<td><p>DMA register and control packet initialization</p>
<p>Dma_DisableFlsTstBlock()</p>
<p>Dma_SetupFlsTstBlock()</p>
<p>Dma_EnableFlsTstBlock()</p></td>
</tr>
</tbody>
</table>
<h2 id="functions-to-be-provided-to-integration-project">Functions to be provided to Integration Project</h2>
<p>&lt; Global function (except the ones that are defined in RTE modules) that is defined in this component but used by other function&gt;</p>
<p>void FlsTst_MainFunction( void );</p>
<p>void FlsTst_Init( const FlsTst_ConfigType* ConfigPtr );</p>
<p>void FlsTst_Suspend( void );</p>
<p>void FlsTst_Resume( void );</p>
<h1 id="configuration">Configuration</h1>
<h2 id="build-time-config">Build Time Config</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 53%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="header">
<th>Modules</th>
<th>Notes</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>None</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="configuration-files-to-be-provided-by-integration-project">Configuration Files to be provided by Integration Project</h2>
<h2 class="unnumbered" id="section"></h2>
<p>FlsTst_Cfg.c generated by FlsTst_Cfg.c.tt</p>
<p>FlsTst_Cfg.h generated by FlsTst_Cfg.h.tt</p>
<p>NOTES: The FlsTst module parameter description file and generator templates are located in the “generate” folder. The generation scheme at this time relies on the ARTT generation framework developed by BMW. Following are the recommended steps to integrate the provided generation templates and parameter description with Davinci Configurator:</p>
<ol type="1">
<li><p>Copy the “Artt/artt” framework folder into the “Generators” directory (if not already present)</p></li>
<li><p>Execute the “Integrate.bat” script from the Tools directory of this component to perform the necessary integration steps:</p>
<ol type="a">
<li><p>The script creates the required directories in the integration project, “Generators/Artt/FlsTst” and “Generators/Components/_Schemes/FlsTst/bswmd”</p></li>
<li><p>The script then copies the required files from the CBD generate directory into the new directories.</p></li>
</ol></li>
<li><p>If this is the first time integration, then perform the Davinci Configurator 3rd party component integration procedure.</p></li>
</ol>
<h3 id="da-vinci-parameter-configuration-changes">Da Vinci Parameter Configuration Changes</h3>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 38%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Notes</th>
<th>SWC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>FlsTstConfigSet</td>
<td>At least one block configuration set must be defined. See FlsTst technical reference for details.</td>
<td>FlsTst</td>
</tr>
<tr class="even">
<td>FlsTstConfigurationOfOptApiServices</td>
<td>Configuration of optional API services. All optional services are disabled by default.</td>
<td>FlsTst</td>
</tr>
<tr class="odd">
<td>FlsTstDemEventParameterRefs</td>
<td>Configuration of NTC enumeration symbol name for diagnostic tests performed in this module.</td>
<td>FlsTst</td>
</tr>
<tr class="even">
<td>FlsTstGeneral</td>
<td>General module configuration. See FlsTst technical reference for details.</td>
<td>FlsTst</td>
</tr>
<tr class="odd">
<td>FlsTst\Runtime\FlsTstBlockBgndConfigSet\App\FlsTstBlockSize</td>
<td>Number of bytes in flash test block – NOTE that this number has a max value of 8388600 in the current version of the uDiag component, and a max value of 524280 in version FDD32B_TMS570_uDiag_000.21 and previous. Numbers greater than the max value will not give an error indication but will cause the flash CRC check to not operate correctly.</td>
<td>FlsTst (contained in TMS570_uDiag component)</td>
</tr>
</tbody>
</table>
<h3 id="davinci-interrupt-configuration-changes">DaVinci Interrupt Configuration Changes</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 17%" />
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="header">
<th>ISR Name</th>
<th>VIM #</th>
<th>Priority Dependency</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>FlsTst_CrcIRQ</td>
<td>19</td>
<td></td>
<td>Must be IRQ and Category 2</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="manual-configuration-changes">Manual Configuration Changes</h3>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant</th>
<th>Notes</th>
<th>SWC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>None</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="integration">Integration</h1>
<h2 id="required-global-data-inputs">Required Global Data Inputs</h2>
<p>&lt;Mention any global variable that this component requires for other components&gt;</p>
<h2 id="optional-global-data-inputs">Optional Global Data Inputs</h2>
<p>&lt;Mention any global variable that this component requires for other components&gt;</p>
<h2 id="specific-include-path-present">Specific Include Path present</h2>
<p>&lt;Yes&gt;</p>
<h1 id="runnable-scheduling">Runnable Scheduling</h1>
<p>This section specifies the required runnable scheduling.</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 49%" />
<col style="width: 12%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="header">
<th>Runnable</th>
<th>Scheduling Requirements</th>
<th>Privileged Mode</th>
<th>Trigger</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>FlsTst_Init()</td>
<td><p>Must be executed prior to using FlsTst_MainFunction()</p>
<p>Must be executed after Dma_Init</p></td>
<td>Required</td>
<td>Init*</td>
</tr>
<tr class="even">
<td>FlsTst_MainFunction()</td>
<td>Scheduling cycle can influence the time to complete the background test interval. A new test block is started only during the invocation of the MainFunction, so an excessively large period between MainFunction calls will extend the time for a test interval to complete.</td>
<td></td>
<td>Cyclic</td>
</tr>
<tr class="odd">
<td>FlsTst_CrcIrq()</td>
<td>Scheduled via hardware IRQ. The integrator must enable the interrupt source configured in the Os before this runnable can be triggered by the hardware.</td>
<td></td>
<td>IRQ on signature failure</td>
</tr>
</tbody>
</table>
<p>* Can be called during run time to change block test configuration if required.</p>
<h1 id="memory-mapping">Memory Mapping</h1>
<h2 id="mapping">Mapping</h2>
<table>
<colgroup>
<col style="width: 61%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>FLSTST_START_SEC_VAR_CLEARED_8</td>
<td></td>
</tr>
<tr class="even">
<td>FLSTST_START_SEC_VAR_16</td>
<td></td>
</tr>
<tr class="odd">
<td>FLSTST_START_SEC_VAR_CLEARED_UNSPECIFIED</td>
<td></td>
</tr>
<tr class="even">
<td>FLSTST_START_SEC_VAR_UNSPECIFIED</td>
<td></td>
</tr>
<tr class="odd">
<td>FLSTST_START_SEC_CODE</td>
<td></td>
</tr>
<tr class="even">
<td>FLSTST_START_SEC_CONST_UNSPECIFIED</td>
<td></td>
</tr>
</tbody>
</table>
<p>* Each …START_SEC… constant is terminated by a …STOP_SEC… constant as specified in the AUTOSAR Memory Mapping requirements.</p>
<h2 id="usage">Usage</h2>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 23%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>RAM</th>
<th>ROM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Full driver</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Table 1: ARM Cortex R4 Memory Usage</p>
<h2 id="nvm-blocks">NvM Blocks</h2>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>Block Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;NvM Block Info&gt;</td>
</tr>
</tbody>
</table>
<p>Note : Size of the NVM block if configured in developer</p>
<h1 id="compiler-settings">Compiler Settings</h1>
<h2 id="preprocessor-macro"> Preprocessor MACRO</h2>
<p>&lt;Define all the preprocessor Macros needed and conditions when needed&gt;.</p>
<h2 id="optimization-settings">Optimization Settings</h2>
<h2 class="unnumbered" id="section-1"></h2>
<h1 id="revision-control-log">Revision Control Log</h1>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 68%" />
<col style="width: 11%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Rev #</strong></td>
<td><strong>Change Description</strong></td>
<td><strong>Date</strong></td>
<td><strong>Author Initials</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial version</td>
<td></td>
<td>JJW</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Updated integration process description to reference use of Integrate.bat</td>
<td>09/18/12</td>
<td>JJW</td>
</tr>
<tr class="even">
<td>3</td>
<td>Updated to latest template, other misc cleanup.</td>
<td>06-Jan-14</td>
<td>KMC</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Modified for changes to use with new DMA component.</td>
<td>07-Apr-14</td>
<td>KMC</td>
</tr>
</tbody>
</table>
