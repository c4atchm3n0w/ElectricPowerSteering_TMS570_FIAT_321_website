---
title: States_And_Modes_MDD
linkTitle: States_And_Modes_MDD
weight: 6
---

<h1 class="unnumbered" id="module---">Module -- </h1>
<h1 id="high-level-description">High-Level Description</h1>
<p>This module handles the EPS system state transitions and is used to determine the operating system state based on knowledge of customer and internal inputs. The System State is used in turn by the Scheduler to determine the task list to be executed in a particular state.</p>
<h1 id="figures">Figures</h1>
<h2 id="component-diagram">Component Diagram </h2>
<p>None, files are generated by Configurator.</p>
<h1 id="variable-data-dictionary"><br />
Variable Data Dictionary</h1>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Module Inputs</th>
<th>Module Outputs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CTerm_Cnt_lgc</td>
<td>CloseCheck_Cnt_u32</td>
</tr>
<tr class="even">
<td>ATerm_Cnt_lgc</td>
<td>TypeHData_Cnt_u08[D_TYPEHDATASIZE_CNT_U16]</td>
</tr>
<tr class="odd">
<td>FTerm_Cnt_lgc</td>
<td>PwrDnFastWriteComplete_Cnt_lgc</td>
</tr>
<tr class="even">
<td>RampStatusComplete_Cnt_lgc</td>
<td>InitiatePwrDnFastWrite_Cnt_lgc</td>
</tr>
<tr class="odd">
<td>ControlledDampStatusComplete_Cnt_lgc</td>
<td>InitiatePwrDnNormalWrite_Cnt_lgc</td>
</tr>
<tr class="even">
<td>TMFTestComplete_Cnt_lgc</td>
<td></td>
</tr>
</tbody>
</table>
<h3 class="unnumbered" id="section"></h3>
<h2 id="module-internal-variables">Module Internal Variables</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="header">
<th>Variable Name</th>
<th>DataType</th>
<th>Resolution</th>
<th><p>Legal Range</p>
<p>(min)</p></th>
<th><p>Legal Range</p>
<p>(max)</p></th>
<th>Multiplicity</th>
<th>Software Segment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>StTrnsVctr_Cnt_D_b08</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_8</td>
</tr>
<tr class="even">
<td>WarmInitMilestoneRqst_Cnt_M_u32</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_32</td>
</tr>
<tr class="odd">
<td>WarmInitMilestoneRqst#_Cnt_M_u32</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>STAMD#_START_SEC_VAR_CLEARED_32</td>
</tr>
<tr class="even">
<td>EcuResetActive_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td><u>1:1</u></td>
<td><u>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</u></td>
</tr>
<tr class="odd">
<td>FBLTransitionActive_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td><u>1:1</u></td>
<td><u>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</u></td>
</tr>
<tr class="even">
<td>FinalNvMWriteInProgress_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="odd">
<td>StopTODPerOperation_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="even">
<td>TODState_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="odd">
<td>TransitionComplete_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="even">
<td>SystemState_Cnt_M_enum</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_INIT_UNSPECIFIED</td>
</tr>
<tr class="odd">
<td>SystemState#_Cnt_M_enum</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>STAMD#_START_SEC_VAR_INIT_UNSPECIFIED</td>
</tr>
<tr class="even">
<td>SysCSystemState_Cnt_M_enum</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_INIT_UNSPECIFIED</td>
</tr>
<tr class="odd">
<td><u>Lnk_TypeH#_Start</u></td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="even">
<td><u>Lnk_TypeH#_Size</u></td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="odd">
<td>ForceToOff_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="even">
<td>StaMdsSysCFltCntr_Cnt_M_u16</td>
<td>Uint16</td>
<td>-</td>
<td>0</td>
<td>255</td>
<td>-</td>
<td>AP_STAMD_VAR</td>
</tr>
</tbody>
</table>
<p>Note: “ Refer *” - Refer to States_And_Modes_GeneratedCfg_MDD</p>
<p>Note “#” denotes application number(1 to n) which varies across projects. Check project configuration files Under UTP/ Contract folder for number of applications</p>
<h3 id="user-defined-typedef-definitiondeclaration">User defined typedef definition/declaration </h3>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 24%" />
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th>Typedef Name</th>
<th>Element Name</th>
<th>User Defined Type</th>
<th><p>Legal Range</p>
<p>(min)</p></th>
<th><p>Legal Range</p>
<p>(max)</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>TypeHInfoType_Str</td>
<td>Start</td>
<td>Const uint8 pointer</td>
<td>0</td>
<td>Full</td>
</tr>
<tr class="odd">
<td></td>
<td>Size</td>
<td>Uint32</td>
<td>0</td>
<td>Full</td>
</tr>
<tr class="even">
<td>Rte_ModeType_StaMd_Mode</td>
<td><p>RTE_MODE_StaMd_Mode_DISABLE</p>
<p>RTE_MODE_StaMd_Mode_OFF</p>
<p>RTE_MODE_StaMd_Mode_OPERATE</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT</p>
<p>RTE_TRANSITION_StaMd_Mode</p></td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="calibration-constants">Calibration Constants</h2>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>k_StaMdsSysCDiag_Cnt_str</td>
</tr>
</tbody>
</table>
<h2 class="unnumbered" id="section-1"></h2>
<h2 id="programfixed-constants">Program(fixed) Constants</h2>
<h3 id="embedded-constants">Embedded Constants</h3>
<h4 id="local">Local</h4>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
<th>Resolution</th>
<th>Units</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>D_STATELKPVCTRS_CNT_U16</td>
<td>1</td>
<td>Counts</td>
<td>16</td>
</tr>
<tr class="even">
<td>D_STATELKPSTATES_CNT_U16</td>
<td>1</td>
<td>Counts</td>
<td>4</td>
</tr>
<tr class="odd">
<td>D_TVBITF_CNT_U16</td>
<td>1</td>
<td>Counts</td>
<td>0x01</td>
</tr>
<tr class="even">
<td>D_TVBITC_CNT_U16</td>
<td>1</td>
<td>Counts</td>
<td>0x02</td>
</tr>
<tr class="odd">
<td>D_TVBITM_CNT_U16</td>
<td>1</td>
<td>Counts</td>
<td>0x04</td>
</tr>
<tr class="even">
<td>D_TVBITA_CNT_U16</td>
<td>1</td>
<td>Counts</td>
<td>0x08</td>
</tr>
<tr class="odd">
<td>D_CLOSECHECKVALUE_CNT_U32</td>
<td>1</td>
<td>Counts</td>
<td>0 x00FF00FF</td>
</tr>
<tr class="even">
<td>D_CLOSECHECKGARBAGE_CNT_U32</td>
<td>1</td>
<td>Counts</td>
<td>0x5555AAAA</td>
</tr>
</tbody>
</table>
<h4 id="global">Global</h4>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>*D_STAMD_DIAGMGR_CLIENTSERVER_CALL</td>
</tr>
<tr class="even">
<td></td>
</tr>
<tr class="odd">
<td>*D_TYPEHDATASIZE_CNT_U16</td>
</tr>
<tr class="even">
<td><mark>*D_DIAGMGR_SHUTDOWN_TASK</mark></td>
</tr>
<tr class="odd">
<td>*BC_STAMD_TODSTEADYSTATE</td>
</tr>
<tr class="even">
<td>*BC_STAMD_TOD2MSTOGGLE</td>
</tr>
<tr class="odd">
<td>*BC_STAMD_SYSCHKINCOREAPP</td>
</tr>
<tr class="even">
<td></td>
</tr>
</tbody>
</table>
<p>Note: * Values of these Global data constants tend to change based on project configuration. Check Project configuration files under UTP/Contract folder</p>
<h3 id="module-specific-lookup-tables-constants">Module specific Lookup Tables Constants</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 32%" />
<col style="width: 11%" />
<col style="width: 40%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
<th>Resolution</th>
<th>Value</th>
<th>Software Segment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Rte_ModeType_StaMd_Mode t_StateLkpTbl_Cnt_u8 [D_STATELKPSTATES_CNT_U16] [D_STATELKPVCTRS_CNT_U16]</td>
<td>N/A</td>
<td><p>{ {RTE_MODE_StaMd_Mode_OFF,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_ DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_ DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_ WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_ DISABLE },</p>
</blockquote>
<p>{RTE_MODE_StaMd_Mode_OFF,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT},</p>
</blockquote>
<p>{RTE_MODE_StaMd_Mode_OPERATE,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE},</p>
</blockquote>
<p>{RTE_MODE_StaMd_Mode_DISABLE,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE}</p>
</blockquote>
<p>}</p></td>
<td>CONST_UNSPECIFIED</td>
</tr>
<tr class="even">
<td>T_CurrentSystemState_Ptr_enum[ *SIZE]</td>
<td>N/A</td>
<td>Refer *</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="odd">
<td>T_TypeHInfo_Cnt_Str[ *SIZE]</td>
<td>TypeHInfoType_Str</td>
<td>Refer *</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="even">
<td>T_WarmInitMilestoneRqst_Ptr_enum[*SIZE]</td>
<td>N/A</td>
<td>Refer *</td>
<td>AP_STAMD_CONST</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The entries in the state lookup table rely on the fact that generated values for the system state are maintained. If the generated values are changed then the entries have to re arranged.</p>
<p>Note: * SIZE for above tables varies across projects.Check Project configuration files for size and elements of tables.<strong>.</strong></p>
<p>Note: Refer * <strong>:</strong> Refer to States_And_Modes_GeneratedCfg_MDD</p>
<h1 id="functionsmacros-used-by-the-sub-modules">Functions/Macros used by the Sub-Modules </h1>
<h2 id="library-functions-macros">Library Functions / Macros </h2>
<p>The library functions / Macros that are called by the various sub modules are identified below,</p>
<ol type="1">
<li></li>
</ol>
<h2 id="data-hiding-functions">Data Hiding Functions</h2>
<p>None</p>
<h2 id="global-functionsmacros-defined-by-this-module">Global Functions/Macros Defined by this Module</h2>
<h3 id="process-warminit-milestone-complete">Process WarmInit Milestone Complete</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>MilestoneRqst_WarmInitMilestoneComplete</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>user</td>
<td>StaMd_Users</td>
<td>0</td>
<td>31</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description">Description</h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image1.emf" /></p>
<h3 id="process-warminit-milestone-not-complete">Process WarmInit Milestone Not Complete</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>MilestoneRqst_WarmInitMilestoneNotComplete</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>user</td>
<td>StaMd_Users</td>
<td>0</td>
<td>31</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-1">Description</h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image2.emf" /></p>
<h3 id="states-and-modes-ecu-reset">States and Modes ECU Reset</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>StaMd_SCom_EcuReset</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-2">Description</h4>
<p>EcuResetActive_Cnt_M_lgc = TRUE</p>
<h3 id="states-and-modes-prepare-for-fbl-transition-request">States and Modes prepare for FBL transition request</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>StaMd_SCom_FBLTransitionReq</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-3">Description</h4>
<p>FBLTransitionActive_Cnt_M_lgc = TRUE</p>
<h3 id="states-and-modes-transition-function">States and Modes Transition Function</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>StaMd_Trns1</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-4">Description</h4>
<p><em>Note: D_STAMD_DIAGMGR_CLIENTSERVER_CALL is generated as STD_ON or STD_OFF based on the configuration of the program.</em></p>
<h3 id="states-and-modes-initialization">States and Modes Initialization</h3>
<h4 id="description-stamd_init0">Description – StaMd_Init0</h4>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>StaMd_Init0</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-5">Description</h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image4.emf" /></p>
<h3 class="unnumbered" id="section-2"></h3>
<h4 id="description-stamd_init1">Description– StaMd_Init1</h4>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>StaMd_Init1</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-6">Description</h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image5.emf" /></p>
<h3 id="states-and-modes-periodic">States and Modes Periodic</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 44%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>StaMd_Per1</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<h4 id="description-7">Description<img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image6.emf" /></h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image7.emf" /></p>
<h3 id="system-state-check">System State Check</h3>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 39%" />
<col style="width: 17%" />
<col style="width: 13%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>SystemStateCheck</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>FTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>CTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>ATermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>RampStatusCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>CtrldDmpStsCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>TMFTestComplete_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>SysCFltCntr_Ptr_T_u16</td>
<td>uint16 *</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>FaultStatus_Cnt_T_enum</td>
<td>NxtrDiagMgrStatus</td>
<td colspan="2"><p>NTC_STATUS_PASSED</p>
<p>NTC_STATUS_FAILED</p>
<p>NTC_STATUS_PREPASSED</p>
<p>NTC_STATUS_PREFAILED</p></td>
</tr>
</tbody>
</table>
<h4 id="description-8">Description</h4>
<h4 class="unnumbered" id="section-3"><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image8.emf" /></h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image9.emf" /></p>
<h2 id="local-functionsmacros-used-by-this-mdd-only">Local Functions/Macros Used by this MDD only</h2>
<h3 id="macro-function-1">Macro Function #1</h3>
<p>SetBits_m(var, mask) : var = var | mask</p>
<h3 id="macro-function-2">Macro Function #2</h3>
<p>ClrBits_m(var, mask) : var = var &amp; mask</p>
<h3 id="local-function-1">Local Function #1</h3>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 36%" />
<col style="width: 23%" />
<col style="width: 14%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>BldTranVctr</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>SysState_Cnt_T_Enum</td>
<td>Rte_ModeType_StaMd_Mode</td>
<td colspan="2"><p>RTE_MODE_StaMd_Mode_DISABLE</p>
<p>RTE_MODE_StaMd_Mode_OFF</p>
<p>RTE_MODE_StaMd_Mode_OPERATE</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT</p>
<p>RTE_TRANSITION_StaMd_Mode</p></td>
</tr>
<tr class="odd">
<td></td>
<td>FTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>CTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>ATermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>RampStatusCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>CtrldDmpStsCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>TransVec_Cnt_T_u8</td>
<td>uint8</td>
<td>FULL</td>
<td>FULL</td>
</tr>
</tbody>
</table>
<h4 id="design-rationale">Design Rationale</h4>
<p>NvM_GetErrorStatus has been used instead of an RTE_Call_GetErrorStatus in order to specify the blockID and also to prevent the integrator map it to a wrong port interface.</p>
<h4 id="description-9">Description<img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image10.emf" /></h4>
<h3 id="local-function-2">Local Function #2</h3>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 36%" />
<col style="width: 23%" />
<col style="width: 14%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>ReadTypeH</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="design-rationale-1">Design Rationale</h4>
<p>ReadTypeH functions call has been added to this module although the FDD doesn’t call them out as this module performs the system NvH memory read after system power up.</p>
<h4 id="description-10">Description</h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image11.emf" /></p>
<h3 id="local-function-3">Local Function #3</h3>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 36%" />
<col style="width: 23%" />
<col style="width: 14%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>WriteTypeH</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>none</td>
<td></td>
<td colspan="2"></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>none</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="design-rationale-2">Design Rationale</h4>
<p>WriteTypeH functions call has been added to this module although the FDD doesn’t call them out as this module performs the system NvH memory write before system shutdown.</p>
<h4 id="description-11">Description</h4>
<p><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image12.emf" /></p>
<h3 id="local-function-4">Local Function #4</h3>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 36%" />
<col style="width: 23%" />
<col style="width: 14%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>CheckWarmInitComplete</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>None</td>
<td></td>
<td colspan="2"></td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>WarmInitMilestoneComp_Cnt_T_lgc</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
<h4 id="description-12">Description</h4>
<h1 id="software-module-implementation"><img src="ElectricPowerSteering_TMS570_FIAT_321_website/static/media/image13.emf" /><br />
Software Module Implementation</h1>
<h2 id="initial-data-values">Initial Data Values</h2>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Data</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CTerm_Cnt_lgc</td>
<td>D_FALSE_CNT_LGC</td>
</tr>
<tr class="even">
<td>ATerm_Cnt_lgc</td>
<td>D_TRUE_CNT_LGC</td>
</tr>
<tr class="odd">
<td>FTerm_Cnt_lgc</td>
<td>D_FALSE_CNT_LGC</td>
</tr>
</tbody>
</table>
<h2 class="unnumbered" id="section-4"></h2>
<h2 id="initialization-functions">Initialization Functions</h2>
<h3 id="init">Init: </h3>
<h2 id="periodic-functions">Periodic Functions</h2>
<h2 id="fault-recovery-functions">Fault Recovery Functions</h2>
<p>None</p>
<h2 id="shutdown-functions">Shutdown Functions</h2>
<p>None</p>
<h2 id="interrupt-functions">Interrupt Functions</h2>
<p>None</p>
<h2 id="serial-communication-functions">Serial Communication Functions</h2>
<h2 id="execution-requirements">Execution Requirements</h2>
<h2 id="execution-sequence-of-the-module">Execution Sequence of the Module</h2>
<h2 class="unnumbered" id="init0-is-called-outside-of-the-rte-from-ecustartup-and-needs-to-run-prior-to-any-function-that-requires-the-use-of-typeh-data.execution-rates-for-sub-modules-called-by-the-scheduler">_Init0 is called outside of the Rte, from ECUStartup and needs to RUN prior to any function that requires the use of TypeH data.Execution Rates for sub-modules called by the Scheduler</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 22%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="header">
<th>Function Name</th>
<th>Calling Frequency</th>
<th>System State(s) in which the function is called</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>StaMd_Init0</td>
<td>Once at init</td>
<td>Cold Init</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="execution-requirements-for-serial-communication-functions">Execution Requirements for Serial Communication Functions </h2>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="header">
<th>Function Name</th>
<th>Sub-Module called by (Serial Comm Function Name)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 class="unnumbered" id="section-5"></h1>
<h1 id="memory-map-definition-requirements"><br />
Memory Map Definition Requirements</h1>
<h2 id="sub-modules-functions">Sub Modules (Functions)</h2>
<p>This table identifies the software segments for functions identified in this module.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="header">
<th>Name of Sub Module</th>
<th>Software Segment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 class="unnumbered" id="section-6"></h2>
<h2 id="global-and-local-functions">Global and Local Functions</h2>
<p>This table identifies the software segments for global and local functions identified in this module.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="header">
<th>Name of Sub Module</th>
<th>Software Segment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BldTranVctr</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="even">
<td>MilestoneRqst_WarmInitMilestoneComplete</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="odd">
<td>MilestoneRqst_WarmInitMilestoneNotComplete</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="even">
<td>ReadTypeH</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="odd">
<td>WriteTypeH</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="even">
<td>CheckWarmInitComplete</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="odd">
<td>SystemStateCheck</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="even">
<td>StaMd_SCom_EcuReset</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="odd">
<td>StaMd_Trns1</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="even">
<td>StaMd_Per1</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
<tr class="odd">
<td>StaMd_Init0</td>
<td>AP_STAMD_CODE</td>
</tr>
<tr class="even">
<td>StaMd_Init1</td>
<td>RTE_AP_STAMD_APPL_CODE</td>
</tr>
</tbody>
</table>
<h1 class="unnumbered" id="section-7"></h1>
<h1 id="known-issues-limitations-with-design"><br />
Known Issues / Limitations With Design</h1>
<ol type="1">
<li><p>.FDD does not currently support “Transition” state required for RTE runnables triggered on state transitions. Current design simply does nothing if in “Transition” state.</p></li>
<li><p>FDD requirement state that an off state milestone is considered as complete when all the NVM writes are complete. This milestone is currently performed internally by querying the NVM write status in this module.</p></li>
<li><p>FDD calls out for the F Term input to this module as a Boolean type diagnostic flag that is used to indicate a fault requesting removal of assist and currently there is no requirement for a component to send out this flag(according to FDD data dictionary version 86 dated 16<sup>th</sup> Mar 2012). However, it has been implemented in Diagnostic manager version FDD37B_001.6</p></li>
</ol>
<h1 id="revision-control-log"><br />
Revision Control Log</h1>
<table style="width:100%;">
<colgroup>
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 62%" />
<col style="width: 12%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Item #</strong></td>
<td><strong>Rev #</strong></td>
<td><strong>Change Description</strong></td>
<td><strong>Date</strong></td>
<td><strong>Author Initials</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>Initial EA3.0 version.</td>
<td>11-Apr-11</td>
<td>LWW</td>
</tr>
<tr class="odd">
<td>2</td>
<td>2</td>
<td>Updated range errors found during UTP</td>
<td>13-Apr-11</td>
<td>LWW</td>
</tr>
<tr class="even">
<td>3</td>
<td>3</td>
<td>Added RampStatusCmp_Cnt_T_lgc</td>
<td>05-Jan-12</td>
<td>M. Story</td>
</tr>
<tr class="odd">
<td>4</td>
<td>4</td>
<td>Updated for issues found at Unit Test</td>
<td>30-Jan-12</td>
<td>M. Story</td>
</tr>
<tr class="even">
<td>5</td>
<td>5</td>
<td>Updates to meet FDD 10C v006</td>
<td>20-Mar-12</td>
<td>VK</td>
</tr>
<tr class="odd">
<td>6</td>
<td>6</td>
<td>Updates to fix anomaly 3143</td>
<td>09-Apr-12</td>
<td>VK</td>
</tr>
<tr class="even">
<td>7</td>
<td>7</td>
<td>Added SCom function and logic to perform ECU Reset</td>
<td>26-Apr-12</td>
<td>LWW</td>
</tr>
<tr class="odd">
<td>8</td>
<td>8</td>
<td>Updated to fix Anom 3158 for LookUpTable</td>
<td>7-May-12</td>
<td>NRAR</td>
</tr>
<tr class="even">
<td>9</td>
<td>9</td>
<td>Added EEPROM Failed to Close check</td>
<td>27-Jul-12</td>
<td>OT</td>
</tr>
<tr class="odd">
<td>10</td>
<td>10</td>
<td>Changed write complete check on Close Check diagnostic</td>
<td>03-Aug-12</td>
<td>LWW</td>
</tr>
<tr class="even">
<td>11</td>
<td>11</td>
<td>Added checkpoints, removed call to end operation cycle, added a MemMap section for const table</td>
<td>21-Sep-12</td>
<td>LWW</td>
</tr>
<tr class="odd">
<td>12</td>
<td>12</td>
<td>Updated to the latest src(v16)</td>
<td>15-Feb-13</td>
<td>VK</td>
</tr>
<tr class="even">
<td>13</td>
<td>13</td>
<td>Moved state transition complete logic ahead of the switch case statement to always be performed</td>
<td>05-Jun-13</td>
<td>KJS</td>
</tr>
<tr class="odd">
<td>14</td>
<td>14</td>
<td>Applied final changes to A5108 correction in Per1</td>
<td>05-Jun-13</td>
<td>KJS</td>
</tr>
<tr class="even">
<td>15</td>
<td>15</td>
<td>Changes made to MDD to be more generic for all projects</td>
<td>18-June-13</td>
<td>NRAR</td>
</tr>
<tr class="odd">
<td>16</td>
<td>16</td>
<td>MDD version updated to match synergy version</td>
<td>27-June-13</td>
<td>NRAR</td>
</tr>
<tr class="even">
<td>17</td>
<td>17</td>
<td>Fixed anomaly 5205, added logic to force TOD low in toggle mode during powerdown.</td>
<td>27-June-13</td>
<td>LWW</td>
</tr>
<tr class="odd">
<td>18</td>
<td>18</td>
<td>Add configurable macro NVMGETERRORSTATUS() CR#11065</td>
<td>11-Dec-13</td>
<td>BDO</td>
</tr>
<tr class="even">
<td>19</td>
<td>19</td>
<td>Added StaMd_Init0 as a trusted call to only handle ReadTypeH memory across applications</td>
<td>12-Dec-13</td>
<td>BDO</td>
</tr>
<tr class="odd">
<td>20</td>
<td>20</td>
<td>Change designation of StaMd_Init0 from RTE_AP_STAMD_APPL_CODE to AP_STAMD_CODE.</td>
<td>20-Dec-13</td>
<td>BDO</td>
</tr>
<tr class="even">
<td>21</td>
<td>21</td>
<td>Update to FDD ES10B version 13 to address anomaly 5388 - 11347</td>
<td>07-Feb-14</td>
<td>BDO</td>
</tr>
<tr class="odd">
<td>22</td>
<td>22</td>
<td>Anomaly 7307 - software updates for consistency with FDD ES10B version 13 12602</td>
<td>28-Oct-14</td>
<td>BDO</td>
</tr>
<tr class="even">
<td>23</td>
<td>23</td>
<td>Unit Testing finding fixes</td>
<td>19-nov-14</td>
<td>KPITPM</td>
</tr>
</tbody>
</table>
