---
title: TechnicalReference_Asr_CanTps
linkTitle: TechnicalReference_Asr_CanTps
weight: 23
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/><b>MICROSAR CAN Transport Layer&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>Version 1.18.01&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Peter Herrmann&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-2_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Document Information&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Peter Herrmann&#160;<br/>
2006-12-07&#160;<br/>
1.0&#160;<br/>
Initial version&#160;<br/>
Peter Herrmann&#160;<br/>
2007-06-19&#160;<br/>
1.3&#160;<br/>
Update to&#160;AUTOSAR Release 2.1.0&#160;<br/>
Peter Herrmann&#160;<br/>
2008-01-18&#160;<br/>
1.4&#160;<br/>
Added database &#160;attributes&#160;<br/>
Peter Herrmann&#160;<br/>
2008-01-22&#160;<br/>
1.5&#160;<br/>
Added pre-compile macros for&#160;Tx&#160;<br/>Confirmation and Rx Indication&#160;callbacks&#160;<br/>
Peter Herrmann&#160;<br/>
2008-04-07&#160;<br/>
1.6&#160;<br/>
Adaptation to MICROSAR document&#160;<br/>template.&#160;<br/>
Peter Herrmann&#160;<br/>
2008-07-31&#160;<br/>
1.7&#160;<br/>
Added description for optimizations:&#160;<br/>
- dynamic&#160;channel assignment&#160;<br/>(DYN_CHANNEL_ASSIGNMENT),&#160;<br/>
- single connection&#160;<br/>(SINGLE_CONN_OPTIMIZED)&#160;<br/>
- single connection pre-compile&#160;<br/>(SINGLE_CONN_NOPB_OPTIMIZED)&#160;<br/>
- addressing types&#160;<br/>(STANDARD_ADDRESSING, &#160;<br/>EXTENDED_ADDRESSING)&#160;<br/>
- partial buffer provision&#160;<br/>(RX/TX_FULL_BUFFER_PROVISION)&#160;<br/>
Peter Herrmann&#160;<br/>
2008-09-16&#160;<br/>
1.8&#160;<br/>
Burst transmission&#160;<br/>
Peter Herrmann&#160;<br/>
2008-10-30&#160;<br/>
1.9&#160;<br/>
Version number updated&#160;<br/>
Peter Herrmann&#160;<br/>
2008-11-26&#160;<br/>
1.10&#160;<br/>
Single connection optimization&#160;<br/>
Peter Herrmann&#160;<br/>
2009-02-20&#160;<br/>
1.11&#160;<br/>
MainFunction Rx/Tx split.&#160;Additional&#160;user&#160;<br/>NSDU-ID (remapping).&#160;Additional&#160;<br/>SetSTmin, SetBS&#160;API.&#160;<br/>
Peter Herrmann&#160;<br/>
2009-06-10&#160;<br/>
1.11.82&#160;<br/>
Conversion to MICROSAR&#160;Technical&#160;<br/>Reference.&#160;<br/>Added Multiple Configuration, Cancel&#160;<br/>Transmit Request.&#160;<br/>
Peter Herrmann&#160;<br/>
2009-07-01&#160;<br/>
1.12.00&#160;<br/>
Mixed-11 addressing added.&#160;<br/>AUTOSAR&#160;Release 4 PduR&#160;API callout&#160;<br/>functions added.&#160;<br/>
Peter Herrmann&#160;<br/>
2009-29-09&#160;<br/>
1.13.00&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#67">Corrected chapter&#160;7.2.4&#160;(T</a>iming limitations&#160;<br/>for N_Br, N_Cs).&#160;<br/>
Peter Herrmann&#160;<br/>
2009-11-04&#160;<br/>
1.14.00&#160;<br/>
Added non&#160;AUTOSAR&#160;Spec. conform&#160;<br/>special feature to avoid all Pre-Pass&#160;<br/>indications to the DEM (see&#160;<a href="TechnicalReference_Asr_CanTps.html#64">7.1.9).&#160;<br/></a>Added special feature to&#160;accelerate the FF&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#65">routing (see&#160;7.1.10).&#160;</a><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
2&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-3_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
Peter Herrmann&#160;<br/>
2010-02-18&#160;<br/>
1.15.00&#160;<br/>
Additional&#160;AUTOSAR 4.x&#160;API: &#160;<br/>“CanTp_ChangeParameterRequest” and&#160;<br/>belonging callout function&#160;<br/>“PduR_CanTpChangeParameterConfirmati<br/>on”.&#160;<br/>Additional Vector specified&#160;API &#160;<br/>“CanTp_ReadParameterRequest”.&#160;<br/>Added Callout description for&#160;<br/>“EcuM_GeneratorCompatibilityError”.&#160;<br/>Added description for the mapping of&#160;<br/>critical sections.&#160;<br/>Deleted obsolete&#160;<br/>CanTp_DlcErrorNotification callout function&#160;<br/>from CanIf&#160;<br/>
Peter Herrmann&#160;<br/>
2010-08-13&#160;<br/>
1.16.00&#160;<br/>
Additional&#160;AUTOSAR 4.x&#160;API: &#160;<br/>“CanTp_CancelTransmitRequest” and &#160;<br/>“CanTp_CancelReceiveRequest”.&#160;<br/>Added description of postbuild parameters&#160;<br/>CanTpMaxNum(Rx/Tx)Sdus,&#160;<br/>CanTpMaxNum(Rx/Tx)Channels_PbLimit.&#160;<br/>
Peter Herrmann&#160;<br/>
2010-11-03&#160;<br/>
1.17.00&#160;<br/>
Additional description&#160;for callout functions&#160;<br/>with possibly disabled interrupts.&#160;<br/>Deleted API&#160;function&#160;<br/>PduR_CanTpGetAvailableTxBuffer which&#160;<br/>is obsolete&#160;with&#160;AR 4.0&#160;<br/>
Peter Herrmann&#160;<br/>
2011-02-25&#160;<br/>
1.18.00&#160;<br/>
Added further (AR4 and customer specific) &#160;<br/>extensions&#160;<br/>
Peter Herrmann&#160;<br/>
2011-03-30&#160;<br/>
1.18.01&#160;<br/>
After logging and rework&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
3&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-4_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-4_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Reference Documents&#160;</b><br/>
<b>No. Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1] &#160;AUTOSAR_SWS_CANTransportLayer.pdf&#160;<br/>
3.0.0&#160;<br/>
[2] &#160;AUTOSAR_SWS_CANInterface.pdf&#160;<br/>
4.0.0&#160;<br/>
[3] &#160;AUTOSAR_SWS_PDURouter.pdf&#160;<br/>
3.0.0&#160;<br/>
[4]&#160;&#160;&#160;&#160;/ISO/TF2/: &#160;ISO FDIS 15765-2; Road vehicles — Diagnostics&#160;on CAN&#160;—&#160;&#160;2009-09-06&#160;<br/>
Part 2: Network layer services &#160;<br/>
[5] &#160;AUTOSAR_SWS_DiagnosticEventManager.pdf&#160;<br/>
4.0.0&#160;<br/>
[6] &#160;AUTOSAR_SWS_DevelopmentErrorTracer.pdf&#160;<br/>
3.0.0&#160;<br/>
[7] &#160;AUTOSAR_SRS_BSWGeneral.pdf&#160;<br/>
3.0.0&#160;<br/>
[8] &#160;AUTOSAR_TR_BSWModuleList.pdf&#160;<br/>
1.4.0&#160;<br/>
[9]&#160;&#160;&#160;Application&#160;Note&#160;AN-ISC-8-1118&#160;– MICROSAR BSW&#160;Compatibility&#160;&#160;&#160;<br/>
Check&#160;<br/>
[10] &#160;&#160;AUTOSAR_SWS_CAN_TP.pdf&#160;<br/>
2.3.0&#160;<br/>
&#160;<br/>
<b>Please note&#160;</b><br/>
&#160;&#160;We have configured the&#160;programs in accordance&#160;with your specifications in the&#160;<br/>
questionnaire. Whereas&#160;the programs do support&#160;other configurations than the one&#160;<br/>specified&#160;in&#160;your questionnaire, Vector´s release&#160;of the programs delivered to your&#160;<br/>company is&#160;expressly restricted to the&#160;configuration you have&#160;specified in&#160;the&#160;<br/>questionnaire.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
4&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-5_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_Asr_CanTps.html#9"><b>1</b>&#160;&#160;<b>Component History..........................................................................................................&#160;9</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#9"><b>2</b>&#160;&#160;<b>Introduction&#160;...................................................................................................................</b></a><b>...&#160;<a href="TechnicalReference_Asr_CanTps.html#9">9</a></b>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#10">2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#10">Architecture&#160;Overview.....................................................................................&#160;10</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#11">2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#11">CAN&#160;Transport Layer interactions....................................................................11</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#12">2.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#12">Changes between&#160;AUTOSAR 3.x and&#160;AUTOSAR 4.......................................&#160;12</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#12">2.2.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#12">PduR API&#160;changes..........................................................................................&#160;12</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#13">2.2.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#13">CanIf API&#160;changes&#160;..........................................................................................&#160;13</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#14"><b>3</b>&#160;&#160;<b>Functional Description&#160;..................................................................................................&#160;14</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#14">3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#14">Features..........................................................................................................&#160;14</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#14">3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#14">Initialization&#160;.....................................................................................................&#160;14</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#15">3.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#15">States..............................................................................................................&#160;15</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#16">3.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#16">Main Functions&#160;...............................................................................................&#160;16</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#16">3.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#16">The CanTp_MainFunction&#160;..............................................................................&#160;16</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#16">3.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#16">Buffer handling and data consistency&#160;.............................................................&#160;16</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#17">3.4.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#17">Critical sections...............................................................................................&#160;17</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#18">3.5&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#18">Error Handling.................................................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#18">3.5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#18">Development Error Reporting&#160;.........................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#19">3.5.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#19">Production Code&#160;Error&#160;Reporting&#160;...................................................................&#160;19</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#20"><b>4</b>&#160;&#160;<b>Integration....................................................................................................................</b></a><b>...&#160;<a href="TechnicalReference_Asr_CanTps.html#20">20</a></b>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#20">4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#20">Scope of Delivery............................................................................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#20">4.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#20">Static Files&#160;......................................................................................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#20">4.1.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#20">Hook functions&#160;................................................................................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#21">4.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#21">21&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#21">4.1.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#21">Dynamic Files&#160;.................................................................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#21">4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#21">Include Structure.............................................................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#22">4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#22">Compiler&#160;Abstraction and Memory&#160;Mapping...................................................&#160;22</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#23"><b>5</b>&#160;&#160;<b>API Description&#160;..............................................................................................................&#160;23</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#23">5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#23">Services provided by CANTP&#160;.........................................................................&#160;23</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#23">5.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#23">CanTp_Init: &#160;(until&#160;AR 3)&#160;.................................................................................&#160;23</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#24">5.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#24">CanTp_Init: with ConfigPointer &#160;(Vector extension to&#160;AR 3)&#160;...........................&#160;24</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#25">5.1.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#25">CanTp_Init: &#160;(since&#160;AR 4)................................................................................&#160;25</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#26">5.1.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#26">CanTp_GetVersionInfo&#160;...................................................................................&#160;26</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#27">5.1.5&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#27">CanTp_Shutdown&#160;...........................................................................................&#160;27</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#28">5.1.6&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#28">CanTp_Transmit&#160;.............................................................................................&#160;28</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
5&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-6_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#30">5.1.7&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#30">CanTp_CancelTransmitRequest.....................................................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#31">5.1.8&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#31">CanTp_CancelReceiveRequest&#160;.....................................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#32">5.1.9&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#32">CanTp_MainFunction&#160;.....................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#33">5.1.10&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#33">CanTp_MainFunctionRx&#160;.................................................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#33">5.1.11&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#33">CanTp_MainFunctionTx&#160;.................................................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#34">5.1.12&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#34">CanTp_SetSTmin&#160;...........................................................................................&#160;34</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#35">5.1.13&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#35">CanTp_SetBS.................................................................................................&#160;35</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#36">5.1.14&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#36">CanTp_ChangeParameterRequest&#160;................................................................&#160;36</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#37">5.1.15&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#37">CanTp_ReadParameterRequest&#160;....................................................................&#160;37</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#38">5.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#38">Services used by CANTP&#160;...............................................................................&#160;38</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#39">5.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#39">Callback Functions&#160;.........................................................................................&#160;39</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#39">5.3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#39">CanTp_RxIndication&#160;.......................................................................................&#160;39</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#40">5.3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#40">CanTp_TxConfirmation...................................................................................&#160;40</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#41">5.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#41">Configurable Interfaces...................................................................................&#160;41</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#41">5.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#41">Notifications&#160;....................................................................................................&#160;41</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#42">5.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#42">Callout Functions&#160;............................................................................................&#160;42</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#42">5.4.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#42">PduR_CanTpRxIndication&#160;..............................................................................&#160;42</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#43">5.4.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#43">PduR_CanTpTxConfirmation..........................................................................&#160;43</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#45">5.4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#45">Callout Functions (until&#160;AUTOSAR&#160;Release 3)...............................................&#160;45</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#45">5.4.3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#45">PduR_CanTpProvideRxBuffer &#160; &#160; &#160; (until&#160;AUTOSAR Release 3).....................&#160;45</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#46">5.4.3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#46">PduR_CanTpProvideTxBuffer &#160; &#160; &#160; (until&#160;AUTOSAR Release 3)&#160;.....................&#160;46</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#48">5.4.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#48">Callout Functions (since&#160;AUTOSAR&#160;Release 4)&#160;.............................................&#160;48</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#48">5.4.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#48">PduR_CanTpStartOfReception (since&#160;AUTOSAR Release 4)........................&#160;48</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#49">5.4.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#49">PduR_CanTpCopyRxData (since&#160;AUTOSAR&#160;Release 4)...............................&#160;49</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#50">5.4.4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#50">PduR_CanTpCopyTxData (since&#160;AUTOSAR&#160;Release 4)&#160;...............................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#51">5.4.4.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#51">PduR_CanTpChangeParameterConfirmation&#160;................................................&#160;51</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#52">5.4.4.5&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#52">EcuM_GeneratorCompatibilityError&#160;................................................................&#160;52</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#53"><b>6</b>&#160;&#160;<b>Configuration..................................................................................................................&#160;53</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#53">6.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#53">Configuration in Data Base.............................................................................&#160;53</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#54">6.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#54">Configuration with GENy&#160;................................................................................&#160;54</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#55">6.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#55">Component Configuration...............................................................................&#160;55</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#55">6.2.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#55">General Parameters&#160;.......................................................................................&#160;55</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#59">6.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#59">Channel Configuration&#160;....................................................................................&#160;59</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#59">6.2.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#59">Rx Parameters................................................................................................&#160;59</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#60">6.2.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#60">Tx Parameters&#160;................................................................................................&#160;60</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#61">6.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#61">Multiple Configuration&#160;.....................................................................................&#160;61</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#62">6.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#62">Timing Constraints&#160;..........................................................................................&#160;62</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63"><b>7</b>&#160;&#160;<b>AUTOSAR Standard&#160;Compliance..................................................................................&#160;63</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63">7.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#63">Extensions&#160;......................................................................................................&#160;63</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
6&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-7_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63">7.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#63">Dynamically supported connection channels..................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63">7.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#63">AR4 Buffer handling........................................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63">7.1.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#63">Burst transmission&#160;..........................................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63">7.1.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#63">Full Duplex......................................................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#63">7.1.5&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#63">CANTP&#160;initialization&#160;........................................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#64">7.1.5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#64">CANTP&#160;initialization&#160;since&#160;AUTOSAR 4..........................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#64">7.1.6&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#64">Padding pattern&#160;..............................................................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#64">7.1.7&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#64">Splitted CanTp_MainFunction.........................................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#64">7.1.8&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#64">Dynamic Flow Control content........................................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#64">7.1.9&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#64">Suppress PRE_PASSED DEM events&#160;...........................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#65">7.1.10&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#65">Accelerate the routing of&#160;multi frames&#160;............................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#65">7.1.11&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#65">Optimized ROM resource consumption..........................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#65">7.1.12&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#65">Detection of&#160;competing diagnostic tester access............................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#65">7.1.13&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#65">Asynchronous transmit&#160;...................................................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#66">7.1.14&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#66">Reception of Flow Control and Consecutive frames.......................................&#160;66</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#66">7.1.14.1&#160;&#160;Ignore FC frames with a reserved STmin content&#160;..........................................&#160;66</a>&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#66">7.1.14.2&#160;&#160;Ignore FC frames with a Flow Status not equal to&#160;FC.CTS or&#160;FC.WAIT&#160;........&#160;66</a>&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#66">7.1.14.3&#160;&#160;Ignore Consecutive Frames (CF) with a wrong sequence Number (SN)........&#160;66</a>&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#67">7.1.15&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#67">DEM to&#160;DET&#160;reporting is configurable&#160;............................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#67">7.1.15.1&#160;&#160;DEM event&#160;CANTP_E_(RX_/TX_)COM(M)....................................................&#160;67</a>&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#67">7.1.15.2&#160;&#160;DEM event&#160;CANTP_E_OPER_NOT_SUPPORTED&#160;......................................&#160;67</a>&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#67">7.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#67">Limitations.......................................................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#67">7.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#67">Memory optimization.......................................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#67">7.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#67">Variable Block Sizes&#160;.......................................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#67">7.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#67">Usage of mixed&#160;Addressing&#160;............................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#67">7.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#67">Runtime optimization for&#160;Timing Calculation...................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#68">7.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#68">Support parallel connections...........................................................................&#160;68</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#69"><b>8</b>&#160;&#160;<b>Glossary&#160;and&#160;Abbreviations..........................................................................................&#160;69</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#69">8.1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#69">Glossary..........................................................................................................&#160;69</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#71">8.2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#71">Abbreviations&#160;..................................................................................................&#160;71</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#73"><b>9</b>&#160;&#160;<b>Contact........................................................................................................................</b></a><b>....&#160;<a href="TechnicalReference_Asr_CanTps.html#73">73</a></b>&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
7&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-8_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Illustrations&#160;</b><br/>
<a href="TechnicalReference_Asr_CanTps.html#10">Figure 2-1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#10">AUTOSAR architecture&#160;..............................................................................&#160;10</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#11">Figure 2-2&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#11">CAN&#160;Transport Layer interactions&#160;...............................................................11</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#12">Figure 2-3&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#12">Interfaces to&#160;adjacent modules of the CANTP&#160;...........................................&#160;12</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#15">Figure 3-1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#15">CANTP&#160;internal states................................................................................&#160;15</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#21">Figure 4-1&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#21">Include structure.........................................................................................&#160;21</a>&#160;<br/>
<b>Tables&#160;<br/></b><a href="TechnicalReference_Asr_CanTps.html#14">Table 3-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#14">Supported additional features&#160;....................................................................&#160;14</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#14">Table 3-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#14">Not supported SWS features&#160;.....................................................................&#160;14</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#18">Table 3-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#18">Mapping of service IDs to services&#160;............................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#18">Table 3-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#18">Errors reported to DET...............................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#19">Table 3-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#19">Errors reported to DEM&#160;..............................................................................&#160;19</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#20">Table 4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#20">Static files&#160;...................................................................................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#21">Table 4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#21">Generated files...........................................................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#22">Table 4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#22">Compiler abstraction and memory&#160;mapping&#160;..............................................&#160;22</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#23">Table 5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#23">CanTp_Init: until&#160;AR 3 (without ConfigPointer)...........................................&#160;23</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#24">Table 5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#24">CanTp_Init: with ConfigPointer (Vector extension to&#160;AR 3)........................&#160;24</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#25">Table 5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#25">CanTp_Init: with ConfigPointer&#160;..................................................................&#160;25</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#26">Table 5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#26">CanTp_GetVersionInfo...............................................................................&#160;26</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#27">Table 5-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#27">CanTp_Shutdown&#160;......................................................................................&#160;27</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#29">Table 5-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#29">CanTp_Transmit.........................................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#30">Table 5-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#30">CanTp_CancelTransmitRequest&#160;................................................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#31">Table 5-8&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#31">CanTp_CancelReceiveRequest.................................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#32">Table 5-9&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#32">CanTp_MainFunction.................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#33">Table 5-10&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#33">CanTp_MainFunctionRx&#160;............................................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#33">Table 5-11&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#33">CanTp_MainFunctionTx.............................................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#34">Table 5-12&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#34">CanTp_SetSTmin.......................................................................................&#160;34</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#35">Table 5-13&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#35">CanTp_SetBS&#160;............................................................................................&#160;35</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#36">Table 5-14&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#36">CanTp_ChangeParamRequest..................................................................&#160;36</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#37">Table 5-15&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#37">CanTp_ReadParamRequest......................................................................&#160;37</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#38">Table 5-16&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#38">Services used by the CANTP.....................................................................&#160;38</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#39">Table 5-17&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#39">CanTp_RxIndication...................................................................................&#160;39</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#40">Table 5-18&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#40">CanTp_TxConfirmation&#160;..............................................................................&#160;40</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#43">Table 5-19&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#43">PduR_CanTpRxIndication..........................................................................&#160;43</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#44">Table 5-20&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#44">PduR_CanTpTxConfirmation&#160;.....................................................................&#160;44</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#45">Table 5-21&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#45">PduR_CanTpProvideRxBuffer&#160;...................................................................&#160;45</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#47">Table 5-22&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#47">PduR_CanTpProvideTxBuffer....................................................................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#48">Table 5-23&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#48">PduR_CanTpStartOfReception&#160;..................................................................&#160;48</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#49">Table 5-24&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#49">PduR_CanTpCopyRxData&#160;.........................................................................&#160;49</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#50">Table 5-25&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#50">PduR_CanTpCopyTxData&#160;.........................................................................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#51">Table 5-26&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#51">PduR_CanTpChangeParameterConfirmation............................................&#160;51</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#52">Table 5-27&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#52">EcuM_GeneratorCompatibilityError&#160;...........................................................&#160;52</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#53">Table 6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#53">Data base attributes&#160;...................................................................................&#160;53</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#59">Table 6-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#59">General parameters&#160;...................................................................................&#160;59</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#60">Table 6-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#60">Rx parameters............................................................................................&#160;60</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#61">Table 6-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#61">Tx parameters&#160;............................................................................................&#160;61</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#71">Table 8-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#71">Glossary&#160;.....................................................................................................&#160;71</a>&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#72">Table 8-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_CanTps.html#72">Abbreviations&#160;.............................................................................................&#160;72</a>&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
8&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-9_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>1&#160;&#160;Component History&#160;</b><br/>
The component history gives&#160;an overview over the important milestones that&#160;are&#160;<br/>supported in the different versions of the component. &#160;<br/>For details please see “Document&#160;Change History” within [1] and [10].&#160;<br/>
<b>2&#160;&#160;Introduction&#160;</b><br/>
This document describes the functionality,&#160;API and configuration&#160;of the&#160;AUTOSAR BSW&#160;<br/>module CANTP&#160;as specified in&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[1] and [10]. &#160;<br/></a>&#160;<br/>
<b>Supported AUTOSAR&#160;Release:&#160;</b><br/>
3 and 4 (configurable)&#160;<br/>
<b>Supported Configuration Variants:&#160;</b><br/>
pre-compile, post-build&#160;<br/>
<b>Vendor ID:&#160;</b><br/>
CANTP_VENDOR_ID 30&#160;<br/>
decimal&#160;<br/>
(=&#160;Vector-Informatik,&#160;<br/>according to&#160;HIS)&#160;<br/>
<b>Module ID:&#160;</b><br/>
CANTP_MODULE_ID &#160;&#160;<br/>
35 decimal&#160;<br/>
(according to ref.&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[8])&#160;</a><br/>
. &#160;<br/>&#160;<br/>According to&#160;AUTOSAR basic software architecture, CANTP&#160;provides services for&#160;<br/><b>&gt;&#160;&#160;</b>Segmentation of data in transmit direction&#160;<br/>
<b>&gt;&#160;&#160;</b>Reassembly of data in receive direction&#160;<br/>
<b>&gt;&#160;&#160;</b>Control of data flow&#160;<br/>
<b>&gt;&#160;&#160;</b>Detection of errors in segmentation sessions&#160;<br/>
&#160;<br/>AUTOSAR module specifications are based on existing standards.&#160;Thus this&#160;AUTOSAR&#160;<br/>CAN&#160;Transport Layer specification is based&#160;on the international&#160;standard ISO 15765 which&#160;<br/>is the most widespread standard in the automotive domain.&#160;<br/>ISO 15765 contains four sections and describes two applicable CAN&#160;Transport Layer&#160;<br/>specifications: ISO 15765-2 for OEM enhanced diagnostics (see&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[4]) and ISO 15765-4 for&#160;<br/></a>OBD diagnostics. Concerning the transport&#160;layer,&#160;ISO 15765-4 (the section of ISO 15765&#160;<br/>which also covers the data link&#160;layer and the physical layer) is in accordance with ISO&#160;<br/>15765-2 with some restrictions/additions. In order&#160;that there is no incompatibility problem&#160;<br/>between ISO 15765-2 and ISO 15765-4, differences&#160;will be solved by the CAN&#160;Transport&#160;<br/>Layer configuration.&#160;<br/>Although the CAN transport protocol is&#160;mainly used for vehicle diagnostic systems, its&#160;<br/>design also&#160;incorporates requirements&#160;from other CAN based systems employing&#160;<br/>transport-layer protocols.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
9&#160;/&#160;&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-10_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-10_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-10_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-10_4.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-10_5.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
&#160;<br/>
<b>2.1&#160;&#160;Architecture Overview&#160;<br/></b>The following figure shows where the CANTP&#160;is&#160;located in the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
Figure 2-1&#160;&#160;AUTOSAR architecture&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
10&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-11_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-11_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>2.2&#160;</b><br/>
<b>CAN Transport Layer interactions&#160;</b><br/>
The upper&#160;interface of CANTP&#160;provides a&#160;PDUR module global access for transmitting&#160;<br/>and receiving data. &#160;<br/>This access is realized via a CAN N-SDU identifier (CAN NSduId).&#160;The CAN NSduId refers&#160;<br/>to a constant data structure which consists&#160;of attributes describing CAN N-SDU. Each&#160;<br/>CAN N-SDU specific data structure may contain attributes such as: type of N-SDU (Tx or&#160;<br/>Rx), its addressing format, L-SDU identifier of&#160;this message or other attributes that are&#160;<br/>useful for the implementation.&#160;<br/>&#160;<br/>
&#160;<br/>
Figure 2-2&#160;&#160;CAN&#160;Transport Layer interactions&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
11&#160;/&#160;73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-12_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
The next figure shows the interfaces&#160;to adjacent modules of the CANTP.&#160;These interfaces&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#23">are described in chapter&#160;5. &#160;</a><br/>
<b>id&#160;Architecture&#160;overview</b><br/>
<b>PduR</b><br/>
PduR_CanTpRxIndication<br/>
CanTp_Transmit<br/>
PduR_CanTpTxConfirmation<br/>
PduR_CanTpProvideRxBuffer<br/>
PduR_CanTpProvideTxBuffer<br/>
<b>SchM</b><br/>
Interrupt-&#160;and&#160;critical&#160;section&#160;handling<br/>
Det_ReportError<br/>
<b>CanTp</b><br/>
<b>Det</b><br/>
«optional»<br/>
CanTp_Init<br/>(CanTp_Shutdown)<br/>
<b>EcuM</b><br/>
CanTp_<br/>
Dem_ReportErrorStatus<br/>
MainFunction<br/>
«optional»<br/>
<b>Dem</b><br/>
CanTp_<br/>GetVersionInfo<br/>
CanTp_TxConfirmation<br/>
CanTp_RxIndication<br/>
CanIf_Transmit<br/>
<b>CanIf</b><br/>
&#160;<br/>
Figure 2-3&#160;&#160;Interfaces to adjacent modules of the CANTP&#160;<br/>
<b>2.2.1&#160;&#160;Changes between AUTOSAR 3.x and AUTOSAR 4&#160;</b><br/>
<b>2.2.1.1&#160;</b><br/>
<b>PduR API changes&#160;</b><br/>
The buffer provision calls from&#160;AR3&#160;<br/>PduR_CanTpProvideRxBuffer and&#160;<br/>PduR_CanTpProvideTxBuffer&#160;<br/>have been changed by&#160;AUTOSAR to &#160;<br/>PduR_CanTpStartOfReception,&#160;PduR_CanTpCopyRxData&#160;and&#160;<br/>PduR_CanTpCopyTxData&#160;<br/>within AR4.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
12&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-13_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>2.2.1.2&#160;</b><br/>
<b>CanIf API changes&#160;</b><br/>
In addition to the existing CanIf_Transmit&#160;API&#160;a cancellation&#160;API function is supported&#160;<br/>since&#160;AR4.&#160;The CanIf_CancelTransmit shall allow to cancel transmit requests which are&#160;<br/>not already&#160;handed physically to the CAN bus.&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
13&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-14_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>3&#160;&#160;Functional Description&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The implemented features cover the co<a href="TechnicalReference_Asr_CanTps.html#4">mplete functionality specified in&#160;[1] and [2] exc</a>ept&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#14">the entries in “Table 3-2 &#160;&#160;Not supported SWS features” below</a>.&#160;<br/>Extensions&#160;and limitations concerning the&#160;AUTOSAR features are presented in chapter&#160;<a href="TechnicalReference_Asr_CanTps.html#63">7&#160;<br/></a>in more detail.&#160;<br/>&#160;<br/>The following additional features are supported:&#160;<br/>
<b>Supported Additional&#160;Feature&#160;<br/></b>Burst transmission&#160;<br/>Full Duplex&#160;(in addition to [10])&#160;<br/>CANTP&#160;initialization&#160;(in&#160;addition to [10])&#160;<br/>Padding pattern&#160;<br/>Splitted CanTp_MainFunction&#160;<br/>Dynamic Flow Control content&#160;(in addition to [10])&#160;<br/>
Table 3-1&#160;&#160;&#160;Supported additional features&#160;<br/>
<a href="TechnicalReference_Asr_CanTps.html#4">The following features described in&#160;[1] are not supported:&#160;</a><br/>
<b>Not Supported Feature&#160;<br/></b>Half Duplex&#160;<br/>Shared channels&#160;<br/>
Table 3-2&#160;&#160;&#160;Not supported SWS features&#160;<br/>
<b>3.2&#160;&#160;Initialization&#160;<br/></b>After power up, CANTP&#160;is in a&#160;state called CANTP_OFF.&#160;In this state, the CANTP&#160;is&#160;not&#160;<br/>yet initialized and therefore may not&#160;perform any communication&#160;task.&#160;<br/>This service uses the given configuration set to&#160;initialize all global variables of the CAN&#160;<br/>Transport Layer and brings it&#160;to the idle state (state = CANTP_ON, but neither&#160;<br/>transmission nor reception are possible yet).&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
14&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-15_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-15_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>3.3&#160;&#160;States&#160;</b><br/>
The CANTP module has two internal states,&#160;CANTP_OFF&#160;and&#160;CANTP_ON. After power up&#160;&#160;<br/>the CANTP&#160;is in the&#160;CANTP_OFF&#160;state.&#160;<br/>The CANTP changes&#160;to the internal state&#160;CANTP_ON&#160;&#160;when it has been successfully&#160;&#160;<br/>nitialized with&#160;CanTp_Init().&#160;<br/>The CANTP performs segmentation and reassembly tasks&#160;only when it is in the&#160;<br/>CANTP_ON&#160;state. The function&#160;CanTp_Init&#160;initializes all global variables&#160;of the module&#160;<br/>and sets all transport protocol&#160;connections in a sub-state of&#160;CANTP_ON, in which neither&#160;<br/>
segmented transmission nor segmented reception are in progress (Rx thread in state&#160;<br/>CANTP_RX_WAIT&#160;and Tx thread in state&#160;CANTP_TX_WAIT).&#160;<br/>If called when the CANTP module is in the global state&#160;CANTP_ON,&#160;&#160;the function&#160;<br/>CanTp_Init&#160;&#160;returns the module to state Idle&#160;(state = CANTP_ON, but neither&#160;<br/>
transmission nor reception are in progress)&#160;and the module looses&#160;all current&#160;<br/>connections.&#160;<br/>The function&#160;CanTp_Shutdown&#160;stops the CANTP module properly.&#160;<br/>&#160;<br/>
&#160;<br/>
Figure 3-1&#160;&#160;CANTP&#160;internal&#160;states&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
15&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-16_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-16_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
&#160;<br/>
<b>3.4&#160;&#160;Main Functions&#160;</b><br/>
<b>&gt;&#160;&#160;CanTp_Init</b>()&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Overall module initialization prior to any usage.&#160;<br/><b>&gt;&#160;&#160;CanTp_GetVersionInfo&#160;&#160;</b>Obtains<b>&#160;</b>the version information of the CANTP&#160;module.&#160;<br/><b>&gt;&#160;&#160;CanTp_Shutdown&#160;&#160;&#160;&#160;&#160;&#160;</b>Closes&#160;all connections&#160;and sets&#160;the CANTP&#160;module into CANTP_OFF state. &#160;<br/><b>&gt;&#160;&#160;CanTp_Transmit&#160;&#160; &#160;</b>Request the transfer of segmented data.&#160;<br/><b>&gt;&#160;&#160;CanTp_MainFunction&#160;&#160;&#160;</b>Entry point for scheduling the CANTP&#160;module.&#160;<br/>&#160;<br/>
<b>3.4.1&#160;&#160;The CanTp_MainFunction&#160;<br/></b>This is the main function serving as time-basis for scheduling the CANTP&#160;(entry-point for&#160;<br/>scheduling). &#160;<br/>Please note, that the configured&#160;task cycle is used to calculate&#160;any kind of timing behavior&#160;<br/>(e.g. timeouts or delays.). So this function must be called&#160;periodically with the&#160;<br/>‘CanTpMainFunctionPeriod’&#160;which is actually configured in the generation tool.&#160;<br/>
<b>3.4.2&#160;&#160;Buffer handling and data consistency&#160;<br/></b>To&#160;optimize the communication stack,&#160;AUTOSAR limits&#160;the CANTP&#160;buffering capacity.&#160;<br/>Therefore, the CANTP&#160;copies N-SDU payload&#160;directly from an upper layer&#160;(e.g. DCM or&#160;<br/>PDU Router) to the CAN&#160;driver and vice-versa. &#160;<br/>Thus, in order to guarantee data consistency,&#160;the upper layer&#160;<b>must</b>&#160;assure the following&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#4">rules (see&#160;[1] 5.1.4):&#160;<br/></a><b>&gt;&#160;&#160;</b>At transmission time: the N-SDU data payload remains unchanged from the transmit&#160;<br/>
request until the transmit confirmation has been received or the next buffer is requested&#160;<br/>from the CANTP.&#160;<br/>
<b>&gt;&#160;&#160;</b>At reception time: the N-SDU data access is&#160;locked from the buffer allocation request&#160;<br/>
until the reception indication or the next buffer allocation request has been received.&#160;<br/>
This means that the&#160;application is responsible for data&#160;consistency during transmission&#160;<br/>and reception!&#160;<br/>For more information on these functions, refer to the PDU Router module spec<a href="TechnicalReference_Asr_CanTps.html#4">ification&#160;[3].&#160;</a><br/>
<b>Please note&#160;<br/></b>The buffer provision callback functions are called directly from&#160;the CANTP&#160;calling&#160;<br/>
&#160;&#160;context.&#160;This can also be on interrupt level. So the callback functions must assure that&#160;<br/>
their duration is strictly limited to avoid the loss of information due to a long interrupt&#160;<br/>disable period.&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
16&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-17_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>3.4.2.1&#160;</b><br/>
<b>Critical sections&#160;</b><br/>
Different messages from different busses (this&#160;can be other CAN buses or, in the case of a&#160;<br/>gateway ECU, also other &#160;buses like FlexRay,&#160;LIN etc.) have to be handled at the same&#160;<br/>time by the CANTP&#160;as well&#160;as transmission requests&#160;from the local ECU.&#160;This handling&#160;<br/>can be accomplished as well from interrupt as&#160;also from task level.&#160;Thus a synchronization&#160;<br/>mechanism&#160;is implemented to guarantee data consistency amongst all connections.&#160;<br/>The synchronization mechanism&#160;defined by&#160;AUTOSAR covers the entering and leaving of&#160;<br/>so called critical sections. Different critical sections can be&#160;handled by using different so&#160;<br/>called “Exclusive&#160;Areas”.&#160;<br/>CANTP uses the critical sections&#160;CANTP_EXCLUSIVE_AREA_0 and&#160;<br/>CANTP_EXCLUSIVE_AREA_1.&#160;These critical&#160;sections can be entered from task and&#160;<br/>interrupt context depending on the configuration of the&#160;calling layer.&#160;<br/>The implementation of the critical sections must avoid&#160;that multiple relevant tasks or&#160;<br/>interrupt service routines can enter any of the critical sections&#160;at the same time, i.e. they&#160;<br/>may not interrupt each other.&#160;<br/>Relevant interrupts in the context of the CANTP are interrupts originated from&#160;physical bus&#160;<br/>events (CAN, LIN, FlexRay etc.).&#160;<br/>Relevant tasks in the CANTP&#160;context are all tasks which&#160;call CANTP API functions.&#160;<br/>Usually these tasks are limited to tasks on which other&#160;BSW&#160;modules (DCM, COM,&#160;<br/>ECUM) are mapped to.&#160;<br/>&#160;<br/>E.g.: For an implementation of the critical sections it could be sufficient to&#160;<br/><b>&gt;&#160;&#160;</b>Disable interrupt levels up to the highest bus&#160;interrupt level (interrupt controller with&#160;<br/>
interrupt levels supposed) assuming that the task rescheduling is thereby inhibited too &#160;<br/>
<b>&gt;&#160;&#160;</b>Disable all bus relevant interrupts if all modules calling CANTP API functions are&#160;<br/>
mapped to one task (e.g. SchM task)&#160;or a non-preempitve OS is used&#160;<br/>
&#160;<br/>The difference between CANTP_EXCLUSIVE_AREA_0&#160;and&#160;<br/>CANTP_EXCLUSIVE_AREA_1 is the frequency of enter/leave calls. &#160;<br/>CANTP_EXCLUSIVE_AREA_1&#160;is used in CanTp_MainFunctionRx and&#160;<br/>CanTp_MainFunctionTx while iterating through all connections doing&#160;one enter/leave per&#160;<br/>iteration. It is possible to implement this&#160;critical section with higher performance&#160;<br/>mechanisms (e.g., global interrupt lock) if necessary. This is&#160;typically used in gateway&#160;<br/>applications with configurations containing many connections on several physical busses.&#160;<br/>CANTP_EXCLUSIVE_AREA_0 and CANTP_EXCLUSIVE_AREA_1 are mutually&#160;<br/>exclusive. The implementation&#160;must ensure that only&#160;one of the critical sections can be&#160;<br/>entered at the same time.&#160;<br/>Please note that these are only&#160;examples and that the actual implementation of the critical&#160;<br/>sections is highly dependent on the platform&#160;architecture and the system configuration.&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
17&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-18_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>3.5&#160;&#160;Error Handling&#160;</b><br/>
<b>3.5.1&#160;&#160;Development Error Reporting&#160;<br/></b>By default, development errors are reported to the DET&#160;using the service&#160;<br/>Det_ReportError()<a href="TechnicalReference_Asr_CanTps.html#4">as specified in&#160;[6], if developm</a>ent error reporting is&#160;enabled (i.e.&#160;<br/>pre-compile parameter&#160;CANTP_DEV_ERROR_DETECT==STD_ON).&#160;<br/>If another module is used for development error&#160;reporting, the function prototype for&#160;<br/>reporting the error can be configured by the integrator, but must have the same signature&#160;<br/>as the service&#160;Det_ReportError().&#160;<br/>The reported CANTP&#160;ID is 35.&#160;<br/>The reported service IDs identify the services which are described in&#160;<a href="TechnicalReference_Asr_CanTps.html#23">5.1. The&#160;</a>following&#160;<br/>table presents the service IDs and the related services:&#160;<br/>
<b>Service ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x01 CanTp_Init&#160;<br/>0x02 CanTp_Shutdown&#160;<br/>0x03 CanTp_Transmit&#160;<br/>0x04 CanTp_RxIndication&#160;<br/>0x05 CanTp_TxConfirmation&#160;<br/>0x06 CanTp_MainFunction&#160;<br/>0x07 CanTp_GetVersionInfo&#160;<br/>
Table 3-3&#160;&#160;&#160;Mapping of service IDs to services&#160;<br/>
The errors reported to DET&#160;are described in the following table:&#160;<br/>
<b>Error Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x01&#160;&#160;CANTP_E_PARAM_CONFIG &#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;<br/>
API called with wrong parameters&#160;<br/>
0x02&#160;&#160;CANTP_E_PARAM_ID &#160; &#160; &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;<br/>
API called with wrong parameters&#160;<br/>
0x04&#160;&#160;CANTP_E_PARAM_ADDRESS &#160; &#160;&#160;&#160; &#160;&#160; &#160;&#160;&#160;API called with wrong parameters&#160;<br/>
0x20 CANTP_E_UNINIT&#160;<br/>
API service used without module initialization&#160;<br/>
0x30&#160;&#160;CANTP_E_INVALID_TX_ID &#160; &#160; &#160;&#160; &#160;&#160; &#160;<br/>
Invalid&#160;Transmit PDU identifier&#160;<br/>
0x40&#160;&#160;CANTP_E_INVALID_RX_ID &#160; &#160; &#160;&#160; &#160;&#160; &#160;<br/>
Invalid Receive PDU identifier&#160;<br/>
0x50&#160;&#160;CANTP_E_INVALID_TX_BUFFER &#160; &#160; &#160;&#160;&#160;&#160;Invalid&#160;Transmit buffer address&#160;<br/>
0x60&#160;&#160;CANTP_E_INVALID_RX_BUFFER &#160; &#160; &#160;&#160;&#160;&#160;Invalid Receive buffer address&#160;<br/>
0x70&#160;&#160;CANTP_E_INVALID_TX_LENGTH &#160; &#160; &#160;&#160;&#160;&#160;Invalid data length of the&#160;transmit PDU&#160;<br/>
0x80&#160;&#160;CANTP_E_INVALID_RX_LENGTH &#160; &#160; &#160;&#160;&#160;&#160;Invalid data length of the&#160;receive PDU&#160;<br/>
0x90 CANTP_E_INVALID_TA_TYPE&#160;<br/>
Functional addressing&#160;Tx&#160;I-Pdu message does not&#160;<br/>fit into a SF&#160;<br/>
0x5C NTFRSLT_E_CANTP_INVALID_STATE&#160;This error is&#160;used if the internal state&#160;machine of the&#160;<br/>
CANTP&#160;shows an invalid status.&#160;<br/>
Table 3-4&#160;&#160;&#160;Errors reported to DET&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
18&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-19_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>3.5.2&#160;&#160;Production Code Error Reporting&#160;<br/></b>By default,&#160;production code related errors&#160;are reported to the DEM using the service&#160;<br/>Dem_ReportErrorStatus()<a href="TechnicalReference_Asr_CanTps.html#4">&#160;as specified in&#160;[5], if production error&#160;</a>reporting is enabled&#160;<br/>(i.e. pre-compile parameter&#160;CANTP_PROD_ERROR_DETECT==STD_ON).&#160;<br/>If another module is used for production code error reporting, the function prototype for&#160;<br/>reporting the error can be configured by the integrator, but must have the same signature&#160;<br/>as the service&#160;Dem_ReportErrorStatus().&#160;<br/>The errors reported to DEM are described in the following table:&#160;<br/>
<b>Error Code&#160;</b><br/>
<b>Description&#160;</b><br/>
CANTP_E_OPER_NOT_SUPPORTED&#160;<br/>
Requested operation is&#160;not supported&#160;<br/>
CANTP_E_RX_COM&#160;<br/>
Event reported on completion of a reception&#160;<br/>operation (only&#160;AUTOSAR 4)&#160;<br/>
CANTP_E_TX_COM&#160;<br/>
Event reported on completion of a&#160;<br/>transmission operation&#160;(only&#160;AUTOSAR 4)&#160;<br/>
CANTP_E_COM&#160;<br/>
Another error occurred during a reception or a&#160;<br/>transmission (AUTOSAR 3 and&#160;AUTOSAR4)&#160;<br/>
(named CANTP_E_COMM&#160;within&#160;AUTOSAR 3.1)&#160;<br/>
Table 3-5&#160;&#160;&#160;Errors reported to DEM&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
19&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-20_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>4&#160;&#160;Integration&#160;</b><br/>
This chapter gives necessary information for the integration of&#160;the MICROSAR CANTP&#160;<br/>into an application environment of an ECU.&#160;<br/>
<b>4.1&#160;&#160;Scope of Delivery&#160;<br/></b>The delivery of the CANTP&#160;contains the files which are described in the chapters&#160;<a href="TechnicalReference_Asr_CanTps.html#20">4.1.1 and&#160;<br/></a><a href="TechnicalReference_Asr_CanTps.html#21">4.1.2:&#160;</a><br/>
<b>4.1.1&#160;&#160;Static Files&#160;</b><br/>
<b>File Name&#160;</b><br/>
<b>Description&#160;</b><br/>
CanTp.c&#160;<br/>
Source file of the CANTP.&#160;<br/>
CanTp.h&#160;<br/>
Header file&#160;of the CANTP.&#160;<br/>
CanTp_Hooks.h&#160;&#160;Header &#160;file&#160;of the monitoring hook function definitions (included from&#160;<br/>
CanTp.c).&#160;<br/>
CanTp_Cbk.h&#160;<br/>
Header file&#160;of the CANTP&#160;callback functions.&#160;<br/>
CanTp_Types.h&#160;&#160;Header file&#160;of the CANTP&#160;type definitions.&#160;<br/>CanTp_Priv.h&#160;<br/>
Header file&#160;of the CANTP&#160;extended&#160;type definitions (Vector&#160;extensions to&#160;<br/>AUTOSAR).&#160;<br/>
CanTp.lib&#160;<br/>
Library of the CANTP&#160;<br/>
Table 4-1&#160;&#160;&#160;Static files&#160;<br/>
<b>4.1.1.1&#160;</b><br/>
<b>Hook functions&#160;</b><br/>
Additional hook functions can&#160;be provided by defining the function declarations supported&#160;&#160;<br/>within the CanTp_Hooks.h header file.&#160;<br/>The CanTp callback functions &#160;<br/>
X<b>&#160;&#160;</b>CanTp_RxIndication, called at the&#160;reception of each CAN frame and &#160;<br/>
X<b>&#160;&#160;</b>CanTp_TxConfirmation, called at the transmit confirmation of each CAN frame&#160;&#160;<br/>are supplied with the&#160;following tags at the beginning and the end of the function:&#160;<br/>&#160;<br/>
# define CanTpHook_OnBegin_CanTp_RxIndication()&#160;<br/>
&#160;<br/>
# define CanTpHook_OnEnd_CanTp_RxIndication()&#160;<br/>
&#160;<br/>
# define CanTpHook_OnBegin_CanTp_TxConfirmation()&#160;<br/>
&#160;<br/>
# define CanTpHook_OnEnd_CanTp_TxConfirmation().&#160;<br/>
&#160;<br/>Please note that the provided&#160;hook functions are all of&#160;the type “void func(void)”.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
20&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-21_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-21_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>4.1.2 &#160;</b><br/>
<b>4.1.3&#160;&#160;Dynamic Files&#160;<br/></b>The dynamic files are generated by the&#160;configuration tool [config tool].&#160;<br/>
<b>File Name&#160;</b><br/>
<b>Description&#160;</b><br/>
CanTp_Cfg.h&#160;<br/>
This is the generated header file of&#160;CANTP&#160;containing pre-compile switches&#160;<br/>and providing symbolic defines.&#160;<br/>
CanTp_Cfg.c&#160;<br/>
This is the generated source file of&#160;CANTP&#160;containing pre-compile-time&#160;<br/>configurable&#160;parameters&#160;<br/>
CanTp_Lcfg.h&#160;<br/>
This is the generated header file of&#160;CANTP&#160;containing link-time configurable&#160;<br/>symbols&#160;<br/>
CanTp_Lcfg.c&#160;<br/>
This is the generated source file of&#160;CANTP&#160;containing link-time configurable&#160;<br/>parameters&#160;<br/>
CanTp_PBcfg.c&#160;&#160;This is the generated source file of&#160;CANTP&#160;containing post-build-time&#160;<br/>
configurable&#160;parameters&#160;<br/>
CanTp_PBcfg.c&#160;&#160;This is the generated source file of&#160;CANTP&#160;containing post-build-time&#160;<br/>
configurable&#160;parameters&#160;<br/>
Table 4-2&#160;&#160;&#160;Generated files&#160;<br/>
&#160;<br/>
<b>4.2&#160;&#160;Include Structure&#160;</b><br/>
&#160;<br/>
Figure 4-1&#160;&#160;Include structure&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
21&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-22_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Compiler Abstraction and Memory&#160;Mapping &#160;</b><br/>
The objects (e.g. variables, functions, constants) are declared by compiler&#160;independent&#160;<br/>definitions – the compiler abstraction definitions. Each compiler abstraction definition is&#160;<br/>assigned to a memory section.&#160;<br/>The following table contains the memory&#160;section names and the compiler abstraction&#160;<br/>definitions defined for the CANTP&#160;and illustrates their assignment among each&#160;other.&#160;<br/>
<b>Compiler Abstraction&#160;</b><br/>
IT&#160;<br/>
TA&#160;<br/>
<b>Definitions</b><br/>
N<br/>
<b>&#160;</b><br/>
NST&#160;<br/>
FG&#160;<br/>
L_CODE&#160;<br/>
L_DA<br/>
_NOI<br/>
&#160;<br/>
C<br/>
DE&#160;<br/>
R<br/>
R<br/>
A<br/>
A<br/>
CO<br/>
CO<br/>
V<br/>
V<br/>
<b>Memory&#160;Mapping&#160;</b><br/>
<b>Sections&#160;</b><br/>
CANTP_<br/>
CANTP_PB<br/>
CANTP_<br/>
CANTP_APP<br/>
CANTP_APP<br/>
CANTP_<br/>
CANTP_<br/>
CANTP_START_SEC_CODE&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_CODE&#160;<br/>
CANTP_START_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
 <br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
CANTP_START_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
CANTP_START_SEC_CONST_16BIT&#160;<br/>
 <br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_CONST_16BIT&#160;<br/>
CANTP_START_SEC_CONST_32BIT&#160;<br/>
 <br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_CONST_32BIT&#160;<br/>
CANTP_START_SEC_CONST_PBCFG_ROOT&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_START_SEC_CONST_PBCFG_ROOT&#160;<br/>
CANTP_START_SEC_PBCFG_ROOT&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_START_SEC_PBCFG_ROOT&#160;<br/>
CANTP_START_SEC_VAR_NOINIT_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
CANTP_START_SEC_VAR_NOINIT_8BIT&#160;<br/>
Table 4-3&#160;&#160;&#160;Compiler abstraction and memory&#160;mapping&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
22&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-23_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5&#160;&#160;API Description&#160;</b><br/>
<a href="TechnicalReference_Asr_CanTps.html#12">For an interfaces overview please see&#160;Figure 2-3.&#160;</a><br/>
<b>5.1&#160;&#160;Services provided by&#160;CANTP&#160;<br/></b>The CANTP&#160;API consists of services, which are realized by function calls.&#160;<br/>
<b>5.1.1&#160;&#160;CanTp_Init: &#160;(until AR&#160;3)&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_Init&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service&#160;uses&#160;the given configuration set to initialize all global variables of the CANTP&#160;and&#160;sets&#160;it in the&#160;<br/>idle state&#160;(state = CANTP_ON). No transmissions or&#160;receptions&#160;are currently pending. &#160;<br/>
The CANTP&#160;is not configured and must not perform&#160;any communication task unless this initialization&#160;<br/>function&#160;was called at least&#160;once.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Only available if enabled at&#160;compile time&#160;(CANTP_HAVE_INIT_CFG_PTR == STD_OFF)&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called from the EcuManager during system startup.&#160;<br/>
Table 5-1&#160;&#160;&#160;CanTp_Init: until&#160;AR 3 (without&#160;ConfigPointer)&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
23&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-24_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.2&#160;&#160;CanTp_Init:&#160;with ConfigPointer &#160;(Vector extension to AR 3)&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_Init&#160;</b>( const void* const pCfgPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
pCfgPtr&#160;<br/>
Pointer to a given configuration set.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service&#160;uses&#160;the configuration set&#160;addressed to by&#160;the pCfgPtr to initialize all global variables of the&#160;<br/>CANTP&#160;and sets&#160;it in the idle state (state&#160;= CANTP_ON). No transmissions or receptions&#160;are&#160;currently&#160;<br/>pending. &#160;<br/>
The CANTP&#160;is not configured and must not perform&#160;any communication task unless this initialization&#160;<br/>function&#160;was called at least&#160;once.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Only available if enabled at&#160;compile time&#160;(CANTP_HAVE_INIT_CFG_PTR&#160;== STD_ON)&#160;<br/>
<b>&gt;&#160;&#160;</b>If multiple configurations are used then this pointer is&#160;used&#160;to identify the appropriate identity.&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called from the EcuManager during system startup.&#160;<br/>
Table 5-2&#160;&#160;&#160;CanTp_Init:&#160;with ConfigPointer (Vector extension to&#160;AR 3)&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
24&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-25_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.3&#160;&#160;CanTp_Init: &#160;(since AR&#160;4)&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_Init&#160;</b>( const&#160;CanTp_ConfigType* pCfgPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
pCfgPtr&#160;<br/>
Pointer to a given configuration set.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service&#160;uses&#160;the configuration set&#160;addressed to by&#160;the pCfgPtr to initialize all global variables of the&#160;<br/>CANTP&#160;and sets&#160;it in the idle state (state&#160;= CANTP_ON). No transmissions or receptions&#160;are&#160;currently&#160;<br/>pending. &#160;<br/>
The CANTP&#160;is not configured and must not perform&#160;any communication task unless this initialization&#160;<br/>function&#160;was called at least&#160;once.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>If multiple configurations are used then this pointer is&#160;used&#160;to identify the appropriate identity.&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called from the EcuManager during system startup.&#160;<br/>
Table&#160;5-3&#160;&#160;&#160;CanTp_Init: with&#160;ConfigPointer&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
25&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-26_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.4&#160;&#160;CanTp_GetVersionInfo&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_GetVersionInfo&#160;</b>( Std_VersionInfoType* const pVersionInfo )&#160;<br/>
<b>Parameter&#160;</b><br/>
pVersionInfo&#160;<br/>
The version information of the CANTP&#160;module is&#160;stored in the structure&#160;<br/>referenced by&#160;this pointer.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service returns the version information of this module. &#160;<br/>
The version information includes: Module Id, Vendor&#160;Id and Vendor&#160;specific version numbers.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Only available if enabled at&#160;compile time&#160;(CANTP_VERSION_INFO_API == STD_ON)&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Interrupt or task&#160;context&#160;<br/>
Table 5-4&#160;&#160;&#160;CanTp_GetVersionInfo&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
26&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-27_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.5&#160;&#160;CanTp_Shutdown&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_Shutdown&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service closes&#160;all pending transport protocol connections, frees all resources and sets&#160;the&#160;<br/>corresponding&#160;CANTP&#160;module into the&#160;CANTP_OFF&#160;state. &#160;<br/>
No further communication&#160;is possible unless&#160;(re-)initialization via CanTp_Init().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>No notification about eventually pending&#160;frame transmissions or receptions&#160;will&#160;be raised.&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Interrupt or task&#160;context&#160;<br/>
Table 5-5&#160;&#160;&#160;CanTp_Shutdown&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
27&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-28_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.6&#160;&#160;CanTp_Transmit&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>CanTp_Transmit&#160;</b>(const PduIdType CanTpTxSduId, &#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;const PduInfoType*, const CanTpTxInfoPtr&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxSduId&#160;<br/>
Unique CANTP&#160;module identifier of the CAN N-SDU to be transmitted.&#160;<br/>
Range: 0..(maximum number of &#160;I-PDU IDs) –1&#160;<br/>
CanTpTxInfoPtr&#160;<br/>
An indicator of&#160;a structure&#160;with CAN&#160;N-SDU related&#160;data: indicator of a CAN&#160;<br/>N-SDU buffer and the length of this buffer.&#160;<br/>
&#160;<br/>
Basic information about a&#160;PDU of any type:&#160;<br/>
typedef struct&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;<br/>
{&#160;<br/>
&#160; uint8 &#160; &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160;*SduDataPtr;&#160;<br/>
&#160; PduLengthType SduLength;&#160;<br/>
} PduInfoType;&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Request&#160;started successfully.&#160;<br/>
E_NOT_OK&#160;<br/>
The request cannot be&#160;started (e.g. a transmit request&#160;is in progress with the&#160;<br/>same N-SDU&#160;identifier).&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to request the transfer of segmented data.&#160;<br/>
If data length is less than 7&#160;or 6, &#160;depending on the addressing&#160;format&#160;(normal, extended. mixed11), a SF&#160;<br/>N-PDU is&#160;sent. However,&#160;if&#160;data length is greater&#160;than&#160;7 or 6, a multiple frame transmission session is&#160;<br/>initiated.&#160;<br/>
When the transmit request&#160;has&#160;been completed, the CANTP&#160;notifies the upper&#160;layer by calling the&#160;<br/>PduR_CanTpTxConfirmation&#160;callback&#160;function. &#160;<br/>
Also, if an error occurred (overflow,&#160;timeout&#160;etc.), the transmit request is aborted&#160;and the&#160;<br/>PduR_CanTpTxConfirmation&#160;callback is called&#160;with the appropriate error result value.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Only the data&#160;length information of&#160;the structure indicated by CanTpTxInfoPtr has to be used. Its value&#160;<br/>
indicates the&#160;payload length of the N-SDU to be transmitted.&#160;To access the&#160;Tx buffer, the CANTP&#160;calls&#160;<br/>the PduR_CanTpProvideTxBuffer service.&#160;<br/>
<b>&gt;&#160;&#160;</b>If the CanTp_Transmit service is&#160;called for a N-SDU&#160;identifier which is being&#160;used in a currently running&#160;<br/>
CanTp session, the CanTp&#160;rejects the request.&#160;<br/>
<b>&gt;&#160;&#160;</b>To&#160;guarantee&#160;data consistency,&#160;the upper&#160;layer (e.g.&#160;DCM, PduRouter or&#160;AUTOSAR COM)&#160;must lock&#160;<br/>
the transmit data area&#160;until the confirmation notification occurs. &#160;<br/>
<b>&gt;&#160;&#160;</b>In case of a functional connection&#160;and a&#160;data length&#160;that does not fit into one single frame, the&#160;transmit&#160;<br/>
request is&#160;cancelled and&#160;an application&#160;notification (NTFRSLT_E_UNEXP_PDU) is issued.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
28&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-29_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Either task context (e.g. if called from other BSW modules like DCM,&#160;COM etc.)&#160;or&#160;interrupt context (e.g.&#160;<br/>
if called from&#160;the PduR in case&#160;of a gateway configuration) &#160;<br/>
Table 5-6&#160;&#160;&#160;CanTp_Transmit&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
29&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-30_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-30_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.7&#160;&#160;CanTp_CancelTransmitRequest&#160;</b><br/>
<b>Prototype&#160;</b><br/>
<b>&#160;</b><br/>
Std_ReturnType&#160;<b>CanTp_CancelTransmitRequest&#160;</b>(PduIdType CanTpTxSduId)&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxSduId&#160;<br/>
Unique&#160;CANTP&#160;module identifier&#160;of the&#160;CAN N-SDU to be&#160;cancelled for&#160;<br/>transmission.&#160;<br/>
Range: 0..(maximum number of &#160;I-PDU IDs) –1&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Cancellation request accepted,&#160;<br/>
E_NOT_OK&#160;<br/>
Cancellation request rejected. &#160;<br/>The reason can&#160;be&#160;that the&#160;request&#160;is&#160;issued&#160;for an&#160;N-SDU&#160;that is&#160;not&#160;<br/>segmented&#160;or&#160;the request&#160;is issued after the last CF&#160;has&#160;been requested for&#160;<br/>transmission&#160;or a&#160;cancellation is&#160;not possible for the&#160;related&#160;N-SDU due&#160;to&#160;<br/>configuration.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to cancel the transmission of an&#160;ongoing N-SDU.&#160;<br/>
This is&#160;only performed for&#160;segmented data&#160;but not for Single Frames.&#160;<br/>
When&#160;the cancel&#160;transmit request&#160;has been completed,&#160;the CANTP&#160;notifies the upper layer by calling the&#160;<br/>PduR_CanTpTxConfirmation&#160;callback function with&#160;the ‘NTFRSLT_E_CANCELATION_OK‘ notification&#160;<br/>result and returns with E_OK. &#160;<br/>
If an error occurred, the cancel transmit request is aborted and E_NOT_OK is returned.&#160;<br/>
If the parameter value is&#160;invalid, the development error&#160;CANTP_E_PARAM_ID&#160;is raised and&#160;E_NOT_OK&#160;<br/>returned.&#160;<br/>
If the parameter value indicates a&#160;cancel transmission request for an&#160;N-SDU that is not on&#160;transmission&#160;<br/>process the&#160;DEM with&#160;EventId = CANTP_E_OPER_NOT_SUPPORTED&#160;and EventStatus&#160;=&#160;<br/>DEM_EVENT_STATUS_PREFAILED is&#160;called and E_NOT_OK is returned.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
If the CanTp_CancelTransmitRequest service is&#160;called&#160;for a N-SDU identifier which is undefined then the&#160;<br/>CanTp rejects the request.&#160;<br/>
It is not guaranteed that a frame just being transmitted can be&#160;stopped.&#160;<br/>
<b>Expected Caller Context&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Task context&#160;<br/>
Table 5-7&#160;&#160;&#160;CanTp_CancelTransmitRequest&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution</b>&#160;<br/>If the cancellation in hardware is not&#160;supported then the resulting confirmations, given&#160;<br/>
<b>&#160;&#160;</b>to the CanTp unexpectedly (due to sent messages which were expected to be&#160;<br/>
cancelled)&#160;can corrupt the proper CanTp handling for the concerning connection.&#160;This&#160;<br/>corruption could be avoided by delaying further transmit actions on the same&#160;<br/>connection&#160;after a cancellation until&#160;the appearance of unexpected confirmations can&#160;<br/>definitely be&#160;excluded.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
30&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-31_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.8&#160;&#160;CanTp_CancelReceiveRequest&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>CanTp_CancelReceiveRequest&#160;</b>(PduIdType CanTpRxSduId)&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
Unique CANTP&#160;module identifier of the CAN N-SDU to be received.&#160;<br/>
Range: 0..(maximum number of &#160;I-PDU IDs) –1&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Cancellation request is accepted,&#160;<br/>
E_NOT_OK&#160;<br/>
Cancellation request is rejected. &#160;<br/>
The reason can be that the&#160;request is&#160;issued for an&#160;N-SDU that is not&#160;<br/>segmented or&#160;the request is issued for an&#160;N-SDU that&#160;is not in the process of&#160;<br/>reception.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to cancel&#160;the reception of an ongoing N-SDU.&#160;<br/>
If the CanTp_CancelReceiveRequest service has been&#160;successfully&#160;executed the CanTp calls the&#160;<br/>PduR_CanTpRxIndication&#160;with the notification result ‘NTFRSLT_E_CANCELATION_OK’. &#160;<br/>
If development error detection is enabled&#160;the function&#160;CanTp_CancelReceiveRequest checks the validity of&#160;<br/>CanTpRxSduId parameter.&#160;If&#160;the parameter value is invalid, the CanTp_CancelReceiveRequest function&#160;<br/>raises the development error CANTP_E_PARAM_ID&#160;and returns E_NOT_OK.&#160;<br/>
If the parameter value indicates a cancel reception&#160;request for an&#160;N-SDU that it is&#160;not on reception process&#160;<br/>the DEM is called with EventId = CANTP_E_OPER_NOT_SUPPORTED&#160;and&#160;EventStatus =&#160;<br/>DEM_EVENT_STATUS_PREFAILED and E_NOT_OK is returned.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
The CanTp rejects the request for receive cancellation&#160;in case of a&#160;Single Frame reception or&#160;if the CanTp&#160;<br/>is in the process of receiving the last Consecutive Frame of&#160;the N-SDU (i.e. the&#160;service is&#160;called after&#160;N_Cr&#160;<br/>timeout is started for the last Consecutive Frame). In this case the CanTp returns E_NOT_OK.&#160;<br/>
<b>Expected Caller Context&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Task context&#160;<br/>
Table 5-8&#160;&#160;&#160;CanTp_CancelReceiveRequest&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
31&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-32_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.9&#160;&#160;CanTp_MainFunction&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_MainFunction&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Entry point for scheduling the CANTP&#160;module.&#160;This&#160;function must be&#160;called periodically with the&#160;<br/>CanTpMainFunctionPeriod&#160;configured in the generation tool.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>--&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>task context&#160;<br/>
Table 5-9&#160;&#160;&#160;CanTp_MainFunction&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
32&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-33_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.10&#160;&#160;CanTp_MainFunctionRx&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_MainFunctionRx&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Entry point for scheduling the CANTP&#160;module on&#160;the reception side.&#160;This function&#160;must be&#160;called&#160;<br/>periodically with the ‘CanTpMainFunctionPeriod’&#160;configured&#160;in the generation tool.&#160;<br/>
For an optimal calling sequence the CanTp_MainFunctionRx is typically called&#160;directly before the&#160;<br/>diagnostic application is called to provide the incoming request within the same task cycle.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The split of the CanTp_Mainfunction&#160;is optional&#160;and can be configured in the generation tool&#160;<br/>
(CANTP_RXTX_MAINFUNCTION_API == STD_ON/STD_OFF).&#160;The default is&#160;STD_OFF.&#160;<br/>
Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>task context&#160;<br/>
Table 5-10&#160;&#160;&#160;CanTp_MainFunctionRx&#160;<br/>
<b>5.1.11&#160;&#160;CanTp_MainFunctionTx&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_MainFunctionTx&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Entry point for scheduling the CANTP&#160;module on&#160;the transmission side.&#160;This function must be&#160;called&#160;<br/>periodically with the ‘CanTpMainFunctionPeriod’&#160;configured&#160;in the generation tool.&#160;<br/>
For an optimal calling sequence the CanTp_MainFunctionTx is typically called&#160;after the application&#160;<br/>(typically the diagnostic module)&#160;has processed an&#160;incoming request.&#160;This&#160;sequence supports&#160;the&#160;<br/>transmission of the resulting response as&#160;fast as possible.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The split of the CanTp_Mainfunction&#160;is optional&#160;and can be configured in the generation tool&#160;<br/>
(CANTP_RXTX_MAINFUNCTION_API == STD_ON/STD_OFF).&#160;The default is&#160;STD_OFF.&#160;<br/>
Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>task context&#160;<br/>
Table 5-11&#160;&#160;&#160;CanTp_MainFunctionTx&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
33&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-34_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.12&#160;&#160;CanTp_SetSTmin&#160;</b><br/>
<b>Prototype&#160;<br/></b>uint8&#160;<b>CanTp_SetSTmin&#160;</b>( PduIdType CanTpRxSduId, uint8 CanTpSTmin )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
ID of CAN N-SDU for&#160;which the new value shall be set&#160;<br/>
CanTpSTmin&#160;<br/>
new value for STmin&#160;<br/>
<b>&#160;Return code&#160;</b><br/>
STmin&#160;<br/>
Either the new (valid) value or, in case&#160;of an invalid new value the previously&#160;<br/>set value.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to set&#160;a new value for STmin for&#160;the given NSdu-Id.&#160;The new value is used&#160;for the FCs&#160;<br/>to be transmitted for each newly started reception until&#160;ECU reset.&#160;After power on&#160;the statically configured&#160;<br/>default values&#160;are&#160;restored and used again until a new dynamic&#160;change appears.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The dynamic&#160;setting of the STmin time is optional&#160;and can be configured in the generation tool&#160;<br/>
(CANTP_ENABLE_EXT_API_STMIN ==&#160;STD_ON/STD_OFF).&#160;The default is STD_OFF.&#160;<br/>
<b>&gt;&#160;&#160;</b>If the &#34;NSdu-Id Remapping&#34;&#160;- feature (see<a href="TechnicalReference_Asr_CanTps.html#55">&#160;6.2.1.1) is e</a>nabled&#160;then the&#160;'CanTpRxSduId' parameter must&#160;<br/>
contain the NSdu-Id remapped by the user. Otherwise&#160;the internally&#160;generated NSdu-Id number is used&#160;<br/>here&#160;(this internally generated NSdu-Id number&#160;is provided to the user as a&#160;pre-processor&#160;constant&#160;<br/>within the generated&#160;CanTp_Cfg.h file).&#160;<br/>
Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Interrupt or task&#160;context&#160;<br/>
Table 5-12&#160;&#160;&#160;CanTp_SetSTmin&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
34&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-35_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.13&#160;&#160;CanTp_SetBS&#160;</b><br/>
<b>Prototype&#160;<br/></b>uint8&#160;<b>CanTp_SetBS&#160;</b>( PduIdType CanTpRxSduId, uint8 CanTpBS )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
ID of CAN N-SDU for&#160;which the new value shall be set&#160;<br/>
CanTpBS&#160;<br/>
new value for BS&#160;<br/>
<b>&#160;Return code&#160;</b><br/>
BS&#160;<br/>
Either the new (valid) value or, in case&#160;of an invalid new value the previously&#160;<br/>set value.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to set&#160;a new value for BS for the&#160;given NSdu-Id.&#160;The new value is used for the FCs to&#160;<br/>be transmitted for each newly started reception until&#160;ECU reset.&#160;After power on&#160;the statically configured&#160;<br/>default values&#160;are&#160;restored and used again until a new dynamic&#160;change appears.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The dynamic&#160;setting of the blocksize is optional&#160;and can be configured in the generation tool&#160;<br/>
(CANTP_ENABLE_EXT_API_BS ==&#160;STD_ON/STD_OFF).&#160;The default is STD_OFF.&#160;<br/>
<b>&gt;&#160;&#160;</b>If the “NSdu-Id&#160;Remapping”&#160;- feature (see<a href="TechnicalReference_Asr_CanTps.html#55">&#160;6.2.1.1) is e</a>nabled&#160;then the&#160;'CanTpRxSduId' parameter must&#160;<br/>
contain the NSdu-Id remapped by the user. Otherwise&#160;the internally&#160;generated NSdu-Id number is used&#160;<br/>here&#160;(this internally generated NSdu-Id number&#160;is provided to the user as a&#160;pre-processor &#160;constant &#160;<br/>within the generated&#160;CanTp_Cfg.h file).&#160;<br/>
Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Interrupt or task&#160;context&#160;<br/>
Table 5-13&#160;&#160;&#160;CanTp_SetBS&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
35&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-36_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.14&#160;&#160;CanTp_ChangeParameterRequest&#160;</b><br/>
<b>Prototype&#160;<br/></b>uint8&#160;<b>CanTp_ChangeParameterRequest&#160;</b>( PduIdType CanTpRxSduId, &#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;TPParameterType Parameter, &#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;uint16 Value )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
ID of CAN N-SDU for&#160;which the new value shall be set&#160;<br/>
Parameter&#160;<br/>
The parameter (either STmin or BS) for which a new value shall be&#160;set&#160;<br/>
Value&#160;<br/>
The new value for the selected ‘Parameter’&#160;<br/>
<b>&#160;Return code&#160;</b><br/>
E_OK&#160;<br/>
If the value could be&#160;changed.&#160;<br/>
E_NOT_OK&#160;<br/>
If the value could not be&#160;changed. &#160;<br/>
Possible errors are: Either&#160;the reception&#160;for this N-SDU is busy or one or more&#160;<br/>of the parameters are erroneous (wrong&#160;id, wrong type, wrong value).&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to set&#160;a new value for the given&#160;Parameter (STmin or BS) for the given&#160;NSdu-Id.&#160;The&#160;<br/>new value is&#160;used&#160;for the&#160;FCs to be transmitted for each newly started reception&#160;until ECU reset.&#160;After&#160;<br/>power on the&#160;statically configured&#160;default&#160;values&#160;are restored and used again until&#160;a new dynamic change&#160;<br/>appears.&#160;<br/>Note: For each call of this&#160;API a dedicated call of the&#160;“PduR_CanTpChangeParameterConfirmation”&#160;<br/>callout function is accomplished which delivers the belonging&#160;notification result for the&#160;requested&#160;<br/>p<a href="TechnicalReference_Asr_CanTps.html#51">arameter change (see&#160;5.4.4.4).&#160;</a>This confirmation callout function is called from task level during&#160;<br/>the next task cycle.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The dynamic&#160;setting of the parameters is&#160;optional&#160;and can be configured in the generation tool&#160;<br/>
(CANTP_ENABLE_CHANGE_PARAM&#160;== STD_ON/STD_OFF).&#160;The default is&#160;STD_OFF.&#160;<br/>
<b>&gt;&#160;&#160;</b>It is not permitted to call this&#160;API function&#160;several &#160;times consecutively before a belonging&#160;&#160;<br/>
“PduR_CanTpChangeParameterConfirmation”&#160;callout appeared.&#160;The result of the parameter change&#160;<br/>always&#160;has to be awaited in the confirmation function&#160;before another change request is performed.&#160;<br/>
<b>&gt;&#160;&#160;</b>Do not call this&#160;API function&#160;within the “PduR_CanTpChangeParameterConfirmation” callout&#160;function.&#160;A&#160;<br/>
deadlock situation can appear if the confirmation&#160;callout is not finished yet but the next parameter&#160;<br/>change is&#160;already requested.&#160;<br/>
<b>&gt;&#160;&#160;</b>Available since version 1.15.00&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Task context&#160;<br/>
Table 5-14&#160;&#160;&#160;CanTp_ChangeParamRequest&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
36&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-37_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.1.15&#160;&#160;CanTp_ReadParameterRequest&#160;</b><br/>
<b>Prototype&#160;<br/></b>uint8&#160;<b>CanTp_ReadParameterRequest&#160;</b>( PduIdType CanTpRxSduId, &#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;TPParameterType Parameter, &#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;uint16* Value )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
ID of CAN N-SDU for&#160;which the new value shall be set&#160;<br/>
Parameter&#160;<br/>
The parameter (either STmin or BS) which&#160;shall be read&#160;<br/>
Value&#160;<br/>
The value from&#160;the selected&#160;‘Parameter’&#160;<br/>
<b>&#160;Return code&#160;</b><br/>
E_OK&#160;<br/>
If the value could be read.&#160;<br/>
E_NOT_OK&#160;<br/>
If the value could not be read. &#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;used to read the current Value for the&#160;given Parameter (STmin&#160;or&#160;BS) for the given NSdu-Id.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The reading&#160;of the parameters is&#160;optional and&#160;can be&#160;configured&#160;in the generation tool&#160;<br/>
(CANTP_ENABLE_CHANGE_PARAM&#160;== STD_ON/STD_OFF).&#160;The default is&#160;STD_OFF.&#160;<br/>
Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Task context&#160;<br/>
Table 5-15&#160;&#160;&#160;CanTp_ReadParamRequest&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
37&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-38_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.2&#160;&#160;Services used by&#160;CANTP&#160;<br/></b>In the following table services provided&#160;by other components, which are used by the&#160;<br/>CANTP&#160;are listed. For details&#160;about prototype and functionality&#160;refer to the documentation&#160;<br/>of the providing component.&#160;<br/>&#160;<br/>
<b>Component&#160;</b><br/>
<b>API&#160;</b><br/>
DET Det_ReportError&#160;<br/>DEM Dem_SetEventStatus&#160;<br/>CANIF CanIf_Transmit,&#160;<br/>
CanIf_CancelTransmit&#160;<br/>
SCHM Tp_AsrTpCan_EnterCritical,&#160;<br/>
Tp_AsrTpCan_LeaveCritical&#160;<br/>
ECUM&#160;<br/>
EcuM_GeneratorCompatibilityError (see [9])&#160;<br/>
Table 5-16&#160;&#160;&#160;Services used by the CANTP&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
38&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-39_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.3&#160;&#160;Callback Functions&#160;<br/></b>This chapter describes the callback functions that are implemented&#160;by the CANTP&#160;and can&#160;<br/>be invoked by other modules.&#160;The prototypes of&#160;the callback functions&#160;are provided in the&#160;<br/>header file CanTp_Cbk.h by the CANTP.&#160;<br/>&#160;<br/>
<b>5.3.1&#160;&#160;CanTp_RxIndication&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_RxIndication</b>&#160;( PduIdType CanTpRxPduId,&#160;<br/>
const PduInfoType* CanTpRxPduPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxPduId&#160;<br/>
ID of CAN N-PDU that has been received. Range: 0..(maximum number of &#160;N-<br/>PDU IDs received )– 1.&#160;<br/>
&#160;<br/>
Basic information about a&#160;PDU of any type:&#160;<br/>
typedef struct &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;<br/>
{&#160;<br/>
&#160; uint8 &#160; &#160; &#160; &#160; &#160;*SduDataPtr;&#160;<br/>
&#160; PduLengthType &#160;SduLength;&#160;<br/>
} PduInfoType;&#160;<br/>
CanTpRxPduPtr &#160;<br/>
Indicator of structure&#160;with received&#160;N-SDU (payload) and data length.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;is called by the CAN Interface after a successful&#160;reception of a Rx CAN N-PDU.&#160;<br/>
This&#160;callback service is&#160;called by the Can Interface and is implemented&#160;by the CANTP.&#160;It will be called in&#160;<br/>case of a Rx indication of the CAN driver.&#160;The data will be copied by&#160;the CANTP&#160;via the PDU structure&#160;<br/>PduInfoType.&#160;In this case the N-PDU buffers are not global and are therefore distributed&#160;in the&#160;<br/>corresponding&#160;CAN&#160;Transport Layer.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>--&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;may be called if an interrupt&#160;occurs&#160;(from the CAN&#160;receive interrupt).&#160;<br/>
Table 5-17&#160;&#160;&#160;CanTp_RxIndication&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
39&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-40_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.3.2&#160;&#160;CanTp_TxConfirmation&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_TxConfirmation</b>&#160;( PduIdType CanTpTxPduId )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxPduId&#160;<br/>
ID of CAN N-PDU that has been transmitted.&#160;<br/>
Range: 0..(maximum number of &#160;N-PDU IDs transmitted )– 1&#160;<br/>
CanTpRxPduPtr &#160;<br/>
Indicator of structure&#160;with received&#160;N-SDU (payload) and data length.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;is called by the CAN Interface after the&#160;TP&#160;related CAN Frame (SF,&#160;FF, CF, FC) has been&#160;<br/>transmitted through the CAN network.&#160;All transmitted&#160;CAN frames&#160;belonging to the CAN&#160;Transport Layer&#160;<br/>will be confirmed by this function.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>--&#160;<br/>Expected Caller Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;may be called if an interrupt occurs (from the CAN transmit interrupt).&#160;<br/>
Table 5-18&#160;&#160;&#160;CanTp_TxConfirmation&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
40&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-41_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-41_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4&#160;&#160;Configurable Interfaces&#160;<br/></b>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Please take&#160;care of the&#160;AUTOSAR&#160;Release Version.&#160;<br/>
<b>&#160;&#160;</b>In Release&#160;3 another set of PduR&#160;API Callout Functions&#160;is specified than in the&#160;<br/>
Release 4 version. &#160;<br/>Check for the availability by considering the version information in the function&#160;<br/>description&#160;below&#160;!&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>5.4.1&#160;&#160;Notifications&#160;</b><br/>
The CANTP&#160;does not define any notifications.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
41&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-42_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.2&#160;&#160;Callout Functions&#160;<br/></b>At its configurable interfaces the CANTP&#160;defines callout functions.&#160;The declarations of the&#160;<br/>callout functions are provided by&#160;the BSW module, i.e. the CANTP.&#160;It is the integrator's&#160;<br/>task to provide the corresponding function definitions.&#160;The definitions of the callouts can be&#160;<br/>adjusted to the system's needs.&#160;The CANTP&#160;callout function declarations are described in&#160;<br/>the following tables:&#160;<br/>&#160;<br/>
<b>5.4.2.1&#160;</b><br/>
<b>PduR_CanTpRxIndication&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_CanTpRxIndication</b>&#160;( PduIdType CanTpRxPduId,&#160;<br/>
NotifResultType Result )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxPduId&#160;<br/>
ID of CAN N-PDU that has been received. &#160;<br/>
Range: 0..(maximum number of N-PDU IDs which may be received&#160;by CAN&#160;<br/>TP) - 1.&#160;<br/>
Result&#160;<br/>
Result of the&#160;TP&#160;reception:&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_OK&#160;&#160;<br/>
&#160;in case&#160;TP&#160;reception completed successfully.&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_NOT_OK&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_TIMEOUT_A&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_TIMEOUT_Cr&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_WRONG_SN&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_UNEXP_PDU&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_NO_BUFFER &#160; &#160;<br/>
&#160;in case&#160;TP&#160;reception did not complete&#160;successfully.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;is called by the CAN&#160;TP.&#160;<br/>
<b>&gt;&#160;&#160;</b>with Result =&#160;NTFRSLT_OK&#160;after all CAN&#160;TP&#160;data has successfully&#160;been received (i.e. at the very end&#160;<br/>
of the segmented&#160;TP&#160;receive cycle or&#160;after reception of an unsegemented N-PDU).&#160;<br/>
<b>&gt;&#160;&#160;</b>with Result != NTFRSLT_OK&#160;if an error&#160;(e.g. timeout) occurred during the&#160;TP&#160;reception.&#160;This enables&#160;<br/>
unlocking of the receive buffer. It is undefined which&#160;part&#160;of the buffer contains&#160;valid data in this case.&#160;<br/>
Note: Since &#160;AUTOSAR&#160;Release 3.0 (which&#160;corresponds&#160;to CANTP&#160;version 01.07.00) after a&#160;reception is&#160;<br/>completed successfully by calling PduR_CanTpRxIndication, the CANTP&#160;calls&#160;the DEM with EventId=&#160;<br/>CANTP_E_COM (see also&#160;<a href="TechnicalReference_Asr_CanTps.html#19">3.5.2), EventS</a>tatus=DEM_EVENT_STATUS_PREPASSED. If&#160;the reception was&#160;<br/>aborted (e.g.&#160;timeout), the CANTP&#160;calls&#160;the&#160;DEM with&#160;EventId= CANTP_E_COM&#160;(see also&#160;<a href="TechnicalReference_Asr_CanTps.html#19">3.5.2),&#160;<br/></a>EventStatus=DEM_EVENT_STATUS_PREFAILED.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Used to enable unlocking of&#160;the receive&#160;buffer.&#160;<br/>Call Context&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
42&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-43_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-43_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Care must be&#160;taken not to use OS&#160;calls in this&#160;callout function&#160;because the&#160;callout function can&#160;<br/>
<b>&#160;&#160;</b>be called within critical sections. If so, OS calls&#160;used&#160;in this context will usually lead to an OS&#160;<br/>
error indication&#160;(e.g. the OS&#160;error hook function&#160;is called and the ECU is&#160;blocked until a&#160;<br/>watchdog reset).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Table 5-19&#160;&#160;&#160;PduR_CanTpRxIndication&#160;<br/>
<b>5.4.2.2&#160;</b><br/>
<b>PduR_CanTpTxConfirmation&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_CanTpTxConfirmation</b>&#160;( PduIdType CanTpTxPduId,&#160;<br/>
NotifResultType Result )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxPduId&#160;<br/>
ID of CAN N-PDU that has been transmitted.&#160;<br/>
Range: 0..(maximum number of N-PDU IDs which may be transmitted by CAN&#160;<br/>TP) - 1.&#160;<br/>
Result&#160;<br/>
Result of the&#160;TP&#160;transmission:&#160;<br/>
<b>&gt;&#160;&#160;</b>&#160;NTFRSLT_OK&#160;&#160;<br/>
&#160;in case&#160;TP&#160;transmission&#160;completed&#160;successfully.&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_NOT_OK, &#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_TIMEOUT_A,&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_TIMEOUT_Bs,&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_INVALID_FS,&#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_WFT_OVRN, &#160;<br/>
<b>&gt;&#160;&#160;</b>NTFRSLT_E_NO_BUFFER &#160;<br/>
<b>&gt;&#160;&#160;</b>&#160;in case&#160;TP&#160;transmission did not complete successfully.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;is called by the CAN&#160;Transport Protocol:&#160;<br/>
<b>&gt;&#160;&#160;</b>with Result =&#160;NTFRSLT_OK&#160;after all CAN&#160;TP&#160;data has successfully&#160;been transmitted, i.e. at&#160;the very&#160;<br/>
end of the segmented&#160;TP&#160;transmission cycle.&#160;This is&#160;normally done&#160;within the CAN&#160;Tx Confirmation&#160;<br/>interrupt.&#160;<br/>
<b>&gt;&#160;&#160;</b>with Result != NTFRSLT_OK&#160;if an error&#160;(e.g. timeout) occurred during the&#160;TP&#160;transmission.&#160;This enables&#160;<br/>
unlocking of the transmit buffer.&#160;<br/>
Note: Since &#160;AUTOSAR&#160;Release 3.0 (which&#160;corresponds&#160;to CantP&#160;version 01.07.00) after a transmit is&#160;<br/>completed successfully by&#160;calling PduR_CanTpTxConfirmation, the CANTP&#160;calls the DEM with EventId=&#160;<br/>CANTP_E_COM (see also&#160;<a href="TechnicalReference_Asr_CanTps.html#19">3.5.2), EventS</a>tatus=DEM_EVENT_STATUS_PREPASSED. If&#160;the transmit was&#160;<br/>aborted (e.g.&#160;timeout), the CANTP&#160;calls&#160;the&#160;DEM with&#160;EventId= CANTP_E_COM&#160;(see also&#160;<a href="TechnicalReference_Asr_CanTps.html#19">3.5.2),&#160;<br/></a>EventStatus=DEM_EVENT_STATUS_PREFAILED.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
43&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-44_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-44_2.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Used to enable unlocking of&#160;the transmit buffer.&#160;<br/>Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context (e.g. from CAN transmit interrupt).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Care must be&#160;taken not to use OS&#160;calls in this&#160;callout function&#160;because the&#160;callout function can&#160;<br/>
<b>&#160;&#160;</b>be called within critical sections. If so, OS calls&#160;used&#160;in this context will usually lead to an OS&#160;<br/>
error indication&#160;(e.g. the OS&#160;error hook function&#160;is called and the ECU is&#160;blocked until a&#160;<br/>watchdog reset).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Table 5-20&#160;&#160;&#160;PduR_CanTpTxConfirmation&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
44&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-45_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.3&#160;&#160;Callout Functions (until AUTOSAR Release 3)&#160;<br/></b>The following functions are provided for the&#160;PduR API&#160;defined&#160;until&#160;AUTOSAR Release 3.&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#48">Please check chapter&#160;5.4.4 for the Releas</a>e 3&#160;API.&#160;<br/>
<b>5.4.3.1&#160;</b><br/>
<b>PduR_CanTpProvideRxBuffer&#160;</b><br/>
<b>&#160; &#160;&#160; &#160;(until AUTOSAR Release 3)&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_CanTpProvideRxBuffer</b>&#160;( PduIdType CanTpRxPduId,&#160;<br/>
PduLengthType TpSduLength,&#160;<br/>PduInfoType **PduInfoPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxPduId&#160;<br/>
ID of CAN N-PDU that shall be received. Range: 0..(maximum number of N-<br/>PDU IDs which may be received by CAN&#160;TP) - 1.&#160;<br/>
TpSduLength&#160;<br/>
This length identifies the overall number of bytes to be received.&#160;This&#160;<br/>parameter will&#160;not be changed on&#160;subsequent calls of&#160;this service requesting a&#160;<br/>new buffer for the same&#160;CanTpRxPduId.&#160;The length&#160;will be greater&#160;than zero.&#160;<br/>
PduInfoPtr&#160;<br/>
Pointer to pointer to PduInfoStructure containing&#160;SDU data pointer&#160;and SDU&#160;<br/>length of a receive buffer.&#160;If the return value is not equal to BUFREQ_OK,&#160;<br/>PduInfoPtr is&#160;undefined and shall not be&#160;used.&#160;<br/>
<b>Return code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_OK Buffer request accomplished successfully&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_BUSY&#160;Currently no buffer available&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_OVFL&#160;Receiver is not able to receive number of&#160;<br/>
TpSduLength&#160;bytes; no buffer provided.&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_NOT_OK Buffer request not successful, no buffer provided.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service is&#160;called by the CAN&#160;TP&#160;for requesting a&#160;new&#160;buffer (pointer to a PduInfoStructure containing&#160;a&#160;<br/>pointer to a SDU buffer and the buffer length)&#160;for the&#160;CAN&#160;TP&#160;to fill in the received data.&#160;<br/>
The length of&#160;the buffer does not need to be in the length of the expected SDU.&#160;If the returned&#160;buffer length&#160;<br/>is smaller than&#160;the expected length, the receiver&#160;will be&#160;requested via a further&#160;call of this service to provide&#160;<br/>another buffer after the current buffer has&#160;been filled up with data.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>By this service the receiver (e.g. DCM) is&#160;also informed implicitly about a first frame reception or a single&#160;<br/>
frame reception.&#160;<br/>
<b>&gt;&#160;&#160;</b>After returning a valid buffer,&#160;the receiver&#160;must not access this buffer unless:&#160;<br/>
- it has been requested to provide a new&#160;buffer for the&#160;same&#160;CanTpRxPduId, or&#160;<br/>- it has been notified (via&#160;PduR_CanTpRxIndication) about the&#160;successful reception (indication), &#160;or&#160;<br/>- it has been notified (via&#160;PduR_CanTpRxIndication) that the reception was aborted&#160;(error&#160;<br/>
indication). &#160;&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>When&#160;filling the provided buffer, the CAN&#160;TP&#160;will also&#160;set the length information contained in&#160;<br/>
*PduInfoPtr&#160;to the number of bytes that are valid in&#160;this buffer.&#160;<br/>
Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context.&#160;<br/>
Table 5-21&#160;&#160;&#160;PduR_CanTpProvideRxBuffer&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
45&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-46_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.3.2&#160;</b><br/>
<b>PduR_CanTpProvideTxBuffer&#160;</b><br/>
<b>&#160; &#160;&#160; &#160;(until AUTOSAR Release 3)&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_CanTpProvideTxBuffer</b>&#160;( PduIdType &#160; CanTpTxPduId,&#160;<br/>
PduInfoType **PduInfoPtr,&#160;<br/>uint16 &#160; &#160; &#160;Length )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxPduId&#160;<br/>
ID of CAN N-PDU to be transmitted&#160;<br/>
Range: 0..(maximum number of N-PDU IDs which may be transmitted by CAN&#160;<br/>TP) – 1.&#160;<br/>
PduInfoPtr&#160;<br/>
Pointer to pointer to PduInfoStructure containing&#160;SDU data pointer&#160;and SDU&#160;<br/>length of a transmit buffer.&#160;This length must not be smaller than the&#160;length&#160;<br/>given by the ‘Length’&#160;parameter.&#160;If the return value of&#160;this callback&#160;is not equal&#160;<br/>to BUFREQ_OK then the&#160;PduInfoPtr&#160;is undefined&#160;and will not be used&#160;by&#160;<br/>
the CANTP.&#160;<br/>
&#160;<br/>
Basic information about a&#160;PDU of any type:&#160;<br/>
typedef struct &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;<br/>
{&#160;<br/>
&#160; uint8 &#160; &#160; &#160; &#160; &#160;*SduDataPtr;&#160;<br/>
&#160; PduLengthType &#160;SduLength;&#160;<br/>
} PduInfoType;&#160;<br/>
Length&#160;<br/>
Exact length of the requested transmit buffer, it shall not exceed&#160;the number of&#160;<br/>bytes still to be sent. Length may be zero, which indicates that the provided&#160;<br/>buffer can be&#160;of arbitrary size (larger than zero).&#160;<br/>
<b>Return code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_OK Buffer request accomplished successfully,&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_BUSY&#160;Currently no buffer of the requested&#160;size is available,&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_NOT_OK Buffer request not successful, no buffer provided.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;is called by the CAN&#160;TP&#160;for requesting&#160;a&#160;transmit buffer.&#160;The length of the buffer does not&#160;<br/>need to match the length of&#160;the complete&#160;N-SDU to be&#160;transmitted. It only needs to be as large as required&#160;<br/>by the caller&#160;of that service (Length).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>In case this&#160;service&#160;returns BUFREQ_E_NOT_OK the related transmit request is cancelled and the&#160;<br/>
CAN &#160;TP&#160;module finishes the request by providing a final confirmation indicating&#160;an error.&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>In case this service&#160;returns BUFREQ_E_BUSY&#160;the related transmit&#160;request is delayed and the&#160;CAN &#160;TP&#160;<br/>
module&#160;retries the buffer request.&#160;<br/>
Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;could be called if an interrupt&#160;occurs&#160;(from the CAN&#160;receive interrupt).&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
46&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-47_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
Table 5-22&#160;&#160;&#160;PduR_CanTpProvideTxBuffer&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
47&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-48_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.4&#160;&#160;Callout Functions (since AUTOSAR Release 4)&#160;<br/></b>The following functions are provided for the&#160;PduR API&#160;defined&#160;until&#160;AUTOSAR Release 4.&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#45">Please check chapter&#160;5.4.3 for the Releas</a>e 3&#160;API.&#160;<br/>&#160;<br/>&#160;<br/>
<b>5.4.4.1&#160;</b><br/>
<b>PduR_CanTpStartOfReception&#160;</b><br/>
<b>(since AUTOSAR Release 4)&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_CanTpStartOfReception</b>&#160;( PduIdType &#160; &#160; &#160;<br/>CanTpRxPduId,&#160;<br/>
PduLengthType &#160;TpSduLength,&#160;<br/>PduLengthType*&#160;<br/>RxBufferSizePtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxPduId&#160;<br/>
ID of CAN N-PDU that shall be received.&#160;<br/>
Range: 0..(maximum number of N-PDU IDs which may be received&#160;by CAN&#160;<br/>TP) - 1.&#160;<br/>
TpSduLength&#160;<br/>
Complete length of the&#160;TP&#160;I-PDU to be&#160;received.&#160;<br/>
RxBufferSizePtr&#160;<br/>
Currently available receive&#160;buffer in the upper layer.&#160;The available receive&#160;<br/>buffer might be smaller than&#160;TpSduLength depending&#160;on the buffering&#160;<br/>strategy.&#160;<br/>
<b>Return code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_OK: &#160;The connection is&#160;accepted and the&#160;RxBufferSizePtr&#160;<br/>
indicates the&#160;available receive buffer.&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_BUSY:&#160; Currently no buffer of&#160;the requested size is available.&#160;<br/>
The RxBufferSizePtr remains unchanged&#160;and the connection&#160;is rejected.&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_NOT_OK: &#160;The connection&#160;is rejected and the&#160;<br/>
RxBufferSizePtr remains unchanged.&#160;<br/>
<b>Functional Description&#160;</b><br/>
Called once to initialize the&#160;reception of any&#160;TP&#160;N-PDU.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>By this service the receiver (e.g. DCM) is&#160;also informed implicitly about a first frame reception or a single&#160;<br/>
frame reception.&#160;<br/>
Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context.&#160;<br/>
Table 5-23&#160;&#160;&#160;PduR_CanTpStartOfReception&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
48&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-49_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.4.2&#160;</b><br/>
<b>PduR_CanTpCopyRxData&#160;</b><br/>
<b>(since AUTOSAR Release 4)&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_CanTpCopyRxData</b>&#160;( PduIdType &#160; &#160; &#160;CanTpRxPduId,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;PduInfoType* &#160; PduInfoPtr,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;PduLengthType* RxBufferSizePtr&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxPduId&#160;<br/>
ID of CAN N-PDU that shall be received.&#160;<br/>
Range: 0..(maximum number of N-PDU IDs which may be received&#160;by CAN&#160;<br/>TP) - 1.&#160;<br/>
PduInfoPtr&#160;<br/>
Pointer to a PduInfoType&#160;which indicates the number of bytes to be copied&#160;<br/>(SduLength)&#160;and the location of the source data&#160;(SduDataPtr). An SduLength&#160;<br/>of zero is possible in order&#160;to poll the available&#160;receive buffer size.&#160;In this case&#160;<br/>no data are to be copied and SduDataPtr might be invalid.&#160;<br/>
RxBufferSizePtr&#160;<br/>
Remaining&#160;receive buffer after completion of this&#160;call.&#160;<br/>
<b>Return code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_OK: &#160;Data&#160;has&#160;been&#160;copied to the receive buffer completely as&#160;<br/>
requested.&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_NOT_OK: &#160;Data&#160;has not been copied. Request failed.&#160;<br/>
<b>Functional Description&#160;<br/></b>Called once upon reception&#160;of each segment. Within this&#160;call the received data is copied&#160;to the receive &#160;<br/>buffer.&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The function must only be&#160;called if the connection has&#160;been accepted by an initial call to&#160;<br/>
PduR_&lt;bus&gt;TpStartOfReception.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;API may only be called&#160;with an SduLength greater&#160;zero if the RxBufferSizePtr returned by&#160;the&#160;<br/>
previous&#160;API call indicates&#160;sufficient receive buffer (SduLength &lt;=&#160;RxBufferSizePtr).&#160;<br/>
Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context.&#160;<br/>
Table 5-24&#160;&#160;&#160;PduR_CanTpCopyRxData&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
49&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-50_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.4.3&#160;</b><br/>
<b>PduR_CanTpCopyTxData&#160;</b><br/>
<b>(since AUTOSAR Release 4)&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_CanTpCopyTxData</b>&#160;( PduIdType &#160; &#160; &#160;CanTpTxPduId,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;PduInfoType* &#160; PduInfoPtr,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;RetryInfoType* RetryInfoPtr,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;PduLengthType* TxDataCntPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxPduId&#160;<br/>
ID of CAN N-PDU that shall be transmitted.&#160;<br/>
Range: 0 .. (maximum number of N-PDU IDs&#160;which&#160;may be transmitted by&#160;<br/>CAN TP)&#160;-&#160;1.&#160;<br/>
PduInfoPtr&#160;<br/>
Pointer to a PduInfoType&#160;which indicates the number of bytes to be copied&#160;<br/>(SduLength)&#160;and the location where&#160;the data have to be copied to&#160;<br/>(SduDataPtr).&#160;<br/>An SduLength of zero is possible in order to poll the&#160;available transmit data&#160;<br/>count. In this case no data are to be&#160;copied and SduDataPtr might be invalid.&#160;<br/>
RetryInfoPtr&#160;<br/>
The CANTP does not support the retry feature. So, either a NULL_PTR can&#160;<br/>be provided or&#160;alternatively TpDataState&#160;can indicate&#160;TP_NORETRY. &#160;<br/>Both methods indicate that&#160;the copied transmit data can be removed from the&#160;<br/>buffer after it has been&#160;copied.&#160;<br/>
TxDataCntPtr&#160;<br/>
Remaining&#160;Tx&#160;data after completion of this call.&#160;<br/>
<b>Return code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_OK: &#160;Data&#160;has&#160;been&#160;copied to the transmit buffer completely as&#160;<br/>
requested.&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_BUSY:&#160;Request could not&#160;be fulfilled as&#160;the required amount&#160;<br/>
of&#160;Tx data is not available.&#160;The CANTP&#160;might retry later on. No data&#160;has&#160;<br/>been copied.&#160;<br/>
<b>&gt;&#160;&#160;</b>BUFREQ_E_NOT_OK: &#160;Data&#160;has not been copied. Request failed.&#160;<br/>
<b>Functional Description&#160;<br/></b>Called by the TP layer to retrieve the payload of a Tx&#160;TP I-PDU segment. The data are copied&#160;within this&#160;<br/>call.&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The already available&#160;Tx data can be queried by&#160;calling PduR_CanTpCopyTxData&#160;with an SduLength of&#160;<br/>
zero after the&#160;transmission&#160;request was&#160;received.&#160;<br/>
Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;might be called in interrupt&#160;context.&#160;<br/>
Table 5-25&#160;&#160;&#160;PduR_CanTpCopyTxData&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
50&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-51_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.4.4&#160;</b><br/>
<b>PduR_CanTpChangeParameterConfirmation&#160;&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_CanTpChangeParameterConfirmation</b>(PduIdType &#160; &#160; &#160;&#160;<br/>CanTpRxSduId,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;NotifResultType Result )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
ID of CAN N-SDU that was requested to&#160;be changed.&#160;<br/>
Range: 0 .. (maximum number of N-SDU IDs&#160;which&#160;may be received by CAN&#160;<br/>TP) - 1.&#160;<br/>
Result&#160;<br/>
Can be&#160;on of the following&#160;notifications:&#160;<br/>
- NTFRSLT_PARAMETER_OK:&#160;The&#160;parameter change request has been&#160;<br/>successfully executed.&#160;<br/>
- NTFRSLT_E_PARAMETER_NOT_OK:&#160;The request&#160;for the change&#160;of the&#160;<br/>parameter did not complete successfully.&#160;<br/>
- NTFRSLT_E_RX_ON:&#160;The parameter change request not executed&#160;<br/>successfully due to an ongoing reception.&#160;<br/>
- NTFRSLT_E_VALUE_NOT_OK:&#160;The&#160;parameter change request&#160;not&#160;<br/>executed successfully due to a wrong value.&#160;<br/>
<b>Return code&#160;</b><br/>
none&#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
Called once by&#160;the CANTP&#160;to indicate the result of a CanTp_ChangeParameterRequest call.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Available since version 1.15.00&#160;<br/>
<b>&gt;&#160;&#160;</b>In case of multiple change&#160;parameter requests appearing without awaiting the&#160;confirmation&#160;callout&#160;<br/>
function the&#160;confirmation&#160;callout function&#160;is called synchronously from within the&#160;<br/>CanTp_ChangeParameterRequest&#160;API function. &#160;<br/>
Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;called from the CANTP&#160;main function in task&#160;context.&#160;<br/>
Table 5-26&#160;&#160;&#160;PduR_CanTpChangeParameterConfirmation&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
51&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-52_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>5.4.4.5&#160;</b><br/>
<b>EcuM_GeneratorCompatibilityError&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>EcuM_GeneratorCompatibilityError</b>(uint16 &#160;CanTpModuleId,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; uint8 &#160; CanTpInstanceId )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpModuleId&#160;<br/>
Contains&#160;the CANTP_MODULE_ID (23&#160;hex) as defined by&#160;AUTOSAR.&#160;<br/>
CanTpInstanceId&#160;<br/>
For the CanTp only one instance is&#160;available, so this&#160;value is always zero.&#160;<br/>
<b>Return code&#160;</b><br/>
none&#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
Called once by&#160;the CANTP&#160;during the initialization phase to indicate&#160;one of the following&#160;possible errors:&#160;<br/>
-&#160;<br/>
Abort initialization as generator is&#160;not compatible,&#160;<br/>
-&#160;<br/>
Abort initialization as&#160;current configuration is&#160;not compatible with the pre-compile&#160;configuration&#160;<br/>
-&#160;<br/>
Abort initialization as&#160;current configuration is&#160;not compatible with the link-time&#160;configuration&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
None&#160;<br/>Call Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;is called in the CanTp_Init function during&#160;power on.&#160;<br/>
Table 5-27&#160;&#160;&#160;EcuM_GeneratorCompatibilityError&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
52&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-53_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>6&#160;&#160;Configuration&#160;</b><br/>
In the CANTP&#160;the attributes can be&#160;configured with the following methods:&#160;<br/>
<b>&gt;&#160;&#160;</b>Configuration in Database, for a detailed description see&#160;<a href="TechnicalReference_Asr_CanTps.html#53">6.1&#160;</a><br/>
<b>&gt;&#160;&#160;</b>Configuration in GENy&#160;for a detailed description see&#160;<a href="TechnicalReference_Asr_CanTps.html#54">6.2&#160;</a><br/>
<b>6.1&#160;&#160;Configuration in Data Base&#160;<br/></b>The following database attributes are utilized&#160;by the generation tool for the CANTP:&#160;<br/>
<b>Attribute Name&#160;&#160;Object&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
<b>Type&#160;</b><br/>
the&#160;<b>default value</b>&#160;is&#160;<br/>written in bold&#160;<br/>
CanTpFcFrameId Message&#160;Integer&#160;&#160;<b>0x FFFF FFFF&#160;</b><br/>
Required from&#160;large&#160;COM&#160;PDUs&#160;only.&#160;&#160;<br/>
0x 0000 0000&#160;…&#160;&#160;For all database messages with this&#160;<br/>
attribute the generation tool&#160;automatically&#160;<br/>
0x1FFF FFFF&#160;<br/>
creates a&#160;Rx-Sdu (for&#160;Tx messages) or a&#160;<br/>Tx-Sdu (for&#160;Rx messages).&#160;The message&#160;<br/>Identifier itself&#160;is used&#160;within&#160;these SDUs as&#160;<br/>CANTP_TXFC_NPDU_ID or&#160;<br/>CANTP_RXFC_NPDU_ID &#160;as&#160;<br/>corresponding&#160;Flow-Control message&#160;<br/>identifier.&#160;<br/>
Only evaluated for messages with&#160;DLC &gt; 8.&#160;<br/>
CanTpBs&#160;<br/>
Message Integer&#160;&#160;<b>0x00 &#160;</b><br/>
Required from&#160;large&#160;COM&#160;PDUs&#160;only.&#160;&#160;<br/>
… 0xFF&#160;<br/>
Number of consecutive frames (blocksize)&#160;<br/>to be received&#160;without intermittent flow&#160;<br/>control frames. &#160;<br/>
Only evaluated for messages with&#160;DLC &gt; 8.&#160;<br/>
CanTpSTmin&#160;<br/>
Message Integer&#160;&#160;<b>0x00&#160;</b><br/>
Required from&#160;large&#160;COM&#160;PDUs&#160;only.&#160;&#160;<br/>
&#160;…0x7F&#160;<br/>
Minimum time&#160;distance between two&#160;<br/>messages to&#160;be received by&#160;the CANTP.&#160;<br/>
0xF1 …0xF9&#160;<br/>
Only evaluated for messages with&#160;DLC &gt; 8.&#160;<br/>
Table 6-1&#160;&#160;&#160;Data&#160;base attributes&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
53&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-54_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-54_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-54_3.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
Example for an Rx message:&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
<b>6.2&#160;&#160;Configuration with GENy&#160;<br/></b>This section describes how to configure CANTP&#160;with the help of the configuration tool&#160;<br/>GENy. Some general configuration aspects&#160;like the configuration variant, DEM and or DET&#160;<br/>usage or customer specific optimization requirements are chosen in first step&#160;prior to the&#160;<br/>configuration of the attributes&#160;of each single&#160;Rx/Tx- NSdu. &#160;<br/>To&#160;use the CANTP&#160;layer the component must&#160;be enabled in the component selection&#160;<br/>dialog of the system configuration as shown in the following screenshot:&#160;<br/>
&#160;<br/>
Typically,&#160;beside the CAN Driver itself for&#160;a physical bus&#160;access, the CANTP&#160;is surrounded&#160;<br/>by the CanIf on the lower layer and the PduR on the upper layer side. &#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
54&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-55_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>6.2.1&#160;&#160;Component Configuration&#160;</b><br/>
<b>6.2.1.1&#160;</b><br/>
<b>General Parameters&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
Configuration&#160;Variant&#160;&#160;enumeration&#160;&#160;customer&#160;<br/>
Enter the configuration method to be used - either&#160;<br/>
specific&#160;pre-&#160;<br/>
precompile or postbuild.&#160;A&#160;link-time&#160;configuration&#160;<br/>
configuration&#160;&#160;variant is not&#160;specified for&#160;CANTP&#160;(see<a href="TechnicalReference_Asr_CanTps.html#4">&#160;[1]).&#160;</a><br/>
CanTp Main&#160;<br/>
uint8&#160;<br/>
<b>10 &#160;</b><br/>
This&#160;Task&#160;Cycle determines&#160;the time period for the&#160;<br/>
Function Period&#160;<br/>
CanTp_MainFunction scheduling (as milliseconds).<br/>
CheckCanTp&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Enable the CanTp_GetVersionInfo()&#160;API&#160;function.&#160;<br/>
VersionInfoApi&#160;<br/>
OFF&#160;<br/>
CanTpDevError&#160;<br/>
boolean ON&#160;<br/>
Enable the detection and reporting&#160;of development&#160;<br/>
Detect&#160;<br/>
<b>OFF&#160;</b><br/>
errors via DET.&#160;(DET&#160;has to&#160;be available in the&#160;<br/>system).&#160;<br/>
Production Error&#160;<br/>
boolean ON&#160;<br/>
Enable the detection and&#160;reporting&#160;of production&#160;<br/>
Detection&#160;<br/>
<b>OFF&#160;</b><br/>
errors via DEM. (DEM has to be available in the&#160;<br/>system).&#160;<br/>
User Config&#160;File&#160;&#160;&#160;<br/>
string&#160;<br/>
<b>NULL&#160;</b><br/>
Use a user configuration file.&#160;The content of this&#160;<br/>file can be used to define specific&#160;precompile&#160;<br/>switches&#160;not&#160;available otherwise.&#160;<br/>
Support frame&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Enable padding activation.&#160;<br/>
padding&#160;<br/>
OFF&#160;<br/>
Support RxIndication&#160;&#160;boolean&#160;<br/>
<b>ON&#160;</b><br/>
Support the function CanTp_RxIndication (using a&#160;<br/>
OFF&#160;<br/>
pre-compile macro)&#160;<br/>
Support&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Support the function CanTp_TxConfirmation (using&#160;<br/>
TxConfirmation&#160;<br/>
OFF&#160;<br/>
a pre-compile&#160;macro).&#160;<br/>
Support-&#160;<br/>
boolean&#160;<br/>
<b>ON &#160;</b><br/>
Either the usage of STANDARD and/or&#160;<br/>
StandardAddressing,&#160;<br/>
OFF&#160;<br/>
EXTENDED&#160;and/or MIXED-11&#160;addressing can be&#160;<br/>
ExtendedAddressing&#160;<br/>
configured. If&#160;only one addressing type is required&#160;<br/>
Mixed11Addressing&#160;<br/>
for a project then resources can be saved by&#160;<br/>
Format&#160;<br/>
deselecting the other ones.&#160;<br/>
Use InitCfg pointer&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Enable the CanTp_Init&#160;API function with&#160;<br/>
<b>OFF&#160;</b><br/>
configuration pointer&#160;parameter usage (see&#160;<a href="TechnicalReference_Asr_CanTps.html#63">7.1).&#160;<br/></a>This option is usually pre-configured. It is set to&#160;<br/>enable but invisible by default.&#160;<br/>Optionally (non&#160;AUTOSAR) &#160;available feature for&#160;<br/>the parameterization&#160;of the CanTp_Init function&#160;<br/>call.&#160;This is&#160;only relevant for&#160;AUTOSAR 3. Since&#160;<br/>AUTOSAR 4&#160;this&#160;is&#160;covered by&#160;AUTOSAR itself.&#160;<br/>
Please note that the Multiple Configuration feature&#160;<br/>requires the usage of this configuration pointer.&#160;Via&#160;<br/>the configuration pointer&#160;the actual identity is,&#160;<br/>typically during power on, selected. &#160;<br/>
Module Start&#160;Address&#160;&#160;integer&#160;<br/>
<b>0&#160;</b><br/>
Enter the configuration&#160;structure&#160;start address.&#160;<br/>
CanTpMaxNum&#160;<br/>
integer&#160;<br/>
1&#160;<br/>
Defines the&#160;maximum number of different N-Sdu-<br/>Ids that can be&#160;received simultaneously via the&#160;<br/>
RxSdus&#160;<br/>
CanTp by this ECU.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
55&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-56_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
CanTpMaxNum&#160;<br/>
integer&#160;<br/>
1&#160;<br/>
Defines the&#160;maximum number of different N-Sdu-<br/>Ids that can be&#160;transmitted &#160;simultaneously via the&#160;<br/>
TxSdus&#160;<br/>
CanTp by this ECU.&#160;<br/>
CanTpMaxNum&#160;<br/>
integer&#160;<br/>
3&#160;<br/>
Defines the&#160;maximum for&#160;parameter&#160;<br/>'CanTpMaxNumRxChannels' that can be&#160;set&#160;<br/>
RxChannels_PbLimit<br/>
during post build configuration.&#160;This setting only&#160;<br/>
'&#160;<br/>
has an&#160;effect if&#160;<br/>
&#160;<br/>
&#34;CanTpDynamicChannelAssignment&#34; is enabled&#160;. &#160;<br/>
Please note that this value&#160;only serves&#160;as a&#160;<br/>reference value and&#160;cannot&#160;be modified. If&#160;the&#160;<br/>actual number&#160;of dynamic&#160;channels does&#160;not&#160;<br/>properly reflect the number&#160;of statically configured&#160;<br/>Sdus during a later postbuild phase then the user&#160;<br/>is warned against this&#160;conflict: “the &#160;<br/>'CanTpMaxNumRxChannels' attribute is&#160;not post-<br/>build capable”.&#160;<br/>
CanTpMaxNum&#160;<br/>
integer&#160;<br/>
3&#160;<br/>
Defines the&#160;maximum for&#160;parameter&#160;<br/>'CanTpMaxNumTxChannels' that can be&#160;set during&#160;<br/>
TxChannels_PbLimit'&#160;<br/>
post build&#160;configuration.&#160;This setting only has an&#160;<br/>
&#160;<br/>
effect if &#34;CanTpDynamicChannelAssignment&#34; is&#160;<br/>enabled.&#160;<br/>
Please note that this value&#160;only serves&#160;as a&#160;<br/>reference value and&#160;cannot&#160;be modified. If&#160;the&#160;<br/>actual number&#160;of dynamic&#160;channels does&#160;not&#160;<br/>properly reflect the number&#160;of statically configured&#160;<br/>Sdus during a later postbuild phase then the user&#160;<br/>is warned against this&#160;conflict: “the &#160;<br/>'CanTpMaxNumTxChannels' attribute is&#160;not post-<br/>build capable”.&#160;<br/>
CanTpTc &#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Preprocessor switch for enabling a &#160;Transmit&#160;<br/>Cancellation. By enabling this switch an&#160;ongoing&#160;<br/>
<b>OFF</b>&#160;<br/>
transmission request can be&#160;aborted using the &#160;<br/>CanTp_CancelTransmitRequest API.&#160;<br/>
CanTpTc&#160;<br/>
booelean ON<b>,&#160;</b><br/>
Switches&#160;upper layer notification of transmit&#160;<br/>cancellation&#160;ON or&#160;OFF.&#160;<br/>
NotifyAlways&#160;<br/>
<b>OFF&#160;</b><br/>
This additional non&#160;AUTOSAR switch is &#160;used for&#160;<br/>compatibility reasons.&#160;<br/>
In case there&#160;are upper layer modules (e.g. DCM)&#160;<br/>which require&#160;a final indication or confirmation, this&#160;<br/>switch may be&#160;used&#160;to hand a final negative&#160;<br/>notification&#160;<br/>(NTFRSLT_E_CANCELATION_NOT_OK) to the&#160;<br/>upper layer&#160;which has requested the&#160;cancellation&#160;<br/>instead of just stopping &#160;without further notification.&#160;<br/>
CanTpRc &#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Preprocessor switch for enabling a&#160;Receive&#160;<br/>Cancellation. By enabling this switch an&#160;ongoing&#160;<br/>
<b>OFF</b>&#160;<br/>
reception&#160;can&#160;be aborted using the &#160;<br/>CanTp_CancelReceiveRequest API.&#160;<br/>
CanTpRc booelean&#160;<br/>
ON<b>,&#160;</b><br/>
Switches&#160;upper layer notification of receive&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
56&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-57_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
NotifyAlways&#160;<br/>
<b>OFF&#160;</b><br/>
cancellation&#160;ON or&#160;OFF.&#160;<br/>
This additional non&#160;AUTOSAR switch is used for&#160;<br/>compatibility reasons.&#160;<br/>
In case there&#160;are upper layer modules (e.g. DCM)&#160;<br/>which require&#160;a final indication, this switch may be&#160;<br/>used&#160;to hand&#160;a final negative notification&#160;<br/>(NTFRSLT_E_CANCELATION_NOT_OK) to the&#160;<br/>upper layer&#160;which has requested the&#160;cancellation&#160;<br/>instead of just stopping &#160;without further notification.&#160;<br/>
Support Frame&#160;<br/>
boolean ON&#160;<br/>
Enable optional padding byte definition in case of&#160;<br/>
Padding pattern&#160;<br/>
padding is&#160;activated.&#160;<br/>
<b>OFF</b>&#160;<br/>
Frame Padding&#160;<br/>
uint8&#160;<br/>
0xAA&#160;<br/>
Define&#160;the padding pattern if&#160;“Support&#160;Frame&#160;<br/>
pattern&#160;<br/>
Padding” is enabled.&#160;<br/>
Enable Split&#160;<br/>
boolean ON&#160;<br/>
When&#160;selecting this optional feature then&#160;the&#160;<br/>
MainFunction&#160;<br/>
CanTp_MainFunction&#160;is split into two separate&#160;<br/>
<b>OFF</b>&#160;<br/>
Functions for the Rx and the&#160;Tx path,&#160;<br/>CanTp_MainFunctionRx and&#160;<br/>CanTp_MainFunction<a href="TechnicalReference_Asr_CanTps.html#33">Tx (see&#160;5.1.10,&#160;</a><a href="TechnicalReference_Asr_CanTps.html#34">5.1.12).&#160;<br/></a>These separate&#160;API functions are intended to be&#160;<br/>called instead&#160;of the CanTp_MainFunction&#160;to&#160;<br/>optimize the&#160;processing sequence of &#160;incoming&#160;<br/>requests&#160;(e.g.: receive a diagnostic request,&#160;<br/>process the&#160;request, transmit the response).&#160;<br/>
Enable Rx/Tx&#160;<br/>
boolean ON&#160;<br/>
When&#160;enabling this optional&#160;feature an additional&#160;<br/>
NSduId Remapping&#160;<br/>
entry for each&#160;Tx-NSdu is&#160;provided to the&#160;user&#160;<br/>
<b>OFF</b>&#160;<br/>
wherein a user specific&#160;NSdu-Id can be&#160;entered.&#160;<br/>On the Rx side&#160;the NSdu-Ids are determined by&#160;<br/>the PDUR.&#160;<br/>
If not selected&#160;then internally generated&#160;NSdu-Id&#160;<br/>number are used (and handed to the upper layers).<br/>
Via preconfiguration files the optional and OEM&#160;<br/>specific&#160;Wrapper functions CanTpWrapperTransmit&#160;<br/>and CanTpWrapper_CancelTransmitRequest can&#160;<br/>be enabled.&#160;These wrapper functions are&#160;<br/>parameterized with the remapped N-SDU-Ids&#160;<br/>instead of the internally generated&#160;IDs.&#160;Apart from&#160;<br/>that the&#160;API of&#160;the wrapper&#160;functions is equivalent&#160;<br/>to the&#160;AUTOSAR CanTp_Transmit respectively &#160;<br/>CanTp_CancelTransmitRequest&#160;API function (see&#160;<br/><a href="TechnicalReference_Asr_CanTps.html#28">5.1.6,&#160;</a><a href="TechnicalReference_Asr_CanTps.html#31">5.1.7).&#160;</a><br/>
Enable Extended&#160;API&#160;&#160;boolean ON&#160;<br/>
When&#160;enabling this optional&#160;feature then&#160;the Flow&#160;<br/>
BS/STmin&#160;<br/>
Control frame&#160;(FC) &#160;content for blocksize&#160;(BS) and&#160;<br/>
<b>OFF</b>&#160;<br/>
minimum separation time (STmin), which is&#160;<br/>responded to&#160;the sender upon reception of a First&#160;<br/>or Consecutive frame, can be modified during&#160;<br/>runtime.&#160;Therefore additional&#160;API functions are&#160;<br/>provided to set the FC content at any time of the&#160;<br/>execution.&#160;<br/>
CanTpChange booelean&#160;<br/>
ON<b>,&#160;</b><br/>
When&#160;switched on, the functions&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
57&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-58_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
ParameterReqApi&#160;<br/>
<b>OFF&#160;</b><br/>
&#34;CanTp_ChangeParameterRequest&#34; and&#160;<br/>&#34;CanTp_ReadParameterRequest&#34; are provided&#160;<br/>which can be&#160;used to change and read the values&#160;<br/>of the reception parameters CanTpBs and&#160;<br/>CanTpSTmin.&#160;<br/>
If switched&#160;on, the PduR module must provide the&#160;<br/>function&#160;<br/>&#34;PduR_CanTpChangeParameterConfirmation&#34;.&#160;<br/>
Select&#160;the&#160;API&#160;<br/>
boolean ON,&#160;<br/>
&#160;<br/>
If the Vector PduR is present then the PduR&#160;<br/>
towards the PduR to&#160;<br/>
provided&#160;API is used.&#160;<br/>
be used&#160;<br/>
<b>OFF&#160;</b><br/>
(CanTpAr40Complia<br/>
If no Vector PduR is&#160;present then this value must&#160;<br/>
ntPduRApi)&#160;<br/>
be preconfigured or&#160;enabled&#160;within CanTp.&#160;<br/>
Note:&#160;This&#160;is&#160;only relevant&#160;for&#160;AUTOSAR 3. When&#160;<br/>using an&#160;AUTOSAR 4 environment then the PduR&#160;<br/>API is&#160;always&#160;AUTOSAR 4 compliant.&#160;<br/>
Support Full Buffer&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
When&#160;the full buffer handling is disabled&#160;then only&#160;<br/>
handling (on Rx&#160;<br/>
OFF&#160;<br/>
the complete requested buffer size (no partial&#160;<br/>
and/or Tx-&#160;side)&#160;<br/>
buffer handling) is accepted&#160;from the CANTP,&#160;<br/>otherwise the&#160;connection&#160;is terminated after the&#160;<br/>“Provide(Rx/Tx)Buffer” request. Within&#160;AUTOSAR&#160;<br/>the buffer provision is handled highly dynamical.&#160;<br/>Repeated buffer provision&#160;calls to the application&#160;<br/>offer the opportunity to the application to deliver&#160;<br/>different sizes of application buffers that are&#160;<br/>temporarily available.&#160;<br/>
Single connection&#160;<br/>
boolean ON&#160;<br/>
When&#160;selecting this optimization then&#160;only two Rx-&#160;<br/>
optimization&#160;<br/>
<b>OFF&#160;</b><br/>
and one&#160;Tx-NSdu &#160;can be&#160;configured. The&#160;number&#160;<br/>of totally configurable connections is “1”&#160;since the&#160;<br/>second&#160;Rx-NSdu is only implemented&#160;as an&#160;<br/>additional so&#160;called “functional reception path” for&#160;<br/>diagnostic applications. Selecting this&#160;checkbox&#160;<br/>still keeps the&#160;relevant information applicable for&#160;<br/>postbuild processing in opposite to next&#160;topic&#160;<br/>“Single&#160;connection optimization precompile” (see&#160;<br/>below).&#160;<br/>
Single connection&#160;<br/>
boolean ON&#160;<br/>
When&#160;selecting this optimization then&#160;only two Rx-&#160;<br/>
optimization&#160;<br/>
<b>OFF&#160;</b><br/>
and one&#160;Tx-NSdu &#160;can be&#160;configured. The&#160;number&#160;<br/>
precompile&#160;<br/>
of totally configurable connections is “1”&#160;since the&#160;<br/>second&#160;Rx-NSdu is only implemented&#160;as an&#160;<br/>additional so&#160;called “functional reception path” for&#160;<br/>diagnostic applications. In addition the&#160;connection&#160;<br/>attributes are&#160;generated as&#160;precompile defines.&#160;<br/>Please note that this causes the unavailability of&#160;<br/>post-build functionality.&#160;The&#160;NSdu-attributes are&#160;<br/>contained in the component code and can not be&#160;<br/>modified without a re-compilation. Please not in&#160;<br/>addition that this causes&#160;also that Multiple&#160;<br/>Configuration&#160;functionality (see&#160;<a href="TechnicalReference_Asr_CanTps.html#61">6.2.3) i</a>s&#160;absent.&#160;<br/>
Support dynamic&#160;<br/>
boolean ON&#160;<br/>
For a given number&#160;of statically configured Rx/Tx-<br/>
channel assignment&#160;<br/>
<b>OFF&#160;</b><br/>
NSdus a maximum number of parallel available&#160;<br/>CANTP&#160;channel resources can be&#160;specified.&#160;This&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
58&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-59_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
maximum number defines how many connections&#160;<br/>can be&#160;active&#160;simultaneously.&#160; So the maximum&#160;<br/>number &#160;of simultaneously active Rx and&#160;Tx&#160;<br/>channels will&#160;be restricted&#160;when this feature is&#160;<br/>active. When&#160;this feature is&#160;disabled, each Rx/Tx-<br/>NSdu can be&#160;active at the same time.&#160;<br/>
CanTpMaxNum[Rx/T&#160;uint16&#160;<br/>
1/1&#160;<br/>
This is the maximum number of simultaneously&#160;<br/>
x]Channels&#160;<br/>
available&#160;channels. It’s only relevant if the&#160;<br/>“Dynamic&#160;Channel&#160;Assignment” optimization is&#160;<br/>selected. Please note that it is not allowed to&#160;<br/>specify a maximum channel&#160;number which is&#160;<br/>higher then the total number of available&#160;NSdus.&#160;<br/>
Table 6-2&#160;&#160;&#160;General parameters&#160;<br/>
<b>6.2.2&#160;&#160;Channel Configuration&#160;</b><br/>
<b>6.2.2.1&#160;</b><br/>
<b>Rx Parameters&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
CanTpRxNPdu&#160;<br/>
PduIdType&#160;<br/>
--&#160;<br/>
Select the CAN message to be used for&#160;this N-<br/>PDU reception.&#160;<br/>
CanTpTxFCNPdu&#160;<br/>
PduIdType&#160;<br/>
--&#160;<br/>
Select the CAN message to be used in&#160;case of FC&#160;<br/>responses&#160;for this&#160;N-PDU.&#160;<br/>
CanTpRxPadding&#160;<br/>
boolean&#160;<br/>
<b>ON &#160;</b><br/>
Enable padding. If so, all PDUs must be&#160;of length&#160;<br/>
Activation&#160;<br/>
8.&#160;<br/>
OFF&#160;<br/>
CanTpRxTaType enumeration&#160;<br/>
<b>CANTP_PHY&#160;</b>Select the communication&#160;type, either physical for&#160;<br/><b>SICAL,&#160;</b><br/>
1:1 connections or functional for 1:n connections.&#160;<br/>
CANTP_FUN<br/>CTIONAL&#160;&#160;<br/>
Addressing Format&#160;<br/>
enumeration&#160;&#160;<b>CANTP_STA</b><br/>
Select the addressing format. &#160;<br/>
<b>NDARD,&#160;</b><br/>
If extended addressing is&#160;used, matching&#160;<br/>
CANTP_EXT<br/>
Target/Source&#160;Addresses (see below) must be&#160;<br/>
ENDED, &#160;<br/>
defined too. &#160;<br/>
CANTP_MIX<br/>
If Mixed-11&#160;addressing is&#160;used, matching&#160;Address&#160;<br/>
ED11&#160;<br/>
Extension information (see&#160;below) must be defined&#160;<br/>too.&#160;<br/>
CanTpBs uint8&#160;<br/>
<b>8</b>&#160;<br/>
Enter the maximum Block&#160;size. Please&#160;note that&#160;<br/>this BS value can be&#160;adapted at runtime&#160;due to&#160;<br/>buffer availability.&#160;<br/>
CanTpSTmin&#160;uint8&#160;&#160;<b>20</b>&#160;<br/>
Enter the minimum time between two consecutive&#160;<br/>frames (milliseconds).&#160;<br/>
CanTpRxWftMax uint16&#160;<br/>
<b>15</b>&#160;<br/>
Enter the maximum number of Wait Frames that&#160;<br/>are consecutively received&#160;before an&#160;error&#160;<br/>notification is&#160;raised and the communication is&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
59&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-60_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
stopped for this&#160;N-SDU. &#160;&#160;<br/>
CanTpRxDl uint16&#160;<br/>
<b>8&#160;</b><br/>
The minimum&#160;Data&#160;Length&#160;Code&#160;is determined&#160;<br/>automatically. If padding is&#160;active, this must be 8. If&#160;<br/>padding is&#160;not active, a minimum size of&#160;1 is&#160;<br/>assumed.&#160;All messages&#160;with a length less than this&#160;<br/>Data Length&#160;Code are ignored.&#160;<br/>
CanTpNar uint16&#160;<br/>
<b>100&#160;</b><br/>
Enter the CAN confirmation&#160;timeout (milliseconds).&#160;<br/>
CanTpNbr uint16&#160;<br/>
<b>150&#160;</b><br/>
Enter the Flow&#160;Control timeout (milliseconds).&#160;<br/>
CanTpNcr uint16&#160;<br/>
<b>150&#160;</b><br/>
Enter the Consecutive Frame timeout&#160;<br/>(milliseconds).&#160;<br/>
CanTpNTa&#160;/&#160;<br/>
uint8&#160;<br/>
<b>0&#160;</b><br/>
Enter the&#160;Target&#160;Address in case of extended&#160;<br/>addressing&#160;format.&#160;<br/>
CanTpNAe&#160;<br/>
Enter the&#160;Address Extension in case of mixed-11&#160;<br/>addressing&#160;format. Please&#160;note that the parameter&#160;<br/>CanTpNAe&#160;does not exist in the BSWMD&#160;file,&#160;<br/>instead of &#160;CanTpNTa is used to store the address&#160;<br/>extension.&#160;<br/>
CanTpNSa uint8&#160;<br/>
<b>0&#160;</b><br/>
Enter the Source&#160;Address to be used for&#160;FC-<br/>responses for this N-PDU if&#160;extended addressing is&#160;<br/>selected.&#160;<br/>
Rx Upper Layer&#160;<br/>
PduIdType&#160;<br/>
--&#160;<br/>
This is the NSDU-ID which will be used for the&#160;<br/>
NSdu Id&#160;<br/>
upper layer&#160;communication&#160;in case of an&#160; enabled&#160;<br/>Rx/Tx NSduId remapping.&#160;<br/>
Table 6-3&#160;&#160;&#160;Rx parameters&#160;<br/>
<b>6.2.2.2&#160;</b><br/>
<b>Tx Parameters&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
CanTpTxNPdu&#160;<br/>
PduIdType&#160;<br/>
--&#160;<br/>
Select the CAN message to be used for&#160;this N-<br/>PDU transmission.&#160;<br/>
CanTpRxFCNPdu&#160;<br/>
PduIdType&#160;<br/>
--&#160;<br/>
Select the CAN message to be used in&#160;case of FC&#160;<br/>receptions&#160;for this&#160;N-PDU.&#160;<br/>
CanTpTxPadding&#160;<br/>
boolean&#160;<br/>
<b>ON &#160;</b><br/>
Enable padding. If so, all PDUs must be&#160;of length 8&#160;<br/>
Activation&#160;<br/>
(see<a href="TechnicalReference_Asr_CanTps.html#67">&#160;7.1.8 Li</a>mitations).&#160;<br/>
OFF&#160;<br/>
CanTpTxTaType enumeration&#160;<br/>
<b>CANTP_PHY&#160;</b>Select the communication&#160;type, either physical for&#160;<br/><b>SICAL,&#160;</b><br/>
1:1 connections or functional for 1:n connections.&#160;<br/>
CANTP_FUN<br/>CTIONAL&#160;&#160;<br/>
Addressing Format&#160;<br/>
enumeration&#160;&#160;<b>CANTP_STA</b><br/>
Select the addressing format. &#160;<br/>
<b>NDARD,&#160;</b><br/>
If extended addressing is&#160;used&#160;matching&#160;<br/>
CANTP_EXT<br/>
Target/Source&#160;Addresses (see below) must be&#160;<br/>
ENDED, &#160;<br/>
defined too. &#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
60&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-61_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
CANTP_MIX<br/>
If Mixed-11&#160;addressing is&#160;used&#160;then the&#160;belonging &#160;<br/>
ED11&#160;<br/>
Address Extension information (see below) must&#160;<br/>be defined&#160;too.&#160;<br/>
CanTpNas uint16&#160;<br/>
<b>100&#160;</b><br/>
Enter the CAN confirmation&#160;timeout (milliseconds).&#160;<br/>
CanTpNbs uint16&#160;<br/>
<b>150&#160;</b><br/>
Enter the Flow&#160;Control timeout (milliseconds).&#160;<br/>
CanTpNcs uint16&#160;<br/>
<b>150&#160;</b><br/>
Enter the Consecutive Frame timeout&#160;<br/>(milliseconds).&#160;<br/>
CanTpTxDl uint16&#160;<br/>
<b>8&#160;</b><br/>
The minimum&#160;Data&#160;Length&#160;Code&#160;is determined&#160;<br/>automatically. When&#160;padding is active this must be&#160;<br/>8. When&#160;padding is not active, a minimum size of 1&#160;<br/>is assumed.&#160;All messages with a length&#160;less than&#160;<br/>this Data&#160;Length Code&#160;are&#160;ignored.&#160;<br/>See also ‘<a href="TechnicalReference_Asr_CanTps.html#67">7.1.8 Limit</a>ations’&#160;!&#160;<br/>
CanTpTc uint8&#160;<br/>
<b>--&#160;</b><br/>
Select the onnection specific transmit cancellation.&#160;<br/>
CanTpNTa&#160;/&#160;<br/>
uint8&#160;<br/>
<b>0&#160;</b><br/>
Enter the&#160;Target&#160;Address in case of extended&#160;<br/>addressing&#160;format.&#160;<br/>
CanTpNAe&#160;<br/>
Enter the&#160;Address Extension in case of mixed-11&#160;<br/>addressing&#160;format. Please&#160;note that the parameter&#160;<br/>CanTpNAe&#160;does not exist in the BSWMD&#160;file,&#160;<br/>instead of &#160;CanTpNTa is used to store the address&#160;<br/>extension.&#160;<br/>
CanTpNSa uint8&#160;<br/>
<b>0&#160;</b><br/>
Enter the Source&#160;Address to be used for&#160;FC-<br/>receptions&#160;for this N-PDU if&#160;extended addressing&#160;<br/>format is selected.&#160;<br/>
Tx Upper Layer&#160;<br/>
PduIdType&#160;<br/>
--&#160;<br/>
Enter the NSDU-ID&#160;which shall be&#160;used&#160;for the&#160;<br/>
NSdu Id&#160;<br/>
upper layer&#160;communication.&#160;<br/>
Table 6-4&#160;&#160;&#160;Tx parameters&#160;<br/>
&#160;<br/>&#160;<br/>
<b>6.2.3&#160;&#160;Multiple Configuration&#160;<br/></b>Multiple ECUs are control units&#160;which are assembled several times within the CAN&#160;<br/>network using the identical software (e.g.: front seat left&#160;and right&#160;hand side). In this case&#160;<br/>the application has to decide at run-time which&#160;ECU is actually installed and has to set-up&#160;<br/>the communication parameters dynamically.&#160;This&#160;is typically done during system startup in&#160;<br/>the CanTp_Init function. &#160;<br/>The CanTp_Init is called for this purpose with an&#160;identity specific configuration &#160;pointer&#160;<br/>which select<a href="TechnicalReference_Asr_CanTps.html#24">s the actual identity (see&#160;5.1.2).&#160;<br/></a>&#160;<br/>Example for an ECU identity :&#160;<br/>Check the generated file CanTp_PBcfg.h&#160;for the belonging definitions: &#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
61&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-62_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
#define&#160;<b>CanTp_Config_Identity_0</b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; vCanTp_Cfg&#160;<br/>
#define&#160;<b>CanTp_Config_Identity_1</b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; vCanTp_Cfg_1&#160;<br/>
&#160; &#160;...&#160;<br/>
and then call the init function with the appropriate configuration&#160;pointer of the identity you&#160;&#160;&#160;<br/>are looking for:&#160;<br/>
CanTp_Init(&amp;CanTp_Config_Identity_X);&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.2.4&#160;&#160;Timing Constraints&#160;<br/></b>The CANTP&#160;needs&#160;all timings to be normalized on&#160;call cycles.&#160;Therefore&#160;all timings will be&#160;<br/>rounded up to the next&#160;integer&#160;multiple of call cycles.&#160;<br/>Since timers are set within interrupt context and decremented within task-context, some&#160;<br/>jitter may occur.&#160;However,&#160;this jitter does not exceed one call cycle.&#160;<br/>As for CANTP,&#160;the ‘Timings’&#160;are generally calculated with a jitter plus one call cycle, this&#160;<br/>means that the timing value is the first possible time after an event (e.g. timeout) can&#160;<br/>occur.&#160;<br/>CANTP&#160;uses the following algorithm for calculation:&#160;<br/><b>&gt;&#160;&#160;</b>timeValue = &#160;(requestedValue + (CallCycle-1)) / CallCycle &#160;+ 1&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
62&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-63_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>7&#160;&#160;AUTOSAR Standard Compliance&#160;</b><br/>
<b>7.1&#160;&#160;Extensions&#160;</b><br/>
<b>7.1.1&#160;&#160;Dynamically&#160;supported connection channels&#160;<br/></b>As opposed to CANTP289 “The number of&#160;connection channels&#160;is&#160;not directly&#160;<br/>configurable. It will be&#160;determined by the configuration tools during the&#160;configuration&#160;<br/>process, by analyzing the N-SDU/Channel routing table.” the number of dynamically&#160;<br/>supported connection channels is&#160;configurable within the generation tool.&#160;<br/>
<b>7.1.2&#160;&#160;AR4 Buffer handling&#160;<br/></b>As opposed to CANTP082: “If the function&#160;PduR_CanTpStartOfReception() returns&#160;<br/>BUFREQ_E_BUSY&#160;to the CanTp module, the CanTp module shall suspend the N-SDU&#160;<br/>reception by sending the next&#160;Flow Control N-PDU with status WAIT&#160;(i.e. FC(WT))“ the&#160;<br/>Vector CanTp tries further buffer requests&#160;using the PduR_CopyRxData&#160;API before&#160;<br/>sending Flow Control frames with status “WAIT”.&#160;<br/>(see also the PduR Spec. for&#160;AR4 for the expected behaviour of CanTpStartOfReception()&#160;<br/>when&#160;returning&#160;BUFREQ_E_BUSY&#160;(“BUFREQ_E_BUSY: &#160;Currently &#160;no &#160;buffer &#160;of &#160;the&#160;&#160;<br/>requested size &#160; is &#160; available. RxBufferSizePtr &#160; remains&#160;&#160; unchanged. Connection &#160;has&#160;&#160;<br/>been &#160;rejected”)&#160;<br/>
<b>7.1.3&#160;&#160;Burst transmission&#160;<br/></b>In extension to the CANTP&#160;SWS&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[1] the V</a>ector CANTP&#160;supports a burst transmission. If&#160;<br/>the the STmin time is set equal to zero then all CFs are sent directly in the context of the&#160;<br/>confirmation function.&#160;<br/>
<b>7.1.4&#160;&#160;Full Duplex&#160;<br/></b>In opposition to the CANTP&#160;SWS&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[1] the V</a>ector CANTP&#160;supports&#160;only full duplex&#160;<br/>communication.&#160;<br/>
<b>7.1.5&#160;&#160;CANTP initialization&#160;<br/></b>In extension to the CANTP&#160;SW<a href="TechnicalReference_Asr_CanTps.html#4">S&#160;[1] the CanTp_Init()&#160;</a>API is also&#160;available for the usage&#160;<br/>with several sets &#160;of configurations. It is&#160;configurable, via the pre-compile switch&#160;<br/>CANTP_HAVE_INIT_CFG_PTR,&#160;to be called with&#160;a pointer to one specific configuration&#160;<br/>set.&#160;<br/>&#160;<br/>#if (CANTP_HAVE_INIT_CFG_PTR == STD_ON)&#160;<br/>&#160;the following API is used:&#160;<br/>&#160;&#160;&#160;<br/>
void CanTp_Init(const void* const pCfgPtr)&#160;<br/>
&#160;#endif&#160;<br/>&#160;<br/>#if (CANTP_HAVE_INIT_CFG_PTR == STD_OFF)&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
63&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-64_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
&#160;the following API is used:&#160;<br/>&#160;&#160;&#160;void&#160;<br/>
CanTp_Init(void)&#160;<br/>
&#160;#endif&#160;<br/>
<b>7.1.5.1 CANTP&#160;</b><br/>
<b>initialization since AUTOSAR 4&#160;</b><br/>
Please note that since&#160;AUTOSAR4 the CanTp_Init&#160;API function is defined as follows:&#160;<br/>void CanTp_Init( const CanTp_ConfigType* CfgPtr )&#160;<br/>&#160;<br/>
<b>7.1.6&#160;&#160;Padding pattern&#160;<br/></b>In extension to the CANTP&#160;SWS&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[1] the V</a>ector CANTP&#160;supports, in case of padding&#160;<br/>support (CANTP_PADDING_ACTIVATION = STD_ON), an additional padding pattern&#160;<br/>(CANTP_PADDING_PATTERN) that may be used to&#160;fill up unused frame&#160;bytes. If unused,&#160;<br/>the frame is filled up with uninitialized data.&#160;<br/>&#160;<br/>
<b>7.1.7&#160;&#160;Splitted CanTp_MainFunction&#160;<br/></b>In extension to the CANTP&#160;SWS&#160;<a href="TechnicalReference_Asr_CanTps.html#4">[1] the V</a>ector CANTP&#160;supports,&#160;in case of a splitted main&#160;<br/>function is configured (CANTP_RXTX_MAINFUNCTION_API = STD_ON), two additional&#160;&#160;<br/>API functions CanTp_MainFunctionRx and&#160;CanTp_MainFunctionTx. These&#160;additional&#160;<br/>functions can be used instead&#160;of the original&#160;AUTOSAR CanTp_MainFunction API&#160;(which&#160;<br/>is still supported) to optimize the calling sequence of incoming requests and their&#160;<br/>responses.&#160;<br/>
<b>7.1.8&#160;&#160;Dynamic Flow&#160;Control content&#160;<br/></b>In extension to the CANTP&#160;SW<a href="TechnicalReference_Asr_CanTps.html#4">S&#160;[1] the V</a>ector CANTP&#160;supports, in case of dynamic&#160;Flow&#160;<br/>Control content setting is&#160;configured (CANTP_ENABLE_EXT_API_BS/&#160;<br/>CANTP_ENABLE_EXT_API_STMIN = STD_ON), two additional&#160;API functions which allow&#160;<br/>the modification of the blocksize (BS) as&#160;well as the minimum separation time (STmin)&#160;<br/>byte contained in the FCs which are responded to a transmitter during runtime.&#160;<br/>
<b>7.1.9&#160;&#160;Suppress PRE_PASSED DEM events&#160;<br/></b>In opposition to the CANTP<a href="TechnicalReference_Asr_CanTps.html#4">&#160;SWS&#160;[1] the V</a>ector CANTP&#160;supports&#160;the deactivation of DEM&#160;<br/>events which are handed to the DEM on each successful completed&#160;reception or&#160;<br/>transmission as described in CanTp228:&#160;<br/><b>“CanTp228:&#160;</b>After a task is completed successfully by calling PduR_TxConfirmation()&#160;<br/>or PduR_RxIndication(), the CanTp module shall call the DEM with EventId=&#160;<br/>CANTP_E<a href="TechnicalReference_Asr_CanTps.html#19">_COM (see also&#160;3.5.2) and &#160;EventStatus =&#160;<br/></a>DEM_EVENT_STATUS_PREPASSED.”&#160;<br/>If the pre-configurable attribute &#160;“AsrCanTp_SuppressPrePassIndication” is configured to&#160;<br/>be true, then the DEM&#160;notification is turned off for&#160;all PRE_PASSED events.&#160;The&#160;<br/>concerning preprocessor switch is named “CANTP_SUPPRESS_PREPASS_INDICATION&#160;<br/>= STD_ON/STD_OFF).&#160;This is done to&#160;reduce the DEM buffer resources.&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
64&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-65_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>7.1.10&#160;&#160;Accelerate the routing of multi frames&#160;<br/></b>If the pre-configurable attribute&#160;&#160;“AsrCanTp_FFProvide2RxBufferCalls” is configured to be&#160;<br/>true, then a special additional second First&#160;Frame buffer provision call is performed.&#160;This&#160;<br/>second call is used as a notification to the&#160;PduR so the First Frame of a multi frame&#160;<br/>message can be routed immediately before any provided buffers are completely filled up.&#160;<br/>The concerning preprocessor switch is&#160;named&#160;<br/>“CANTP_FF_PROVIDE_2_RXBUFFER_CALLS =&#160;STD_ON/STD_OFF).&#160;This is done to&#160;<br/>speed up any multi frame receptions and is&#160;used typically in gateway applications.&#160;<br/>&#160;<br/>
<b>7.1.11&#160;&#160;Optimized ROM resource consumption&#160;<br/></b>When using the pre-compile configuration variant then all Rx- and&#160;Tx- Sdu attributes are&#160;<br/>checked for analogousness. For each attribute&#160;(e.g. addressing mode,&#160;timeout value, …)&#160;<br/>being identical for all Sdus on the Rx- or the&#160;Tx- side one single preprocessor definition is&#160;<br/>generated instead of several ROM table entries&#160;for each Sdu separately.&#160;So, assuming&#160;<br/>many attributes have the same values, a&#160;considerable amount of ROM space can be&#160;<br/>economized.&#160;This is appropriate especially&#160;for&#160;configurations where&#160;a lot of Sdus are&#160;<br/>available as in gateway applications.&#160;<br/>&#160;<br/>
<b>7.1.12&#160;&#160;Detection of competing diagnostic tester access&#160;<br/></b>An additional - non&#160;AUTOSAR – callout function is supported to give the DCM the&#160;<br/>possibility to check for parallel access from another tester.&#160;This additional callout&#160;is&#160;&#160;<br/>provided if&#160;the pre-compile switch &#160;‘CANTP_DCM_REQUEST_DETECT’&#160;is set to&#160;<br/>‘STD_ON’.&#160;This can be accomplished via&#160;a preconfiguration file entry for the&#160;<br/>‘AsrCanTp_EnableDcmRequestDetect’&#160;generation tool attribute.&#160;<br/>If the callout function is enabled in this manner, then each Single Frame or First Frame&#160;<br/>indicated to the CanTp via the CanIf&#160;API function ‘CanTp_RxIndication’&#160;is also&#160;indicated to&#160;<br/>the DCM if the addressing type is Mixed-11.&#160;<br/>The callout function prototype is defined as follows:&#160;<br/>&#160;void&#160;<br/>
Dcm_OnRequestDetection(PduIdType CanTpRxPduId, uint8 N_AE);&#160;<br/>
&#160;<br/>
<b>7.1.13&#160;&#160;Asynchronous transmit &#160;<br/></b>Due to performance reasons the CanTp_Transmit&#160;API calls synchronously the&#160;Tx&#160;buffer&#160;<br/>provision and, if successful,&#160;subsequently the CanIf_Transmit&#160;API to accomplish a&#160;&#160;<br/>transmission on the CAN bus without any delay.&#160;<br/>Some third party components do not handle this synchronous calling&#160;sequence, thus an&#160;<br/>asynchronous calling is&#160;supported too. By setting&#160;the pre-compile switch&#160;<br/>‘CANTP_ASYNC_TRANSMIT’&#160;(generation tool attribute&#160;<br/>‘AsrCanTp_EnableSynchronousTransmit’) to ‘STD_ON’&#160;this behaviour can be enabled. If&#160;<br/>so, the CanTp_Transmit just takes the transmission request and then returns without any&#160;<br/>further processing.&#160;The&#160;Tx&#160;buffer provision and a subsequent call to the CanIf_Transmit&#160;<br/>API is accomplished from the CanTp task level during the next task cycle.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
65&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-66_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.1.14&#160;&#160;Reception of Flow&#160;Control and Consecutive frames&#160;<br/></b>The following special, non&#160;AUTOSAR&#160;compliant, handling is provided:&#160;<br/>
<b>7.1.14.1&#160;&#160;Ignore FC frames with a reserved STmin content&#160;<br/></b>The CanTp will ignore each received FC frame if the STmin byte contains a reserved value&#160;<br/>(0x80 .. 0xF0, 0xFA&#160;.. 0xFF). &#160;<br/>When using the standard implementation compliant to&#160;ISO 157675-2, then the CanTp&#160;<br/>replaces the reserved STmin value and runs&#160;the CanTp connection with the slowest value&#160;<br/>for the timing (STmin = 127msec). &#160;<br/>When using the non compliant implementation, then the CanTp ignores each FC frame&#160;<br/>containing a reserved STmin value. &#160;To&#160;enable this behaviour the&#160;pre-compile switch&#160;<br/>‘CANTP_IGNORE_FC_WITH_RES_STMIN’&#160;(generation tool attribute&#160;<br/>‘AsrCanTp_IgnoreFcWithReservedStMin’) must be set to ‘STD_ON’.&#160;The FC is&#160;skipped&#160;<br/>without any&#160;notification&#160;to the application.&#160;<br/>&#160;<br/>
<b>7.1.14.2&#160;&#160;Ignore FC frames with a Flow&#160;Status&#160;not equal to FC.CTS or FC.WAIT&#160;<br/></b>The CanTp will ignore each received FC frame if&#160;the Flow Status nibble contains either&#160;<br/>FC.OVFLW (0x02) or a reserved value (0x03 .. 0x0F). &#160;<br/>When using the standard implementation compliant to&#160;ISO 157675-2, then the CanTp&#160;<br/>stops the transmission of a message when a FC.OVFLW (0x02) or an invalid Flow Status&#160;<br/>(0x03 .. 0x0F) is received with either the notification &#34;NTFRSLT_E_NO_BUFFER&#34; in case&#160;<br/>of FS = 0x02 (OVFLW) or the notification &#34;NTFRSLT_E_INVALID_FS&#34; &#160;in case of FS =&#160;<br/>0x03 .. 0x0F.&#160;<br/>When using the non compliant implementation, then the CanTp ignores each FC frame&#160;<br/>containing a Flow Status greater than 0x02.&#160;To&#160;enable this&#160;behaviour the pre-compile&#160;<br/>switch ‘CANTP_IGNORE_FC_OVFL_INVALID_FS’&#160;(generation tool attribute&#160;<br/>‘AsrCanTp_IgnoreFcOvflAndInvalidFS’) must be set to ‘STD_ON’.&#160;The FC is skipped&#160;<br/>without any&#160;notification&#160;to the application.&#160;<br/>&#160;<br/>
<b>7.1.14.3&#160;&#160;Ignore Consecutive Frames (CF) with&#160;a&#160;wrong sequence Number (SN)&#160;<br/></b>The CanTp&#160;will ignore each received CF if the SN is not equal to the expected&#160;one.&#160;<br/>The current implementation behaves compliant&#160;to ISO 157675-2 and thus stops a running&#160;<br/>connection with the notification &#34;NTFRSLT_E_WRONG_SN&#34;.&#160;<br/>When using the non compliant implementation, then the CanTp ignores each CF&#160;<br/>containing a wrong SN.&#160;To&#160;enable this&#160;behaviour the pre-compile switch&#160;<br/>‘CANTP_IGNORE_CF_WITH_WRONG_SN’&#160;(generation tool attribute&#160;<br/>‘AsrCanTp_IgnoreCfWithWrongSN’)&#160;must be set to ‘STD_ON’.&#160;The CF is skipped without&#160;<br/>any notification to the application.&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
66&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-67_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>7.1.15&#160;&#160;DEM to DET reporting is configurable&#160;</b><br/>
<b>7.1.15.1&#160;&#160;DEM event CANTP_E_(RX_/TX_)COM(M)&#160;<br/></b>The reporting of the&#160;production error CANTP_E_COM (see also&#160;<a href="TechnicalReference_Asr_CanTps.html#19">3.5.2) to the DEM is</a>&#160;<br/>configurable in the&#160;way that the reporting can&#160;be switched to the DET.&#160;In this case the DET&#160;<br/>must be enabled or no reporting will be performed.&#160;<br/>If the pre-compile switch ‘CANTP_E_COMM_REPORT_DEM’&#160;(AUTOSAR parameter&#160;&#160;<br/>'CanTpECommReportDem') is set to ‘STD_ON’&#160;then the normal reporting to the DEM&#160;<br/>takes place.&#160;<br/>If the pre-compile switch ‘CANTP_E_COMM_REPORT_DEM’&#160;is set to ‘STD_OFF’&#160;then the &#160;<br/>reporting is switched to the DET&#160;(with the error code 0xB0).&#160;<br/>&#160;<br/>
<b>7.1.15.2&#160;&#160;DEM event CANTP_E_OPER_NOT_SUPPORTED&#160;<br/></b>The reporting of the production error CANTP_E_OPER_NOT_SUPPORTED to the DEM is&#160;<br/>configurable in the&#160;way that the reporting can&#160;be switched to the DET.&#160;In this case the DET&#160;<br/>must be enabled or no reporting will be performed.&#160;<br/>If the pre-compile switch ‘CANTP_OPER_NOT_SUPPORTED_REPORT_DEM’&#160;<br/>(AUTOSAR parameter &#160;' CanTpOperNotSupportedReportDem ') is set to ‘STD_ON’&#160;then&#160;<br/>the normal reporting to the DEM takes place.&#160;<br/>If the pre-compile switch ‘‘CANTP_OPER_NOT_SUPPORTED_REPORT_DEM’&#160;is&#160;set to&#160;<br/>‘STD_OFF’&#160;then the &#160;reporting&#160;is switched to the DET&#160;(with the error code 0xA0).&#160;<br/>&#160;<br/>
<b>7.2&#160;&#160;Limitations&#160;</b><br/>
<b>7.2.1&#160;&#160;Memory&#160;optimization&#160;<br/></b>Memory optimization by the linker via data scattering:&#160;<br/>Some linkers allow filling the “holes” caused&#160;by padding with some “foreign” data. Since&#160;<br/>the generation tool cannot be&#160;aware of “foreign” data, such optimizations must be&#160;<br/>disabled.&#160;<br/>
<b>7.2.2&#160;&#160;Variable Block Sizes&#160;<br/></b>The&#160;AUTOSAR feature of variable block sizes&#160;to be requested within Flow Control frames&#160;<br/>during a pending reception is&#160;not comp<a href="TechnicalReference_Asr_CanTps.html#4">atible with ISO 15765-2&#160;[4].&#160;</a><br/>
<b>7.2.3&#160;&#160;Usage of mixed Addressing&#160;<br/></b>Usage of mixed addressing within the same connection is not allowed.&#160;<br/>The addressing format – either CANTP_STANDARD or CANTP_EXTENDED or&#160;<br/>CANTP_MIXED11&#160;– must be identical for each pair of Rx/Tx N-SDUs assigned to the&#160;<br/>same connection&#160;<br/>
<b>7.2.4&#160;&#160;Runtime optimization for Timing Calculation&#160;<br/></b>Timing calculation is runtime optimized&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
67&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-68_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
Flow Control timeout on receive side:&#160;<br/>ISO 15765-2 specification defines&#160;the following performance&#160;requirement: (N_Br+N_Ar) &lt;&#160;<br/>0.9*N_Bs timeout. Here Vector uses 80%&#160;of N_Bs timeout instead of 90% due to&#160;<br/>performance reasons.&#160;<br/>
&#160;<br/>
<b>7.2.5&#160;&#160;Support parallel connections&#160;</b><br/>
<b>Explanation&#160;</b><br/>
The CANTP&#160;is able to manage several connections simultaneously.&#160;<br/>Concurrent connections can be configured for the CANTP.&#160; &#160;<br/>All connection-specific&#160;information (Channel number,&#160;Timing parameter,&#160;…) is configured&#160;<br/>inside the CANTP&#160;module. &#160;<br/>A&#160;connection channel represents an internal path&#160;for transmission or reception of the N-<br/>SDU. It uses its own resources such as internal buffer,&#160;timer or state machine.&#160;The&#160;<br/>connection channels are only for CANTP&#160;internal use and not accessible externally. &#160;<br/>&#160;<br/>Each N-SDU is (statically) linked to one connection channel. &#160;<br/>Each connection channel is independent&#160;from the other connection channels. &#160;<br/>The CANTP&#160;routes the N-SDU through the correctly configured connection channel.&#160;This&#160;<br/>mechanism&#160;does not allow to receive or transmit an N-SDU with the same&#160;identifier&#160;in&#160;<br/>parallel, because each N-SDU is linked to only one connection channel.&#160;<br/>&#160;<br/>The compile-time assignment of connection&#160;channels to N-SDUs&#160;can not be altered via&#160;<br/>post-build configuration.&#160;<br/>&#160;<br/>
<b>Limitation:&#160;</b><br/>
The&#160;AUTOSAR requirement claiming that a connection channel may be attached to one or&#160;<br/>more N-SDUs is considered only if the Dynamic Channel&#160;Assignment optimization&#160;is&#160;<br/>available (coming up with version 1.09.00) and configured to be active. &#160;<br/>If so, the following points are considered: &#160;<br/><b>&gt;&#160;&#160;</b>If a connection channel is assigned to multiple N-SDUs, resources are shared between&#160;<br/>
different N-SDUs and the CANTP&#160;will only reject transmission or abort receiving as long&#160;<br/>as no free connection channels are available.&#160;<br/>
<b>&gt;&#160;&#160;</b>The number of connection channels is configurable. &#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
68&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-69_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>8&#160;&#160;Glossary and&#160;Abbreviations&#160;</b><br/>
<b>8.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
Buffer&#160;<br/>
A&#160;buffer in a&#160;memory area normally&#160;in the RAM.&#160;It is an area,&#160;that the&#160;<br/>application&#160;has reserved for data storage.&#160;<br/>
Callback function&#160;<br/>
This is a&#160;function provided by an application.&#160;E.g. the CAN&#160;Driver calls&#160;a&#160;<br/>callback function to allow the application to control some action, to make&#160;<br/>decisions&#160;at&#160;runtime and to influence&#160;the work of the driver.&#160;<br/>
CAN Driver&#160;<br/>
The CAN Driver encapsulates a specific CAN controller handling. It&#160;<br/>consists&#160;of algorithms for hardware initialization,&#160;CAN&#160;message&#160;<br/>transmission and reception.&#160;The application&#160;interface supports&#160;both event&#160;<br/>and polling&#160;notification&#160;and WR/RD access to the message buffers.&#160;<br/>
CAN&#160;message&#160;<br/>
Frame which is composed of the start-of-frame, arbitration, control, data ,&#160;<br/>CRC, acknowledge and end-of-frame bit fields.&#160;<br/>
CANbedded&#160;<br/>
… is the trademark of the Vector communication stack.&#160;<br/>
Channel&#160;<br/>
A&#160;channel defines the assignment (1:1) between a physical&#160;<br/>communication interface&#160;and a physical layer on&#160;which different modules&#160;<br/>are connected to (either&#160;CAN or LIN). 1 channel&#160;consists&#160;of 1..X&#160;<br/>network(s).&#160;<br/>
Communication stack&#160;&#160;The communication&#160;stack consists&#160;of&#160;the communication&#160;configuration&#160;<br/>
and the communication&#160;kernel, a number of adaptive software&#160;<br/>components that cover the basic&#160;communication requirements in&#160;<br/>distributed automotive applications.&#160;<br/>
Component&#160;<br/>
CAN Driver,&#160;Network Management ... are software COMPONENTS in&#160;<br/>contrast to the expression module, which describes an ECU.&#160;<br/>
Confirmation&#160;<br/>
A&#160;service primitive defined in&#160;the ISO/OSI&#160;Reference Model (ISO 7498).&#160;<br/>With the service primitive 'confirmation' a service&#160;provider informs a&#160;<br/>service user&#160;about the result of a preceding service request&#160;of the service&#160;<br/>user. Notification by the CAN Driver&#160;on asynchronous successful&#160;<br/>transmission of a CAN&#160;message.&#160;<br/>
Critical section&#160;<br/>
A&#160;critical section is a&#160;sequence of instructions where mutual exclusion&#160;<br/>must be ensured. Such a section&#160;is&#160;called 'critical' because&#160;shared data is&#160;<br/>modified within it.&#160;<br/>
Data consistency&#160;<br/>
Data consistency means that the content of a given application message&#160;<br/>correlates unambiguously to the operation performed onto the message&#160;<br/>by the application.&#160;This&#160;means that no unforeseen sequence of&#160;<br/>operations&#160;may alter the content of&#160;a message hence rendering a&#160;<br/>message inconsistent with respect to its allowed&#160;and expected value.&#160;<br/>
Data link layer&#160;<br/>
The communication layer which provides services&#160;for the transfer of data&#160;<br/>link messages.&#160;The data&#160;link layer consists&#160;of the&#160;communication&#160;<br/>hardware and the communication driver software.&#160;<br/>
Deadlock&#160;<br/>
A&#160;state in which tasks block one another so that further processing of the&#160;<br/>tasks concerned is no longer possible.&#160;A&#160;deadlock between two tasks&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
69&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-70_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
occurs, e.g.&#160;if both tasks wait for the reception of&#160;a message which is to&#160;<br/>be sent by the other task before sending its own&#160;message.&#160;<br/>
Electronic Control&#160;<br/>
Also known&#160;as ECU. Small embedded computer system consisting of at&#160;<br/>
Unit&#160;<br/>
least one CPU and corresponding periphery which is placed&#160;in one&#160;<br/>housing.&#160;<br/>
Event&#160;<br/>
An exclusive signal which is assigned to a certain extended task.&#160;An&#160;<br/>event can be used to send a binary information to an extended task.&#160;The&#160;<br/>meaning of events is defined by the application.&#160;Any task can set an&#160;<br/>event for an extended task.&#160;The event can only be cleared by&#160;the task&#160;<br/>which is assigned to the&#160;event.&#160;<br/>
Gateway&#160;<br/>
A&#160;gateway is&#160;designed to enable communication between different bus&#160;<br/>systems, e.g. from CAN to LIN.&#160;<br/>
GENy&#160;<br/>
Generation tool for CANbedded and&#160;MICROSAR components&#160;<br/>
Indication&#160;<br/>
A&#160;service primitive defined in the ISO/OSI&#160;Reference Model (ISO 7498).&#160;<br/>With the service primitive 'indication'&#160;a service provider informs a service&#160;<br/>user about the occurrence of either&#160;an internal event or a service request&#160;<br/>issued by another service user. Notification of application&#160;in&#160;case of&#160;<br/>events in the Vector software components, e.g. an asynchronous&#160;<br/>reception of&#160;a CAN&#160;message.&#160;<br/>
Interrupt&#160;<br/>
Processor-specific event&#160;which can interrupt the execution of a current&#160;<br/>program section.&#160;<br/>
Interrupt level&#160;<br/>
Processing level provided for time-critical activities.&#160;To&#160;keep the interrupt&#160;<br/>latency brief, only absolutely indispensable actions should be effected in&#160;<br/>the interrupt&#160;service routine, which ensures reception of the interrupt and&#160;<br/>trigger its (post) processing within a task. Other processing&#160;levels are:&#160;<br/>Operating system level&#160;and task level.&#160;<br/>
Network&#160;<br/>
A&#160;network defines the assignment (1:N) between a logical communication&#160;<br/>grouping and a physical&#160;layer on which different&#160;modules are connected&#160;<br/>to (either CAN or LIN).&#160;One network consists&#160;of&#160;one channel,&#160;Y&#160;networks&#160;<br/>consists&#160;of 1..Z channel(s). We say network if we talk about more than&#160;<br/>one bus.&#160;<br/>
Physical layer&#160;<br/>
An electrical circuit that&#160;connects&#160;an&#160;ECU to a communication media.&#160;<br/>
Platform&#160;<br/>
The sum of micro controller derivative, communication controller&#160;<br/>implementation and compiler is&#160;called platform.&#160;<br/>
Post-build&#160;<br/>
This type of configuration is possible&#160;after building the software module or&#160;<br/>the ECU software.&#160;The software may either receive parameters of its&#160;<br/>configuration during the&#160;download of the complete ECU software resulting&#160;<br/>from the linkage of the code, or it may receive its configuration file that&#160;<br/>can be downloaded to the ECU separately, avoiding a re-compilation and&#160;<br/>re-build of the ECU software modules. In order to&#160;make the post-build&#160;<br/>time re-configuration possible, the re-configurable&#160;parameters&#160;shall be&#160;<br/>stored at a known memory location of ECU storage area.&#160;<br/>
Segmented data&#160;<br/>
See segmented communication&#160;<br/>
transfer&#160;<br/>Software architecture&#160;&#160;A&#160;software architecture is the structure or structures of a system, which&#160;<br/>
comprises software components, the external visible properties&#160;of these&#160;<br/>components and the relationships&#160;among them.&#160;<br/>
Transport Protocol&#160;<br/>
Some information that must be transferred over the CAN/LIN bus does&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
70&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-71_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
not fit into individual message frames because the data length exceeds&#160;<br/>the maximum of 8 bytes. In this case, the sender must divide up the data&#160;<br/>into a number of messages.&#160;Additional information is necessary for the&#160;<br/>receiver to put the data together again.&#160;<br/>
Table 8-1&#160;&#160;&#160;Glossary&#160;<br/>
&#160;<br/>&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
API Application&#160;<br/>
Programming&#160;<br/>
Interface&#160;<br/>
&#160;<br/>
AUTOSAR Automotive&#160;<br/>
Open&#160;<br/>
System&#160;<br/>
Architecture&#160;<br/>
BS Block&#160;<br/>
Size&#160;<br/>
BSW Basis&#160;<br/>
Software&#160;<br/>
BSWMD&#160;<br/>
Basic Software Module Description&#160;<br/>
CAN&#160;<br/>
Controller&#160;Area Network protocol originally defined for use as a&#160;<br/>communication network for control applications in vehicles.&#160;<br/>
CANTP&#160;<br/>
CAN Transport&#160;Layer&#160;<br/>
CF Consecutive&#160;<br/>
Frame&#160;<br/>
COM&#160;<br/>
Communication&#160;<br/>
CTS Clear&#160;<br/>
To&#160;<br/>
Send&#160;<br/>
DCM&#160;<br/>
Diagnostic Communication Manager&#160;<br/>
DEM Diagnostic&#160;<br/>
Event&#160;<br/>
Manager&#160;<br/>
DET Development&#160;<br/>
Error&#160;<br/>
Tracer&#160;<br/>
DL Data&#160;<br/>
Length&#160;<br/>
DLC&#160;<br/>
Data&#160;Length Code, Number of&#160;data bytes of a CAN message&#160;<br/>
ECU&#160;<br/>
Electronic Control Unit&#160;<br/>
EXTENDED Addressing&#160;<br/>
type&#160;<br/>
FC Flow&#160;<br/>
Control&#160;<br/>
FF First&#160;<br/>
Frame&#160;<br/>
FFFF&#160;<br/>
undefined&#160;<br/>
FS&#160;<br/>
Flow Status Control&#160;<br/>
HIS&#160;<br/>
Hersteller Initiative Software&#160;<br/>
ID Identifier&#160;<br/>ISO&#160;<br/>
International Standardization Organization&#160;<br/>
LIN&#160;<br/>
Local Interconnect Network&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller Open System&#160;Architecture (the Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>
OBD&#160;<br/>
undefined&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
71&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-72_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
OEM&#160;<br/>
Original Equipment Manufacturer&#160;<br/>
OS&#160;<br/>
Operating System&#160;<br/>
OVFLW&#160;<br/>
Overflow&#160;<br/>
PDU&#160;<br/>
Protocol data&#160;unit&#160;<br/>
PDUR&#160;<br/>
PDU Router&#160;<br/>
ROM&#160;<br/>
Read-Only Memory&#160;<br/>
RTE Runtime&#160;<br/>
Environment&#160;<br/>
SA Source&#160;<br/>
Address&#160;<br/>
SDU&#160;<br/>
undefined&#160;<br/>
SF Single&#160;<br/>
Frame&#160;<br/>
SN Sequence&#160;<br/>
Number&#160;<br/>
SRS&#160;<br/>
Software Requirement Specification&#160;<br/>
ST Separation&#160;<br/>
Time&#160;<br/>
STANDARD&#160;<br/>
Addressing type&#160;<br/>
SWC Software&#160;<br/>
Component&#160;<br/>
SWS Software&#160;<br/>
Specification&#160;<br/>
TA&#160;Target&#160;<br/>
Address&#160;<br/>
TP Transport&#160;<br/>
Protocol&#160;<br/>
TPCI&#160;<br/>
Transport Protocol Control Information&#160;<br/>
USDT&#160;<br/>
Unacknowledged Segmented Data&#160;Transfer&#160;<br/>
UUDT&#160;<br/>
Unacknowledged Unsegmented Data&#160;Transfer&#160;<br/>
WT Wait&#160;<br/>
Table 8-2&#160;&#160;&#160;Abbreviations&#160;<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
72&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name=73></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_CanTp-73_1.png"/><br/>
Technical Reference MICROSAR&#160;CAN&#160;Transport Layer &#160;<br/>
&#160;<br/>
<b>9&#160;&#160;Contact&#160;</b><br/>
Visit our website for more information on&#160;<br/>&#160;<br/>&gt;&#160; &#160;News&#160;<br/>&gt;&#160; &#160;Products&#160;<br/>&gt;&#160; &#160;Demo software&#160;<br/>&gt;&#160; &#160;Support&#160;<br/>&gt;&#160; &#160;Training data&#160;<br/>&gt;&#160; &#160;Addresses&#160;<br/>&#160;<br/>
<a href="http://www.vector-informatik.com/<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 1.18.01&#160;<br/>
73&#160;/ 73<br/>
based on template&#160;version 3.9&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#9">1 Component History</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#9">2 Introduction</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#10">2.1 Architecture Overview</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#11">2.2 CAN Transport Layer interactions</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#12">2.2.1 Changes between AUTOSAR 3.x and AUTOSAR 4</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#12">2.2.1.1 PduR API changes</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#13">2.2.1.2 CanIf API changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#14">3 Functional Description</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#14">3.1 Features</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#14">3.2 Initialization</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#15">3.3 States</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#16">3.4 Main Functions</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#16">3.4.1 The CanTp_MainFunction</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#16">3.4.2 Buffer handling and data consistency</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#17">3.4.2.1 Critical sections</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#18">3.5 Error Handling</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#18">3.5.1 Development Error Reporting</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#19">3.5.2 Production Code Error Reporting</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#20">4 Integration</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#20">4.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#20">4.1.1 Static Files</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#20">4.1.1.1 Hook functions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#21">4.1.3 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#21">4.2 Include Structure</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#22">4.3 Compiler Abstraction and Memory Mapping&#160;</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#23">5 API Description</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#23">5.1 Services provided by CANTP</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#23">5.1.1 CanTp_Init: &#160;(until AR 3)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#24">5.1.2 CanTp_Init: with ConfigPointer &#160;(Vector extension to AR 3)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#25">5.1.3 CanTp_Init: &#160;(since AR 4)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#26">5.1.4 CanTp_GetVersionInfo</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#27">5.1.5 CanTp_Shutdown</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#28">5.1.6 CanTp_Transmit</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#30">5.1.7 CanTp_CancelTransmitRequest</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#31">5.1.8 CanTp_CancelReceiveRequest</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#32">5.1.9 CanTp_MainFunction</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#33">5.1.10 CanTp_MainFunctionRx</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#33">5.1.11 CanTp_MainFunctionTx</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#34">5.1.12 CanTp_SetSTmin</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#35">5.1.13 CanTp_SetBS</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#36">5.1.14 CanTp_ChangeParameterRequest</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#37">5.1.15 CanTp_ReadParameterRequest</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#38">5.2 Services used by CANTP</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#39">5.3 Callback Functions</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#39">5.3.1 CanTp_RxIndication</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#40">5.3.2 CanTp_TxConfirmation</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#41">5.4 Configurable Interfaces</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#41">5.4.1 Notifications</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#42">5.4.2 Callout Functions</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#42">5.4.2.1 PduR_CanTpRxIndication</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#43">5.4.2.2 PduR_CanTpTxConfirmation</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#45">5.4.3 Callout Functions (until AUTOSAR Release 3)</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#45">5.4.3.1 PduR_CanTpProvideRxBuffer &#160; &#160; &#160; (until AUTOSAR Release 3)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#46">5.4.3.2 PduR_CanTpProvideTxBuffer &#160; &#160; &#160; (until AUTOSAR Release 3)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#48">5.4.4 Callout Functions (since AUTOSAR Release 4)</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#48">5.4.4.1 PduR_CanTpStartOfReception (since AUTOSAR Release 4)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#49">5.4.4.2 PduR_CanTpCopyRxData (since AUTOSAR Release 4)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#50">5.4.4.3 PduR_CanTpCopyTxData (since AUTOSAR Release 4)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#51">5.4.4.4 PduR_CanTpChangeParameterConfirmation&#160;</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#52">5.4.4.5 EcuM_GeneratorCompatibilityError</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#53">6 Configuration</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#53">6.1 Configuration in Data Base</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#54">6.2 Configuration with GENy</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#55">6.2.1 Component Configuration</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#55">6.2.1.1 General Parameters</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#59">6.2.2 Channel Configuration</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#59">6.2.2.1 Rx Parameters</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#60">6.2.2.2 Tx Parameters</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#61">6.2.3 Multiple Configuration</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#62">6.2.4 Timing Constraints</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7 AUTOSAR Standard Compliance</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7.1 Extensions</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7.1.1 Dynamically supported connection channels</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7.1.2 AR4 Buffer handling</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7.1.3 Burst transmission</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7.1.4 Full Duplex</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#63">7.1.5 CANTP initialization</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#64">7.1.6 Padding pattern</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#64">7.1.7 Splitted CanTp_MainFunction</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#64">7.1.8 Dynamic Flow Control content</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#64">7.1.9 Suppress PRE_PASSED DEM events</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#65">7.1.10 Accelerate the routing of multi frames</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#65">7.1.11 Optimized ROM resource consumption</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#65">7.1.12 Detection of competing diagnostic tester access</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#65">7.1.13 Asynchronous transmit&#160;</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#66">7.1.14 Reception of Flow Control and Consecutive frames</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#66">7.1.14.1 Ignore FC frames with a reserved STmin content</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#66">7.1.14.2 Ignore FC frames with a Flow Status not equal to FC.CTS or FC.WAIT</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#66">7.1.14.3 Ignore Consecutive Frames (CF) with a wrong sequence Number (SN)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.1.15 DEM to DET reporting is configurable</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.1.15.1 DEM event CANTP_E_(RX_/TX_)COM(M)</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.1.15.2 DEM event CANTP_E_OPER_NOT_SUPPORTED</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.2 Limitations</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.2.1 Memory optimization</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.2.2 Variable Block Sizes</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.2.3 Usage of mixed Addressing</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#67">7.2.4 Runtime optimization for Timing Calculation</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#68">7.2.5 Support parallel connections</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#69">8 Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#69">8.1 Glossary</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#71">8.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_CanTps.html#73">9 Contact</a></li>
<li>Word-Lesezeichen
<ul>
<li><a href="TechnicalReference_Asr_CanTps.html#4">OLE_LINK2</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#10">auto_AUTOSARArchitectureFigure</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#69">GLOSSARY</a></li>
<li><a href="TechnicalReference_Asr_CanTps.html#71">ABBREVIATIONS</a></li>
</ul>
</li>
</ul>
<hr/>
</body>
</html>
