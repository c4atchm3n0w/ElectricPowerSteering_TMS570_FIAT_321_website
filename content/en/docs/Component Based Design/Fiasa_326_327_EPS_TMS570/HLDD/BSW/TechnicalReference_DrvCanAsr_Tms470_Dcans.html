---
title: TechnicalReference_DrvCanAsr_Tms470_Dcans
linkTitle: TechnicalReference_DrvCanAsr_Tms470_Dcans
weight: 111
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<b>MICROSAR CAN Driver&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>Texas&#160;Instruments&#160;<br/>Tms470&#160;/&#160;Tms570&#160;<br/>Dcan&#160;<br/>&#160;<br/>Version&#160;1.10.00&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Georg Pflügel,&#160;Sebastian&#160;Gärtner,&#160;<br/>Mihai&#160;Olariu,&#160;Robert&#160;Schelkle&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-2_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-2_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>1.&#160;&#160;Document&#160;Information&#160;</b><br/>
<b>1.1&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Platforms&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Georg Pflügel&#160;<br/>
2007-01-12&#160;&#160;1.00&#160;<br/>
Initial&#160;version.&#160;<br/>
Georg Pflügel&#160;<br/>
2007-11-15&#160;&#160;1.01&#160;<br/>
CAN-Driver&#160;Update&#160;to&#160;ASR2.1.&#160;<br/>
Georg Pflügel&#160;<br/>
2008-08-05&#160;&#160;1.02&#160;<br/>
CAN-Driver&#160;Update&#160;to&#160;ASR3&#160;<br/>
Sebastian&#160;<br/>
2009-09-11&#160;&#160;1.03&#160;<br/>
CAN-Driver&#160;Update&#160;to&#160;R7.&#160;<br/>
Gärtner&#160;<br/>Sebastian&#160;<br/>
2009-12-14&#160;&#160;1.04&#160;<br/>
Local&#160;power-down mode added.&#160;<br/>
Gärtner&#160;<br/>Mihai&#160;Olariu&#160;<br/>
2010-07-28&#160;&#160;1.05&#160;<br/>
CAN-Driver&#160;Update&#160;to&#160;R9.&#160;<br/>Description&#160;for&#160;DCAN&#160;Issue#22.&#160;<br/>
Georg Pflügel&#160;<br/>
2011-03-08&#160;&#160;1.06&#160;<br/>
Description&#160;of&#160;mailbox&#160;objects&#160;updated&#160;<br/>
Georg Pflügel&#160;<br/>
2011-07-06&#160;&#160;1.07&#160;<br/>
Description&#160;for&#160;the&#160;TMS570LS30316U&#160;added&#160;<br/>
Georg Pflügel&#160;<br/>
2011-08-24&#160;&#160;1.08&#160;<br/>
Description&#160;for&#160;GeneratorGeny&#160;added&#160;<br/>
Georg Pflügel&#160;<br/>
2012-07-19&#160;&#160;1.09&#160;<br/>
Update&#160;to&#160;R14&#160;<br/>
Robert&#160;Schelkle&#160;&#160;2013-01-16&#160;&#160;1.10&#160;<br/>
Update&#160;to&#160;template&#160;2.05.01&#160;<br/>Adapt&#160;Overrun/Overwrite description&#160;<br/>
Table&#160;1-1&#160;&#160;&#160;History&#160;of&#160;the&#160;Document&#160;<br/>
&#160;<br/>
<b>1.2&#160;</b><br/>
<b>Reference&#160;Documents&#160;</b><br/>
<b>No.&#160;</b><br/>
<b>Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1]&#160;&#160;&#160;<br/>
AUTOSAR_SWS_CAN_DRIVER.pdf&#160;<br/>
2.4.6&#160;+&#160;&#160;<br/>3.0.0&#160;+&#160;<br/>4.0.0&#160;<br/>
[2]&#160;&#160;&#160;<br/>
AUTOSAR_BasicSoftwareModules.pdf&#160;<br/>
V1.0.0&#160;<br/>
[3]&#160;&#160;&#160;<br/>
AUTOSAR_SWS&#160;BSW&#160;Scheduler&#160;<br/>
V1.1.0&#160;<br/>
[4]&#160;&#160;&#160;<br/>
AUTOSAR_SWS_CAN_Interface.pdf&#160;<br/>
3.2.7&#160;+&#160;&#160;<br/>4.0.0&#160;+&#160;<br/>5.0.0&#160;<br/>
[5]&#160;&#160;&#160;<br/>
AN-ISC-8-1118&#160;MICROSAR&#160;BSW&#160;Compatibility&#160;Check&#160;<br/>
V1.0.0&#160;<br/>
Table&#160;1-2&#160;&#160;&#160;Reference&#160;Documents&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;2&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-3_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-3_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-3_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
&#160;<br/>
<b>1.3&#160;</b><br/>
<b>Scope&#160;of&#160;the&#160;Document&#160;</b><br/>
This&#160;document&#160;describes&#160;the&#160;functionality,&#160;API&#160;and&#160;configuration&#160;of&#160;the&#160;MICROSAR&#160;CAN&#160;<br/>driver&#160;&#160;as&#160;&#160;specified&#160;&#160;in&#160;&#160;[1].&#160;&#160;The&#160;&#160;CAN&#160;&#160;driver&#160;&#160;is&#160;&#160;a&#160;&#160;hardware&#160;&#160;abstraction&#160;&#160;layer&#160;&#160;with&#160;&#160;a&#160;<br/>standardized&#160;interface&#160;to&#160;the&#160;CAN&#160;Interface&#160;layer.&#160;<br/>&#160;<br/>
<b>Please&#160;note&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
&#160;&#160;questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
specified&#160;in your&#160;questionnaire,&#160;Vector’s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;3&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-4_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-4_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
Contents&#160;<br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2"><b>1.</b>&#160;&#160;<b>Document&#160;Information&#160;...................................................................................................&#160;2</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">1.1&#160;&#160;History&#160;......................................................................................................................&#160;2&#160;<br/>1.2&#160;&#160;Reference&#160;Documents&#160;..............................................................................................&#160;2&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#3">1.3&#160;&#160;Scope of&#160;the&#160;Document&#160;............................................................................................&#160;3&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#6"><b>2.</b>&#160;&#160;<b>Hardware&#160;Overview&#160;........................................................................................................&#160;6</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7"><b>3.</b>&#160;&#160;<b>Introduction&#160;....................................................................................................................&#160;7</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7">3.1&#160;&#160;Architecture&#160;Overview&#160;..............................................................................................&#160;7&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#9"><b>4.</b>&#160;&#160;<b>Functional&#160;Description&#160;..................................................................................................&#160;9</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#9">4.1&#160;&#160;Features&#160;...................................................................................................................&#160;9&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#13">4.2&#160;&#160;Initialization&#160;............................................................................................................&#160;13&#160;<br/>4.3&#160;&#160;Communication&#160;......................................................................................................&#160;13&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.4&#160;&#160;States&#160;/&#160;Modes&#160;.......................................................................................................&#160;15&#160;<br/>4.5&#160;&#160;Re-Initialization&#160;.......................................................................................................&#160;15&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#16">4.6&#160;&#160;CAN&#160;Interrupt&#160;Locking&#160;............................................................................................&#160;16&#160;<br/>4.7&#160;&#160;Main Functions&#160;.......................................................................................................&#160;16&#160;<br/>4.8&#160;&#160;Error&#160;Handling&#160;........................................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21"><b>5.</b>&#160;&#160;<b>Integration&#160;....................................................................................................................&#160;21</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">5.1&#160;&#160;Scope of&#160;Delivery&#160;...................................................................................................&#160;21&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#22">5.2&#160;&#160;Include Structure&#160;....................................................................................................&#160;22&#160;<br/>5.3&#160;&#160;Critical&#160;Sections&#160;.....................................................................................................&#160;22&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#24">5.4&#160;&#160;Compiler&#160;Abstraction&#160;and Memory&#160;Mapping&#160;...........................................................&#160;24&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#25">5.5&#160;&#160;Hardware&#160;Specific&#160;Hints&#160;.........................................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26"><b>6.</b>&#160;&#160;<b>API&#160;Description&#160;............................................................................................................&#160;26</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">6.1&#160;&#160;Interrupt&#160;Service Routines&#160;provided by&#160;CAN&#160;..........................................................&#160;26&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#28">6.2&#160;&#160;Services provided by&#160;CAN&#160;......................................................................................&#160;28&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#40">6.3&#160;&#160;Services used by&#160;CAN&#160;...........................................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#42"><b>7.</b>&#160;&#160;<b>Configuration................................................................................................................&#160;42</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#42">7.1&#160;&#160;Pre-Compile Parameters&#160;........................................................................................&#160;42&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#43">7.2&#160;&#160;Link-Time&#160;Parameters&#160;............................................................................................&#160;43&#160;<br/>7.3&#160;&#160;Post-Build Parameters&#160;...........................................................................................&#160;43&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">7.4&#160;&#160;Configuration with GENy&#160;........................................................................................&#160;44&#160;<br/></a><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">7.5&#160;&#160;Configuration with da&#160;DaVinci&#160;Configurator&#160;............................................................&#160;54&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;4&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-5_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-5_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#55"><b>8.</b>&#160;&#160;<b>AUTOSAR&#160;Standard&#160;Compliance&#160;................................................................................&#160;55</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#55">8.1&#160;&#160;Limitations&#160;/&#160;Restrictions&#160;.........................................................................................&#160;55&#160;<br/>8.2&#160;&#160;Vector&#160;Extensions&#160;..................................................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56"><b>9.</b>&#160;&#160;<b>Glossary&#160;and&#160;Abbreviations&#160;........................................................................................&#160;56</b>&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">9.1&#160;&#160;Glossary&#160;.................................................................................................................&#160;56&#160;<br/>9.2&#160;&#160;Abbreviations&#160;.........................................................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#57"><b>10.</b>&#160;<b>Contact&#160;..........................................................................................................................&#160;57</b>&#160;<br/></a>&#160;<br/>
<b>Illustrations&#160;<br/></b><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7">Figure&#160;3-1&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7">AUTOSAR&#160;architecture&#160;...............................................................................&#160;7&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#8">Figure&#160;3-2&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#8">Interfaces&#160;to adjacent&#160;modules of&#160;the&#160;CAN&#160;.................................................&#160;8&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#22">Figure&#160;5-1&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#22">Include Structure&#160;(AUTOSAR)&#160;..................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">Figure&#160;6-1&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">Select&#160;OS&#160;Type&#160;.........................................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">Figure&#160;7-1&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">Platform&#160;settings&#160;.......................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#52">Figure&#160;7-2&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#52">Init&#160;Structure Dialog&#160;..................................................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#53">Figure&#160;7-3&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#53">Setup&#160;Filter&#160;Dialog&#160;....................................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">Figure&#160;7-4&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">Baud Rate Dialog&#160;.....................................................................................&#160;54&#160;</a><br/>
&#160;<br/>
<b>Tables&#160;<br/></b><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">Table 1-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">History&#160;of&#160;the&#160;Document&#160;.............................................................................&#160;2&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">Table 1-2&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">Reference&#160;Documents&#160;................................................................................&#160;2&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#6">Table 2-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#6">Supported&#160;Hardware&#160;Overview&#160;...................................................................&#160;6&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#12">Table 4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#12">Supported&#160;features&#160;...................................................................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#14">Table 4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#14">Hardware&#160;mailbox&#160;layout&#160;..........................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#17">Table 4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#17">Errors&#160;reported&#160;to DET&#160;.............................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#17">Table 4-4&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#17">API&#160;from&#160;which the&#160;Errors&#160;are&#160;reported&#160;.....................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">Table 4-5&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">Errors&#160;reported&#160;to DEM&#160;.............................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#19">Table 4-6&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#19">Hardware&#160;Loop&#160;Check&#160;..............................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">Table 5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">Static&#160;files&#160;.................................................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">Table 5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">Generated&#160;files&#160;.........................................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#24">Table 5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#24">Critical&#160;Section&#160;Codes&#160;..............................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#25">Table 5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#25">Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;..............................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#41">Table 6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#41">Services used by&#160;the&#160;CAN&#160;........................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">Table 7-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">Platform&#160;Parameter&#160;description.................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#51">Table 7-2&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#51">Controller&#160;Parameter&#160;description&#160;..............................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#53">Table 7-3&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#53">Filter&#160;Parameter&#160;description&#160;......................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">Table&#160;7-4&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">Baud rate&#160;Parameter&#160;description&#160;..............................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">Table 9-1&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">Glossary&#160;...................................................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">Table 9-2&#160;&#160;</a><br/>
<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">Abbreviations&#160;............................................................................................&#160;56&#160;</a><br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;5&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-6_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-6_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>2.&#160;&#160;Hardware&#160;Overview&#160;</b><br/>
The&#160;&#160;following&#160;&#160;table&#160;&#160;summarizes&#160;&#160;information&#160;&#160;about&#160;&#160;the&#160;&#160;CAN&#160;&#160;Driver.&#160;&#160;It&#160;&#160;gives&#160;&#160;you&#160;&#160;detailed&#160;<br/>information&#160;&#160;about&#160;&#160;the&#160;&#160;derivatives&#160;&#160;and&#160;&#160;compilers.&#160;&#160;As&#160;&#160;very&#160;&#160;important&#160;&#160;information&#160;&#160;the&#160;<br/>documentations&#160;of&#160;the&#160;hardware&#160;manufacturers&#160;are&#160;listed.&#160;The&#160;CAN&#160;Driver&#160;is&#160;based&#160;upon&#160;<br/>these&#160;documents in&#160;the&#160;given&#160;version.&#160;&#160;<br/>&#160;<br/><b>Derivative&#160;</b><br/>
<b>Compiler&#160;</b><br/>
<b>Hardware&#160;Manufacturer&#160;&#160;Document&#160;</b><br/>
<b>Version&#160;</b><br/>
TMS470PSF761&#160;<br/>
TI&#160;<br/>
TMS470PSF761&#160;DesignSpec.pdf&#160;<br/>
Revision&#160;0.8&#160;<br/>
TMS570PSFC61&#160;<br/>
TI&#160;<br/>
TMS570PSFC61_Specification_044.pdf&#160;<br/>
Revision&#160;0.44&#160;<br/>
TMS570PSFC66&#160;<br/>
TI&#160;<br/>
TMS570PSFC66_design_specification_22.pdf&#160;<br/>
Revision&#160;2.2&#160;<br/>
TMS570LS30316U&#160;&#160;TI&#160;<br/>
Gladiator_design_specification_GM_Auto.pdf&#160;<br/>
Version 2.5.1&#160;<br/>
Table&#160;2-1&#160;&#160;&#160;Supported&#160;Hardware&#160;Overview&#160;<br/>
<b>Derivative:&#160;</b>This&#160;can&#160;be&#160;a single&#160;information&#160;or a&#160;list&#160;of&#160;derivatives, the CAN Driver&#160;can&#160;be&#160;used&#160;on.&#160;<br/><b>Compiler:&#160;</b>List of&#160;Compilers&#160;the CAN Driver&#160;is&#160;working&#160;with&#160;<br/><b>Hardware Manufacturer&#160;Document&#160;Name:&#160;</b>List&#160;of&#160;hardware documentation the CAN Driver&#160;is&#160;based on.&#160;&#160;<br/><b>Version:&#160;</b>To be able to reference to this&#160;hardware documentation&#160;its&#160;version&#160;is&#160;very&#160;important.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;6&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-7_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-7_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-7_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>3.&#160;&#160;Introduction&#160;</b><br/>
This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;functionality,&#160;API&#160;&#160;and&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;AUTOSAR&#160;&#160;BSW&#160;<br/>module&#160;CAN&#160;as specified&#160;in<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">&#160;[1].&#160;</a>&#160;<br/>Since&#160;each&#160;hardware platform&#160;has its&#160;own&#160;behavior based&#160;on&#160;the&#160;CAN specifications,&#160;the&#160;<br/>main&#160;goal of&#160;the&#160;CAN&#160;driver is to&#160;give&#160;a&#160;standardized&#160;interface&#160;to&#160;support communication&#160;<br/>over the&#160;CAN&#160;bus&#160;for&#160;each&#160;platform&#160;in&#160;the&#160;same&#160;way.&#160;The&#160;CAN&#160;driver works closely&#160;<br/>together with&#160;the&#160;higher layer CAN interface.&#160;<br/>&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;R<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7">elease*:</a></b><b>&#160;</b><br/>
3&#160;and 4&#160;<br/>
<b>Supported&#160;Configuration&#160;Variants:&#160;</b><br/>
pre-compile,&#160;link-time,&#160;post-build&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Vendor&#160;ID:&#160;</b><br/>
CAN_VENDOR_ID&#160;<br/>
30&#160;decimal&#160;<br/>
(=&#160;Vector-Informatik,&#160;<br/>according&#160;to HIS)&#160;<br/>
<b>Module&#160;ID:&#160;</b><br/>
CAN_MODULE_ID &#160;&#160;<br/>
80&#160;decimal&#160;<br/>
(according to&#160;ref.<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">&#160;[2])</a>&#160;<br/>
*&#160;For&#160;the precise&#160;AUTOSAR Release&#160;3.x&#160;and 4.x&#160;please see&#160;the release specific&#160;documentation.&#160;&#160;<br/>&#160;<br/>
<b>3.1&#160;</b><br/>
<b>Architecture&#160;Overview&#160;</b><br/>
The&#160;following&#160;figure shows&#160;where the&#160;CAN&#160;is&#160;located&#160;in&#160;the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
Figure&#160;3-1&#160;&#160;AUTOSAR&#160;architecture&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;7&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-8_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-8_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
&#160;<br/>The&#160;next&#160;figure shows&#160;the&#160;interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;CAN.&#160;These&#160;interfaces are&#160;<br/>described&#160;in&#160;chapte<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">r&#160;6.&#160;</a>&#160;<br/>
CAN&#160;Interface<br/>
EcuM<br/>
DET<br/>
DEM<br/>
CAN&#160;Driver<br/>
...&#160;CAN&#160;X<br/>
&#160;<br/>
Figure&#160;3-2&#160;&#160;Interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;CAN&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;8&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-9_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-9_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.&#160;&#160;Functional&#160;Description&#160;</b><br/>
<b>4.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The&#160;features listed&#160;in&#160;this chapter cover the&#160;complete&#160;functionality&#160;specified&#160;in<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">&#160;[1].</a>&#160;<br/>The&#160;&#160;&#34;supported&#34;&#160;&#160;and&#160;&#160;&#34;not&#160;&#160;supported&#34;&#160;&#160;features&#160;&#160;are&#160;&#160;presented&#160;&#160;in&#160;&#160;the&#160;&#160;following&#160;&#160;table.&#160;&#160;For&#160;<br/>further information&#160;of&#160;not&#160;supported&#160;features&#160;also&#160;see&#160;chapte<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#55">r&#160;8.</a>&#160;<br/>&#160;<br/>
<b>Generator&#160;</b><br/>
<b>Feature&#160;Naming&#160;</b><br/>
<b>Short&#160;Description&#160;</b><br/>
<b>GENy&#160;</b><br/>
<b>GENy&#160;</b><br/>
<b>CFG5&#160;</b><br/>
<b>(extern&#160;<br/>Gen)&#160;</b><br/>
<b>Initialization&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160; &#160;Driver&#160;<br/>
General&#160;driver&#160;initialization&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Can_Init()&#160;<br/>
Controller specific&#160;initialization&#160;function&#160;<br/>
&#160; &#160;Controller&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Can_InitController().&#160;<br/>
<b>Communication&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160; &#160;Transmission&#160;<br/>
Transmitting&#160;CAN frames.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
&#160; &#160;Transmit confirmation&#160;<br/>
Callback&#160;for successful&#160;Transmission.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
&#160; &#160;Reception&#160;<br/>
Receiving&#160;CAN frames.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
&#160; &#160;Receive indication&#160;<br/>
Callback&#160;for receiving Frame.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
<b>Controller&#160;Modes&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Controller support&#160;sleep mode (power&#160;<br/>
&#160; &#160;Sleep mode&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
saving).&#160;<br/>
&#160; &#160;Wakeup over CAN&#160;<br/>
Controller support&#160;wakeup&#160;over&#160;CAN.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Controller support&#160;stop&#160;mode (passive to&#160;<br/>
&#160; &#160;Stop&#160;mode&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
CAN bus).&#160;<br/>
&#160; &#160;Bus&#160;Off&#160;detection&#160;<br/>
Callback&#160;for Bus&#160;Off&#160;event.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
<b>Polling&#160;Modes&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Support polling&#160;mode for&#160;Transmit&#160;<br/>
&#160; &#160;Tx&#160;confirmation&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
confirmation.&#160;<br/>
&#160; &#160;Reception&#160;<br/>
Support polling&#160;mode for Reception.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
&#160; &#160;Wakeup&#160;<br/>
Support polling&#160;mode for&#160;Wakeup event.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
&#160; &#160;Bus&#160;Off&#160;<br/>
Support polling&#160;mode for Bus&#160;Off&#160;event.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
MICROSAR4x&#160;only:&#160;Support polling&#160;<br/>
&#160; &#160;Mode&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
mode for&#160;mode transition.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Mailbox objects&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Standard mailbox&#160;to&#160;send&#160;CAN frames&#160;<br/>
&#160; &#160;Tx&#160;BasicCAN&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
(Used&#160;by&#160;CAN Interface data&#160;queue).&#160;<br/>Using&#160;3 mailboxes&#160;for&#160;Tx&#160;BasicCAN&#160;<br/>
&#160; &#160;Multiplexed&#160;Tx&#160;<br/>
mailbox&#160;(external&#160;priority&#160;inversion&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
avoided).&#160;<br/>Separate&#160;mailbox&#160;for special&#160;Tx&#160;<br/>
&#160; &#160;Tx&#160;FullCAN&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
message used.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;9&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-10_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-10_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
Mailbox-&#160;<br/>
Mailbox-&#160;<br/>
object per&#160;&#160;object per&#160;<br/>channel:&#160;<br/>
channel:&#160;<br/>
32:&#160;<br/>
32:&#160;<br/>
&#160;<br/>
&#160;<br/>
Std ID: 29&#160;&#160;Std ID: 31&#160;<br/>
Available amount&#160;of&#160;mailboxes&#160;(&#160;in case&#160;<br/>
Ext ID:&#160;29&#160;&#160;Ext ID:&#160;31&#160;<br/>
of&#160;no&#160;Rx&#160;FullCAN objects&#160;is&#160;used&#160;)&#160;<br/>
Mix&#160;ID:&#160;27&#160;&#160;Mix&#160;ID:&#160;29&#160;<br/>
&#160; &#160; &#160;&#160;Maximum&#160;amount&#160;<br/>
This&#160;amount&#160;depends&#160;on&#160;the maximal&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
number&#160;of&#160;mailbox&#160;objects&#160;of&#160;the&#160;<br/>
Mailbox-&#160;<br/>
Mailbox-&#160;<br/>
hardware&#160;channel&#160;<br/>
object per&#160;&#160;object per&#160;<br/>channel:&#160;<br/>
channel:&#160;<br/>
64:&#160;<br/>
64:&#160;<br/>
&#160;<br/>
&#160;<br/>
Std ID: 61&#160;&#160;Std ID: 63&#160;<br/>Ext ID:&#160;61&#160;&#160;Ext ID:&#160;63&#160;<br/>Mix&#160;ID:&#160;59&#160;&#160;Mix&#160;ID:&#160;61&#160;<br/>&#160;<br/>
&#160;<br/>
Separate&#160;mailbox&#160;for special&#160;Rx&#160;<br/>
&#160; &#160;Rx&#160;FullCAN&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
message&#160;used.&#160;<br/>
Mailbox-&#160;<br/>
Mailbox-&#160;<br/>
object per&#160;&#160;object per&#160;<br/>channel:&#160;<br/>
channel:&#160;<br/>
32:&#160;<br/>
32:&#160;<br/>
&#160;<br/>
&#160;<br/>
Std ID: 29&#160;&#160;Std ID: 31&#160;<br/>
Available amount&#160;of&#160;mailboxes&#160;(&#160;in case&#160;<br/>
Ext ID:&#160;29&#160;&#160;Ext ID:&#160;31&#160;<br/>
of&#160;no&#160;Rx&#160;FullCAN objects&#160;is&#160;used&#160;)&#160;<br/>
Mix&#160;ID:&#160;27&#160;&#160;Mix&#160;ID:&#160;29&#160;<br/>
&#160; &#160; &#160;&#160;Maximum&#160;amount&#160;<br/>
This&#160;amount&#160;depends&#160;on&#160;the maximal&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
number&#160;of&#160;mailbox&#160;objects&#160;of&#160;the&#160;<br/>
Mailbox-&#160;<br/>
Mailbox-&#160;<br/>
hardware&#160;channel&#160;<br/>
object per&#160;&#160;object per&#160;<br/>channel:&#160;<br/>
channel:&#160;<br/>
64:&#160;<br/>
64:&#160;<br/>
&#160;<br/>
&#160;<br/>
Std ID: 61&#160;&#160;Std ID: 63&#160;<br/>Ext ID:&#160;61&#160;&#160;Ext ID:&#160;63&#160;<br/>Mix&#160;ID:&#160;59&#160;&#160;Mix&#160;ID:&#160;61&#160;<br/>&#160;<br/>
&#160;<br/>
Standard mailbox&#160;to&#160;receive&#160;CAN&#160;<br/>
&#160; &#160;Rx&#160;BasicCAN&#160;<br/>
frames&#160;(depending&#160;on hardware,&#160;FIFO&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
or shadow buffer supported).&#160;<br/>
&#160; &#160; &#160;&#160;Maximum&#160;amount&#160;<br/>
Available amount&#160;of&#160;BasicCAN objects.&#160;<br/>
1/2&#160;<br/>
1/2&#160;<br/>
-&#160;<br/>
<b>Others&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Support Diagnostic&#160;Event&#160;Manager&#160;<br/>
&#160; &#160;DEM&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
(error notification).&#160;<br/>
&#160; &#160;DET&#160;<br/>
Support Development Error Detection&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
(error notification).&#160;<br/>
&#160; &#160;Version&#160;API&#160;<br/>
API&#160;to&#160;read&#160;out&#160;component&#160;version.&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
&#160; &#160;Maximum&#160;supported&#160;<br/>
Maximum&#160;amount&#160;of&#160;supported&#160;<br/>
3&#160;<br/>
3&#160;<br/>
-&#160;<br/>
Controllers&#160;<br/>
Controllers&#160;(hardware channels).&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;10&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-11_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-11_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
Support of&#160;Tx&#160;Cancellation&#160;(out of&#160;<br/>
&#160; &#160;Cancellation&#160;of&#160;Tx&#160;objects&#160;<br/>
hardware).&#160;Avoid&#160;internal&#160;priority&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
inversion.&#160;<br/>
&#160; &#160;Identical&#160;ID&#160;cancellation&#160;<br/>
Tx&#160;Cancellation&#160;also&#160;for identical&#160;IDs.&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Standard Identifier supported (Tx&#160;and&#160;<br/>
&#160; &#160;Standard ID types&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Rx).&#160;<br/>
Extended&#160;Identifier supported&#160;(Tx&#160;and&#160;<br/>
&#160; &#160;Extended ID types&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Rx).&#160;<br/>
Standard&#160;and&#160;Extended Identifier&#160;<br/>
&#160; &#160;Mixed ID&#160;types&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
supported (Tx&#160;and Rx).&#160;<br/>
&#160; &#160;Hardware Loop&#160;Check&#160;<br/>
To avoid&#160;possible&#160;endless&#160;loops&#160;(occur&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
(Timeout&#160;monitoring)&#160;<br/>
by&#160;hardware issue).&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>AutoSar&#160;extensions&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Support&#160;individual&#160;polling mode&#160;<br/>
&#160; &#160;Individual&#160;Polling&#160;<br/>
*&#160;<br/>
*&#160;<br/>
-&#160;<br/>
(selectable for each mailbox&#160;separate).&#160;<br/>Support Multiple&#160;BasicCAN&#160;objects.&#160;This&#160;<br/>gives&#160;the possibility&#160;to use&#160;multiple&#160;<br/>
&#160; &#160;Multiple Basic&#160;CAN&#160;<br/>
*&#160;<br/>
*&#160;<br/>
-&#160;<br/>
Filters&#160;and&#160;optimize acceptance Filtering&#160;<br/>as&#160;well&#160;as&#160;avoid&#160;overrun.&#160;<br/>Support Rx&#160;Queue.&#160;This&#160;give the&#160;<br/>
&#160; &#160;Rx&#160;Queue&#160;<br/>
possibility&#160;to&#160;buffer received data&#160;in&#160;<br/>
*&#160;<br/>
*&#160;<br/>
-&#160;<br/>
interrupt&#160;context but handle&#160;it&#160;<br/>asynchronous&#160;in polling&#160;task.&#160;<br/>
Special&#160;hardware buffer used&#160;to&#160;<br/>
&#160; &#160;Secure Rx&#160;Buffer used&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
temporary&#160;save received data.&#160;<br/>
“Hardware&#160;Loop Check”&#160;can be&#160;defined&#160;<br/>
&#160; &#160;Hardware Loop&#160;Check&#160;by&#160;<br/>
to&#160;be&#160;done&#160;by&#160;application (special&#160;API&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Application&#160;<br/>
available)&#160;<br/>
&#160; &#160;Configurable “Nested&#160;CAN&#160;&#160;Nested&#160;CAN&#160;interrupts&#160;allowed,&#160;and can&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Interrupts”&#160;<br/>
be&#160;also switched&#160;to none-nested.&#160;<br/>
&#160; &#160;Report CAN_E_TIMEOUT&#160;<br/>
Report CAN_E_TIMEOUT&#160;(Hardware&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
DEM&#160;&#160;&#160;as&#160;DET&#160;<br/>
Loop&#160;Check&#160;/&#160;Timeout&#160;Monitoring)&#160;to&#160;<br/>DET&#160;instead&#160;of&#160;DEM.&#160;<br/>Force CAN&#160;driver to&#160;handle&#160;Mixed&#160;ID&#160;<br/>
&#160;&#160;&#160;Support&#160;Mixed ID&#160;<br/>
(standard and&#160;extended&#160;ID)&#160;at&#160;pre-<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
compile-time to expand&#160;the&#160;ID type&#160;later&#160;<br/>on.&#160;<br/>Activate&#160;this&#160;for 1 controller&#160;systems&#160;<br/>
&#160; &#160;Optimize for one&#160;controller&#160;<br/>
when&#160;you never&#160;will&#160;expand&#160;to&#160;multi-<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
controller.&#160;So&#160;that the CAN&#160;driver&#160;works&#160;<br/>more efficient&#160;&#160;<br/>Always&#160;write&#160;FullCAN&#160;Tx&#160;ID within&#160;<br/>
&#160;&#160;&#160;Dynamic&#160;FullCAN&#160;Tx&#160;ID&#160;<br/>
CanWrite()&#160;API function.&#160;Deactivate&#160;this&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
(***)&#160;<br/>
to&#160;optimize code&#160;when&#160;you&#160;do&#160;not&#160;use&#160;<br/>FullCAN&#160;Tx&#160;objects&#160;dynamically.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;11&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-12_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-12_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
Support 8bit&#160;or 16bit Hardware Handles&#160;<br/>
&#160;&#160;&#160;Size of&#160;Hw&#160;HandleType&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
depend&#160;on&#160;hardware usage.&#160;<br/>
Support a&#160;callback&#160;function&#160;for receiving&#160;<br/>
&#160;&#160;&#160;Generic&#160;PreCopy&#160;<br/>
any&#160;CAN&#160;message (following&#160;callbacks&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
could&#160;be&#160;suppressed)&#160;<br/>
Support a&#160;callback&#160;function&#160;for&#160;<br/>
&#160;&#160;&#160;Generic&#160;Confirmation&#160;<br/>
successful&#160;transmission&#160;of&#160;any&#160;CAN&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
message (following&#160;callbacks&#160;could be&#160;<br/>suppressed)&#160;<br/>Support a&#160;API&#160;to&#160;get&#160;hardware status&#160;<br/>
&#160;&#160;&#160;Get&#160;Hardware&#160;Status&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
Information&#160;(see&#160;Can_GetStatus())&#160;<br/>
&#160;&#160;&#160;Interrupt&#160;Category&#160;<br/>
Support Category&#160;1 or&#160;Category&#160;2&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
selection&#160;<br/>
Interrupt&#160;Service&#160;Routines&#160;for OS&#160;&#160;<br/>
Support merge of&#160;2&#160;controllers&#160;in&#160;<br/>
&#160; &#160;Common&#160;CAN&#160;<br/>
hardware&#160;to&#160;get more Rx&#160;FullCAN&#160;<br/>
**&#160;<br/>
**&#160;<br/>
-&#160;<br/>
objects&#160;<br/>
Support DET&#160;or&#160;Application&#160;notification&#160;<br/>
&#160;&#160;&#160;Overrun Notification&#160;<br/>
cause by&#160;overrun&#160;(overwrite) of&#160;an&#160;Rx&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
message (BasicCAN and&#160;FullCAN)&#160;&#160;<br/>
&#160; &#160;RAM check&#160;<br/>
Support CAN mailbox&#160;RAM&#160;check&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
The&#160;feature Multiple ECU is&#160;usually&#160;<br/>
&#160; &#160;Multiple ECU&#160;<br/>
used&#160;for nodes&#160;that&#160;exist more than&#160;<br/>once in a&#160;car.&#160;At&#160;power&#160;up&#160;the&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
configurations&#160;(***)&#160;<br/>
application&#160;decides&#160;which&#160;node should&#160;<br/>be&#160;realized.&#160;<br/>
Support a&#160;callback&#160;function&#160;with&#160;pointer&#160;<br/>to&#160;Data, right&#160;before this&#160;data&#160;will&#160;be&#160;<br/>
&#160; &#160;Generic&#160;PreTransmit&#160;<br/>
written&#160;in&#160;Hardware mailbox&#160;buffer to&#160;<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
send.&#160;(Use this&#160;to&#160;change&#160;data or&#160;cancel&#160;<br/>transmission)&#160;<br/>
Table&#160;4-1&#160;&#160;&#160;Supported&#160;features&#160;<br/>
&#160;&#160;Feature&#160;is&#160;supported&#160;<br/>
&#160;&#160;Feature&#160;is&#160;not supported&#160;<br/>
*&#160;&#160;&#160;&#160;&#160;HighEnd Licence&#160;only&#160;<br/>
**&#160;&#160;&#160;Project specific&#160;(may&#160;not&#160;be available)&#160;<br/>
***&#160;&#160;Not supported for&#160;AutoSar&#160;version 4.0.3&#160;<br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;12&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-13_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-13_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Initialization&#160;</b><br/>
Can_Init()&#160;has&#160;to&#160;be&#160;called&#160;to&#160;initialize&#160;the&#160;CAN&#160;driver&#160;at&#160;power&#160;on&#160;and&#160;sets&#160;controller&#160;<br/>independent&#160;init values.&#160;This&#160;function&#160;has&#160;to&#160;be&#160;called&#160;before&#160;Can_InitController().&#160;<br/>
MicroSar3&#160;only:&#160;Use&#160;Can_InitStruct()&#160;to&#160;change&#160;the&#160;used&#160;baud&#160;rate&#160;and&#160;filter&#160;settings&#160;<br/>like&#160;&#160;given&#160;&#160;in&#160;&#160;the&#160;&#160;Initialization&#160;&#160;structure&#160;&#160;from&#160;&#160;the&#160;&#160;Tool.&#160;&#160;The&#160;&#160;used&#160;&#160;default&#160;&#160;set&#160;&#160;by&#160;<br/>Can_InitMemory()&#160;&#160;is&#160;&#160;the&#160;&#160;first&#160;&#160;structure.&#160;&#160;This&#160;&#160;API&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;called&#160;&#160;before&#160;<br/>Can_InitController()&#160;but&#160;after&#160;Can_InitMemory().&#160;<br/>
MICROSAR401&#160;only:&#160;baud&#160;rate&#160;settings given&#160;by&#160;Can_InitController parameter.&#160;<br/>
Can_InitController()&#160;&#160;initializes&#160;&#160;the&#160;&#160;controller,&#160;&#160;given&#160;&#160;as&#160;&#160;parameter,&#160;&#160;and&#160;&#160;can&#160;&#160;also&#160;&#160;be&#160;<br/>used&#160;to&#160;reinitialize.&#160;After&#160;this&#160;call&#160;the&#160;controller&#160;stays&#160;in&#160;stop-mode&#160;until&#160;the&#160;CAN&#160;Interface&#160;<br/>changes to&#160;start-mode.&#160;<br/>
Can_InitMemory()&#160;&#160;is&#160;&#160;an&#160;&#160;additional&#160;&#160;service&#160;&#160;function&#160;&#160;to&#160;&#160;reinitialize&#160;&#160;the&#160;&#160;memory&#160;&#160;to&#160;&#160;bring&#160;<br/>the&#160;&#160;driver&#160;&#160;back&#160;&#160;to&#160;&#160;a&#160;&#160;pre-power-on&#160;&#160;state&#160;&#160;(not&#160;&#160;initialized).&#160;&#160;Afterwards&#160;&#160;Can_Init()&#160;&#160;and&#160;<br/>Can_InitController()&#160;have&#160;to&#160;be&#160;called&#160;again.&#160;It&#160;is&#160;recommended&#160;to&#160;use&#160;this&#160;function&#160;<br/>before&#160;calling&#160;Can_Init()&#160;to&#160;secure&#160;that&#160;no&#160;startup-code&#160;specific&#160;pre-initialized&#160;variables&#160;<br/>affect&#160;the&#160;driver startup&#160;behavior.&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Communication&#160;</b><br/>
Can_Write()&#160;&#160;is&#160;&#160;used&#160;&#160;to&#160;&#160;send&#160;&#160;a&#160;&#160;message&#160;&#160;over&#160;&#160;the&#160;&#160;mailbox&#160;&#160;object&#160;&#160;given&#160;&#160;as&#160;&#160;&#34;Hth&#34;.&#160;&#160;The&#160;<br/>data,&#160;&#160;DLC&#160;and&#160;ID&#160;is&#160;copied&#160;into&#160;the&#160;hardware&#160;&#160;mailbox&#160;object&#160;&#160;and&#160;a&#160;send&#160;request&#160;&#160;is&#160;set.&#160;<br/>After&#160;&#160;sending&#160;&#160;the&#160;&#160;message&#160;&#160;the&#160;&#160;CAN&#160;&#160;Interface&#160;&#160;CanIf_TxConfirmation()&#160;&#160;function&#160;&#160;is&#160;<br/>called.&#160;&#160;Right&#160;&#160;before&#160;&#160;the&#160;&#160;data&#160;&#160;is&#160;&#160;copied&#160;&#160;in&#160;&#160;mailbox&#160;&#160;buffer&#160;&#160;the&#160;&#160;ID,&#160;&#160;DLC&#160;&#160;and&#160;&#160;data&#160;&#160;may&#160;&#160;be&#160;<br/>changed&#160;by&#160;Appl_GenericPreTransmit()&#160;callback.&#160;<br/>
When&#160;&#160;“Generic&#160;&#160;Confirmation“&#160;&#160;is&#160;&#160;activated&#160;&#160;the&#160;&#160;callback&#160;&#160;Appl_GenericConfirmation()&#160;&#160;<br/>will&#160;be&#160;called&#160;before&#160;CanIf_TxConfirmation()&#160;and&#160;the&#160;call&#160;to&#160;this&#160;can&#160;be&#160;suppressed&#160;<br/>by&#160;Appl_GenericConfirmation()&#160;&#160;return&#160;value.&#160;<br/>
For&#160;&#160;Tx&#160;&#160;messages&#160;&#160;the&#160;&#160;ID&#160;&#160;will&#160;&#160;be&#160;&#160;copied.&#160;&#160;(exception:&#160;&#160;feature&#160;&#160;“Dynamic&#160;&#160;FullCAN&#160;Tx&#160;&#160;ID”&#160;&#160;is&#160;<br/>deactivated,&#160;then&#160;the&#160;FullCAN&#160;Tx&#160;messages&#160;will&#160;be&#160;only&#160;set&#160;while&#160;initialization)&#160;<br/>If&#160;the&#160;mailbox&#160;is&#160;currently&#160;sending&#160;the&#160;status&#160;busy&#160;will&#160;be&#160;returned.&#160;Then&#160;the&#160;message&#160;may&#160;<br/>be&#160;queued&#160;in&#160;the&#160;CAN&#160;interface&#160;(if&#160;feature is&#160;active).&#160;<br/>If&#160;&#160;cancellation&#160;&#160;in&#160;&#160;hardware&#160;&#160;is&#160;&#160;supported&#160;&#160;the&#160;&#160;lowest&#160;&#160;priority&#160;&#160;ID&#160;&#160;inside&#160;&#160;currently&#160;&#160;sending&#160;<br/>object&#160;is canceled,&#160;and&#160;therefore re-queued&#160;in&#160;the&#160;CAN&#160;Interface.&#160;<br/>
Appl_GenericPreCopy()&#160;&#160;(if&#160;&#160;activated)&#160;&#160;is&#160;&#160;called&#160;&#160;and&#160;&#160;depend&#160;&#160;on&#160;&#160;return&#160;&#160;value&#160;&#160;also&#160;<br/>CanIf_RxIndication()&#160;&#160;as&#160;&#160;a&#160;&#160;CAN&#160;&#160;Interface&#160;&#160;callback,&#160;&#160;is&#160;&#160;called&#160;&#160;when&#160;&#160;a&#160;&#160;message&#160;&#160;is&#160;<br/>received.&#160;The&#160;receive&#160;information&#160;like&#160;ID,&#160;DLC and&#160;data&#160;are given&#160;as parameter.&#160;<br/>When&#160;Rx&#160;Queue&#160;is&#160;activated&#160;the&#160;received&#160;messages&#160;(polling&#160;or&#160;interrupt&#160;&#160;context)&#160;will&#160;be&#160;<br/>queued&#160;&#160;(same&#160;&#160;queue&#160;&#160;over&#160;&#160;all&#160;&#160;channels).&#160;&#160;The&#160;&#160;Rx&#160;&#160;Queue&#160;&#160;will&#160;&#160;be&#160;&#160;read&#160;&#160;by&#160;&#160;calling&#160;<br/>Can_Mainfunction_Read&#160;&#160;()&#160;&#160;and&#160;&#160;the&#160;&#160;Rx&#160;&#160;Indication&#160;&#160;(like&#160;&#160;CanIf_RxIndication())&#160;&#160;will&#160;<br/>be&#160;&#160;called&#160;&#160;out&#160;&#160;of&#160;&#160;this&#160;&#160;context.&#160;&#160;Rx&#160;&#160;Queue&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;Interrupt&#160;&#160;systems&#160;&#160;to&#160;&#160;keep&#160;&#160;Interrupt&#160;<br/>latency&#160;time&#160;short.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;13&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-14_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-14_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.3.1&#160;&#160;Mailbox&#160;Layout&#160;<br/></b>The&#160;&#160;generation&#160;&#160;tool&#160;&#160;supports&#160;&#160;a&#160;&#160;flexible&#160;&#160;allocation&#160;&#160;of&#160;&#160;message&#160;&#160;buffers.&#160;&#160;In&#160;&#160;the&#160;&#160;following&#160;<br/>tables&#160;the&#160;possible&#160;mailbox&#160;layout&#160;is&#160;shown&#160;(the&#160;range&#160;for&#160;each&#160;mailbox&#160;types&#160;depend&#160;on&#160;<br/>the&#160;used&#160;mailboxes).&#160;<br/>
<b>Object&#160;</b><br/>
<b>No.&#160;of&#160;</b><br/>
<b>number&#160;</b><br/>
<b>Object&#160;type&#160;&#160;Objects&#160;</b><br/>
<b>Comment&#160;<br/></b>These objects&#160;are used&#160;to send&#160;a certain message.&#160;The&#160;<br/>user must define&#160;statically&#160;(Generation&#160;Tool)&#160;which CAN&#160;<br/>
1&#160;–&#160;n&#160;<br/>
Tx&#160;Full&#160;CAN&#160;<br/>
0&#160;-&#160;(MaxObj-3)&#160;&#160;messages&#160;are located&#160;in&#160;such&#160;Tx&#160;FullCAN objects.&#160;The&#160;<br/>
Generation&#160;Tool&#160;distributes&#160;the&#160;messages&#160;to&#160;the FullCAN&#160;<br/>objects.&#160;<br/>These objects&#160;are used&#160;to send several&#160;messages.&#160;If&#160;the&#160;<br/>
transmit&#160;message object is&#160;busy, the&#160;transmit request is&#160;<br/>
n+1&#160;<br/>
Tx&#160;Basic&#160;CAN&#160;&#160;1&#160;<br/>
stored in a&#160;CAN&#160;Interface&#160;queue&#160;(if&#160;activated)&#160;<br/>
These objects&#160;are not&#160;used. It&#160;depends&#160;on&#160;the&#160;<br/>
n+2&#160;-&#160;m&#160;<br/>
Unused&#160;<br/>
0&#160;-&#160;(MaxObj-3)&#160;&#160;configuration&#160;of&#160;receive and transmit objects&#160;if&#160;unused&#160;<br/>
objects&#160;are available.&#160;<br/>These objects&#160;are used&#160;to receive specific&#160;CAN&#160;<br/>messages.&#160;The&#160;user defines&#160;statically&#160;(Generation&#160;Tool)&#160;<br/>
m+1&#160;–&#160;o&#160;<br/>
Rx&#160;Full&#160;CAN&#160;<br/>
0&#160;-&#160;(MaxObj-3)&#160;&#160;that&#160;a CAN message should be received&#160;in&#160;a&#160;FullCAN&#160;<br/>
message object.&#160;The&#160;Generation&#160;Tool&#160;distributes&#160;the&#160;<br/>message to the FullCAN&#160;objects.&#160;<br/>All&#160;other&#160;CAN messages&#160;are&#160;received via&#160;the&#160;Basic&#160;CAN.&#160;<br/>For configurations&#160;with&#160;Standard Id or&#160;Extended&#160;Id&#160;the&#160;<br/>
o+1&#160;–&#160;o+2&#160;<br/>
Rx&#160;Basic&#160;CAN&#160;&#160;(0*)/2/4&#160;&#160;<br/>
Basic&#160;CAN use&#160;2&#160;Message&#160;Objects, configurations&#160;with&#160;<br/>Mixed&#160;Id&#160;used 4&#160;Message&#160;Objects.&#160;<br/>
Table&#160;4-2&#160;&#160;&#160;Hardware&#160;mailbox&#160;layout&#160;<br/>
The&#160;&#160;“CanObjectId”&#160;&#160;numbering&#160;&#160;is&#160;&#160;done&#160;&#160;in&#160;&#160;following&#160;&#160;order:&#160;&#160;FullCANTx,&#160;&#160;BasicTx,&#160;&#160;Unused,&#160;<br/>FullCANRx,&#160;BasicRx&#160;(like&#160;shown&#160;above).&#160;“CanObjectId’s”&#160;for&#160;next&#160;controller&#160;begin&#160;at&#160;end&#160;<br/>of&#160;&#160;last&#160;&#160;controller.&#160;&#160;Gaps&#160;&#160;in&#160;&#160;“CanObjectId”&#160;&#160;for&#160;&#160;unused&#160;&#160;mailboxes&#160;&#160;may&#160;&#160;occur.&#160;&#160;This&#160;&#160;objects&#160;<br/>must&#160;located&#160;at&#160;the&#160;position&#160;pictured&#160;in&#160;the&#160;table&#160;above.&#160;<br/>It’s&#160;&#160;important&#160;&#160;to&#160;&#160;know&#160;&#160;that&#160;&#160;a&#160;&#160;configuration&#160;&#160;allways&#160;&#160;has&#160;&#160;to&#160;&#160;contain&#160;&#160;one&#160;&#160;BasicTx&#160;&#160;CAN&#160;&#160;per&#160;<br/>controller.&#160;<br/>
<b>4.3.2&#160;&#160;Acceptance&#160;Filter&#160;for BasicCAN&#160;<br/></b>The&#160;Basic CAN consists for standard&#160;and&#160;extended&#160;Id&#160;of&#160;2&#160;message&#160;objects&#160;and&#160;1&#160;filter&#160;<br/>and&#160;for&#160;mixed&#160;Id&#160;of&#160;4&#160;message&#160;objects&#160;and&#160;2&#160;filters.&#160;<br/>If&#160;&#160;no&#160;&#160;message&#160;&#160;should&#160;&#160;be&#160;&#160;received,&#160;&#160;select&#160;&#160;the&#160;&#160;“Multiple&#160;&#160;Basic&#160;&#160;CAN”&#160;&#160;feature&#160;&#160;and&#160;&#160;set&#160;&#160;the&#160;<br/>amount&#160;&#160;to&#160;&#160;0.&#160;&#160;Otherwise&#160;&#160;the&#160;&#160;filter&#160;&#160;should&#160;&#160;be&#160;&#160;set&#160;&#160;to&#160;&#160;“close”.&#160;&#160;Use&#160;&#160;feature&#160;&#160;“Rx&#160;&#160;BasicCAN&#160;<br/>Support”&#160;to&#160;deactivate&#160;unused&#160;code&#160;(for optimization).&#160;<br/>&#160;<br/>
<b>4.3.3&#160;&#160;Remote&#160;Frames&#160;</b><br/>
<b>Remote&#160;Frames&#160;rejected&#160;in&#160;Hardware&#160;</b><br/>
<b>Remote&#160;Frames&#160;rejected&#160;in&#160;Software&#160;</b><br/>
<b>x&#160;</b><br/>
<b>&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;14&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-15_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-15_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.4&#160;</b><br/>
<b>States&#160;/&#160;Modes&#160;</b><br/>
You&#160;&#160;can&#160;&#160;change&#160;&#160;the&#160;&#160;CAN&#160;&#160;cell&#160;&#160;mode&#160;&#160;via&#160;&#160;Can_SetControllerMode().&#160;&#160;The&#160;&#160;last&#160;&#160;requested&#160;<br/>transition&#160;will be&#160;executed.&#160;The&#160;Upper layer has to&#160;take&#160;care&#160;about&#160;valid&#160;transitions.&#160;<br/>Following&#160;modes changes are supported:&#160;<br/>CAN_T_START&#160;<br/>
CAN_T_STOP&#160;<br/>
CAN_T_SLEEP&#160;<br/>
CAN_T_WAKEUP&#160;<br/>
<b>4.4.1&#160;&#160;Start Mode&#160;(Normal&#160;Running&#160;Mode)&#160;<br/></b>This&#160;&#160;is&#160;&#160;the&#160;&#160;mode&#160;&#160;where&#160;&#160;communication&#160;&#160;is&#160;&#160;possible.&#160;&#160;This&#160;&#160;mode&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;set&#160;&#160;after&#160;<br/>Initialization&#160;because&#160;Controller is&#160;first&#160;in&#160;stop-mode.&#160;<br/>
<b>4.4.2&#160;&#160;Stop&#160;Mode&#160;<br/></b>To&#160;enter stop&#160;mode&#160;the&#160;driver sets&#160;the&#160;init&#160;flag&#160;in&#160;the&#160;CAN&#160;control register to&#160;one.&#160;After this&#160;<br/>there is&#160;no&#160;CAN&#160;communication&#160;possible&#160;until&#160;stop&#160;mode&#160;is&#160;left.&#160;<br/>&#160;<br/><b>4.4.3&#160;&#160;Sleep&#160;Mode&#160;<br/></b>There&#160;&#160;are&#160;&#160;two&#160;&#160;power-down&#160;&#160;modes&#160;&#160;available,&#160;&#160;the&#160;&#160;global&#160;power-down&#160;&#160;mode&#160;&#160;and&#160;the&#160;&#160;local&#160;<br/>power-down&#160;mode.&#160;The&#160;first&#160;is&#160;supported&#160;by&#160;all&#160;TMS570&#160;DCAN&#160;derivates,&#160;the&#160;second&#160;only&#160;<br/>if&#160;&#160;it&#160;&#160;is&#160;&#160;documented&#160;&#160;in&#160;&#160;the&#160;&#160;datasheet.&#160;&#160;This&#160;&#160;is&#160;&#160;because&#160;&#160;the&#160;&#160;CAN&#160;&#160;controller&#160;&#160;has&#160;&#160;not&#160;&#160;initially&#160;<br/>supported&#160;the&#160;local&#160;power-down&#160;mode.&#160;It&#160;was&#160;added&#160;to&#160;the&#160;DCAN&#160;cell&#160;since&#160;documented&#160;<br/>in&#160;the&#160;reference&#160;guide&#160;revision&#160;0.30.&#160;More&#160;information&#160;about&#160;the&#160;selection&#160;of&#160;the&#160;different&#160;<br/>power down&#160;modes can&#160;found&#160;in&#160;table&#160;7.1&#160;“Power Down&#160;Mode&#160;Select”.&#160;<br/>To&#160;enter sleep&#160;mode&#160;the&#160;driver set&#160;the&#160;CAN&#160;control into&#160;power down&#160;mode.&#160;After this&#160;<br/>
EcuM_CheckWakeup()&#160;is called&#160;in&#160;case&#160;a&#160;wakeup&#160;over CAN event&#160;occured.&#160;<br/>Can_Cbk_CheckWakeup()&#160;can&#160;be&#160;called&#160;to&#160;check wakeup&#160;state.&#160;<br/>CAN_T_WAKEUP&#160;has&#160;to&#160;be&#160;set&#160;with&#160;Can_SetControllerMode()to&#160;leave&#160;sleep&#160;mode.&#160;<br/>&#160;<br/><b>4.4.4&#160;&#160;Bus&#160;Off&#160;<br/></b>CanIf_ControllerBusOff()&#160;is&#160;called&#160;when&#160;the&#160;controller&#160;detects&#160;a&#160;Bus&#160;Off&#160;event.&#160;The&#160;<br/>mode&#160;&#160;is&#160;&#160;automatically&#160;&#160;changed&#160;&#160;to&#160;&#160;stop&#160;&#160;mode.&#160;&#160;The&#160;&#160;upper&#160;&#160;layers&#160;&#160;have&#160;&#160;to&#160;&#160;care&#160;&#160;about&#160;<br/>returning&#160;to&#160;normal running&#160;mode&#160;by&#160;calling&#160;start mode.&#160;<br/>
<b>4.5&#160;</b><br/>
<b>Re-Initialization&#160;</b><br/>
A&#160;call&#160;to&#160;Can_InitController()&#160;cause&#160;a&#160;re-initialization&#160;of&#160;a&#160;dedicated&#160;CAN&#160;controller.&#160;<br/>Pending&#160;&#160;messages&#160;&#160;may&#160;&#160;be&#160;&#160;processed&#160;&#160;before&#160;&#160;the&#160;&#160;transition&#160;&#160;will&#160;&#160;be&#160;&#160;finished.&#160;&#160;A&#160;&#160;re-<br/>initialization&#160;is only&#160;possible&#160;out&#160;of&#160;Stop&#160;Mode&#160;and&#160;does&#160;not&#160;change&#160;to&#160;another Mode.&#160;<br/>After re-initialization&#160;all&#160;CAN&#160;communication&#160;relevant&#160;registers are&#160;set&#160;to&#160;initial conditions.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;15&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-16_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-16_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.6&#160;</b><br/>
<b>CAN Interrupt Locking&#160;</b><br/>
Can_DisableControllerInterrupts()&#160;and&#160;<br/>Can_EnableControllerInterrupts()&#160;are used&#160;to&#160;disable&#160;and&#160;enable&#160;the&#160;controller&#160;<br/>specific Interrupt,&#160;Rx,&#160;Tx,&#160;Wakeup&#160;and&#160;Bus&#160;Off&#160;(/ Status)&#160;together.&#160;These&#160;functions can&#160;be&#160;<br/>called&#160;nested.&#160;<br/>Be&#160;&#160;aware&#160;&#160;that&#160;&#160;this&#160;&#160;functions&#160;&#160;change&#160;&#160;the&#160;&#160;content&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;Interrupt&#160;&#160;inside&#160;&#160;the&#160;&#160;VIM&#160;<br/>(vector interrupt&#160;manager).&#160;<br/>
<b>4.7&#160;</b><br/>
<b>Main Functions&#160;</b><br/>
Can_MainFunction_Write(),&#160;Can_MainFunction_Read(),&#160;<br/>Can_MainFunction_BusOff()&#160;and&#160;Can_MainFunction_Wakeup()&#160;called&#160;by&#160;upper&#160;<br/>layer to&#160;poll&#160;the&#160;events&#160;if&#160;the&#160;specific&#160;polling&#160;mode&#160;is activated.&#160;Otherwise&#160;these&#160;functions&#160;<br/>return without&#160;action&#160;and&#160;the&#160;events will be&#160;handled&#160;in&#160;interrupt&#160;context.&#160;<br/>When&#160;individual polling&#160;is activated&#160;only&#160;mailboxes&#160;that&#160;are configured&#160;as to&#160;be&#160;polled&#160;will&#160;<br/>be&#160;polled&#160;in&#160;the&#160;main&#160;functions “Can_MainFunction_Write()” and&#160;<br/>“Can_MainFunction_Read()” all others&#160;handled&#160;in&#160;interrupt&#160;context.&#160;<br/>
When&#160;Rx&#160;Queue&#160;is activated&#160;the&#160;queue&#160;is&#160;filled&#160;in&#160;interrupt&#160;or polling&#160;context&#160;like&#160;<br/>configured.&#160;But&#160;The&#160;processing&#160;(indications)&#160;will&#160;be&#160;done&#160;in&#160;<br/>“Can_MainFunction_Read()” context.&#160;<br/>
<b>4.8&#160;</b><br/>
<b>Error&#160;Handling&#160;</b><br/>
<b>4.8.1&#160;&#160;Development&#160;Error&#160;Reporting&#160;<br/></b>Development&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;to&#160;&#160;DET&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;&#160;Det_ReportError(),&#160;&#160;if&#160;&#160;the&#160;<br/>pre-compile&#160;parameter CAN_DEV_ERROR_DETECT&#160;==&#160;STD_ON.&#160;<br/>The&#160;tables&#160;below,&#160;shows the&#160;API&#160;ID and&#160;Error ID given&#160;as&#160;parameter for calling&#160;the&#160;DET.&#160;<br/>Instance&#160;ID is always 0&#160;because&#160;no&#160;multiple&#160;Instances&#160;are supported.&#160;<br/>&#160;<br/>
<b>Errors&#160;reported to DET:&#160;</b><br/>
<b>Error&#160;ID&#160;</b><br/>
<b>Short&#160;Description&#160;</b><br/>
CAN_E_PARAM_POINTER&#160;<br/>
API&#160;gets&#160;an illegal&#160;pointer&#160;as&#160;parameter.&#160;<br/>
CAN_E_PARAM_HANDLE&#160;<br/>
API&#160;get&#160;an&#160;illegal&#160;handle as&#160;parameter&#160;<br/>
CAN_E_PARAM_DLC&#160;<br/>
API&#160;get&#160;an&#160;illegal&#160;DLC&#160;as&#160;parameter&#160;<br/>
CAN_E_PARAM_CONTROLLER&#160;&#160;API&#160;get&#160;an&#160;illegal&#160;controller&#160;as&#160;parameter&#160;<br/>CAN_E_UNINIT&#160;<br/>
Driver&#160;API&#160;is&#160;used&#160;but&#160;not&#160;initialized&#160;<br/>
CAN_E_TRANSITION&#160;<br/>
Transition&#160;for mode change&#160;is&#160;illegal&#160;<br/>
CAN_E_DATALOST&#160;<br/>
Rx&#160;overrun (overwrite) detected&#160;<br/>
(value:&#160;0x07,&#160;AutoSar extension)&#160;<br/>CAN_E_PARAM_BAUDRATE&#160;<br/>
Selected&#160;Baudrate is&#160;not&#160;valid&#160;<br/>
(value:&#160;0x08,&#160;AutoSar extension)&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;16&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-17_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-17_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
CAN_E_RXQUEUE&#160;<br/>
Rx&#160;Queue&#160;overrun&#160;(last received&#160;message is&#160;lost, and&#160;will&#160;not&#160;be&#160;<br/>
(value:&#160;0x10,&#160;AutoSar extension)&#160;<br/>
received&#160;&#160;increase queue&#160;size)&#160;<br/>
Same as&#160;CAN_E_TIMEOUT&#160;for DEM&#160;but this&#160;is&#160;notified to DET&#160;due to&#160;<br/>
CAN_E_TIMEOUT_DET&#160;<br/>
switch “CAN_DEV_TIMEOUT_DETECT”&#160;is&#160;set&#160;to&#160;STD_ON (see&#160;<br/>
(value:&#160;0x11,&#160;AutoSar extension)&#160;<br/>
configuration&#160;options)&#160;<br/>
Table&#160;4-3&#160;&#160;&#160;Errors&#160;reported&#160;to&#160;DET&#160;<br/>
&#160;<br/>
<b>API&#160;from&#160;which the&#160;errors&#160;reported to DET:&#160;</b><br/>
<b>API&#160;ID&#160;</b><br/>
<b>Functions&#160;using&#160;that&#160;ID&#160;</b><br/>
CAN_VERSION_ID&#160;<br/>
Can_GetVersionInfo()&#160;<br/>
CAN_INIT_ID&#160;<br/>
Can_Init()&#160;<br/>
CAN_INITCTR_ID&#160;<br/>
Can_InitController()&#160;<br/>
CAN_SETCTR_ID&#160;<br/>
Can_SetControllerMode()&#160;<br/>
CAN_DIINT_ID&#160;<br/>
Can_DisableControllerInterrupts()&#160;<br/>
CAN_ENINT_ID&#160;<br/>
Can_EnableControllerInterrupts()&#160;<br/>
CAN_WRITE_ID&#160;<br/>
Can_Write(), Can_CancelTx()&#160;<br/>
CAN_TXCNF_ID&#160;<br/>
CanHL_TxConfirmation()&#160;<br/>
CAN_RXINDI_ID&#160;<br/>
CanBasicCanMsgReceived(), CanFullCanMsgReceived()&#160;<br/>
CAN_CTRBUSOFF_ID&#160;<br/>
CanHL_ErrorHandling()&#160;<br/>
CAN_CKWAKEUP_ID&#160;<br/>
CanHL_WakeUpHandling(), Can_Cbk_CheckWakeup()&#160;<br/>
CAN_MAINFCT_WRITE_ID&#160;<br/>
Can_MainFunction_Write()&#160;<br/>
CAN_MAINFCT_READ_ID&#160;<br/>
Can_MainFunction_Read()&#160;<br/>
CAN_MAINFCT_BO_ID&#160;<br/>
Can_MainFunction_BusOff()&#160;<br/>
CAN_MAINFCT_WU_ID&#160;<br/>
Can_MainFunction_Wakeup()&#160;<br/>
CAN_MAINFCT_MODE_ID&#160;<br/>
Can_MainFunction_Mode()&#160;<br/>
CAN_CHANGE_BR_ID&#160;<br/>
Can_ChangeBaudrate()&#160;<br/>
CAN_CHECK_BR_ID&#160;<br/>
Can_CheckBaudrate()&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_HW_ACCESS_ID&#160;<br/>
Used&#160;when&#160;hardware is&#160;accessed&#160;(call&#160;context&#160;is&#160;unknown)&#160;<br/>
(value:&#160;0x20,&#160;AUTOSAR&#160;extension)&#160;<br/>
Table&#160;4-4&#160;<br/>
API&#160;from&#160;which&#160;the&#160;Errors&#160;are&#160;reported&#160;<br/>
<b>4.8.1.1&#160;</b><br/>
<b>Parameter&#160;Checking&#160;</b><br/>
AUTOSAR&#160;requires&#160;that&#160;API&#160;functions&#160;check&#160;the&#160;validity&#160;of&#160;their&#160;parameters&#160;(Refer&#160;to&#160;[1]).&#160;<br/>These&#160;&#160;checks&#160;&#160;are&#160;&#160;for&#160;&#160;development&#160;&#160;error&#160;&#160;reporting&#160;&#160;and&#160;&#160;can&#160;&#160;be&#160;&#160;enabled&#160;&#160;and&#160;&#160;disabled&#160;<br/>separately.&#160;Refer&#160;to&#160;the&#160;configuration&#160;chapter&#160;where&#160;the&#160;enabling/disabling&#160;of&#160;the&#160;checks&#160;is&#160;<br/>described.&#160;&#160;Enabling/disabling&#160;&#160;of&#160;&#160;single&#160;&#160;checks&#160;&#160;is&#160;&#160;an&#160;&#160;addition&#160;&#160;to&#160;&#160;the&#160;AUTOSAR&#160;&#160;standard&#160;<br/>which&#160;&#160;requires&#160;&#160;enable/disable&#160;&#160;the&#160;&#160;complete&#160;&#160;parameter&#160;&#160;checking&#160;&#160;via&#160;&#160;the&#160;&#160;parameter&#160;<br/>CAN_DEV_ERROR_DETECT.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;17&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-18_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-18_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-18_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.8.1.2&#160;</b><br/>
<b>Overrun/Overwrite&#160;Notification&#160;</b><br/>
As&#160;AUTOSAR&#160;extension&#160;the&#160;overrun&#160;detection&#160;may&#160;be&#160;activated&#160;by&#160;configuration&#160;tool.&#160;The&#160;<br/>notification&#160;&#160;can&#160;&#160;be&#160;&#160;configured&#160;&#160;to&#160;&#160;call&#160;&#160;an&#160;&#160;DET&#160;&#160;(MICROSAR4x)&#160;&#160;or&#160;&#160;Application&#160;&#160;call&#160;<br/><i>ApplCanOverrun</i>()&#160;or&#160;<i>ApplCanFullCanOverrun</i>().&#160;<br/>
<b>Info&#160;<br/></b>The&#160;overrun/overwrite&#160;behavior of&#160;FullCAN and&#160;BasicCAN mailboxes differs&#160;from&#160;<br/>
&#160;&#160;each&#160;other.&#160;<br/>
&#160;<br/>For&#160;FullCAN&#160;mailboxes:&#160;the&#160;old&#160;message&#160;is overwritten&#160;by&#160;a&#160;new&#160;incoming&#160;one.&#160;<br/>The&#160;old&#160;message&#160;gets&#160;lost.&#160;<br/>&#160;<br/>For&#160;BasicCAN&#160;mailboxes:&#160;the&#160;old&#160;message&#160;is&#160;not&#160;overwritten&#160;by&#160;a&#160;new&#160;incoming&#160;<br/>one.&#160;The&#160;new&#160;message&#160;gets lost.&#160;<br/>
<b>4.8.2&#160;&#160;Production Code&#160;Error Reporting&#160;<br/></b>Production&#160;&#160;code&#160;&#160;related&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;to&#160;&#160;DEM&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;<br/>Dem_ReportErrorStatus(),&#160;if&#160;the&#160;pre-compile&#160;parameter&#160;CAN_PROD_ERROR_DETECT&#160;<br/>== STD_ON.&#160;<br/>
The&#160;table&#160;below&#160;shows&#160;the&#160;API&#160;ID&#160;and&#160;Error&#160;ID&#160;given&#160;as&#160;parameter&#160;for&#160;calling&#160;the&#160;DEM.&#160;<br/>This&#160;means&#160;that&#160;the&#160;Error Ids listed&#160;below&#160;could&#160;occur in&#160;most&#160;of&#160;the&#160;API&#160;Ids.&#160;<br/>
<b>Event&#160;ID&#160;</b><br/>
<b>Event&#160;Status&#160;</b><br/>
<b>Short&#160;Description&#160;</b><br/>
CAN_E_TIMEOUT&#160;<br/>
DEM_EVENT_STATUS_FAILED&#160;<br/>
Timeout&#160;&#160;in&#160;&#160;“Hardware&#160;&#160;Loop&#160;&#160;Check”&#160;&#160;occurred,&#160;<br/>
&#160;<br/>
hardware&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;checked&#160;&#160;or&#160;&#160;timeout&#160;&#160;is&#160;&#160;too&#160;<br/>short.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;4-5&#160;&#160;&#160;Errors&#160;reported&#160;to&#160;DEM&#160;<br/>
<b>4.8.2.1&#160;</b><br/>
<b>Hardware&#160;Loop&#160;Check&#160;/&#160;Timeout&#160;Monitoring&#160;</b><br/>
The&#160;feature&#160;“Hardware&#160;Loop&#160;Check”&#160;is&#160;used&#160;to&#160;break&#160;endless&#160;loops&#160;caused&#160;by&#160;hardware&#160;<br/>issue.&#160;This&#160;feature is&#160;configurable&#160;see&#160;Chapter 7&#160;and&#160;also&#160;Timeout&#160;Duration&#160;description.&#160;<br/>The&#160;&#160;Hardware&#160;&#160;Loop&#160;&#160;Check&#160;&#160;will&#160;&#160;be&#160;&#160;handled&#160;&#160;by&#160;&#160;CAN&#160;&#160;driver&#160;&#160;internal&#160;&#160;except&#160;&#160;when&#160;&#160;setting&#160;<br/>“Hardware&#160;Loop&#160;Check&#160;by&#160;Application” is activated.&#160;<br/>&#160;<br/>
<b>Loop&#160;Name&#160;/&#160;</b><br/>
<b>Short&#160;Description&#160;</b><br/>
<b>source&#160;<br/></b>kCanLoopIrqReq&#160;<br/>
Loop&#160;&#160;over&#160;&#160;all&#160;&#160;pending&#160;&#160;interrupts&#160;&#160;(Rx,&#160;&#160;Tx,&#160;&#160;BusOff).&#160;&#160;This&#160;&#160;loop&#160;&#160;is&#160;&#160;used&#160;&#160;to&#160;&#160;stay&#160;&#160;in&#160;<br/>interrupt&#160;context&#160;until&#160;&#160;all&#160;interrupt&#160;events&#160;are&#160;executed.&#160;This&#160;saves&#160;time&#160;because&#160;<br/>no&#160;reentering&#160;of&#160;ISR&#160;is&#160;needed to execute more than&#160;one&#160;event.&#160;<br/>
kCanLoopBusyReq&#160;<br/>
Loop&#160;used&#160;to&#160;indicate&#160;can&#160;cell&#160;busy&#160;state.&#160;Maximum&#160;duration&#160;of&#160;the&#160;loop&#160;should be&#160;<br/>at&#160;most 3-6 CAN CLK&#160;periods.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;18&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-19_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-19_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
kCanLoopSleep&#160;<br/>
MICROSAR3:&#160;<br/>
-&#160;<br/>
Used&#160;while transition&#160;in mode ‘SLEEP’.&#160;<br/>
-&#160;<br/>
Call&#160;context: Can_SetControllerMode()&#160;<br/>
-&#160;<br/>
Expected&#160;duration:&#160;after the&#160;request to enter&#160;sleep mode&#160;is&#160;set,&#160;the&#160;CAN&#160;<br/>cell&#160;finishes&#160;all&#160;transmission&#160;and reception&#160;processes.&#160;After&#160;this&#160;it&#160;waits&#160;<br/>until&#160;a&#160;bus&#160;idle state&#160;is&#160;recognized.&#160;Then&#160;the&#160;Init-bit&#160;will&#160;be&#160;set&#160;to 1&#160;to&#160;<br/>indicate&#160;that&#160;the&#160;sleep mode has&#160;been&#160;entered.&#160;&#160;<br/>The&#160;expected&#160;duration&#160;lasts&#160;one&#160;CAN frame&#160;including interframe space.&#160;<br/>
MICROSAR4:&#160;<br/>Used&#160;for short time mode transition&#160;blocking&#160;(short synchronous&#160;timeout). Same&#160;<br/>value&#160;for kCanLoopSleep&#160;and&#160;kCanLoopWakeup.&#160;No Issue&#160;when&#160;timeout&#160;occur.&#160;<br/>
kCanLoopWakeup&#160;<br/>
MICROSAR3:&#160;<br/>
-&#160;<br/>
Used&#160;while transition&#160;in mode ‘WAKEUP’.&#160;<br/>
-&#160;<br/>
Call&#160;context: Can_SetControllerMode()&#160;<br/>
-&#160;<br/>
Expected&#160;duration:&#160;If&#160;the&#160;CAN cell&#160;leaves&#160;sleep&#160;mode,&#160;the&#160;Init-Bit&#160;will&#160;be&#160;<br/>cleared.&#160;After&#160;this&#160;the DCAN module&#160;waits&#160;until&#160;it&#160;detects&#160;11 consecutive&#160;<br/>recessive&#160;bits&#160;on the CAN_RX&#160;pin&#160;and&#160;then goes&#160;Bus-Active again.&#160;<br/>
MICROSAR4:&#160;<br/>Used&#160;for short time mode transition&#160;blocking&#160;(short synchronous&#160;timeout). Same&#160;<br/>value&#160;for kCanLoopSleep&#160;and&#160;kCanLoopWakeup.&#160;No Issue&#160;when&#160;timeout&#160;occur.&#160;<br/>
Table&#160;4-6&#160;&#160;&#160;Hardware&#160;Loop&#160;Check&#160;<br/>
In&#160;the&#160;generation&#160;tool the&#160;user has&#160;to&#160;set&#160;a&#160;value&#160;for the&#160;number of&#160;loops&#160;until that&#160;the&#160;<br/>time-out&#160;duration&#160;occurs. This must&#160;be&#160;the&#160;value&#160;of&#160;the&#160;most&#160;often&#160;covered&#160;hardware loop.&#160;<br/>It&#160;is the&#160;“loop&#160;over all pending&#160;interrupts” (loop&#160;name&#160;kCanLoopIrqReq) and&#160;has the&#160;size&#160;of&#160;<br/>the&#160;maximum&#160;number&#160;of&#160;message&#160;objects.&#160;For the&#160;TMS570&#160;it&#160;is 64&#160;and&#160;with&#160;a&#160;security&#160;<br/>buffer a&#160;good&#160;value&#160;to&#160;use&#160;will be&#160;100.&#160;<br/>&#160;<br/><b>4.8.3&#160;&#160;CAN&#160;RAM&#160;Check&#160;<br/></b>The&#160;CAN&#160;driver&#160;supports&#160;a&#160;check&#160;of&#160;the&#160;CAN&#160;controller’s&#160;mailboxes.&#160;The&#160;CAN&#160;controller&#160;<br/>RAM&#160;&#160;check&#160;&#160;is&#160;&#160;called&#160;&#160;internally&#160;&#160;every&#160;&#160;time&#160;&#160;a&#160;&#160;power&#160;&#160;on&#160;&#160;is&#160;&#160;executed&#160;&#160;within&#160;&#160;function&#160;<br/>Can_InitController(),&#160;or&#160;a&#160;Bus-Wakeup&#160;event&#160;happen.&#160;The&#160;CAN&#160;driver&#160;verifies&#160;that&#160;no&#160;used&#160;<br/>mailboxes&#160;are&#160;corrupt.&#160;A&#160;mailbox&#160;is&#160;considered&#160;corrupt&#160;if&#160;a&#160;predefined&#160;pattern&#160;is&#160;written&#160;to&#160;<br/>the&#160;&#160;appropriate&#160;&#160;mailbox&#160;&#160;registers&#160;&#160;and&#160;&#160;the&#160;&#160;read&#160;&#160;operation&#160;&#160;does&#160;&#160;not&#160;&#160;return&#160;&#160;the&#160;&#160;expected&#160;<br/>pattern.&#160;If&#160;a&#160;corrupt&#160;mailbox&#160;is&#160;found&#160;the&#160;function&#160;Appl_CanCorruptMailbox()&#160;is&#160;called.&#160;This&#160;<br/>function&#160;tells the&#160;application&#160;which&#160;mailbox&#160;is corrupt.&#160;&#160;<br/>After&#160;&#160;the&#160;&#160;check&#160;&#160;of&#160;&#160;all&#160;&#160;mailboxes&#160;&#160;the&#160;&#160;CAN&#160;&#160;driver&#160;&#160;calls&#160;&#160;the&#160;&#160;call&#160;&#160;back&#160;&#160;function&#160;<br/>Appl_CanRamCheckFailed()&#160;&#160;if&#160;&#160;at&#160;&#160;least&#160;&#160;one&#160;&#160;corrupt&#160;&#160;mailbox&#160;&#160;was&#160;&#160;found.&#160;&#160;The&#160;&#160;application&#160;<br/>must&#160;&#160;decide&#160;&#160;if&#160;&#160;the&#160;&#160;CAN&#160;&#160;driver&#160;&#160;disables&#160;&#160;communication&#160;&#160;or&#160;&#160;not&#160;&#160;by&#160;&#160;means&#160;&#160;of&#160;&#160;the&#160;&#160;call&#160;&#160;back&#160;<br/>function’s&#160;return&#160;value.&#160;If&#160;the&#160;application&#160;has decided&#160;to&#160;disable&#160;the&#160;communication&#160;there&#160;is&#160;<br/>no&#160;possibility&#160;to&#160;enable&#160;the&#160;communication&#160;again&#160;until the&#160;next&#160;call&#160;to&#160;Can_Init().&#160;<br/>The&#160;CAN&#160;RAM check&#160;functionality&#160;itself&#160;can&#160;be&#160;activated&#160;via&#160;Generation&#160;Tool.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;19&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-20_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-20_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-20_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>4.8.4&#160;&#160;Hardware&#160;Specific&#160;<br/></b>There are&#160;some&#160;restrictions in&#160;the&#160;hardware&#160;as&#160;not&#160;all&#160;the&#160;CAN&#160;driver&#160;features&#160;are&#160;<br/>supported.&#160;The&#160;not&#160;supported&#160;features&#160;are:&#160;<br/>&#160;<br/>
1.&#160;&#160;Cancel in&#160;Hardware:&#160;<br/>The&#160;hardware does&#160;not&#160;provide&#160;support to&#160;request&#160;a&#160;cancelation&#160;for&#160;an&#160;already&#160;<br/>requested&#160;(pending)&#160;transition.&#160;Consequently&#160;it is not&#160;possible&#160;to&#160;support cancel in&#160;<br/>hardware.&#160;<br/>
&#160;<br/>
2.&#160;&#160;Multiplexed&#160;Transmitting:&#160;<br/>The&#160;mailboxes are&#160;prioritized&#160;by&#160;hardware index&#160;and&#160;not&#160;by&#160;CAN&#160;ID.&#160;Consequently&#160;it is&#160;<br/>not&#160;possible&#160;to&#160;support&#160;multiplexed&#160;transmission.&#160;<br/>
&#160;<br/>
3.&#160;&#160;Supported&#160;Controllermode:&#160;<br/>The&#160;CAN&#160;driver was designed&#160;to&#160;run&#160;in&#160;privileged&#160;mode&#160;only.&#160;There&#160;is no&#160;support&#160;for&#160;<br/>user mode.&#160;<br/>
&#160;<br/>
4.&#160;&#160;Errata&#160;DCAN#22:&#160;<br/>There could&#160;happen&#160;that&#160;an&#160;incorrect&#160;payload&#160;(data&#160;bytes)&#160;is stored&#160;in&#160;mailbox&#160;under&#160;<br/>certain&#160;conditions.&#160;This&#160;is a&#160;HW&#160;issue&#160;present&#160;in&#160;several revisions (A&#160;and&#160;earlier).&#160;For&#160;<br/>details&#160;please&#160;refer to&#160;silicon&#160;errata.&#160;The&#160;CAN driver implements&#160;the&#160;first&#160;workaround&#160;<br/>proposal no.1&#160;as it&#160;can&#160;be&#160;applied&#160;also&#160;to&#160;the&#160;families&#160;without&#160;local power down-mode&#160;<br/>and&#160;it&#160;does not&#160;disturb&#160;the&#160;other peripherals.&#160;<br/>
&#160;<br/>
For that&#160;purpose&#160;the&#160;user has to&#160;calibrate&#160;a&#160;“6&#160;NOPs”&#160;dummy&#160;loop,&#160;i.e.&#160;the&#160;software&#160;<br/>has to&#160;wait for at&#160;least&#160;6&#160;CAN&#160;clocks&#160;cycles&#160;(corresponding&#160;to&#160;the&#160;CAN clock&#160;input&#160;and&#160;<br/>not&#160;CAN&#160;bus).&#160;The&#160;6&#160;NOPs are&#160;not&#160;optimized&#160;and&#160;the&#160;group&#160;cannot&#160;take&#160;less&#160;than&#160;6&#160;<br/>CPU cycles&#160;even&#160;if&#160;the&#160;core has a&#160;pipeline.&#160;<br/>&#160;<br/>
&#160;<br/>
The&#160;number of&#160;iterations through&#160;the&#160;“6&#160;NOPs”&#160;has the&#160;following&#160;formula:&#160;<br/>
ErrataDcan22Iterations&#160;=&#160;CPU_CLOCK/CAN_CLOCK&#160;<br/>
Afterwards&#160;the&#160;calculated&#160;value&#160;corresponding&#160;to&#160;ErrataDcan22Iterations&#160;has to&#160;be&#160;<br/>entered&#160;in&#160;the&#160;configuration&#160;(see<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#45">&#160;7.4.2).</a>&#160;<br/>
&#160;<br/>&#160;<br/>
<b>Info&#160;<br/></b>If&#160;the&#160;used&#160;version&#160;of&#160;the&#160;silicon&#160;is&#160;not&#160;affected&#160;by&#160;this issue,&#160;the&#160;workaround&#160;can&#160;<br/>
&#160;&#160;be&#160;disabled&#160;as&#160;followings:&#160;&#160;<br/>
&#160;<br/>1)&#160;A&#160;user config&#160;file&#160;has to&#160;be&#160;created;&#160;this will be&#160;installed&#160;in&#160;the&#160;CAN driver&#160;<br/>component&#160;of&#160;the&#160;configuration&#160;(see<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#45">&#160;7.4.2).</a>&#160;<br/>&#160;<br/>2)&#160;This&#160;used&#160;config&#160;file&#160;will contain&#160;the&#160;following&#160;line:&#160;&#160;<br/>#define&#160;C_DISABLE_DCAN_ISSUE22_WORKAROUND.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;20&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-21_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-21_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>5.&#160;&#160;Integration&#160;</b><br/>
This&#160;chapter&#160;gives&#160;necessary&#160;information&#160;for&#160;the&#160;integration&#160;of&#160;the&#160;MICROSAR&#160;&#160;CAN&#160;into&#160;<br/>an&#160;application&#160;environment&#160;of&#160;an&#160;ECU.&#160;<br/>
<b>5.1&#160;</b><br/>
<b>Scope&#160;of&#160;Delivery&#160;</b><br/>
The&#160;delivery&#160;of&#160;the&#160;CAN&#160;contains&#160;the&#160;files,&#160;which&#160;are&#160;described&#160;in&#160;the&#160;chapter’<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">s&#160;5.1.1&#160;</a>and&#160;<br/><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">5.1.2:</a>&#160;<br/>Dependent&#160;on&#160;library&#160;or source&#160;code&#160;delivery&#160;the&#160;marked&#160;(+) files&#160;may&#160;not&#160;be&#160;delivered.&#160;<br/>
<b>5.1.1&#160;&#160;Static&#160;Files&#160;</b><br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
(+)&#160;canproto.h&#160;<br/>
This&#160;is&#160;an&#160;internal&#160;header&#160;file which should not&#160;be&#160;included&#160;outside&#160;this&#160;<br/>module&#160;<br/>
(+)&#160;Can.c&#160;<br/>
This&#160;is&#160;the&#160;source&#160;file of&#160;the&#160;CAN.&#160;It&#160;contains&#160;the&#160;implementation&#160;of&#160;CAN&#160;<br/>module&#160;functionality.&#160;<br/>
(+)&#160;Can.lib&#160;<br/>
This&#160;is&#160;the&#160;library&#160;build out&#160;of&#160;Can.c,&#160;Can.h&#160;and CanProto.h&#160;<br/>
Can.h&#160;<br/>
This&#160;is&#160;the&#160;header&#160;file of&#160;the&#160;CAN&#160;module (include&#160;API&#160;declaration)&#160;<br/>
Can_Hooks.h&#160;<br/>
This&#160;is&#160;the&#160;header&#160;file&#160;to&#160;define&#160;the&#160;Hook-functions&#160;or&#160;macros.&#160;<br/>
Can_Irq.c&#160;<br/>
This&#160;is&#160;the&#160;interrupt&#160;declaration&#160;and&#160;callout&#160;file (supports&#160;interrupt&#160;<br/>configuration&#160;as link&#160;time&#160;settings)&#160;<br/>
Table&#160;5-1&#160;&#160;&#160;Static&#160;files&#160;<br/>
&#160;<br/>
<b>5.1.2&#160;&#160;Dynamic&#160;Files&#160;<br/></b>The&#160;dynamic&#160;files are&#160;generated&#160;by&#160;the&#160;configuration&#160;tool [GENy].&#160;<br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
Can_Cfg.h&#160;<br/>
Generated&#160;header&#160;file,&#160;contains some&#160;type,&#160;prototype&#160;and pre-compile&#160;<br/>settings&#160;<br/>
Can_Lcfg.c&#160;<br/>
Generated&#160;file&#160;contains link time settings.&#160;<br/>
Can_PBcfg.c&#160;<br/>
Generated&#160;file&#160;contains post&#160;build settings.&#160;<br/>
Can_DrvGeneral&#160;Generated&#160;file&#160;contains&#160;CAN&#160;driver&#160;part&#160;of&#160;Can_GeneralTypes.h&#160;(supported&#160;<br/>Types.h&#160;<br/>
by&#160;Integrator)&#160;<br/>
Table&#160;5-2&#160;&#160;&#160;Generated&#160;files&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;21&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-22_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-22_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-22_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>5.2&#160;</b><br/>
<b>Include&#160;Structure&#160;</b><br/>
&#160;<br/>
Figure&#160;5-1&#160;&#160;Include&#160;Structure&#160;(AUTOSAR)&#160;<br/>
Deviation&#160;from&#160;AUTOSAR specification:&#160;<br/><b>&gt;&#160;&#160;</b>Additionally&#160;the&#160;EcuM_Cbk.h&#160;is included&#160;by&#160;Can_Cfg.h&#160;(needed&#160;for&#160;wakeup&#160;notification&#160;<br/>
API).&#160;<br/>
<b>&gt;&#160;&#160;</b>ComStack_Types.h&#160;included&#160;by&#160;Can_Cfg.h,&#160;because&#160;the&#160;specified&#160;types have&#160;to&#160;be&#160;<br/>
known&#160;in&#160;generated&#160;data&#160;as well.&#160;<br/>
<b>&gt;&#160;&#160;</b>MICROSAR4x&#160;only:&#160;Os.h&#160;will be&#160;included&#160;by&#160;Can_Cfg.h&#160;because&#160;of&#160;used&#160;data-types&#160;<br/>
<b>&gt;&#160;&#160;</b>Spi.h&#160;is&#160;not&#160;yet&#160;used.&#160;<br/>
<b>&gt;&#160;&#160;</b>Additionally&#160;the&#160;file&#160;Can_Hooks.h&#160;will be&#160;included&#160;by&#160;Can.h.&#160;<br/>
<b>&gt;&#160;&#160;</b>MICROSAR403&#160;only:&#160;Can_GeneralTypes.h&#160;will&#160;be&#160;included&#160;by&#160;Can_Cfg.h&#160;not&#160;by&#160;<br/>
Can.h&#160;direct.&#160;<br/>
&#160;<br/>
<b>5.3&#160;</b><br/>
<b>Critical&#160;Sections&#160;</b><br/>
The&#160;AUTOSAR&#160;standard&#160;provides&#160;with&#160;the&#160;BSW&#160;Scheduler&#160;a&#160;BSW&#160;module,&#160;which&#160;handles&#160;<br/>entering&#160;and&#160;leaving&#160;critical sections.&#160;&#160;<br/>For&#160;&#160;more&#160;&#160;information&#160;&#160;about&#160;&#160;the&#160;&#160;BSW&#160;&#160;Scheduler&#160;&#160;please&#160;&#160;refer&#160;&#160;to&#160;&#160;[3].&#160;&#160;When&#160;&#160;the&#160;&#160;BSW&#160;<br/>Scheduler&#160;is&#160;used&#160;the&#160;CAN&#160;Driver&#160;provides&#160;critical&#160;section&#160;codes&#160;that&#160;have&#160;to&#160;be&#160;mapped&#160;<br/>by&#160;the&#160;BSW&#160;Scheduler&#160;to&#160;following&#160;mechanism:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;22&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-23_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-23_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Critical&#160;Section&#160;Define&#160;</b><br/>
<b>Description&#160;</b><br/>
CAN_EXCLUSIVE_AREA_0&#160;<br/>
CanSingleGlobalInterruptDisable/Restore():&#160;<br/>Using&#160;inside&#160;Can_MainFunction_Write()&#160;to&#160;secure a consistent&#160;polling&#160;of&#160;<br/>a&#160;transmit object.&#160;<br/>&#160;<br/>&#160;&#160;Duration&#160;is&#160;short (&lt;&#160;10&#160;instructions).&#160;<br/>
&#160;&#160;No&#160;API&#160;call&#160;of&#160;other BSW&#160;inside.&#160;<br/>
CanNestedGlobalInterruptDisable/Restore():&#160;<br/>Using&#160;inside&#160;CanHL_TxConfirmation&#160;to secure a&#160;consistent&#160;release&#160;of&#160;a&#160;<br/>transmit object after successful&#160;transmission.&#160;<br/>&#160;<br/>&#160;&#160;Duration&#160;is&#160;short (&lt;&#160;10&#160;instructions)&#160;<br/>
&#160;&#160;No&#160;API&#160;call&#160;of&#160;other BSW&#160;inside.&#160;<br/>
CAN_EXCLUSIVE_AREA_1&#160;<br/>
Using&#160;inside&#160;Can_DisableControllerInterrupts()&#160;and&#160;<br/>Can_EnableControllerInterrupts()&#160;to&#160;secure Interrupt counters&#160;for nested&#160;<br/>calls.&#160;<br/>
&#160;&#160;Duration&#160;is&#160;short (&lt;&#160;10&#160;instructions)&#160;<br/>
&#160;&#160;No&#160;API&#160;call&#160;of&#160;other&#160;BSW&#160;inside.&#160;<br/>
&#160;&#160;Disable global&#160;interrupts&#160;–&#160;or&#160;–&#160;Empty&#160;in case&#160;<br/>
Can_Disable/EnableControllerInterrupts()&#160;are called&#160;within&#160;context&#160;<br/>with&#160;lower&#160;or equal&#160;priority&#160;than CAN&#160;interrupt.&#160;<br/>
CAN_EXCLUSIVE_AREA_2&#160;<br/>
Using&#160;inside&#160;Can_Write()&#160;to&#160;secure software states&#160;of&#160;transmit objects.&#160;<br/>
&#160;&#160;Only&#160;when no&#160;Vector CAN Interface is&#160;used.&#160;<br/>
&#160;&#160;Duration&#160;is&#160;medium&#160;(&lt;&#160;60 instructions)&#160;<br/>
&#160;&#160;No&#160;API&#160;call&#160;of&#160;other BSW&#160;inside.&#160;<br/>
&#160;&#160;Disable global&#160;interrupts&#160;-&#160;or&#160;-&#160;Disable CAN&#160;interrupts&#160;and&#160;does&#160;not&#160;<br/>
call&#160;function&#160;reentrant.&#160;<br/>
CAN_EXCLUSIVE_AREA_3&#160;<br/>
Using&#160;inside&#160;Tx&#160;confirmation&#160;to&#160;secure state&#160;of&#160;transmit object in case of&#160;<br/>cancellation.&#160;(Only&#160;used&#160;when&#160;Vector Interface&#160;Version&#160;smaller 4.10&#160;<br/>used)&#160;<br/>
&#160;&#160;Duration&#160;is&#160;short (&lt;&#160;20&#160;instructions)&#160;<br/>
&#160;&#160;Call&#160;to&#160;CanIf_CancelTxConfirmation()&#160;inside&#160;(no more calls&#160;in CanIf).&#160;<br/>
&#160;&#160;Disable global&#160;interrupts&#160;-&#160;or&#160;-&#160;Disable CAN&#160;interrupts&#160;and&#160;do not call&#160;<br/>
function&#160;Can_Write()&#160;within.&#160;<br/>
CAN_EXCLUSIVE_AREA_4&#160;<br/>
Using&#160;inside&#160;received&#160;data&#160;handling&#160;(Rx&#160;Queue&#160;treatment)&#160;to&#160;secure Rx&#160;<br/>Queue&#160;counter and data.&#160;<br/>
&#160;&#160;Duration&#160;is&#160;short (&lt;&#160;20&#160;instructions)&#160;<br/>
&#160;&#160;No&#160;API&#160;call&#160;of&#160;other BSW&#160;inside.&#160;<br/>
&#160;&#160;Disable Global&#160;Interrupts&#160;-&#160;or&#160;-&#160;Disable&#160;all&#160;CAN interrupts.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;23&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-24_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-24_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
CAN_EXCLUSIVE_AREA_5&#160;<br/>
Using&#160;inside&#160;wakeup handling&#160;to&#160;secure state&#160;transition.&#160;(Only&#160;in&#160;wakeup&#160;<br/>polling&#160;mode)&#160;<br/>
&#160;&#160;Duration&#160;is&#160;short&#160;Duration&#160;is&#160;short (&lt;&#160;10&#160;instructions).&#160;<br/>
&#160;&#160;Call&#160;to&#160;DET&#160;inside.&#160;<br/>
&#160;&#160;Disable global&#160;interrupts&#160; &#160;(do&#160;no use&#160;here CAN&#160;interrupt&#160;locks)&#160;<br/>
CAN_EXCLUSIVE_AREA_6&#160;<br/>
Using&#160;inside&#160;Can_SetControllerMode()&#160;and&#160;BusOff&#160;to&#160;secure&#160;state&#160;<br/>transition.&#160;<br/>
&#160;&#160;Duration&#160;is&#160;medium&#160;(&lt;&#160;100&#160;instructions)&#160;<br/>
&#160;&#160;No&#160;API&#160;call&#160;of&#160;other BSW&#160;inside.&#160;<br/>
&#160;&#160;Use CAN&#160;interrupt&#160;locks&#160;here,&#160;when the&#160;API for one&#160;controller is&#160;not&#160;<br/>
called in a&#160;context&#160;higher&#160;than&#160;the CAN interrupt&#160;<br/>or&#160;<br/>Disable global&#160;interrupts&#160;<br/>
Table&#160;5-3&#160;&#160;&#160;Critical&#160;Section&#160;Codes&#160;<br/>
<b>5.4&#160;</b><br/>
<b>Compiler&#160;Abstraction and Memory&#160;Mapping&#160;&#160;</b><br/>
The&#160;&#160;objects&#160;&#160;(e.g.&#160;&#160;variables,&#160;&#160;functions,&#160;&#160;constants)&#160;&#160;are&#160;&#160;declared&#160;&#160;by&#160;&#160;compiler&#160;&#160;independent&#160;<br/>definitions&#160;&#160;–&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definitions.&#160;&#160;Each&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definition&#160;&#160;is&#160;<br/>assigned&#160;to&#160;a&#160;memory&#160;section.&#160;<br/>The&#160;&#160;following&#160;&#160;table&#160;&#160;contains&#160;&#160;the&#160;&#160;memory&#160;&#160;section&#160;&#160;names&#160;&#160;and&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;<br/>definitions&#160;&#160;defined&#160;&#160;for&#160;&#160;the&#160;&#160;CAN&#160;&#160;Interface&#160;&#160;and&#160;&#160;illustrates&#160;&#160;their&#160;&#160;assignment&#160;&#160;among&#160;&#160;each&#160;<br/>other.&#160;<br/>
<b>Compiler&#160;Abstraction&#160;</b><br/>
<b>Definitions&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
L&#160;<br/>
E<br/>
G<br/>F<br/>
L<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
T<br/>
&#160;<br/>
C<br/>
&#160;<br/>
E<br/>
A<br/>
E<br/>
S<br/>
OD<br/>
B<br/>
TI<br/>
C<br/>
T<br/>
&#160;<br/>
P<br/>
N<br/>
&#160;<br/>
L&#160;<br/>
N<br/>
A<br/>
R<br/>
<b>Memory&#160;Mapping&#160;</b><br/>
C&#160;<br/>
&#160;&#160;<br/>
TI<br/>
A<br/>
D<br/>
OD<br/>
ON<br/>
A<br/>
&#160;<br/>
_<br/>
T<br/>
T_<br/>
OI<br/>
N<br/>
TR<br/>
_<br/>
C<br/>
C<br/>
V<br/>
E<br/>
C<br/>
S<br/>
S<br/>
N<br/>
I<br/>
C<br/>
X<br/>
_<br/>
_<br/>
_<br/>
<b>Sections&#160;</b><br/>
TI<br/>
_<br/>
_<br/>
G_<br/>
T_<br/>
L<br/>
L<br/>
L<br/>
OD<br/>
A<br/>
ON<br/>
ON<br/>
R<br/>
R<br/>
P<br/>
P<br/>
P<br/>
A<br/>
T_C<br/>
E<br/>
X<br/>
P<br/>
P<br/>
P<br/>
C<br/>
T<br/>
A<br/>
N<br/>
&#160;<br/>
C<br/>
C<br/>
V<br/>
A<br/>
A<br/>
A<br/>
_<br/>
_S<br/>
&#160;_<br/>
&#160;_<br/>
V_<br/>
&#160;_<br/>
&#160;I_<br/>
&#160;R_<br/>
&#160;R_<br/>
&#160;_<br/>
&#160;_<br/>
&#160;_<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
N<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
A<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
CAN_START_SEC_CODE&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_CODE&#160;<br/>
CAN_START_SEC_STATIC_CODE&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_STATIC_CODE&#160;<br/>
CAN_START_SEC_CONST_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_CONST_8BIT&#160;<br/>
CAN_START_SEC_CONST_16BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_CONST_16BIT&#160;<br/>
CAN_START_SEC_CONST_32BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_CONST_32BIT&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;24&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-25_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-25_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
CAN_START_SEC_CONST_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_CONST_UNSPECIFIED&#160;<br/>
CAN_START_SEC_PBCFG&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_PBCFG&#160;<br/>
CAN_START_SEC_PBCFG_ROOT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_PBCFG_ROOT&#160;<br/>
CAN_START_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
CAN_START_SEC_VAR_INIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_VAR_INIT_UNSPECIFIED&#160;<br/>
CAN_START_SEC_CODE_APPL&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN_STOP_SEC_CODE_APPL&#160;<br/>
Table&#160;5-4&#160;&#160;&#160;Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;<br/>
&#160;<br/>The&#160;&#160;Compiler&#160;Abstraction&#160;&#160;Definitions&#160;&#160;CAN_&#160;APPL_CODE,&#160;&#160;CAN_&#160;APPL_VAR&#160;&#160;and&#160;&#160;CAN_&#160;<br/>APPL_CONST&#160;are&#160;used&#160;to&#160;address&#160;code,&#160;variables&#160;and&#160;constants&#160;which&#160;are&#160;declared&#160;by&#160;<br/>other&#160;modules&#160;and&#160;used&#160;by&#160;the&#160;CAN&#160;driver.&#160;<br/>These&#160;definitions&#160;are&#160;not&#160;mapped&#160;by&#160;the&#160;CAN&#160;driver&#160;but&#160;by&#160;the&#160;memory&#160;mapping&#160;realized&#160;<br/>in&#160;the&#160;CAN&#160;Interface&#160;or&#160;direct&#160;by&#160;application.&#160;<br/>CAN_&#160;CODE:&#160;used&#160;for&#160;CAN&#160;module&#160;code.&#160;<br/>CAN_&#160;STATIC_CODE:&#160;used&#160;for CAN&#160;module&#160;local code.&#160;<br/>CAN_&#160;CONST:&#160;used&#160;for CAN module&#160;constants.&#160;<br/>CAN_&#160;CONST_PBCFG:&#160;used&#160;for CAN module&#160;constants in&#160;Post-Build&#160;section.&#160;<br/>CAN_&#160;VAR_*:&#160;used&#160;for&#160;CAN&#160;module&#160;variables.&#160;<br/>CAN_&#160;INT_CTRL:&#160;is used&#160;to&#160;access the&#160;CAN&#160;interrupt&#160;controls.&#160;<br/>CAN_&#160;REG_CANCELL:&#160;is used&#160;to&#160;access the&#160;CAN&#160;cell&#160;itself.&#160;<br/>CAN_&#160;RX_TX_DATA:&#160;access to&#160;CAN&#160;Data&#160;buffers&#160;located&#160;in&#160;RAM.&#160;<br/>CAN_&#160;APPL_*:&#160;access&#160;to&#160;higher layers.&#160;<br/>
<b>5.5&#160;</b><br/>
<b>Hardware&#160;Specific&#160;Hints&#160;</b><br/>
<b>1.1.1&#160;&#160;Initialisation of&#160;the&#160;VIM-register&#160;<br/></b>The&#160;register of&#160;the&#160;Vectored&#160;Interrupt&#160;Manager (VIM)&#160;will be&#160;modified&#160;by&#160;the&#160;CAN-driver to&#160;<br/>enable&#160;or&#160;disable&#160;the&#160;CAN-Interrupts.&#160;The&#160;initial value&#160;of&#160;the&#160;register has to&#160;be&#160;set&#160;by&#160;the&#160;<br/>application.&#160;If&#160;the&#160;application&#160;does&#160;not&#160;enable&#160;the&#160;CAN-Interrupts&#160;at&#160;startup,&#160;the&#160;interrupts&#160;<br/>stays disabled&#160;the&#160;whole&#160;time.&#160;<br/>&#160;<br/><b>1.1.2&#160;&#160;Hardware&#160;specific&#160;topics&#160;<br/></b>For details regarding&#160;the&#160;hardware specific topics please&#160;check the&#160;appropriate&#160;hardware&#160;<br/>manual&#160;of&#160;concrete&#160;derivative.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;25&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-26_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-26_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-26_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.&#160;&#160;API&#160;Description&#160;</b><br/>
<b>6.1&#160;</b><br/>
<b>Interrupt&#160;Service&#160;Routines&#160;provided by&#160;CAN&#160;</b><br/>
Depend&#160;on&#160;the&#160;settings&#160;in&#160;Tools&#160;component&#160;Hw_Tms470Cpu,&#160;the&#160;interrupt&#160;routine&#160;is&#160;given&#160;<br/>by&#160;the&#160;driver or by&#160;Operating&#160;System&#160;(selection&#160;see&#160;below).&#160;<br/>
&#160;<br/>
Figure&#160;6-1&#160;&#160;Select&#160;OS&#160;Type&#160;<br/>
There&#160;&#160;is&#160;&#160;the&#160;&#160;possibility&#160;&#160;to&#160;&#160;choose&#160;&#160;OS&#160;&#160;Type.&#160;&#160;Please&#160;&#160;select&#160;&#160;“None”&#160;&#160;for&#160;&#160;using&#160;&#160;no&#160;&#160;OS,&#160;<br/>“Autosar”&#160;for&#160;AUTOSAR&#160;OS&#160;or “OSEK”&#160;for OSEK&#160;OS&#160;systems.&#160;<br/>
<b>6.1.1&#160;&#160;OSEK&#160;(OS)&#160;<br/></b>This&#160;means&#160;to&#160;include&#160;osek.h.&#160;&#160;<br/>Switch:&#160;V_OSTYPE_OSEK&#160;<br/>
<b>6.1.2&#160;&#160;AutoSar&#160;(OS)&#160;<br/></b>Os.h&#160;header&#160;file&#160;is&#160;used.&#160;<br/>Switch:&#160;V_OSTYPE_AUTOSAR&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;26&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-27_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-27_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.1.3&#160;&#160;None&#160;(OS)&#160;<br/></b>Choose&#160;“None”&#160;for OS&#160;Type,&#160;to&#160;include&#160;no&#160;Os&#160;header&#160;files&#160;and&#160;have&#160;no&#160;category&#160;2&#160;<br/>interrupt.&#160;<br/>Switch:&#160;V_OSTYPE_NONE&#160;<br/>&#160;<br/><b>6.1.4&#160;&#160;Type&#160;of&#160;Interrupt&#160;Function&#160;<br/></b>See&#160;Chapte<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#45">r “Component&#160;Settings”&#160;</a>for configuration&#160;aspects.&#160;<br/>
-&#160;&#160;Category&#160;2&#160;(only&#160;for&#160;OSEK&#160;OS&#160;or&#160;AUTOSAR&#160;OS):&#160;&#160;<br/>
A&#160;macro&#160;“ISR(‘CanIsr_x)”&#160;will be&#160;used&#160;to&#160;declare ISR&#160;function&#160;call.&#160;The&#160;name&#160;given&#160;<br/>as parameter&#160;for interrupt&#160;naming&#160;(x&#160;= Physical CAN Channel number).&#160;For macro&#160;<br/>definition&#160;see&#160;OS&#160;specification.&#160;The&#160;OS&#160;has&#160;full&#160;control of&#160;the&#160;ISR.&#160;<br/>switch:&#160;C_ENABLE_OSEK_OS_INTCAT2&#160;<br/>&#160;<br/>
-&#160;&#160;Category&#160;1:Using&#160;OS&#160;with&#160;category&#160;1&#160;interrupts&#160;need&#160;an&#160;Interface&#160;layer handling&#160;<br/>
these&#160;interrupts in&#160;task&#160;context&#160;like&#160;defined&#160;in&#160;BSW00326&#160;<br/>(AUTOSAR_SRS_General).&#160;<br/>The&#160;ISR is&#160;declared&#160;as&#160;void&#160;ISR(void) and&#160;has to&#160;be&#160;called&#160;by&#160;interrupt&#160;controller in&#160;<br/>case&#160;of&#160;an&#160;CAN&#160;interrupt.&#160;<br/>switch:&#160;C_DISABLE_OSEK_OS_INTCAT2&#160;<br/>&#160;<br/>
-&#160;&#160;Void-Void&#160;Interrupt&#160;Function:&#160;<br/>
Like&#160;in&#160;Category&#160;1&#160;the&#160;Interrupt&#160;is not&#160;handled&#160;by&#160;OS.&#160;With&#160;this CAN-driver there is&#160;<br/>no&#160;difference&#160;to&#160;Category&#160;1:&#160;the&#160;ISR is declared&#160;as&#160;void&#160;ISR(void) and&#160;has to&#160;be&#160;<br/>called&#160;by&#160;interrupt&#160;controller in&#160;case&#160;of&#160;an&#160;CAN interrupt.&#160;<br/>&#160;<br/>&#160;<br/>
<b>6.1.5&#160;&#160;CanIsr_&lt;CH&gt;&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;CanIsr_&lt;CH&gt;( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
---&#160;<br/>
---&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
---&#160;<br/>
---&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;has&#160;to be called&#160;in scope&#160;of&#160;interrupt&#160;processing. It&#160;handles&#160;the&#160;Tx, Rx&#160;and&#160;BusOff&#160;interrupts&#160;<br/>and clears&#160;the pending&#160;flags&#160;of&#160;the CAN&#160;cell&#160;and&#160;pending&#160;bits&#160;of&#160;the&#160;interrupt controller.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>
This&#160;function&#160;can&#160;be&#160;used directly&#160;as interrupt&#160;routine&#160;in an&#160;interrupt&#160;vector&#160;table&#160;for&#160;category&#160;<br/>
1 interrupts.&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;27&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-28_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-28_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.2&#160;</b><br/>
<b>Services&#160;provided by&#160;CAN&#160;</b><br/>
The&#160;CAN&#160;API&#160;consists&#160;of&#160;services,&#160;which&#160;are realized&#160;by&#160;function&#160;calls.&#160;<br/>
<b>6.2.1&#160;&#160;Can_GetVersionInfo&#160;</b><br/>
<b>Prototype&#160;<br/>void</b>&#160;<b>Can_GetVersionInfo</b>( Std_VersionInfoType&#160;<b>*</b>versioninfo );&#160;<br/>
<b>Parameter&#160;<br/></b>versioninfo&#160;&#160;<br/>
pointer&#160;to&#160;the&#160;structure including&#160;the&#160;version information&#160;<br/><b>typedef</b>&#160;<b>struct</b>&#160;<br/>{&#160;<br/>&#160; &#160;uint16 vendorID;&#160;<br/>&#160; &#160;uint16&#160;moduleID;&#160;<br/><b>MicroSar3&#160;only:&#160;</b>uint8&#160;&#160;instanceID;&#160;<br/>
&#160; &#160;uint8 &#160;sw_major_version;&#160;/*BCD code*/&#160;<br/>&#160; &#160;uint8 &#160;sw_minor_version;&#160;/*BCD code*/&#160;<br/>&#160; &#160;uint8 &#160;sw_patch_version;&#160;/*BCD code*/&#160;<br/>}&#160;Std_VersionInfoType;&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function to&#160;get&#160;version&#160;information&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>-&#160;The&#160;function&#160;is&#160;only&#160;available if&#160;enabled&#160;at&#160;build time (CAN_VERSION_INFO_API&#160;=&#160;ON)&#160;<br/>&#160;<br/>
<b>6.2.2&#160;&#160;Can_Init&#160;</b><br/>
<b>Prototype&#160;<br/>void</b>&#160;<b>Can_Init</b>(&#160;<b>const</b>&#160;Can_ConfigType&#160;<b>*</b>Config )&#160;<br/>
<b>Parameter&#160;<br/></b>Config&#160;<br/>
Pointer&#160;to&#160;the&#160;structure including&#160;configuration&#160;data.&#160;<br/>In case&#160;of&#160;Multiple ECU&#160;configuration&#160;feature&#160;is&#160;used,&#160;for&#160;each&#160;<br/>Identity&#160;one&#160;“Config”&#160;structure&#160;exists&#160;and&#160;has&#160;to&#160;be chosen&#160;here&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;initializes&#160;global&#160;CAN driver variables&#160;during&#160;ECU start-up.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;28&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-29_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-29_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Has to&#160;be&#160;called&#160;during&#160;start-up&#160;before CAN&#160;communication.&#160;<br/>
<b>&gt;&#160;&#160;</b>Must&#160;be&#160;called&#160;before calling&#160;Can_InitController(&#160;)&#160;<br/>
<b>&gt;&#160;&#160;</b>Mulitple ECU&#160;configuration&#160;pointer&#160;for&#160;“Config”&#160;does only&#160;work&#160;with none&#160;Post-Build variants&#160;<br/>
<b>&gt;&#160;&#160;</b>Can_InitMemory()&#160;has&#160;to&#160;be&#160;called&#160;before.&#160;<br/>
&#160;<br/>&#160;<br/>
<b>6.2.3&#160;&#160;Can_InitController&#160;</b><br/>
<b>Prototype&#160;<br/></b>MICROSAR3:&#160;<br/>
void Can_InitController( uint8 Controller, const Can_ControllerConfigType*&#160;<br/>Config )&#160;<br/>
MICROSAR401:&#160;<br/>
void Can_InitController( uint8 Controller, const&#160;<br/>Can_ControllerBaudrateConfigPtrType Config )&#160;<br/>
<b>Parameter&#160;<br/></b>Controller&#160;<br/>
The&#160;controller&#160;to be&#160;initialized&#160;<br/>
Config&#160;<br/>
MICROSAR3:&#160;Pointer&#160;to&#160;the&#160;structure&#160;including&#160;configuration data.&#160;<br/>MICROSAR401:&#160;Pointer&#160;to baudrate&#160;structure.&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;initializes&#160;controller specific&#160;CAN&#160;driver&#160;registers&#160;and variables&#160;and leave&#160;in&#160;the&#160;stop&#160;mode&#160;<br/>with&#160;a fully&#160;initialized&#160;CAN controller ready&#160;to&#160;change&#160;in&#160;running&#160;mode.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Has to&#160;be&#160;called&#160;during&#160;start-up&#160;before CAN&#160;communication,&#160;but&#160;after&#160;Can_Init().&#160;<br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called within&#160;sleep&#160;mode&#160;<br/>&#160;<br/>
<b>6.2.4&#160;&#160;Can_SetControllerMode&#160;</b><br/>
<b>Prototype&#160;<br/></b>Can_ReturnType&#160;<b>Can_SetControllerMode</b>( uint8 Controller, Can_StateTransitionType&#160;<br/>Transition )&#160;<br/>
<b>Parameter&#160;<br/></b>Controller&#160;<br/>
The&#160;controller&#160;to change&#160;mode&#160;<br/>
Transition&#160;<br/>
Mode transition&#160;request&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;29&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-30_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-30_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Return&#160;code&#160;<br/></b>state&#160;<br/>
Result&#160;of&#160;changing&#160;mode&#160;can&#160;be:&#160;CAN_OK, CAN_NOT_OK&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;switch to one&#160;of&#160;the following&#160;modes: Sleep,&#160;Stop, Running.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Called&#160;by&#160;higher&#160;layer&#160;CAN&#160;interface&#160;<br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;within&#160;CAN&#160;driver&#160;context&#160;like&#160;Rx,&#160;Tx&#160;or&#160;Bus&#160;Off&#160;callouts.&#160;<br/>&#160;<br/>
<b>6.2.5&#160;&#160;Can_Write&#160;</b><br/>
<b>Prototype&#160;<br/></b>Can_ReturnType&#160;<b>Can_Write</b>( uint8 Hth,&#160;<b>const</b>&#160;Can_PduType&#160;<b>*</b>PduInfo );&#160;<br/>
<b>Parameter&#160;<br/></b>Hth&#160;<br/>
Handle of&#160;the&#160;mailbox&#160;to&#160;send message&#160;<br/>
PduInfo&#160;<br/>
Information&#160;about&#160;outgoing&#160;message&#160;(ID,&#160;DLC,&#160;data)&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-state&#160;<br/>
-&#160;Result&#160;of&#160;transmission&#160;request&#160;can&#160;be:&#160;CAN_OK,&#160;CAN_NOT_OK,&#160;<br/>CAN_BUSY&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Called&#160;by&#160;the&#160;interface layer&#160;to&#160;send&#160;a message over&#160;CAN.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;with disabled&#160;interrupts&#160;(for&#160;data&#160;security&#160;CAN&#160;Interface&#160;have to&#160;do&#160;this&#160;and therefore&#160;<br/>
not&#160;needed&#160;in driver&#160;twice)&#160;<br/>
&#160;<br/>
<b>6.2.6&#160;&#160;Can_DisableControllerInterrupts&#160;</b><br/>
<b>Prototype&#160;<br/>void</b>&#160;<b>Can_DisableControllerInterrupts</b>( uint8 Controller );&#160;<br/>
<b>Parameter&#160;<br/></b>Controller&#160;<br/>
The&#160;controller&#160;to disable&#160;interrupts&#160;for&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to disable&#160;interrupts&#160;(e.g. to&#160;secure data)&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;30&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-31_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-31_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.2.7&#160;&#160;Can_EnableControllerInterrupts&#160;</b><br/>
<b>Prototype&#160;<br/>void</b>&#160;<b>Can_EnableControllerInterrupts</b>( uint8 Controller );&#160;<br/>
<b>Parameter&#160;<br/></b>Controller&#160;<br/>
The&#160;controller&#160;to&#160;re enable interrupts&#160;for&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to re enable interrupts&#160;(e.g. to&#160;secure&#160;data)&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>6.2.8&#160;&#160;Can_MainFunction_Write&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_MainFunction_Write( void );&#160;</b><br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to poll&#160;Tx&#160;confirmation&#160;(for all&#160;controller&#160;and&#160;Tx&#160;mailboxes).&#160;<br/>
Has&#160;to&#160;be called by&#160;Higher&#160;Layer.&#160;<br/>
Notify&#160;CAN Interface about&#160;Tx&#160;confirmations.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested and only&#160;out&#160;of&#160;lower&#160;or&#160;equal&#160;task&#160;level&#160;as Can_Write().&#160;<br/>&#160;<br/>
<b>6.2.9&#160;&#160;Can_MainFunction_Read&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_MainFunction_Read( void );&#160;</b><br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;31&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-32_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-32_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to poll&#160;reception&#160;(for all&#160;controller and&#160;Rx&#160;mailboxes).&#160;Also use&#160;to&#160;read out&#160;Rx&#160;Queue&#160;<br/>messages&#160;queued&#160;within&#160;interrupt context.&#160;<br/>
Has&#160;to&#160;be called by&#160;Higher&#160;Layer.&#160;<br/>
Notify&#160;CAN Interface about&#160;Rx&#160;indications.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested.&#160;<br/>&#160;<br/>
<b>6.2.10&#160;&#160;Can_MainFunction_BusOff&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_MainFunction_BusOff( void );&#160;</b><br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to poll&#160;Bus&#160;Off&#160;event (over all&#160;controller).&#160;<br/>
Has&#160;to&#160;be called by&#160;Higher&#160;Layer.&#160;<br/>
Calls&#160;“CanIf_ControllerBusOff”&#160;in case of&#160;Bus&#160;Off&#160;occurred.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested.&#160;<br/>&#160;<br/>
<b>6.2.11&#160;&#160;Can_MainFunction_Wakeup&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_MainFunction_Wakeup( void );&#160;</b><br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to poll&#160;Wakeup&#160;event&#160;(over all&#160;controller).&#160;<br/>
Has&#160;to&#160;be called by&#160;Higher&#160;Layer.&#160;<br/>
Calls&#160;“CanIf_SetWakeupEvent“&#160;in case of&#160;wakeup event&#160;occur.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;32&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-33_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-33_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.2.12&#160;&#160;Can_MainFunction_Mode&#160;(MICROSAR4x&#160;only)&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_MainFunction_Mode( void );&#160;</b><br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to poll&#160;Mode&#160;changes&#160;(over all&#160;controller&#160;–&#160;asynchronous&#160;when&#160;not&#160;done&#160;in&#160;<br/>Can_SetControllerMode()).&#160;<br/>
Polling&#160;of&#160;Mode&#160;change&#160;events&#160;notified&#160;to&#160;upper&#160;layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested.&#160;<br/>&#160;<br/>
<b>6.2.13&#160;&#160;Can_ChangeBaudrate&#160;(MICROSAR403&#160;only)&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType<b>&#160;Can_ChangeBaudrate(&#160;</b>uint8 Controller, const uint16 Baudrate<b>&#160;);&#160;</b><br/>
<b>Parameter&#160;<br/></b>Controller&#160;<br/>
The&#160;controller&#160;to change&#160;Baudrate&#160;<br/>
Baudrate&#160;<br/>
Baudrate&#160;to&#160;be&#160;set&#160;<br/>
<b>Return&#160;code&#160;<br/></b>Std_ReturnType&#160;<br/>
E_NOT_OK:&#160;Baudrate is&#160;not&#160;set.&#160;<br/>E_OK:&#160;Baudrate&#160;is&#160;set.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service shall&#160;change the&#160;baudrate&#160;of&#160;the CAN controller.&#160;And&#160;reinitialize the&#160;CAN controller.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested.&#160;<br/>&#160;<br/>
<b>6.2.14&#160;&#160;Can_CheckBaudrate&#160;(MICROSAR403&#160;only)&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType<b>&#160;Can_CheckBaudrate(&#160;</b>uint8 Controller, const uint16 Baudrate<b>&#160;);&#160;</b><br/>
<b>Parameter&#160;<br/></b>Controller&#160;<br/>
The&#160;controller&#160;to check&#160;Baudrate&#160;<br/>
Baudrate&#160;<br/>
Baudrate&#160;to&#160;be&#160;checked&#160;<br/>
<b>Return&#160;code&#160;<br/></b>Std_ReturnType&#160;<br/>
E_NOT_OK:&#160;Baudrate is&#160;not&#160;available.&#160;<br/>E_OK:&#160;Baudrate&#160;is&#160;available.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;33&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-34_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-34_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service shall&#160;check&#160;if&#160;a&#160;certain&#160;baudrate&#160;of&#160;the CAN controller&#160;is&#160;supported.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Must&#160;not&#160;be&#160;called&#160;nested.&#160;<br/>
<b>&gt;&#160;&#160;</b>Only&#160;available&#160;when “CanChangeBaudrateApi“&#160;is&#160;activated.&#160;<br/>&#160;<br/>
<b>6.2.15&#160;&#160;Can_InitMemory&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_InitMemory( void );&#160;</b><br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to initialize&#160;module global&#160;variables&#160;for power&#160;up&#160;situation.&#160;Call&#160;this&#160;functionality&#160;to simulate&#160;<br/>a power&#160;up&#160;behavior. (Afterwards&#160;call&#160;normal&#160;initialization&#160;functions)&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>6.2.16&#160;&#160;Can_InitStruct (None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void Can_InitStruct( uint8 Controller, uint8 Index );&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller to change Initialization&#160;structure&#160;<br/>
Index&#160;<br/>
Index&#160;of&#160;the Initialization&#160;structure to&#160;be&#160;used&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to change&#160;the&#160;Initialization&#160;structure setup&#160;by&#160;Tool. It contains&#160;information&#160;about&#160;the&#160;baud&#160;<br/>rate&#160;and filter settings. It&#160;is&#160;necessary&#160;to&#160;call&#160;Can_InitController&#160;afterwards&#160;to activate&#160;these settings.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Call&#160;this&#160;function&#160;in between Can_Init&#160;()&#160;and&#160;Can_InitController().&#160;<br/>
<b>&gt;&#160;&#160;</b>MicroSar3&#160;only&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;34&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-35_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-35_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.2.17&#160;&#160;Can_Cbk_CheckWakeup,&#160;Can_CheckWakeup&#160;</b><br/>
<b>Prototype&#160;<br/>MICROSAR3:&#160;<br/>Std_ReturnType Can_Cbk_CheckWakeup( uint8 Controller );&#160;<br/>MICROSAR4x:&#160;<br/>Std_ReturnType Can_CheckWakeup( uint8 Controller );&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller&#160;to&#160;check&#160;for wakeup&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK&#160;when&#160;wakeup&#160;is&#160;cause by&#160;Controller or&#160;E_NOT_OK&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to check&#160;occurrence of&#160;wakeup event&#160;on&#160;this&#160;controller.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>6.2.18&#160;&#160;ApplCanTimerStart&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void ApplCanTimerStart (&#160;CanChannelHandle&#160;controller, uint8 source );&#160;</b><br/>
<b>void ApplCanTimerStart ( uint8 source ); &#160;&#160;</b>when&#160;using “Optimize&#160;for one&#160;controller”<b>&#160;</b><br/>
<b>Parameter&#160;</b><br/>
controller&#160;<br/>
controller on&#160;which the hardware observation&#160;occur&#160;<br/>
source&#160;<br/>
source for the&#160;hardware&#160;observation&#160;(see<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">&#160;Hardware Loop&#160;Check&#160;/&#160;Timeout&#160;<br/>Monitoring)</a>&#160;<br/>
<b>Return&#160;code&#160;<br/>void</b>&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to start&#160;an&#160;observation&#160;timer (see&#160;Chapter&#160;Hardware&#160;Loop Check).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
Only&#160;available&#160;when “Hardware&#160;Loop&#160;Check&#160;by&#160;Application“&#160;is&#160;activated.&#160;<br/>&#160;<br/>
<b>6.2.19&#160;&#160;ApplCanTimerLoop&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>Can_ReturnType&#160;ApplCanTimerLoop (CanChannelHandle&#160;controller, uint8 source );&#160;</b><br/>
<b>Can_ReturnType&#160;ApplCanTimerLoop ( uint8 source ); &#160;&#160;</b>when&#160;using&#160;“Optimize for one&#160;<br/>controller”<b>&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;35&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-36_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-36_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Parameter&#160;</b><br/>
controller&#160;<br/>
controller on&#160;which the hardware observation&#160;occur&#160;<br/>
source&#160;<br/>
source for the&#160;hardware&#160;observation&#160;(see<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">&#160;Hardware Loop&#160;Check&#160;/&#160;Timeout&#160;<br/>Monitoring)</a>&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Can_ReturnType&#160;(uint8)&#160;<br/>
E_OK&#160;when loop&#160;shall&#160;be&#160;continue&#160;E_NOT_OK&#160;when loop shall&#160;break&#160;to&#160;<br/>continue&#160;(E_NOT_OK&#160;should only&#160;be used&#160;when&#160;timeout&#160;occur due to&#160;<br/>hardware&#160;issue.&#160;Afterwards&#160;special&#160;action&#160;is&#160;needed see&#160;Chapter Hardware&#160;<br/>Loop&#160;Check)&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service&#160;function&#160;to check&#160;timeout&#160;for the&#160;hardware observation&#160;(see&#160;Chapter Hardware&#160;Loop&#160;Check).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
Only&#160;available&#160;when “Hardware&#160;Loop&#160;Check&#160;by&#160;Application“&#160;is&#160;activated.&#160;<br/>&#160;<br/>
<b>6.2.20&#160;&#160;ApplCanTimerEnd&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void ApplCanTimerEnd (CanChannelHandle&#160;controller, uint8 source );&#160;</b><br/>
<b>void ApplCanTimerEnd ( uint8 source ); &#160;&#160;</b>when&#160;using “Optimize for&#160;one controller”<b>&#160;</b><br/>
<b>Parameter&#160;</b><br/>
controller&#160;<br/>
controller on&#160;which the hardware observation&#160;occur&#160;<br/>
source&#160;<br/>
source for the&#160;hardware&#160;observation&#160;(se<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">e&#160;Hardware Loop&#160;Check&#160;/&#160;Timeout&#160;<br/>Monitoring)</a>&#160;<br/>
<b>Return&#160;code&#160;<br/>void</b>&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service function&#160;to end&#160;an&#160;observation&#160;timer (see&#160;Chapter&#160;Hardware&#160;Loop Check).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
Only&#160;available&#160;when “Hardware&#160;Loop&#160;Check&#160;by&#160;Application“&#160;is&#160;activated.&#160;<br/>&#160;<br/>
<b>6.2.21&#160;&#160;Appl_GenericPrecopy&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>Can_ReturnType Appl_GenericPrecopy (uint8 controller, Can_IdType ID, uint8 DLC,&#160;<br/>const uint8 *pData );&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller receive the&#160;data&#160;<br/>
ID&#160;<br/>
ID of&#160;the received&#160;message. In&#160;case&#160;of&#160;extended&#160;ID&#160;and mixed&#160;ID&#160;systems&#160;the&#160;<br/>highest bit (bit 32) is&#160;used to mark&#160;an&#160;extended&#160;ID&#160;(bit&#160;32&#160;is&#160;set).&#160;<br/>
DLC&#160;<br/>
DLC of&#160;the&#160;received message&#160;<br/>
pData&#160;<br/>
pData&#160;pointer&#160;to the&#160;data&#160;of&#160;the received&#160;message&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;36&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-37_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-37_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Can_ReturnType&#160;<br/>
CAN_OK&#160;when&#160;indication&#160;of&#160;the message should&#160;be&#160;called afterwards&#160;<br/>(notification&#160;to higher&#160;layer), or&#160;CAN_NOT_OK&#160;to&#160;break&#160;the Rx&#160;path.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Application function inform&#160;about incoming&#160;Rx&#160;messages&#160;with&#160;complete&#160;data set&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;usable when&#160;switch “#define&#160;CAN_GENERIC_PRECOPY&#160;&#160;STD_ON”&#160;is&#160;set&#160;by&#160;<br/>
Generation&#160;tool.&#160;<br/>
<b>&gt;&#160;&#160;</b>pData is&#160;read&#160;only&#160;and must&#160;not&#160;be&#160;accessed&#160;with write operations.&#160;<br/>&#160;<br/>
<b>6.2.22&#160;&#160;Appl_GenericConfirmation&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>Can_ReturnType Appl_GenericConfirmation(&#160;PduIdType&#160;PduId&#160;);&#160;</b><br/>
<b>Parameter&#160;</b><br/>
PduId&#160;<br/>
PduId&#160;: &#160;Handle of&#160;the&#160;PDU&#160;(specify&#160;the&#160;message).&#160;<br/>
Return code&#160;<br/>
Can_ReturnType&#160;<br/>
CAN_NOT_OK: No further&#160;CanInterface Confirmation&#160;will&#160;be called.&#160;<br/>
CAN_OK: CanInterface Confirmation&#160;will&#160;be called.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Application function inform&#160;about&#160;Tx&#160;messages&#160;is&#160;send&#160;out.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;usable when&#160;switch “#define&#160;CAN_GENERIC_CONFIRMATION&#160;&#160;STD_ON”&#160;is&#160;<br/>
set&#160;by&#160;Generation&#160;tool.&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;GenericConfirmation and&#160;TransmitBuffer&#160;(set&#160;in&#160;CanIf)&#160;is&#160;used&#160;the switch&#160;<br/>
CAN_CANEL_SUPPORT_API&#160;is&#160;also needed&#160;(set&#160;in CanIf)&#160;otherwise a&#160;compiler&#160;error&#160;occur.&#160;<br/>
<b>&gt;&#160;&#160;</b>PduId is&#160;read only&#160;and&#160;must&#160;not&#160;be&#160;accessed&#160;with write operations.&#160;<br/>&#160;<br/>
<b>6.2.23&#160;&#160;Appl_GenericPreTransmit&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void&#160;Appl_GenericPreTransmit(uint8 Controller,&#160;Can_PduInfoPtrType_var&#160;DataPtr&#160;<br/>);&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
controller on&#160;which the hardware observation&#160;occur&#160;<br/>
DataPtr&#160;<br/>
pointer&#160;to&#160;a&#160;Can_PduType&#160;structure include&#160;ID, DLC,&#160;Pdu,&#160;data-pointer&#160;<br/>
Return&#160;code&#160;<br/>
void&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;37&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-38_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-38_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Application function to&#160;change&#160;send data&#160;(e.g.&#160;add&#160;CRC to&#160;data)&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;usable when&#160;switch “#define&#160;CAN_GENERIC_PRETRANSMIT&#160;&#160;STD_ON”&#160;is&#160;<br/>
set&#160;by&#160;Generation&#160;tool.&#160;<br/>
&#160;<br/>
<b>6.2.24&#160;&#160;Can_GetStatus&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>Uint8&#160;Can_GetStatus(&#160;uint8 controller&#160;);&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller for status&#160;information&#160;<br/>
Return code&#160;<br/>
uint8 status&#160;<br/>
CAN_STATUS_SLEEP&#160;&#160;<br/>
CAN_STATUS_STOP&#160;<br/>
CAN_STATUS_INIT&#160;<br/>
CAN_STATUS_INCONSISTENT&#160;<br/>
CAN_STATUS_WARNING&#160;<br/>
(need&#160;C_ENABLE_EXTENDED_STATUS)&#160;CAN_STATUS_PASSIVE&#160;<br/>
CAN_STATUS_BUSOFF&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
return the status&#160;of&#160;the hardware.&#160;<br/>
Only&#160;one of&#160;the status-bits&#160;Sleep,&#160;Stop,&#160;Bus&#160;Off, Passive,&#160;Warning&#160;is&#160;set.&#160;Init bit&#160;is&#160;always&#160;set&#160;if&#160;controller&#160;is&#160;<br/>initialized.&#160;<br/>
Sleep&#160;has&#160;the highest priority, error&#160;warning&#160;the&#160;lowest.&#160;<br/>
CAN_STATUS_INCONSISTENT&#160;will&#160;be set&#160;if&#160;one&#160;Common&#160;CAN channel&#160;is&#160;not&#160;stop&#160;or sleep.&#160;<br/>
“status”&#160;can&#160;be&#160;analyzed&#160;by&#160;us&#160;of&#160;macro&#160;API:&#160;<br/>
CanHwIsOk(status): return “true”&#160;in case&#160;no&#160;warning,&#160;passive&#160;or&#160;bus&#160;off&#160;occurred.&#160;<br/>
CanHwIsWarning(status): return “true”&#160;in case&#160;of&#160;waning&#160;status.&#160;<br/>
CanHwIsPassive(status): return “true”&#160;in case&#160;of&#160;passive&#160;status.&#160;<br/>
CanHwIsBusOff(status): return “true”&#160;in case of&#160;bus&#160;off&#160;status&#160;(may&#160;be&#160;already&#160;false in&#160;Notification).&#160;<br/>
CanHwIsWakeup(status): return “true”&#160;in case&#160;of&#160;not&#160;in&#160;sleep&#160;mode.&#160;<br/>
CanHwIsSleep(status): return “true”&#160;in&#160;case of&#160;sleep mode.&#160;<br/>
CanHwIsStop(status): return “true”&#160;in case of&#160;stop&#160;mode.&#160;<br/>
CanHwIsStart(status): return “true”&#160;in case of&#160;not&#160;in stop mode.&#160;<br/>
CanHwIsInconsistent(status): return “true”&#160;in case of&#160;inconsistence&#160;mode between two common&#160;CAN&#160;<br/>channels.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
This&#160;API&#160;is&#160;only&#160;usable&#160;when switch “#define&#160;CAN_GET_STATUS&#160;&#160;STD_ON”&#160;is&#160;set&#160;by&#160;Generation tool.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;38&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-39_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-39_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>6.2.25&#160;&#160;ApplCanInterruptDisable/Restore&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void&#160;ApplCanInterruptDisable(&#160;uint8 controller&#160;);&#160;</b><br/>
<b>void&#160;ApplCanInterruptRestore(&#160;uint8 controller&#160;);&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller for Interrupt&#160;lock&#160;<br/>
Return code&#160;<br/>
&#160;-&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Disable and&#160;Restore Can&#160;Interrupt&#160;by&#160;Application.&#160;Reason&#160;my&#160;be,&#160;that the&#160;CAN&#160;driver should&#160;not&#160;access&#160;the&#160;<br/>Interrupt&#160;controller for CAN&#160;interrupts&#160;or there are&#160;other restrictions&#160;(special&#160;security&#160;level)&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;usable when&#160;switch “#define&#160;CAN_INTLOCK”&#160;is&#160;set&#160;to&#160;“CAN_APPL”&#160;or&#160;<br/>
“CAN_BOTH”&#160;&#160;by&#160;Generation tool.&#160;<br/>
&#160;<br/>
<b>6.2.26&#160;&#160;Appl_CanOverrun /&#160;ApplCanFullCanOverrun&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void&#160;Appl_CanOverrun(&#160;uint8 controller&#160;);&#160;</b><br/>
<b>void&#160;Appl_CanFullCanOverrun(&#160;uint8 controller&#160;);&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller on&#160;which&#160;the&#160;overrun&#160;is&#160;detected&#160;<br/>
Return code&#160;<br/>
&#160;-&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;functions&#160;will&#160;be&#160;called&#160;if&#160;an&#160;overrun&#160;is&#160;detected.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;usable when&#160;switch “#define&#160;CAN_OVERRUN_NOTIFICATION&#160;&#160;CAN_APPL”&#160;<br/>
is&#160;set&#160;by&#160;Generation&#160;tool.&#160;<br/>
<b>&gt;&#160;&#160;</b>(There&#160;is&#160;also&#160;the&#160;possibility&#160;to deactivate&#160;this&#160;feature&#160;or&#160;call&#160;a&#160;DET&#160;instead)&#160;<br/>&#160;<br/>
<b>6.2.27&#160;&#160;Appl_CanCorruptMailbox&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>void&#160;Appl_CanCorruptMailbox(uint8 Controller, Can_HwHandleType hwObjHandle)&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller on&#160;which&#160;the&#160;check&#160;failed&#160;<br/>
hwObjHandle&#160;<br/>
Hardware&#160;handle of&#160;defect&#160;mailbox&#160;<br/>
Return code&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;39&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-40_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-40_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
&#160;-&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Notify&#160;Application&#160;about&#160;a defect&#160;mailbox&#160;in CAN cell&#160;(while call&#160;of&#160;Can_InitController).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;used when&#160;feature&#160;is&#160;activated&#160;in&#160;Generation&#160;tool.&#160;(switch&#160;CAN_RAM_CHECK)&#160;<br/>&#160;<br/>
<b>6.2.28&#160;&#160;Appl_CanRamCheckFailed&#160;(None&#160;AUTOSAR&#160;API)&#160;</b><br/>
<b>Prototype&#160;<br/>uint8&#160;Appl_CanRamCheckFailed(uint8 Controller)&#160;</b><br/>
<b>Parameter&#160;</b><br/>
Controller&#160;<br/>
Controller on&#160;which&#160;the&#160;check&#160;failed&#160;<br/>
Return code&#160;<br/>
uint8 action&#160;<br/>
Application decide&#160;by&#160;return value to&#160;activate or&#160;deactivate controller.&#160;<br/>
CAN_DEACTIVATE_CONTROLLER&#160;<br/>
CAN_ACTIVATE_CONTROLLER&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Notify&#160;Application&#160;about&#160;a defect CAN controller because of&#160;mailbox&#160;check&#160;before&#160;failed&#160;(while call&#160;of&#160;<br/>Can_InitController).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;only&#160;used when&#160;feature&#160;is&#160;activated&#160;in&#160;Generation&#160;tool.&#160;(“CanRamCheck“&#160;-&gt;&#160;switch&#160;<br/>
CAN_RAM_CHECK)&#160;<br/>
&#160;<br/>&#160;<br/>
<b>6.3&#160;</b><br/>
<b>Services&#160;used&#160;by&#160;CAN&#160;</b><br/>
In&#160;the&#160;following&#160;table&#160;services&#160;provided&#160;by&#160;other&#160;components,&#160;which&#160;are&#160;used&#160;by&#160;the&#160;CAN&#160;<br/>are&#160;&#160;listed.&#160;&#160;For&#160;details&#160;about&#160;&#160;prototype&#160;and&#160;functionality&#160;refer&#160;to&#160;the&#160;documentation&#160;of&#160;&#160;the&#160;<br/>providing&#160;component.&#160;<br/>
<b>Component&#160;</b><br/>
<b>API&#160;</b><br/>
DET&#160;<br/>
<b>Det_ReportError</b>&#160;<br/>(see&#160;<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#16">“Development Error Reporting”)</a>&#160;<br/>
DEM&#160;<br/>
<b>Dem_ReportErrorStatus</b>&#160;<br/>(see<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">&#160;“Production&#160;Code&#160;Error Reporting”)</a>&#160;<br/>
EcuM&#160;<br/>
<b>EcuM_CheckWakeup</b>&#160;<br/>This&#160;function&#160;is&#160;called&#160;when&#160;Wakeup over CAN&#160;bus&#160;occur.&#160;<br/>
<b>EcuM_GeneratorCompatibilityError</b>&#160;<br/>This&#160;function&#160;is&#160;called during the&#160;initialization,&#160;of&#160;the CAN&#160;Driver&#160;if&#160;<br/>the&#160;Generator&#160;Version&#160;Check&#160;or the&#160;CRC&#160;Check&#160;fails.&#160;(see&#160;[5])&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;40&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-41_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-41_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
Application&#160;(optional&#160;non&#160;AUTOSAR)&#160;&#160;<b>Appl_GenericPrecopy&#160;</b><br/>
<b>Appl_GenericConfirmation&#160;</b><br/>
<b>Appl_GenericPreTransmit&#160;</b><br/>
<b>ApplCanTimerStart/Loop/End&#160;</b><br/>
<b>Appl_CanRamCheckFailed,&#160;Appl_CanCorruptMailbox&#160;</b><br/>
<b>ApplCanInterruptDisable/Restore&#160;</b><br/>
<b>Appl_CanOverrun,&#160;Appl_CanFullCanOverrun&#160;</b><br/>
For detailed&#160;description&#160;see&#160;Chapter 6.2&#160;<br/>
CANIF&#160;<br/>
<b>CanIf_CancelTxNotification</b>&#160;(non&#160;AUTOSAR)&#160;<br/>A&#160;special&#160;Software&#160;cancellation&#160;callback&#160;only&#160;used&#160;within&#160;Vector&#160;<br/>CAN driver CAN Interface bundle.&#160;<br/>
<b>CanIf_TxConfirmation</b>&#160;<br/>Notification&#160;for a successful&#160;transmission.&#160;(see&#160;[4])&#160;<br/>
<b>CanIf_CancelTxConfirmation</b>&#160;<br/>Notification&#160;for a successful&#160;Tx&#160;cancellation.&#160;(see&#160;[4])&#160;<br/>
<b>CanIf_RxIndication</b>&#160;<br/>Notification&#160;for a message reception. (see [4])&#160;<br/>
<b>CanIf_ControllerBusOff</b>&#160;<br/>Bus&#160;Off&#160;notification&#160;function. (see&#160;[4])&#160;<br/>
<b>CanIf_ControllerModeIndication&#160;<br/></b>MICROSAR4x&#160;only:&#160;Notification for mode sucessfully&#160;changed.&#160;<br/>
Os&#160;(MICROSAR4x)&#160;<br/>
<b>OS_TICKS2MS_&lt;counterShortName&gt;()</b>&#160;<br/>
Os&#160;macro to get&#160;timebased&#160;ticks&#160;from&#160;counter.&#160;<br/>
<b>GetElapsedValue&#160;</b><br/>
Get&#160;elapsed&#160;tick&#160;count.&#160;<br/>
<b>GetCounterValue&#160;</b><br/>
Get&#160;tick&#160;count&#160;start.<b>&#160;</b><br/>
Table&#160;6-1&#160;&#160;&#160;Services&#160;used&#160;by&#160;the&#160;CAN&#160;<br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;41&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-42_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-42_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>7.&#160;&#160;Configuration&#160;</b><br/>
For&#160;CAN&#160;driver the&#160;attributes can&#160;be&#160;configured&#160;with&#160;configuration&#160;Tool “GENy”&#160;<br/>The&#160;CAN&#160;driver supports pre-compile,&#160;link-time&#160;and&#160;post-build&#160;configuration.&#160;<br/>For post-build&#160;systems,&#160;re-flashing&#160;the&#160;generated&#160;data&#160;can&#160;change&#160;some&#160;configuration&#160;<br/>settings.&#160;<br/>For post-build&#160;and&#160;link-time&#160;configurations pre-compile&#160;settings are&#160;configured&#160;at&#160;compile&#160;<br/>time&#160;and&#160;therefore&#160;unchangeable&#160;at&#160;link or&#160;post-build&#160;time.&#160;<br/>The&#160;following&#160;parameters are&#160;set&#160;by&#160;GENy&#160;configuration&#160;(see&#160;Chapter “Configuration&#160;with&#160;<br/>GENy”).&#160;<br/>&#160;<br/>
<b>7.1&#160;</b><br/>
<b>Pre-Compile&#160;Parameters&#160;</b><br/>
Some&#160;settings have&#160;to&#160;be&#160;available&#160;before compilation:&#160;<br/>
<b>&gt;&#160;&#160;</b>Version&#160;API&#160;(Can_GetVersionInfo()&#160;activation)&#160;<br/>
#define&#160;CAN_VERSION_INFO_API&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>DET&#160;(development&#160;error detection)&#160;<br/>
#define&#160;CAN_DEV_ERROR_DETECT&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Hardware Loop&#160;Check&#160;(timeout&#160;monitoring)&#160;<br/>
#define&#160;CAN_HARDWARE_CANCELLATION &#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Polling&#160;modes:&#160;Tx&#160;confirmation,&#160;Reception,&#160;Wakeup,&#160;BusOff&#160;<br/>
#define&#160;CAN_TX_PROCESSING&#160;&#160;&#160;&#160;&#160;&#160;&#160;CAN_INTERRUPT/&#160;CAN_POLLING&#160;<br/>#define&#160;CAN_RX_PROCESSING&#160;&#160;&#160;&#160;&#160;&#160;&#160;CAN_INTERRUPT/&#160;CAN_POLLING&#160;<br/>#define&#160;CAN_BUSOFF_PROCESSING&#160;&#160;&#160;CAN_INTERRUPT/&#160;CAN_POLLING&#160;<br/>#define&#160;CAN_WAKEUP_PROCESSING&#160;&#160;&#160;CAN_INTERRUPT/&#160;CAN_POLLING&#160;<br/>#define&#160;CAN_INDIVIDUAL_PROCESSING&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Multiplexed&#160;Tx&#160;(external PIA&#160;–&#160;by&#160;use&#160;multiple&#160;Tx&#160;mailboxes)&#160;<br/>
#define&#160;CAN_MULTIPLEXED_TRANSMISSION &#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Configuration&#160;Variant&#160;(define&#160;the&#160;configuration&#160;type&#160;when&#160;using&#160;post&#160;build&#160;variant)&#160;<br/>
#define&#160;CAN_ENABLE_SELECTABLE_PB&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;Generic Precopy&#160;Function&#160;(None&#160;AUTOSAR&#160;feature)&#160;<br/>
#define&#160;CAN_GENERIC_PRECOPY&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;Generic Confirmation&#160;Function&#160;(None&#160;AUTOSAR&#160;feature)&#160;<br/>
#define&#160;CAN_GENERIC_CONFIRMATION&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;Rx&#160;Queue&#160;Function&#160;(None&#160;AUTOSAR&#160;feature)&#160;<br/>
#define&#160;CAN_RX_QUEUE&#160; &#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Used&#160;ID type&#160;(standard/extended&#160;or mixed&#160;ID format)&#160;<br/>
#define&#160;CAN_EXTENDED_ID &#160;&#160;STD_ON/STD_OFF&#160;<br/>#define&#160;CAN_MIXED_ID &#160;&#160;&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;42&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-43_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-43_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>&gt;&#160;&#160;</b>Usage&#160;of&#160;Rx&#160;and&#160;Tx&#160;Full&#160;and&#160;BasicCAN objects (deactivate&#160;only&#160;when&#160;not&#160;using&#160;and&#160;<br/>
to&#160;save&#160;ROM and&#160;runtime&#160;consumption)&#160;<br/>#define&#160;CAN_RX_FULLCAN_OBJECTS&#160;&#160; &#160;STD_ON/STD_OFF&#160;<br/>#define&#160;CAN_TX_FULLCAN_OBJECTS&#160;&#160; &#160;&#160;STD_ON/STD_OFF&#160;<br/>#define&#160;CAN_RX_BASICCAN_OBJECTS&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;Multiple&#160;BasicCAN objects&#160;<br/>
#define&#160;CAN_MULTIPLE_BASICCAN&#160;&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Optimizations&#160;<br/>
#define&#160;CAN_ONE_CONTROLLER_OPTIMIZATION&#160;&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>#define&#160;CAN_DYNAMIC_FULLCAN_ID &#160;&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Usage&#160;of&#160;nested&#160;CAN&#160;interrupts&#160;<br/>
#define&#160;CAN_NESTED_INTERRUPTS&#160;&#160;&#160;&#160;&#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;Multiple&#160;ECU&#160;configurations&#160;<br/>
#define&#160;CAN_MULTI_ECU_CONFIG&#160; &#160; &#160;STD_ON/STD_OFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;RAM Check (verify&#160;mailbox&#160;buffers)&#160;<br/>
#define&#160;CAN_RAM_CHECK&#160;&#160;&#160;&#160;&#160;x&#160;<br/>
<b>&gt;&#160;&#160;</b>Use&#160;Overrun&#160;detection&#160;<br/>
#define&#160;CAN_OVERRUN_NOTIFICATION &#160;&#160;&#160;&#160;&#160;x&#160;<br/>
<b>&gt;&#160;&#160;</b>Select&#160;MicroSar version&#160;<br/>
#define&#160;CAN_MICROSAR_VERSION &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CAN_MSR40/CAN_MSR30&#160;<br/>
<b>&gt;&#160;&#160;</b>Tx&#160;Cancellation&#160;of&#160;Identical IDs&#160;<br/>
#define&#160;CAN_IDENTICAL_ID_CANCELLATION&#160; &#160; &#160;STD_ON/STD_OFF&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Link-Time&#160;Parameters&#160;</b><br/>
The&#160;library&#160;version&#160;of&#160;the&#160;CAN&#160;driver use&#160;following&#160;generated&#160;settings:&#160;<br/>
<b>&gt;&#160;&#160;</b>Maximum&#160;amount&#160;of&#160;used&#160;controllers and&#160;Tx&#160;mailboxes (has&#160;to&#160;be&#160;set&#160;for&#160;post-build&#160;<br/>
variants at&#160;linktime)&#160;<br/>
<b>7.3&#160;</b><br/>
<b>Post-Build&#160;Parameters&#160;</b><br/>
Following&#160;settings are post-build&#160;data&#160;that&#160;can&#160;be&#160;changed&#160;for re-flashing:&#160;<br/>
<b>&gt;&#160;&#160;</b>Amount&#160;and&#160;usage&#160;of&#160;FullCAN Rx&#160;and&#160;Tx&#160;mailboxes&#160;<br/>
<b>&gt;&#160;&#160;</b>Used&#160;database&#160;(message&#160;information&#160;like&#160;ID,&#160;DLC)&#160;<br/>
<b>&gt;&#160;&#160;</b>Filters for BasicCAN Rx&#160;mailbox&#160;<br/>
<b>&gt;&#160;&#160;</b>Baud-rate&#160;settings&#160;<br/>
<b>&gt;&#160;&#160;</b>Module&#160;Start&#160;Address&#160;(only&#160;for&#160;post-build&#160;systems:&#160;The&#160;memory&#160;location&#160;for re-<br/>
flashed&#160;data&#160;has&#160;to&#160;be&#160;defined)&#160;<br/>
<b>&gt;&#160;&#160;</b>Configuration&#160;ID (only&#160;for post-build&#160;systems:&#160;This&#160;number is&#160;used&#160;to&#160;identify&#160;the&#160;<br/>
post-build&#160;data&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;43&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-44_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-44_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-44_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>7.4&#160;</b><br/>
<b>Configuration&#160;with GENy&#160;</b><br/>
The&#160;CAN&#160;driver is configured&#160;with&#160;the&#160;help&#160;of&#160;the&#160;configuration&#160;tool&#160;GENy.&#160;<br/>To&#160;generate&#160;communication&#160;specific&#160;settings,&#160;like&#160;used&#160;message&#160;objects&#160;e.g.&#160;FullCAN&#160;Rx&#160;<br/>mailboxes,&#160;baud&#160;rate&#160;settings&#160;and&#160;hardware&#160;specific&#160;settings&#160;for&#160;CAN&#160;communication,&#160;the&#160;<br/>GENy&#160;tool is used.&#160;This chapter explains the&#160;usage&#160;of&#160;this tool.&#160;<br/>Please&#160;refer&#160;to&#160;the&#160;online&#160;help&#160;of&#160;the&#160;tool&#160;for&#160;detailed&#160;information&#160;about&#160;the&#160;general&#160;usage.&#160;<br/>And&#160;see&#160;below&#160;for special settings of&#160;the&#160;hardware specifics.&#160;<br/>&#160;<br/>
<b>7.4.1&#160;&#160;Platform&#160;Settings&#160;<br/></b>&#160;<br/>
&#160;<br/>
Figure&#160;7-1&#160;&#160;Platform&#160;settings&#160;<br/>
&#160;<br/>
<b>Attribute&#160;&#160;Attribute is&#160;of&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>type&#160;</b><br/>
<b>Type&#160;</b><br/>
<b>(Configuration&#160;<br/>Variant)&#160;</b><br/>
Micro&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
Hw_Tms470/570Cpu(Dcan)&#160;&#160;Select&#160;<br/>
the&#160;<br/>
hardware&#160;<br/>
platform&#160;to&#160;use&#160;<br/>
Derivative&#160;&#160;pre-compile&#160;<br/>
Enum&#160;<br/>
TMS470PSF761&#160;<br/>
The&#160;<br/>
specific&#160;<br/>
derivative,&#160;<br/>
TMS570PSF762&#160;<br/>
based&#160;on&#160;the&#160;platform&#160;<br/>
TMS570PSFC66&#160;<br/>TMS570LS30316U&#160;<br/>
Compiler&#160;&#160;pre-compile&#160;<br/>
Enum&#160;<br/>
Texas Instruments&#160;<br/>
Compiler selection&#160;&#160;<br/>
Table&#160;7-1&#160;&#160;&#160;Platform&#160;Parameter&#160;description&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;44&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-45_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-45_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-45_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>7.4.2&#160;&#160;Component Settings&#160;<br/></b>&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-2&#160;&#160;Component&#160;Settings&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;45&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-46_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-46_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Attribute&#160;Name&#160;</b><br/>
<b>Configuration&#160;&#160;Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Variant&#160;</b><br/>
<b>Type&#160;</b><br/>
Miscellaneous&#160;<br/>Hardware&#160;Loop Check&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Timeout&#160;monitoring&#160;to&#160;check&#160;for&#160;<br/>hardware&#160;problems&#160;inside&#160;a loop&#160;<br/>(possible endless&#160;loops&#160;because of&#160;<br/>hardware&#160;issues&#160;will&#160;be notified&#160;<br/>over DEM)&#160;<br/>
Timeout&#160;Duration&#160;Factor&#160;<br/>
pre-compile&#160;<br/>
Integer&#160;<br/>
Loop&#160;count&#160;<br/>
Maximum&#160;loop count&#160;for&#160;“Hardware&#160;<br/>Loop&#160;Check”. Refer to loop&#160;<br/>descriptions&#160;set&#160;this&#160;value&#160;for&#160;your&#160;<br/>needs.&#160;<br/>
Timeout&#160;Counter ID&#160;<br/>
pre-compile&#160;<br/>
Float&#160;<br/>
Time&#160;<br/>
Specifies&#160;&#160;the&#160;&#160;counter&#160;&#160;ID&#160;&#160;used&#160;&#160;in&#160;<br/>OS&#160;for 'Timeout&#160;Duration'<br/>
(MICROSAR401&#160;only)&#160;<br/>
&#160;<br/>
Multiplexed&#160;Transmission&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;to&#160;get multiplexed transmit&#160;<br/>objects&#160;for&#160;Tx&#160;BasicCAN object (3&#160;<br/>send objects&#160;instead of&#160;1) avoids&#160;<br/>external&#160;Id&#160;priority&#160;inversion&#160;<br/>
Wakeup Support&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;to&#160;Wake&#160;up&#160;over&#160;CAN&#160;bus&#160;<br/>by&#160;CAN&#160;driver&#160;<br/>
&#160; &#160;&#160;Polling&#160;<br/>Tx&#160;Processing&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
Interrupt&#160;<br/>
/&#160;&#160;Activate&#160;to&#160;handle transmit&#160;<br/>
Polling&#160;<br/>
messages&#160;over&#160;polling&#160;<br/>
Rx&#160;Processing&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
Interrupt&#160;<br/>
/&#160;&#160;Activate&#160;to&#160;handle receive&#160;<br/>
Polling&#160;<br/>
messages&#160;over&#160;polling&#160;<br/>
Busoff&#160;Processing&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
Interrupt&#160;<br/>
/&#160;&#160;Activate&#160;to&#160;handle Bus&#160;Off&#160;event&#160;<br/>
Polling&#160;<br/>
over&#160;polling&#160;<br/>
Wakeup Processing&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
Interrupt&#160;<br/>
/&#160;&#160;Activate&#160;to&#160;handle&#160;Wakeup&#160;event&#160;<br/>
Polling&#160;<br/>
over&#160;polling&#160;<br/>
Mainfunction&#160;bus&#160;off&#160;period&#160;&#160;pre-compile&#160;<br/>
Float&#160;<br/>
Time&#160;<br/>
Period&#160;to call&#160;<br/>Can_MainFunction_BusOff()&#160;in&#160;<br/>seconds&#160;<br/>
Mainfunction&#160;wakeup&#160;<br/>
pre-compile&#160;<br/>
Float&#160;<br/>
Time&#160;<br/>
Period&#160;to call&#160;<br/>
period&#160;<br/>
Can_MainFunction_Wakeup()&#160;in&#160;<br/>seconds&#160;<br/>
Mainfunction&#160;read&#160;period&#160;<br/>
pre-compile&#160;<br/>
Float&#160;<br/>
Time&#160;<br/>
Period&#160;to call&#160;<br/>Can_MainFunction_Read()&#160;in&#160;<br/>seconds&#160;<br/>
Mainfunction&#160;write&#160;period&#160;<br/>
pre-compile&#160;<br/>
Float&#160;<br/>
Time&#160;<br/>
Period to call&#160;<br/>Can_MainFunction_Write()&#160;in&#160;<br/>seconds&#160;<br/>
&#160; &#160;&#160;AUTOSAR&#160;extension&#160;<br/>Generic&#160;PreCopy&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Generic&#160;Rx&#160;notification&#160;for&#160;all&#160;<br/>messages&#160;<br/>
Generic&#160;Confirmation&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Generic&#160;Tx&#160;confirmation&#160;for&#160;all&#160;<br/>messages&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;46&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-47_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-47_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Attribute&#160;Name&#160;</b><br/>
<b>Configuration&#160;&#160;Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Variant&#160;</b><br/>
<b>Type&#160;</b><br/>
Generic&#160;PreTransmit&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
A&#160;generic&#160;PreTransmit, common&#160;<br/>for all&#160;Tx&#160;messages&#160;will&#160;be&#160;called&#160;<br/>when&#160;this&#160;checkbox&#160;is&#160;enabled.&#160;<br/>Use this&#160;to&#160;change&#160;data&#160;or&#160;abort&#160;<br/>transmission&#160;right&#160;before the&#160;<br/>message&#160;will&#160;be&#160;send.&#160;<br/>
Rx&#160;FullCAN&#160;Support&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Use Rx&#160;FullCAN message objects&#160;<br/>(deactivate to reduce&#160;ROM&#160;and&#160;<br/>runtime consumption)&#160;<br/>
Tx&#160;FullCAN&#160;Support&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Use&#160;Tx&#160;FullCAN message objects&#160;<br/>(deactivate to reduce&#160;ROM&#160;and&#160;<br/>runtime consumption)&#160;<br/>
Rx&#160;BasicCAN&#160;Support&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Use Rx&#160;BasicCAN message&#160;<br/>objects&#160;(deactivate to&#160;reduce ROM&#160;<br/>and runtime consumption)&#160;<br/>
Use Nested&#160;CAN Interrupts&#160;&#160;pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
CAN ISRs&#160;from&#160;different controllers&#160;<br/>can&#160;interrupt&#160;each&#160;other (only&#160;with&#160;<br/>higher&#160;priority).&#160;deactivate to&#160;<br/>reduce runtime consumption.&#160;<br/>
Secure Rx&#160;Buffer used&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Temporary&#160;buffer for received&#160;data&#160;<br/>will&#160;be located&#160;in&#160;a&#160;unused&#160;mailbox&#160;<br/>object.&#160;This&#160;is&#160;to secure receive&#160;<br/>data&#160;by&#160;not&#160;locate it to&#160;common&#160;<br/>RAM.&#160;<br/>
Hardware&#160;Loop Check&#160;by&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Enable this&#160;when&#160;you like to handle&#160;<br/>
Application&#160;<br/>
“Hardware&#160;&#160;Loop&#160;&#160;Check”&#160;&#160;by&#160;&#160;your&#160;<br/>own.&#160;<br/>
Using&#160;<br/>
API&#160;<br/>
functions&#160;<br/>
“ApplCanTimerStart()“,&#160;<br/>„ApplCanTimerEnd()“&#160;<br/>
and&#160;<br/>
„ApplCanTimerLoop()“&#160;<br/>
Report CAN_E_TIMEOUT&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Enable&#160;this&#160;when&#160;you&#160;like&#160;to&#160;report&#160;<br/>
DEM&#160;as&#160;DET&#160;0x07&#160;<br/>
CAN_E_TIMEOUT&#160;<br/>
(“Hardware&#160;<br/>
notification&#160;<br/>
Loop&#160;&#160;Check”)&#160;&#160;to&#160;&#160;DET&#160;&#160;instead&#160;&#160;of&#160;<br/>DEM&#160;(does&#160;only&#160;work&#160;when&#160;DET&#160;is&#160;<br/>activated)&#160;<br/>
Individual&#160;Processing&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Enable&#160;&#160;this&#160;&#160;when&#160;&#160;you&#160;&#160;like&#160;&#160;to&#160;<br/>configure&#160;<br/>
mailbox&#160;<br/>
specific&#160;<br/>
polling/interrupt&#160;&#160;processing.&#160;&#160;This&#160;<br/>feature&#160;is&#160;only&#160;available&#160;&#160;with&#160;&#160;“High&#160;<br/>End”&#160;license.&#160;<br/>
Support Mixed&#160;ID&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Force CAN&#160;driver to&#160;handle&#160;Mixed&#160;<br/>ID (standard&#160;and extended&#160;ID)&#160;at&#160;<br/>pre-compile-time to expand&#160;the ID&#160;<br/>type later&#160;on.&#160;<br/>
Multiple&#160;BasicCAN Objects&#160;&#160;pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Support Multiple&#160;BasicCAN&#160;<br/>objects.&#160;This&#160;gives&#160;the possibility&#160;to&#160;<br/>use multiple Filters&#160;and&#160;optimize&#160;<br/>acceptance Filtering&#160;as&#160;well&#160;as&#160;<br/>avoid&#160;overrun.&#160;This&#160;feature&#160;is&#160;only&#160;<br/>available&#160;with&#160;“High End”&#160;license.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;47&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-48_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-48_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Attribute&#160;Name&#160;</b><br/>
<b>Configuration&#160;&#160;Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Variant&#160;</b><br/>
<b>Type&#160;</b><br/>
Optimize for one&#160;controller&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;this&#160;for 1 controller&#160;<br/>systems&#160;when&#160;you never&#160;will&#160;<br/>expand&#160;to&#160;multi-controller.&#160;So that&#160;<br/>the&#160;CAN driver&#160;works&#160;more&#160;<br/>efficient&#160;<br/>
Dynamic&#160;FullCAN&#160;Tx&#160;ID&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Always&#160;write&#160;FullCAN&#160;Tx&#160;ID within&#160;<br/>Can_Write()&#160;API function.&#160;<br/>Deactivate&#160;this&#160;to&#160;optimize&#160;code&#160;<br/>when&#160;you do not use FullCAN&#160;Tx&#160;<br/>objects&#160;dynamically.&#160;<br/>
Size&#160;of&#160;Hw&#160;HandleType&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
8bit&#160;<br/>
Support 8bit&#160;Hardware Handles&#160;as&#160;<br/>define&#160;in&#160;AutoSar 3.01&#160;specified.&#160;<br/>
16bit&#160;<br/>
Or&#160;change to 16bit like specified&#160;in&#160;<br/>AutoSar&#160;4.0.&#160;<br/>
Partial&#160;Networking&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;this&#160;when&#160;you&#160;like&#160;to&#160;<br/>support a&#160;partial&#160;network&#160;that&#160;will&#160;<br/>be&#160;woken&#160;up by&#160;special&#160;NM&#160;<br/>message.&#160;This&#160;feature&#160;have to&#160;be&#160;<br/>enabled if&#160;one of&#160;the controllers&#160;will&#160;<br/>wake&#160;up&#160;by&#160;partial&#160;network&#160;<br/>transceiver.&#160;<br/>
&#160;<br/>
Get&#160;Status&#160;API&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Support Can_GetStatus()&#160;API that&#160;<br/>return the hardware states:&#160;<br/>
CAN_STATUS_STOP,&#160;CAN_STATUS_INIT,&#160;<br/>CAN_STATUS_INCONSISTENT,&#160;<br/>CAN_STATUS_WARNING,&#160;<br/>CAN_STATUS_PASSIVE,&#160;<br/>CAN_STATUS_BUSOFF,&#160;<br/>CAN_STATUS_SLEEP&#160;<br/>
Type of&#160;Interrupt&#160;Function&#160;<br/>
Link-time&#160;<br/>
Enum&#160;<br/>
Category&#160;1&#160;<br/>
Category&#160;1:&#160;Interrupt Function&#160;has&#160; &#160;<br/>to&#160;be&#160;added&#160;to&#160;the&#160;interrupt&#160;vector&#160;<br/>
Category&#160;2&#160;<br/>
table unless&#160;this&#160;is&#160;not&#160;already&#160;<br/>
VoidFuncVoid&#160;&#160;done&#160;automatically&#160;by&#160;a compiler&#160;<br/>
pragma.&#160;<br/>
Category&#160;2:&#160;Interrupt Function&#160;is&#160;<br/>defined&#160;with ISR()&#160;define.&#160;<br/>
VoidFuncVoid:&#160;Interrupt&#160;Function&#160;is&#160;<br/>declared as&#160;void ISR(void)&#160;and&#160;has&#160;<br/>to&#160;be&#160;called&#160;in case&#160;of&#160;a&#160;CAN&#160;<br/>Interrupt.&#160;<br/>
CAN Interrupt&#160;lock&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
CANDriver&#160;<br/>
Disable and&#160;Restore Can&#160;Interrupt&#160;<br/>by&#160;CAN Driver or&#160;Application or&#160;<br/>
Application&#160;<br/>
CAN Driver and&#160;Application.&#160;<br/>
Both&#160;<br/>
Reason&#160;maybe,&#160;that&#160;the&#160;CAN&#160;<br/>driver should&#160;not&#160;access&#160;the&#160;<br/>Interrupt&#160;controller for CAN&#160;<br/>interrupts&#160;or there are&#160;other&#160;<br/>restrictions&#160;(special&#160;security&#160;level)&#160;<br/>or&#160;Application&#160;has&#160;to care about&#160;<br/>additional&#160;Interrupts&#160;like&#160;Wakeup.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;48&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-49_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-49_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Attribute&#160;Name&#160;</b><br/>
<b>Configuration&#160;&#160;Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Variant&#160;</b><br/>
<b>Type&#160;</b><br/>
Overrun&#160;Notification&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
None&#160;<br/>
Overrun&#160;detection&#160;activation and&#160;<br/>selection&#160;of&#160;the Notification&#160;<br/>
DET&#160;<br/>
function.&#160;<br/>
Application&#160;<br/>
None:&#160;No Overrun&#160;detection.&#160;<br/>
DET: will&#160;be&#160;called&#160;for Overrun.&#160;<br/>
Application:&#160;will&#160;be called.&#160;<br/>
RAM check&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
None&#160;<br/>
RAM check&#160;of&#160;mailbox&#160;buffers&#160;<br/>
Active&#160;<br/>
None:&#160;No RAM&#160;check&#160;<br/>
Mailbox&#160;<br/>
Active:&#160;Active RAM check&#160;(global&#160;<br/>
Notification&#160;<br/>
notification)&#160;<br/>
Mailbox&#160;Notification:&#160;Active&#160;RAM&#160;<br/>check&#160;(global&#160;+&#160;mailbox&#160;<br/>notification)&#160;<br/>
Hardware (Transmit)&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Enable/disable the usage&#160;of&#160;<br/>
Cancellation&#160;<br/>
‘transmit cancellation’&#160;out of&#160;<br/>hardware&#160;mailboxes, so that the&#160;<br/>canceled message won’t be send.&#160;<br/>(avoid&#160;internal&#160;priority&#160;inversion)&#160;<br/>
Identical&#160;ID cancellation&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
'Hardware&#160;Transmit Cancellation&#34;&#160;<br/>also cancel&#160;messages&#160;with&#160;same&#160;<br/>identifier (newer data&#160;will&#160;be send)&#160;<br/>out of&#160;hardware mailboxes.&#160;<br/>
otherwise&#160;<br/>
only&#160;lower&#160;prior&#160;identifiers&#160;will&#160;be&#160;<br/>cancelled. (older data&#160;will&#160;be send)&#160;<br/>
&#160; &#160;&#160;Rx&#160;Queue&#160;<br/>Rx&#160;Queue&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Enable this&#160;when&#160;you&#160;like to&#160;handle&#160;<br/>Rx&#160;messages&#160;in polling&#160;context.&#160;<br/>(Shorten&#160;interrupt latency&#160;time).&#160;<br/>This&#160;feature is&#160;only&#160;available&#160;with&#160;<br/>“High&#160;End”&#160;license.&#160;<br/>
Size&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Size&#160;of&#160;FIFO&#160;in&#160;which the&#160;Message&#160;<br/>information&#160;is&#160;buffered.&#160;<br/>
Common&#160;<br/>Configuration Variant&#160;<br/>
pre-compile&#160;<br/>
Enum&#160;<br/>
Pre-Compile,&#160;&#160;Select&#160;your project type&#160;<br/>Link-Time,&#160;<br/>Post build&#160;<br/>
Version&#160;Info&#160;API&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;function&#160;to&#160;get&#160;version&#160;<br/>information&#160;<br/>
Dev&#160;Error Detection&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;to&#160;get&#160;information&#160;about&#160;<br/>possible conflicts&#160;(refer to&#160;DET&#160;<br/>module description)&#160;<br/>
Prod&#160;Error Detection&#160;<br/>
pre-compile&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;to&#160;get&#160;information&#160;about&#160;<br/>possible conflicts&#160;in a&#160;running&#160;<br/>system&#160;(refer to DEM module&#160;<br/>description)&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;49&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-50_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-50_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-50_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Attribute&#160;Name&#160;</b><br/>
<b>Configuration&#160;&#160;Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Variant&#160;</b><br/>
<b>Type&#160;</b><br/>
User Config File&#160;<br/>
pre-compile&#160;<br/>
String&#160;<br/>
File&#160;name&#160;and&#160;&#160;This&#160;file will&#160;be&#160;included&#160;in&#160;the&#160;<br/>path&#160;<br/>
Can_cfg.h&#160;for special&#160;settings&#160;<br/>
Post build configuration&#160;<br/>Module&#160;Start&#160;Address&#160;&#160;<br/>
post-build&#160;<br/>
Integer&#160;<br/>
Address&#160;<br/>
Address&#160;to&#160;Flash&#160;the&#160;data&#160;<br/>
(Post-build&#160;only)&#160;<br/>
Max&#160;Nr. Of&#160;Tx&#160;Objects&#160;&#160;<br/>
Link-time&#160;<br/>
Integer&#160;<br/>
Amount&#160;<br/>
Amount&#160;of&#160;maximum&#160;used&#160;transmit&#160;<br/>objects&#160;over&#160;all&#160;controllers&#160;(used&#160;<br/>
(Post-build&#160;only)&#160;<br/>
for RAM&#160;variables). One&#160;object for&#160;<br/>BasicCAN&#160;Tx&#160;and&#160;one&#160;for each&#160;<br/>FullCAN&#160;Tx.&#160;Add&#160;all&#160;objects&#160;over all&#160;<br/>used&#160;Channels&#160;for this&#160;value.&#160;<br/>
Max&#160;CAN&#160;Controller&#160;&#160;<br/>
Link-time&#160;<br/>
Integer&#160;<br/>
Amount&#160;<br/>
Amount&#160;of&#160;maximum&#160;used&#160;<br/>controllers&#160;(used&#160;for RAM&#160;<br/>
(Post-build&#160;only)&#160;<br/>
variables)&#160;<br/>
Configuration ID&#160;&#160;<br/>
post-build&#160;<br/>
Integer&#160;<br/>
Identity&#160;<br/>
A&#160;special&#160;value&#160;to identify&#160;this&#160;<br/>configuration&#160;in&#160;the&#160;Flash.&#160;<br/>
(Post-build&#160;only)&#160;<br/>
Table&#160;7-2&#160;&#160;&#160;Component&#160;Parameter&#160;description&#160;<br/>
&#160;<br/>
<b>7.4.3&#160;&#160;Controller (Channel) Settings&#160;<br/></b>&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;50&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-51_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-51_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Attribute is&#160;of&#160;&#160;Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>type&#160;<br/>(Configuration&#160;<br/>Variant)&#160;</b><br/>
Miscellaneous&#160;<br/>Wakeup&#160;&#160;Source&#160;&#160;Link-time&#160;<br/>
Integer&#160;<br/>
Source&#160;<br/>
Insert&#160;&#160;the&#160;&#160;Wakeup&#160;&#160;Source&#160;<br/>
ID&#160;/&#160;&#160;<br/>
value&#160;&#160;compatible&#160;&#160;to&#160;&#160;ECU&#160;<br/>State&#160;Manager.&#160;<br/>
Wakeup&#160;&#160;Source&#160;<br/>Ref&#160;<br/>
(Reference&#160;&#160;is&#160;&#160;only&#160;<br/>available&#160;&#160;if&#160;&#160;EcuM&#160;&#160;is&#160;<br/>available&#160;in&#160;GENy)&#160;<br/>
Enable&#160;&#160;Wakeup&#160;&#160;Link-time&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
MICROSAR4x&#160;<br/>
only:&#160;<br/>
Support&#160;<br/>
Activation&#160;&#160;of&#160;&#160;Wakeup&#160;&#160;over&#160;<br/>CAN bus.&#160;<br/>
&#160;&#160; &#160;AUTOSAR&#160;extension&#160;<br/>Partial&#160;<br/>
Post-build&#160;<br/>
Bool&#160;<br/>
On /&#160;Off&#160;<br/>
Activate&#160;&#160;this&#160;&#160;when&#160;&#160;you&#160;&#160;there&#160;<br/>
Networking&#160;<br/>
is&#160;<br/>
a&#160;<br/>
partial&#160;<br/>
network&#160;<br/>
transceiver&#160;&#160;on&#160;&#160;this&#160;&#160;controller&#160;<br/>active and&#160;used.&#160;<br/>
Table&#160;7-2&#160;&#160;&#160;Controller&#160;Parameter&#160;description&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;51&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-52_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-52_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-52_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>7.4.4&#160;&#160;Init Structure&#160;Settings&#160;<br/></b>&#160;<br/>
&#160;<br/>
Figure&#160;7-2&#160;&#160;Init&#160;Structure&#160;Dialog&#160;<br/>
&#160;<br/>Add&#160;&#160;Init&#160;&#160;Structures&#160;&#160;to&#160;setup&#160;multiple&#160;&#160;baud&#160;&#160;rate&#160;and&#160;filter&#160;&#160;settings&#160;&#160;that&#160;&#160;can&#160;&#160;be&#160;&#160;selected&#160;at&#160;<br/>Initialization&#160;phase&#160;of&#160;the&#160;ECU.&#160;<br/>
MicroSar3&#160;&#160;only:&#160;&#160;This&#160;&#160;structure&#160;&#160;can&#160;&#160;be&#160;&#160;selected&#160;&#160;with&#160;&#160;Can_InitStruct()&#160;&#160;before&#160;&#160;call&#160;<br/>Can_InitController().&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;52&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-53_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-53_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-53_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>7.4.4.1&#160;</b><br/>
<b>Setup the&#160;Filter by&#160;pressing the&#160;“Acceptance&#160;Filter&#160;Configuration”&#160;Button.&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-3&#160;&#160;Setup&#160;Filter&#160;Dialog&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Attribute is&#160;of&#160;&#160;Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>
<b>(Configuration&#160;</b><br/>
written&#160;in&#160;bold&#160;<br/>
<b>Variant)&#160;</b><br/>
Setup&#160;<br/>Acceptance&#160;<br/>
Post-build&#160;<br/>
Integer&#160;<br/>
Mask, code&#160;<br/>
Each&#160;&#160;ID&#160;&#160;–bit&#160;&#160;is&#160;&#160;represented&#160;<br/>
Filter&#160;<br/>
by&#160;&#160;a&#160;&#160;“0/1/X”,&#160;&#160;means&#160;&#160;must&#160;<br/>match&#160;a&#160;“0”&#160;or&#160;“1”&#160;or must&#160;not&#160;<br/>match “X”&#160;<br/>
Open filters&#160;<br/>
&#160;<br/>
Action&#160;<br/>
-&#160;<br/>
Open the&#160;filter complete&#160;to&#160;<br/>receive all&#160;IDs&#160;<br/>
Optimize&#160;<br/>
&#160;<br/>
Action&#160;<br/>
-&#160;<br/>
Open&#160;&#160;the&#160;&#160;filter&#160;&#160;automatic&#160;&#160;to&#160;<br/>just&#160;&#160;receive&#160;&#160;the&#160;&#160;IDs&#160;&#160;in&#160;<br/>database.&#160;&#160;“Use&#160;&#160;FullCAN”&#160;&#160;try&#160;<br/>to&#160;&#160;put&#160;&#160;as&#160;&#160;much&#160;&#160;messages&#160;&#160;in&#160;<br/>FullCAN&#160;&#160;objects&#160;&#160;to&#160;&#160;better&#160;<br/>optimize filters&#160;<br/>
Messages-<br/>
&#160;<br/>
&#160;<br/>
Messages&#160;that&#160;will&#160;be&#160;<br/>
Open&#160;&#160;the&#160;&#160;filter&#160;&#160;automatic&#160;&#160;to&#160;<br/>
Window&#160;<br/>
received&#160;via ranges&#160;<br/>
just&#160;&#160;receive&#160;&#160;the&#160;&#160;IDs&#160;&#160;in&#160;<br/>
(like NM&#160;messages)&#160;will&#160;&#160;database.&#160;&#160;“Use&#160;&#160;FullCAN”&#160;&#160;try&#160;<br/>have&#160;always&#160;a&#160;grey&#160;flag&#160;&#160;to&#160;&#160;put&#160;&#160;as&#160;&#160;much&#160;&#160;messages&#160;&#160;in&#160;<br/>in&#160;view.&#160;<br/>
FullCAN&#160;&#160;objects&#160;&#160;to&#160;&#160;better&#160;<br/>
They&#160;will&#160;be&#160;included in&#160;&#160;optimize filters&#160;<br/>“Irrelevant&#160;passing&#160;<br/>messages”&#160;amount.&#160;<br/>
Table&#160;7-3&#160;&#160;&#160;Filter&#160;Parameter&#160;description&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;53&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-54_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-54_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-54_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>7.4.4.2&#160;</b><br/>
<b>Setup the&#160;Baud rate&#160;by&#160;pressing&#160;the&#160;“Bus&#160;timing Configuration”&#160;Button&#160;</b><br/>
&#160;<br/>
Figure&#160;7-4&#160;&#160;Baud&#160;Rate&#160;Dialog&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Attribute is&#160;of&#160;&#160;Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>type&#160;<br/>(Configuration&#160;<br/>Variant)&#160;</b><br/>
Clock&#160;<br/>
Post-build&#160;<br/>
Integer&#160;<br/>
CAN clock&#160;<br/>
Set&#160;the&#160;frequent&#160;of&#160;the CAN cell&#160;clock.&#160;<br/>
Baudrate&#160;<br/>
Post-build&#160;<br/>
Integer&#160;<br/>
Baud rate&#160;<br/>
Set&#160;baud rate&#160;to&#160;be&#160;used for this&#160;<br/>channel&#160;<br/>
Calculate&#160;<br/>
&#160;<br/>
Action&#160;<br/>
-&#160;<br/>
It is&#160;possible to calculate&#160;possible&#160;<br/>hardware&#160;register settings&#160;out of&#160;baud&#160;<br/>rate&#160;or&#160;vice&#160;versa.&#160;<br/>
Sample,&#160;BTL&#160;<br/>
Post-build&#160;<br/>
Select&#160;<br/>
Sample Point&#160;&#160;Select the sample point&#160;and sync&#160;<br/>
cycles, SJW&#160;<br/>
phase related&#160;to&#160;your&#160;bus&#160;physics&#160;<br/>
Table&#160;7-4&#160;&#160;&#160;Baud&#160;rate&#160;Parameter&#160;description&#160;<br/>
<b>7.5&#160;</b><br/>
<b>Configuration&#160;with da&#160;DaVinci&#160;Configurator&#160;</b><br/>
See&#160;Online&#160;help&#160;within&#160;DaVinci Configurator&#160;and&#160;BSWMD&#160;file&#160;for&#160;parameter settings.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;54&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-55_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-55_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>8.&#160;&#160;AUTOSAR&#160;Standard&#160;Compliance&#160;</b><br/>
<b>8.1&#160;</b><br/>
<b>Limitations&#160;/&#160;Restrictions&#160;</b><br/>
<b>&gt;&#160;&#160;</b>No&#160;multiple&#160;AUTOSAR&#160;CAN driver allowed&#160;in&#160;the&#160;system.&#160;<br/>
<b>&gt;&#160;&#160;</b>No&#160;support&#160;for L-PDU&#160;callout&#160;(AUTOSAR&#160;3.2.1), but&#160;support&#160;‘Generic Precopy’&#160;instead&#160;<br/>
<b>&gt;&#160;&#160;</b>No&#160;support&#160;for multiple&#160;read&#160;and&#160;write&#160;period&#160;configuration&#160;(AUTOSAR&#160;3.2.1)&#160;<br/>
<b>&gt;&#160;&#160;</b>Configurations with&#160;no&#160;Tx&#160;Basic CAN are&#160;not&#160;supported&#160;<br/>
&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Vector Extensions&#160;</b><br/>
Refer to&#160;Chapte<a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#9">r “Features” li</a>sted&#160;under “<b>AUTOSAR&#160;extensions”&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;55&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-56_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-56_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>9.&#160;&#160;Glossary&#160;and&#160;Abbreviations&#160;</b><br/>
<b>9.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
GENy&#160;<br/>
Generation&#160;tool&#160;for&#160;CANbedded&#160;and MICROSAR&#160;components&#160;<br/>
High End&#160;(license)&#160;<br/>
Product&#160;license&#160;to support&#160;an&#160;extended&#160;feature set&#160;(see&#160;Feature&#160;table)&#160;<br/>
Table&#160;9-1&#160;&#160;&#160;Glossary&#160;<br/>
&#160;<br/>
<b>9.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
API&#160;<br/>
Application Programming Interface&#160;&#160;&#160;<br/>
AUTOSAR&#160;<br/>
Automotive Open System&#160;Architecture&#160;<br/>
BSW&#160;<br/>
Basis&#160;Software&#160;<br/>
DEM&#160;<br/>
Diagnostic&#160;Event&#160;Manager&#160;<br/>
DET&#160;<br/>
Development&#160;Error&#160;Tracer&#160;<br/>
ECU&#160;<br/>
Electronic&#160;Control&#160;Unit&#160;<br/>
HIS&#160;<br/>
Hersteller&#160;Initiative&#160;Software&#160;<br/>
ISR&#160;<br/>
Interrupt&#160;Service Routine&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller&#160;Open&#160;System&#160;Architecture&#160;(the&#160;Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>3,3x&#160;=&#160;AUTOSAR&#160;version 3&#160;<br/>401 =&#160;AUTOSAR&#160;version 4.0.1&#160;<br/>403 =&#160;AUTOSAR&#160;version 4.0.3&#160;<br/>4x&#160;=&#160;AUTOSAR&#160;version&#160;4.x.x&#160;<br/>
SWS&#160;<br/>
Software&#160;Specification&#160;<br/>
Common&#160;CAN&#160;<br/>
Connect&#160;two physical&#160;peripheral&#160;channels&#160;to one&#160;CAN&#160;bus&#160;(to increase&#160;<br/>the&#160;amount&#160;of&#160;FullCAN)&#160;<br/>
Hardware&#160;Loop&#160;<br/>
Timeout&#160;monitoring&#160;for&#160;possible endless loops.&#160;<br/>
Check&#160;<br/>
Table&#160;9-2&#160;&#160;&#160;Abbreviations&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;56&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-57_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_DrvCanAsr_Tms470_Dcan-57_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Driver&#160;<br/>
<b>10.&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>&#160;<br/>&gt;&#160; &#160;News&#160;<br/>&gt;&#160; &#160;Products&#160;<br/>&gt;&#160; &#160;Demo&#160;software&#160;<br/>&gt;&#160; &#160;Support&#160;<br/>&gt;&#160; &#160;Training&#160;data&#160;<br/>&gt;&#160; &#160;Addresses&#160;<br/>&#160;<br/>
<a href="http://www.vector.com/"><b>www.vector.com&#160;</b></a><br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.10.00&#160;<br/>
&#160;<br/>
Page&#160;57&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">1. Document Information</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">1.1 History</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">Platforms</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#2">1.2 Reference Documents</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#3">1.3 Scope of the Document</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#6">2. Hardware Overview</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7">3. Introduction</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#7">3.1 Architecture Overview</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#9">4. Functional Description</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#9">4.1 Features</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#13">4.2 Initialization</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#13">4.3 Communication</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#14">4.3.1 Mailbox Layout</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#14">4.3.2 Acceptance Filter for BasicCAN</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#14">4.3.3 Remote Frames</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.4 States / Modes</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.4.1 Start Mode (Normal Running Mode)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.4.2 Stop Mode</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.4.3 Sleep Mode</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.4.4 Bus Off</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#15">4.5 Re-Initialization</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#16">4.6 CAN Interrupt Locking</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#16">4.7 Main Functions</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#16">4.8 Error Handling</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#16">4.8.1 Development Error Reporting</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#17">4.8.1.1 Parameter Checking</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">4.8.1.2 Overrun/Overwrite Notification</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">4.8.2 Production Code Error Reporting</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#18">4.8.2.1 Hardware Loop Check / Timeout Monitoring</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#19">4.8.3 CAN RAM Check</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#20">4.8.4 Hardware Specific</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">5. Integration</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">5.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">5.1.1 Static Files</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#21">5.1.2 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#22">5.2 Include Structure</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#22">5.3 Critical Sections</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#24">5.4 Compiler Abstraction and Memory Mapping</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#25">5.5 Hardware Specific Hints</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#25">1.1.1 Initialisation of the VIM-register</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#25">1.1.2 Hardware specific topics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">6. API Description</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">6.1 Interrupt Service Routines provided by CAN</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">6.1.1 OSEK (OS)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#26">6.1.2 AutoSar (OS)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#27">6.1.3 None (OS)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#27">6.1.4 Type of Interrupt Function</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#27">6.1.5 CanIsr_&lt;CH&gt;</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#28">6.2 Services provided by CAN</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#28">6.2.1 Can_GetVersionInfo</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#28">6.2.2 Can_Init</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#29">6.2.3 Can_InitController</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#29">6.2.4 Can_SetControllerMode</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#30">6.2.5 Can_Write</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#30">6.2.6 Can_DisableControllerInterrupts</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#31">6.2.7 Can_EnableControllerInterrupts</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#31">6.2.8 Can_MainFunction_Write</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#31">6.2.9 Can_MainFunction_Read</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#32">6.2.10 Can_MainFunction_BusOff</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#32">6.2.11 Can_MainFunction_Wakeup</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#33">6.2.12 Can_MainFunction_Mode (MICROSAR4x only)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#33">6.2.13 Can_ChangeBaudrate (MICROSAR403 only)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#33">6.2.14 Can_CheckBaudrate (MICROSAR403 only)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#34">6.2.15 Can_InitMemory (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#34">6.2.16 Can_InitStruct (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#35">6.2.17 Can_Cbk_CheckWakeup, Can_CheckWakeup</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#35">6.2.18 ApplCanTimerStart (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#35">6.2.19 ApplCanTimerLoop (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#36">6.2.20 ApplCanTimerEnd (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#36">6.2.21 Appl_GenericPrecopy (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#37">6.2.22 Appl_GenericConfirmation (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#37">6.2.23 Appl_GenericPreTransmit (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#38">6.2.24 Can_GetStatus (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#39">6.2.25 ApplCanInterruptDisable/Restore (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#39">6.2.26 Appl_CanOverrun / ApplCanFullCanOverrun (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#39">6.2.27 Appl_CanCorruptMailbox (None AUTOSAR API)</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#40">6.2.28 Appl_CanRamCheckFailed (None AUTOSAR API)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#40">6.3 Services used by CAN</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#42">7. Configuration</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#42">7.1 Pre-Compile Parameters</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#43">7.2 Link-Time Parameters</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#43">7.3 Post-Build Parameters</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">7.4 Configuration with GENy</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#44">7.4.1 Platform Settings</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#45">7.4.2 Component Settings</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#50">7.4.3 Controller (Channel) Settings</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#52">7.4.4 Init Structure Settings</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#53">7.4.4.1 Setup the Filter by pressing the “Acceptance Filter Configuration” Button.</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">7.4.4.2 Setup the Baud rate by pressing the “Bus timing Configuration” Button</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#54">7.5 Configuration with da DaVinci Configurator</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#55">8. AUTOSAR Standard Compliance</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#55">8.1 Limitations / Restrictions</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#55">8.2 Vector Extensions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">9. Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">9.1 Glossary</a></li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#56">9.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_DrvCanAsr_Tms470_Dcans.html#57">10. Contact</a></li>
</ul>
<hr/>
</body>
</html>
