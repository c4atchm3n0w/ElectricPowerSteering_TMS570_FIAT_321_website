---
title: TechnicalReference_Asr_EcuMs
linkTitle: TechnicalReference_Asr_EcuMs
weight: 63
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>MICROSAR ECUM&#160;</b><br/>
<b>&#160;</b><br/>
Technical Reference&#160;<br/>&#160;<br/>&#160;<br/>Version 2.07.02&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Christian Marchl, Bethina Mausz&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-2_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>1&#160;&#160;Document Information&#160;</b><br/>
<b>1.1&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Christian Marchl&#160;<br/>
2006-10-12&#160;<br/>
0.9&#160;<br/>
Initial setup&#160;<br/>
Christian Marchl&#160;<br/>
2006-12-12&#160;<br/>
1.0&#160;<br/>
Rework of review findings,&#160;<br/>first release&#160;<br/>
Christian Marchl&#160;<br/>
2007-07-30&#160;<br/>
1.1&#160;<br/>
Update chapter for&#160;AUTOSAR&#160;<br/>2.1 release&#160;<br/>
Christian Marchl&#160;<br/>
2007-09-26&#160;<br/>
1.2&#160;<br/>
Description&#160;of EcuM_Init()&#160;<br/>function corrected&#160;<br/>
Christian Marchl&#160;<br/>
2008-04-03&#160;<br/>
1.03.00&#160;<br/>
Added&#160;AUTOSAR 3 changes.&#160;<br/>
Christian Marchl&#160;<br/>
2008-05-07&#160;<br/>
1.04.00&#160;<br/>
File renamed according&#160;to&#160;<br/>new standard name.&#160;<br/>
Christian Marchl, Heike&#160;Bischof&#160;<br/>
2008-05-07&#160;<br/>
2.00.00&#160;<br/>
Conversion to MICROSAR&#160;<br/>Technical Reference.&#160;<br/>
Christian Marchl&#160;<br/>
2008-07-23&#160;<br/>
2.00.01&#160;<br/>
ESCAN00028261:&#160;Added&#160;TTII&#160;<br/>in abbreviation table.&#160;<br/>
Christian Marchl&#160;<br/>
2008-10-22&#160;<br/>
2.00.02&#160;<br/>
Added description for&#160;<br/>PreCompile implementation&#160;<br/>variant.&#160;<br/>
Christian Marchl&#160;<br/>
2008-12-08&#160;<br/>
2.01.00&#160;<br/>
Added description for&#160;<br/>currentMode port, &#160;<br/>
Solved ESCAN00031271, &#160;<br/>
Added description new&#160;callout&#160;<br/>function for&#160;selection&#160;the boot&#160;<br/>target.&#160;<br/>
Christian Marchl&#160;<br/>
2009-03-20&#160;<br/>
2.02.00&#160;<br/>
ESCAN00032687:&#160;Added&#160;<br/>chapter for&#160;BSW initialization&#160;<br/>example. ESCAN00032038:&#160;<br/>Added chapter how to handle&#160;<br/>wakeup events after&#160;<br/>ShutdownOS()&#160;<br/>
Added Chapters 4.7, 4.8,&#160;4.9,&#160;<br/>4.10&#160;<br/>
Christian Marchl&#160;<br/>
2009-05-19&#160;<br/>
2.03.00&#160;<br/>
ESCAN00034455: Update&#160;<br/>Figure 2-1&#160;AUTOSAR&#160;<br/>architecture,&#160;<br/>
ESCAN00034997: Document&#160;<br/>Restriction and deviations for&#160;<br/>multiple configuration ECUs,&#160;<br/>Ch 4.11.&#160;<br/>
Christian Marchl&#160;<br/>
2009-07-20&#160;<br/>
2.04.00&#160;<br/>
ESCAN00035749:&#160;Add&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
2&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-3_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
restriction&#160;for usage of&#160;<br/>InitItems regarding modules&#160;<br/>without standard&#160;AUTOSAR&#160;<br/>naming (Ch&#160;4.8.1)&#160;<br/>
ESCAN00036018: Add&#160;<br/>chapter configuration variant.&#160;<br/>(Ch 6.1)&#160;<br/>
ESCAN00036019: Add&#160;<br/>changed SWC generation&#160;<br/>behavior (Ch 5.8)&#160;<br/>
ESCAN00036020: Add&#160;<br/>description&#160;for&#160;<br/>UserBlockCode generation&#160;<br/>(Ch 4.12)&#160;<br/>
Christian Marchl&#160;<br/>
2009-09-10&#160;<br/>
2.04.01&#160;<br/>
ESCAN00037245: corrected&#160;<br/>description&#160;of&#160;<br/>Compiler/Memory Abstraction&#160;<br/>in Ch 4.3. &#160;<br/>
Christian Marchl&#160;<br/>
2009-11-23&#160;<br/>
2.04.02&#160;<br/>
ESCAN00039291:&#160;Added Ch&#160;<br/>7.3.6&#160;<br/>
Christian Marchl&#160;<br/>
2010-04-13&#160;<br/>
2.04.03&#160;<br/>
ESCAN00037828: Corrected&#160;<br/>execution sequence&#160;<br/>regarding WdgM_SetMode()&#160;<br/>(Ch&#160;<a href="TechnicalReference_Asr_EcuMs.html#34">4.6)&#160;</a><br/>
Rework of review findings:&#160;<br/>(Ch&#160;<a href="TechnicalReference_Asr_EcuMs.html#28">3.6.3,&#160;</a><a href="TechnicalReference_Asr_EcuMs.html#112">7.2.4)&#160;</a><br/>
ESCAN00042035: updated&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#34">chapter&#160;4.6&#160;</a><br/>
ESCAN00039984: added&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#112">chapter&#160;7.2.5.&#160;</a><br/>
ESCAN00042228: extended&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#32">chapter&#160;4.4.7&#160;</a><br/>
ESCAN00042314: extended&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#72">chapter&#160;5.6.2.1,&#160;</a><a href="TechnicalReference_Asr_EcuMs.html#24">3.6.1.&#160;</a><br/>
ESCAN00042505: added&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#50">chapter&#160;4.10.4.&#160;</a><br/>
Bethina Mausz&#160;<br/>
2010-07-30&#160;<br/>
2.04.04&#160;<br/>
ESCAN00043965: Corrected&#160;<br/>ECUM_SUBSTATE_MASK&#160;<br/>description&#160;in chapter 5.2&#160;<br/>
ESCAN00044273: Inserted&#160;<br/>more description in chapter&#160;<br/>4.4.7&#160;<br/>
Bethina Mausz&#160;<br/>
2010-09-20&#160;<br/>
2.04.05&#160;<br/>
ESCAN00045520: inserted&#160;<br/>Mcu_PerformReset call into&#160;<br/>chapter 4.6&#160;<br/>
Bethina Mausz&#160;<br/>
2010-10-15&#160;<br/>
2.05.00&#160;<br/>
ESCAN00045755: added&#160;<br/>Nvm_GetErrorStatus call into&#160;<br/>NvM_ReadAll loop chapter&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
3&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-4_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
4.8.2&#160;<br/>
ESCAN00042662: added&#160;<br/>information about CAT1&#160;ISRs&#160;<br/>in chapter 4.7&#160;<br/>
ESCAN00046048 adapted&#160;<br/>the description to new Sleep&#160;<br/>Mode ISR handling in&#160;chapter&#160;<br/>4.7&#160;<br/>
ESCAN00046058 modified&#160;<br/>the description for&#160;<br/>Mcu_SetMode in chapter&#160;<br/>4.10.4&#160;<br/>
Bethina Mausz&#160;<br/>
2010-11-09&#160;<br/>
2.05.00&#160;<br/>
Update after review&#160;<br/>
Bethina Mausz&#160;<br/>
2011-01-24&#160;<br/>
2.07.00&#160;<br/>
ESCAN00046327 more&#160;<br/>description&#160;about&#160;<br/>EcuM_KillAllRUNRequests&#160;<br/>added&#160;<br/>
ESCAN00045114 more&#160;<br/>description&#160;about&#160;<br/>NvM_CancelWriteAll usage&#160;<br/>added&#160;<br/>
ESCAN00046158 more&#160;<br/>description&#160;about&#160;<br/>Rte_Feedback usage added&#160;<br/>
Figure 2-2 update&#160;<br/>
Added the description for new&#160;<br/>configuration parameters:&#160;<br/>“RTE Acknowledgment&#160;<br/>Mechanism” and&#160;<br/>“NvM_CancelWriteAll Timout”<br/>
Bethina Mausz&#160;<br/>
2011-02-09&#160;<br/>
2.07.01&#160;<br/>
Architecture&#160;Overview&#160;<br/>updated, issues from last&#160;<br/>review fixed&#160;and &#160;<br/>
ESCAN00048281&#160;<br/>
Bethina Mausz&#160;<br/>
2011-06-17&#160;<br/>
2.07.02&#160;<br/>
ESCAN00051734&#160;<br/>modifications in chapter&#160;4.7&#160;<br/>
Table 1-1&#160;&#160;&#160;History&#160;of the&#160;document&#160;<br/>
<b>1.2&#160;</b><br/>
<b>Reference Documents&#160;</b><br/>
<b>No.&#160;</b><br/>
<b>Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1] &#160;&#160;AUTOSAR_SWS_ECU_StateManager.pdf&#160;<br/>
V1.2.0&#160;<br/>
[2] &#160;&#160;AUTOSAR_SWS_DET.pdf&#160;<br/>
V2.2.0&#160;<br/>
[3] &#160;&#160;AUTOSAR_SWS_DEM.pdf&#160;<br/>
V2.2.1&#160;<br/>
[4] &#160;&#160;AUTOSAR_BasicSoftwareModules.pdf&#160;<br/>
V1.2.0&#160;<br/>
Table 1-2&#160;&#160;&#160;Reference documents&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
4&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-5_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-5_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Please note&#160;<br/></b>We have configured the&#160;programs in accordance&#160;with your specifications in the&#160;<br/>
&#160;&#160;questionnaire. Whereas&#160;the programs do support&#160;other configurations than the one&#160;<br/>
specified&#160;in&#160;your questionnaire, Vector’s&#160;release&#160;of the programs delivered to your&#160;<br/>company is&#160;expressly restricted to the&#160;configuration you have&#160;specified in&#160;the&#160;<br/>questionnaire.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
5&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-6_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_Asr_EcuMs.html#2"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#2"><b>Document Information....................................................................................................&#160;2</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#2">1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#2">History...............................................................................................................&#160;2</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">Reference Documents&#160;......................................................................................&#160;4</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#15"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#15"><b>Introduction&#160;...................................................................................................................&#160;15</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#16">2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#16">Architecture&#160;Overview.....................................................................................&#160;16</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#18"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#18"><b>Functional Description&#160;.................................................................................................&#160;18</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#18">3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#18">Features..........................................................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#19">3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#19">Initialization&#160;.....................................................................................................&#160;19</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#19">3.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#19">Startup into wakeup validation state&#160;...............................................................&#160;19</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#20">3.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#20">States&#160;..............................................................................................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#21">3.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#21">Main Functions&#160;...............................................................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#21">3.5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#21">Run Request Protocol.....................................................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#22">3.5.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#22">Time&#160;Triggered Increased Inoperation Protocol..............................................&#160;22</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#22">3.5.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#22">Wakeup Validation Protocol&#160;............................................................................&#160;22</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#24">3.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#24">Error Handling.................................................................................................&#160;24</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#24">3.6.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#24">Development Error Reporting&#160;.........................................................................&#160;24</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#26">3.6.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#26">Parameter Checking&#160;.......................................................................................&#160;26</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#28">3.6.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#28">Production Code&#160;Error&#160;Reporting&#160;...................................................................&#160;28</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#28">3.6.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#28">Vector specific error reporting&#160;.........................................................................&#160;28</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#29"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#29"><b>Integration&#160;....................................................................................................................</b></a><b>.&#160;<a href="TechnicalReference_Asr_EcuMs.html#29">29</a></b>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Scope of Delivery............................................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">4.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Static Files&#160;......................................................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">4.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Dynamic Files&#160;.................................................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#30">4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#30">Include Structure.............................................................................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#30">4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#30">Compiler&#160;Abstraction and Memory&#160;Mapping&#160;...................................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">4.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">Dependencies on SW modules&#160;......................................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">4.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">AUTOSAR OS&#160;................................................................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">4.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">MCU................................................................................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">4.4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">DEM&#160;................................................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">4.4.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">DET.................................................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">4.4.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">WDGM&#160;............................................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">4.4.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">COMM&#160;............................................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">4.4.7&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#32">NVM&#160;................................................................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#33">4.4.8&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#33">RTE.................................................................................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#33">4.4.9&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#33">SCHM&#160;.............................................................................................................&#160;33</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
6&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-7_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#33">4.4.10&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#33">Other BSW&#160;Modules&#160;.......................................................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#34">4.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#34">Successive&#160;Adding of Modules&#160;.......................................................................&#160;34</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#34">4.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#34">Callout execution sequences&#160;..........................................................................&#160;34</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#40">4.7&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#40">Critical code&#160;sections&#160;......................................................................................&#160;40</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#40">4.7.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#40">Wakeup Interrupt Source Handling –&#160;General Description&#160;.............................&#160;40</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#41">4.7.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#41">Wakeup Interrupt Source Handling –&#160;Cautions and further Information&#160;.........&#160;41</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#41">4.8&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#41">AUTOSAR stack&#160;initialization..........................................................................&#160;41</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#41">4.8.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#41">Configuration set selection&#160;.............................................................................&#160;41</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#43">4.8.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#43">Initialization order............................................................................................&#160;43</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#44">4.9&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#44">Handling of&#160;wakeup events after ShutdownOS()&#160;............................................&#160;44</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#44">4.10&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#44">Wakeup event handling&#160;and Wakeup Validation.............................................&#160;44</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#45">4.10.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#45">Wakeup after a physical&#160;sleep mode&#160;..............................................................&#160;45</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#45">4.10.1.1&#160;&#160;Use case description&#160;......................................................................................&#160;45</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#45">4.10.1.2&#160;&#160;Execution flow.................................................................................................&#160;45</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#46">4.10.1.3&#160;&#160;Callout implementation examples&#160;...................................................................&#160;46</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">Handling of&#160;wakeup events while ECUM is in RUN state&#160;...............................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2.1&#160;&#160;Use case description&#160;......................................................................................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2.2&#160;&#160;Execution flow.................................................................................................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2.3&#160;&#160;Callout implementation examples&#160;...................................................................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">Wakeup validation of communication channels (ECUM in RUN state)...........&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.3.1&#160;&#160;Use case description&#160;......................................................................................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#47">4.10.3.2&#160;&#160;Execution flow.................................................................................................&#160;47</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#49">4.10.3.3&#160;&#160;Callout implementation examples&#160;...................................................................&#160;49</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#50">4.10.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#50">Notes to Mcu_SetMode()&#160;................................................................................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#50">4.11&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#50">Multiple Identity ECUs&#160;....................................................................................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#50">4.11.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#50">Restrictions&#160;when implementation variant PreCompile is used&#160;......................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#51">4.11.1.1&#160;&#160;Initialization&#160;.....................................................................................................&#160;51</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#51">4.11.1.2&#160;&#160;EcuM configuration&#160;.........................................................................................&#160;51</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#51">4.12&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#51">Generated Template&#160;Files...............................................................................&#160;51</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#53"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#53"><b>API Description&#160;.............................................................................................................&#160;53</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#53">5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#53">Interfaces Overview&#160;........................................................................................&#160;53</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#53">5.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#53">Type Definitions&#160;..............................................................................................&#160;53</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#55">5.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#55">Services provided by ECUM&#160;...........................................................................&#160;55</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#55">5.3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#55">EcuM_Init&#160;........................................................................................................&#160;55</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#56">5.3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#56">EcuM_Shutdown.............................................................................................&#160;56</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">5.3.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">EcuM_GetVersionInfo&#160;.....................................................................................&#160;57</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">5.3.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">EcuM_RequestRUN&#160;.......................................................................................&#160;57</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">5.3.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">EcuM_ReleaseRUN........................................................................................&#160;58</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">5.3.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">EcuM_ComM_RequestRUN&#160;...........................................................................&#160;58</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">5.3.7&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">EcuM_ComM_ReleaseRUN&#160;...........................................................................&#160;59</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
7&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-8_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">5.3.8&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">EcuM_ComM_HasRequestedRUN&#160;................................................................&#160;59</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">5.3.9&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">EcuM_RequestPOST_RUN............................................................................&#160;60</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">5.3.10&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">EcuM_ReleasePOST_RUN&#160;............................................................................&#160;60</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#61">5.3.11&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#61">EcuM_KillAllRUNRequests&#160;.............................................................................&#160;61</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#62">5.3.12&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#62">EcuM_SelectShutdownTarget.........................................................................&#160;62</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#62">5.3.13&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#62">EcuM_GetState...............................................................................................&#160;62</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">5.3.14&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">EcuM_GetShutdownTarget&#160;.............................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">5.3.15&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">EcuM_GetLastShutdownTarget&#160;......................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#64">5.3.16&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#64">EcuM_GetPendingWakeupEvents..................................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">5.3.17&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">EcuM_ClearWakeupEvent..............................................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">5.3.18&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">EcuM_GetValidatedWakeupEvents&#160;................................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">5.3.19&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">EcuM_GetExpiredWakeupEvents...................................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#66">5.3.20&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#66">EcuM_GetStatusOfWakeupSource.................................................................&#160;66</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#67">5.3.21&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#67">EcuM_SelectApplicationMode&#160;........................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#67">5.3.22&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#67">EcuM_GetApplicationMode&#160;............................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">5.3.23&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">EcuM_SelectBootTarget&#160;.................................................................................&#160;68</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">5.3.24&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">EcuM_GetBootTarget&#160;.....................................................................................&#160;68</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">5.3.25&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">EcuM_MainFunction&#160;.......................................................................................&#160;69</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">5.3.26&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">EcuM_StartupTwo...........................................................................................&#160;69</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">5.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">Services used by ECUM&#160;.................................................................................&#160;70</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">5.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">Callback Functions&#160;.........................................................................................&#160;70</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">5.5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">EcuM_CB_NfyNvMJobEnd.............................................................................&#160;70</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">5.5.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">EcuM_SetWakeupEvent&#160;.................................................................................&#160;71</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">5.5.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">EcuM_ValidateWakeupEvent..........................................................................&#160;71</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">5.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">Configurable Interfaces...................................................................................&#160;72</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">5.6.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">Notifications&#160;....................................................................................................&#160;72</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">5.6.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">Callout Functions&#160;............................................................................................&#160;72</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">5.6.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">EcuM_AL_DriverInitZero&#160;................................................................................&#160;72</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#73">5.6.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#73">EcuM_AL_DriverInitOne&#160;.................................................................................&#160;73</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#74">5.6.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#74">EcuM_AL_DriverInitTwo&#160;.................................................................................&#160;74</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#75">5.6.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#75">EcuM_AL_DriverInitThree&#160;..............................................................................&#160;75</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#76">5.6.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#76">EcuM_DeterminePbConfiguration&#160;..................................................................&#160;76</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#76">5.6.2.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#76">EcuM_AL_SwitchOff&#160;.......................................................................................&#160;76</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">5.6.2.7&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">EcuM_AL_DriverRestart&#160;.................................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">5.6.2.8&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">EcuM_GenerateRamHash..............................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">5.6.2.9&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">EcuM_CheckRamHash&#160;..................................................................................&#160;78</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">5.6.2.10&#160;&#160;EcuM_OnRTEStartup&#160;.....................................................................................&#160;78</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#79">5.6.2.11&#160;&#160;EcuM_OnEnterRun.........................................................................................&#160;79</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#79">5.6.2.12&#160;&#160;EcuM_OnExitRun&#160;...........................................................................................&#160;79</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#80">5.6.2.13&#160;&#160;EcuM_OnExitPostRun&#160;....................................................................................&#160;80</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#80">5.6.2.14&#160;&#160;EcuM_OnPrepShutdown&#160;................................................................................&#160;80</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
8&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-9_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#81">5.6.2.15&#160;&#160;EcuM_OnGoSleep..........................................................................................&#160;81</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#81">5.6.2.16&#160;&#160;EcuM_OnGoOffOne........................................................................................&#160;81</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#82">5.6.2.17&#160;&#160;EcuM_OnGoOffTwo........................................................................................&#160;82</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#82">5.6.2.18&#160;&#160;EcuM_OnWakeupReaction.............................................................................&#160;82</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#83">5.6.2.19&#160;&#160;EcuM_EnableWakeupSources&#160;.......................................................................&#160;83</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#84">5.6.2.20&#160;&#160;EcuM_DisableWakeupSources&#160;......................................................................&#160;84</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#85">5.6.2.21&#160;&#160;EcuM_StartWakeupSources&#160;...........................................................................&#160;85</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#86">5.6.2.22&#160;&#160;EcuM_StopWakeupSources&#160;...........................................................................&#160;86</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#86">5.6.2.23&#160;&#160;EcuM_CheckWakeup&#160;.....................................................................................&#160;86</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#87">5.6.2.24&#160;&#160;EcuM_CheckValidation&#160;...................................................................................&#160;87</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#87">5.6.2.25&#160;&#160;EcuM_GeneratorCompatibilityError&#160;................................................................&#160;87</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#88">5.6.2.26&#160;&#160;EcuM_Appl_SelectBootTarget&#160;........................................................................&#160;88</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#89">5.6.2.27&#160;&#160;EcuM_Appl_GetBootTarget&#160;............................................................................&#160;89</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#89">5.6.2.28&#160;&#160;EcuM_McuSetMode&#160;.......................................................................................&#160;89</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">5.6.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">Mode switch notification&#160;functions&#160;..................................................................&#160;90</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">5.6.3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">Appl_EcuM_currentMode_currentMode&#160;.........................................................&#160;90</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">5.6.3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">Rte_Switch_currentMode_currentMode&#160;.........................................................&#160;91</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">5.7&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">Service Ports&#160;..................................................................................................&#160;91</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">5.7.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">Client Server&#160;Interface&#160;....................................................................................&#160;91</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">5.7.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">Provide Ports on ECUM&#160;side&#160;..........................................................................&#160;91</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.1&#160;&#160;StateRequest Port...........................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.2&#160;&#160;ShutdownTarget Port&#160;......................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.3&#160;&#160;BootTarget Port...............................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.4&#160;&#160;ApplicationMode Port......................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">5.7.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">Require Ports on ECUM side..........................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">5.7.1.2.1&#160;&#160;currentMode Port&#160;............................................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">5.7.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">Sender Receiver Interface&#160;..............................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">5.8&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">Software Component&#160;Template.......................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">5.8.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">Generation by EAD&#160;.........................................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#94">5.8.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#94">Generation by DaVinci Configurator&#160;...............................................................&#160;94</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#95">5.8.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#95">Import into DaVinci Developer&#160;........................................................................&#160;95</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#96"><b>Configuration&#160;................................................................................................................&#160;96</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">6.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">Configuration Variants.....................................................................................&#160;96</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">6.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">Configuration of ECUM&#160;with DaVinci Configurator/EAD&#160;.................................&#160;96</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">6.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">Start configuration of the&#160;ECUM&#160;.....................................................................&#160;96</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">6.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">ECUM Configuration Perspective&#160;...................................................................&#160;96</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">6.2.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">Node &#34;Startup&#34;&#160;................................................................................................&#160;96</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#96">6.2.2.1.1&#160;&#160;Node &#34;Used Module Configuration&#34;&#160;................................................................&#160;96</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">6.2.2.1.2&#160;&#160;Node &#34;Mcu&#34;&#160;.....................................................................................................&#160;97</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">6.2.2.1.3&#160;&#160;Node &#34;WdgM&#34;&#160;.................................................................................................&#160;97</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
9&#160;/&#160;&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-10_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">6.2.2.1.4&#160;&#160;Node &#34;Nvm&#34;&#160;....................................................................................................&#160;97</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">6.2.2.1.5&#160;&#160;Node &#34;Dem&#34;&#160;....................................................................................................&#160;98</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">6.2.2.1.6&#160;&#160;Node &#34;Det&#34;&#160;......................................................................................................&#160;98</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">6.2.2.1.7&#160;&#160;Node &#34;ComM&#34;&#160;.................................................................................................&#160;98</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">6.2.2.1.8&#160;&#160;Node &#34;Rte&#34;&#160;......................................................................................................&#160;99</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">6.2.2.1.9&#160;&#160;Node &#34;Os&#34;&#160;.......................................................................................................&#160;99</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">6.2.2.1.10&#160;Node &#34;SchM&#34;&#160;................................................................................................&#160;100</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">6.2.2.1.11&#160;Node “Init Configuration&#160;Sets”.......................................................................&#160;100</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">6.2.2.1.12&#160;Nodes &#34;EcuMDriverInitListOne&#34;, &#34;EcuMDriverInitListTwo&#34;,&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">“EcuMDriverInitListThree”, &#34;EcuMDriverRestartList&#34;&#160;....................................&#160;100</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#101">6.2.2.1.13&#160;Node Additional&#160;Includes&#160;..............................................................................&#160;101</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Node &#34;EcuM User&#34;&#160;........................................................................................&#160;102</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Node &#34;Time&#160;settings&#34;&#160;....................................................................................&#160;102</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Node &#34;Wakeup&#34;.............................................................................................&#160;102</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#103">6.2.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#103">WdgM Modes................................................................................................&#160;103</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">6.2.2.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">Node “Sleep Modes”&#160;.....................................................................................&#160;104</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">6.2.2.7&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">Child Nodes of “Sleep Modes”&#160;......................................................................&#160;104</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#105">6.2.2.8&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#105">Node “TTII”&#160;...................................................................................................&#160;105</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#105">6.2.2.9&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#105">Node “Shutdown”&#160;..........................................................................................&#160;105</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#106">6.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#106">General Settings Perspective&#160;.......................................................................&#160;106</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">6.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">Module API&#160;Perspective................................................................................&#160;109</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">6.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">Module Callouts Perspective&#160;........................................................................&#160;109</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111"><b>AUTOSAR Standard&#160;Compliance................................................................................111</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Deviations&#160;......................................................................................................111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Service Port Generation&#160;................................................................................111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Supervised Entity in WDGM&#160;..........................................................................111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Parameter “EcuMWdgMStartupModeRef” not supported&#160;..............................111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Signature and name of DriverInitLists in configuration variant “post-build”....111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Enabling/Disabling wakeup sources&#160;..............................................................111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">7.1.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#111">Execution flow in shutdown sequence&#160;...........................................................111</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">7.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">Additions/ Extensions&#160;....................................................................................112</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">7.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">Parameter Checking&#160;......................................................................................112</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">7.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">State Request service port.............................................................................112</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">7.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">Wakeup validation in each state&#160;....................................................................112</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">7.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">Callout EcuM_GeneratorCompatibilityError()&#160;................................................112</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">7.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#112">Buffering of&#160;wakeup events until COMM is initialized&#160;....................................112</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">Limitations......................................................................................................113</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">Link-time Configuration&#160;not supported&#160;...........................................................113</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">Configuration Check via Consistency Hash not implemented&#160;.......................113</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3.3&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">Not implemented Callouts..............................................................................113</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
10&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-11_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3.4&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">References&#160;in ECUC File...............................................................................113</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3.5&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">Not supported configuration parameters........................................................113</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">7.3.6&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#113">Polling of Wakeup Sources Is Not Supported................................................113</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#114"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#114"><b>Glossary&#160;and&#160;Abbreviations&#160;......................................................................................&#160;114</b></a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#114">8.1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#114">Glossary.........................................................................................................114</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#115">8.2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#115">Abbreviations&#160;.................................................................................................115</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#117"><b>9</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#117"><b>Contact........................................................................................................................</b></a><b>.&#160;<a href="TechnicalReference_Asr_EcuMs.html#117">117</a></b>&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
11&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-12_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Illustrations&#160;</b><br/>
<a href="TechnicalReference_Asr_EcuMs.html#16">Figure 2-1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#16">AUTOSAR architecture...................................................................................&#160;16</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#17">Figure 2-2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#17">Interfaces to&#160;adjacent modules of the EcuM...................................................&#160;17</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#21">Figure 3-1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#21">State diagram..................................................................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#30">Figure 4-1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#30">Include structure&#160;.............................................................................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#94">Figure 5-1&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#94">Generate an ECUM software component template&#160;........................................&#160;94</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#95">Figure 5-2&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#95">Import a new software component into DaVinci Developer&#160;............................&#160;95</a>&#160;<br/>
<b>&#160;</b><br/>
<b>Tables&#160;</b><br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">Table 1-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">History of the document&#160;....................................................................................&#160;4</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">Table 1-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">Reference documents.......................................................................................&#160;4</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#18">Table 3-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#18">Supported SWS features&#160;................................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#19">Table 3-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#19">Not supported SWS features&#160;..........................................................................&#160;19</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#20">Table 3-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#20">States&#160;..............................................................................................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#25">Table 3-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#25">Mapping of service IDs to services&#160;.................................................................&#160;25</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#26">Table 3-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#26">Errors reported to DET&#160;...................................................................................&#160;26</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#27">Table 3-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#27">Development Error detection:&#160;Assignment of checks to&#160;services&#160;...................&#160;27</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#28">Table 3-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#28">Errors reported to DEM...................................................................................&#160;28</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Table 4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Static files........................................................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Table 4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#29">Generated files&#160;...............................................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">Table 4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#31">Compiler abstraction and memory&#160;mapping&#160;...................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#44">Table 4-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#44">initialization order............................................................................................&#160;44</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#55">Table 5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#55">Type definitions...............................................................................................&#160;55</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#56">Table 5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#56">EcuM_Init........................................................................................................&#160;56</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#56">Table 5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#56">EcuM_Shutdown.............................................................................................&#160;56</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">Table 5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">EcuM_GetVersionInfo.....................................................................................&#160;57</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">Table 5-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#57">EcuM_RequestRUN&#160;.......................................................................................&#160;57</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">Table 5-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">EcuM_ReleaseRUN........................................................................................&#160;58</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">Table 5-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#58">EcuM_ComM_RequestRUN&#160;...........................................................................&#160;58</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">Table 5-8&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">EcuM_ComM_ReleaseRUN&#160;...........................................................................&#160;59</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">Table 5-9&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#59">EcuM_ComM_HasRequestedRUN&#160;................................................................&#160;59</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">Table 5-10&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">EcuM_RequestPOST_RUN............................................................................&#160;60</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">Table 5-11&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#60">EcuM_ReleasePOST_RUN&#160;............................................................................&#160;60</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#61">Table 5-12&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#61">EcuM_KillAllRUNRequests&#160;.............................................................................&#160;61</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#62">Table 5-13&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#62">EcuM_SelectShutdownTarget.........................................................................&#160;62</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">Table 5-14&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">EcuM_GetState...............................................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">Table 5-15&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#63">EcuM_GetShutdownTarget&#160;.............................................................................&#160;63</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#64">Table 5-16&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#64">EcuM_GetLastShutdownTarget&#160;......................................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#64">Table 5-17&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#64">EcuM_GetPendingWakeupEvents..................................................................&#160;64</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">Table 5-18&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">EcuM_GetPendingWakeupEvents..................................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">Table 5-19&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#65">EcuM_GetValidatedWakeupEvents&#160;................................................................&#160;65</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#66">Table 5-20&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#66">EcuM_GetExpiredWakeupEvents...................................................................&#160;66</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#66">Table 5-21&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#66">EcuM_GetStatusOfWakeupSource.................................................................&#160;66</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#67">Table 5-22&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#67">EcuM_SelectApplicationMode&#160;........................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">Table 5-23&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">EcuM_GetApplicationMode&#160;............................................................................&#160;68</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">Table 5-24&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#68">EcuM_SelectBootTarget&#160;.................................................................................&#160;68</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">Table 5-25&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">EcuM_GetBootTarget&#160;.....................................................................................&#160;69</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">Table 5-26&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#69">EcuM_MainFunction&#160;.......................................................................................&#160;69</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">Table 5-27&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#70">EcuM_StartupTwo...........................................................................................&#160;70</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">Table 5-28&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">EcuM_CB_NfyNvMJobEnd.............................................................................&#160;71</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
12&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-13_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">Table 5-29&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#71">EcuM_SetWakeupEvent&#160;.................................................................................&#160;71</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">Table 5-30&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#72">EcuM_ValidateWakeupEvent..........................................................................&#160;72</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#74">Table 5-31&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#74">EcuM_AL_DriverInitOne&#160;.................................................................................&#160;74</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#75">Table 5-32&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#75">EcuM_AL_DriverInitTwo&#160;.................................................................................&#160;75</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#75">Table 5-33&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#75">EcuM_AL_DriverInitThree&#160;..............................................................................&#160;75</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#76">Table 5-34&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#76">EcuM_DeterminePbConfiguration&#160;..................................................................&#160;76</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">Table 5-35&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">EcuM_AL_SwitchOff&#160;.......................................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">Table 5-36&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#77">EcuM_AL_DriverRestart&#160;.................................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">Table 5-37&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">EcuM_GenerateRamHash..............................................................................&#160;78</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">Table 5-38&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#78">EcuM_CheckRamHash&#160;..................................................................................&#160;78</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#79">Table 5-39&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#79">EcuM_OnRTEStartup&#160;.....................................................................................&#160;79</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#79">Table 5-40&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#79">EcuM_OnEnterRun.........................................................................................&#160;79</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#80">Table 5-41&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#80">EcuM_OnExitRun&#160;...........................................................................................&#160;80</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#80">Table 5-42&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#80">EcuM_OnExitPostRun&#160;....................................................................................&#160;80</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#81">Table 5-43&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#81">EcuM_OnPrepShutdown&#160;................................................................................&#160;81</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#81">Table 5-44&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#81">EcuM_OnGoSleep..........................................................................................&#160;81</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#82">Table 5-45&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#82">EcuM_OnGoOffOne&#160;.......................................................................................&#160;82</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#82">Table 5-46&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#82">EcuM_OnGoOffTwo........................................................................................&#160;82</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#83">Table 5-47&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#83">EcuM_OnWakeupReaction.............................................................................&#160;83</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#84">Table 5-48&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#84">EcuM_EnableWakeupSources&#160;.......................................................................&#160;84</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#85">Table 5-49&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#85">EcuM_DisableWakeupSources&#160;......................................................................&#160;85</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#85">Table 5-50&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#85">EcuM_StartWakeupSources&#160;...........................................................................&#160;85</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#86">Table 5-51&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#86">EcuM_StopWakeupSources&#160;...........................................................................&#160;86</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#86">Table 5-52&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#86">EcuM_CheckWakeup&#160;.....................................................................................&#160;86</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#87">Table 5-53&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#87">EcuM_CheckValidation&#160;...................................................................................&#160;87</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#88">Table 5-54&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#88">EcuM_GeneratorCompatibilityError&#160;................................................................&#160;88</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#89">Table 5-55&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#89">EcuM_Appl_SelectBootTarget&#160;........................................................................&#160;89</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#89">Table 5-56&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#89">EcuM_Appl_GetBootTarget&#160;............................................................................&#160;89</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">Table 5-57&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">EcuM_McuSetMode&#160;.......................................................................................&#160;90</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">Table 5-58&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#90">Appl_EcuM_currentMode_currentMode&#160;.........................................................&#160;90</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">Table 5-59&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#91">Rte_Switch_currentMode_currentMode&#160;.........................................................&#160;91</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">Table 5-60&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">StateRequest Port...........................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">Table 5-61&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">ShutdownTarget Port&#160;......................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">Table 5-62&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#92">BootTarget Port...............................................................................................&#160;92</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">Table 5-63&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">ApplicationMode Port......................................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">Table 5-64&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#93">currentMode Port&#160;............................................................................................&#160;93</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">Table 6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">Node &#34;Mcu&#34;&#160;.....................................................................................................&#160;97</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">Table 6-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">Node &#34;WdgM&#34;&#160;.................................................................................................&#160;97</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">Table 6-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#97">Node &#34;Nvm&#34;&#160;....................................................................................................&#160;97</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">Table 6-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">Node &#34;Dem&#34;&#160;....................................................................................................&#160;98</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">Table 6-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#98">Node &#34;Det&#34;&#160;......................................................................................................&#160;98</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">Table 6-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">Node &#34;ComM&#34;&#160;.................................................................................................&#160;99</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">Table 6-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">Node &#34;Rte&#34;&#160;......................................................................................................&#160;99</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">Table 6-8&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#99">Node &#34;Os&#34;&#160;.......................................................................................................&#160;99</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">Table 6-9&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">Node &#34;SchM&#34;&#160;................................................................................................&#160;100</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">Table 6-10&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">&#160;Node “Init Configuration Sets”&#160;.....................................................................&#160;100</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#101">Table 6-11&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#101">Nodes “EcuMDriverInitListOne”, “EcuMDriverInitListTwo”,&#160;<br/>“EcuMDriverInitListThree”, “EcuMDriverRestartList”.....................................&#160;101</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#101">Table 6-12&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#101">Node &#34;Additional Includes&#34;&#160;...........................................................................&#160;101</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Table 6-13&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Node &#34;EcuM User&#34;&#160;........................................................................................&#160;102</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Table 6-14&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#102">Node &#34;Time&#160;settings&#34;&#160;....................................................................................&#160;102</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#103">Table 6-15&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#103">Node &#34;Wakeup Sources&#34;&#160;..............................................................................&#160;103</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">Table 6-16&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">&#160;Node “WdgM Modes”...................................................................................&#160;104</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">Table 6-17&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#104">Child Nodes of “Sleep Modes”&#160;......................................................................&#160;104</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
13&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-14_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#105">Table 6-18&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#105">Node “TTII”&#160;...................................................................................................&#160;105</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#106">Table 6-19&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#106">Node “Shutdown”&#160;..........................................................................................&#160;106</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">Table 6-20&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">General Settings&#160;...........................................................................................&#160;109</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">Table 6-21&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#109">Module API&#160;...................................................................................................&#160;109</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#110">Table 6-22&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#110">Module Callouts&#160;.............................................................................................110</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#115">Table 8-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#115">Glossary.........................................................................................................115</a>&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#116">Table 8-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Asr_EcuMs.html#116">Abbreviations&#160;.................................................................................................116</a>&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
14&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-15_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>2&#160;&#160;Introduction&#160;</b><br/>
This document describes the functionality,&#160;API and configuration&#160;of the&#160;AUTOSAR BSW&#160;<br/>module ECUM&#160;<a href="TechnicalReference_Asr_EcuMs.html#4">as specified in&#160;[1]. &#160;</a><br/>
&#160;<br/>
<b>Supported AUTOSAR&#160;Release:&#160;</b><br/>
3&#160;<br/>
<b>Supported Configuration Variants:&#160;</b><br/>
post-build, pre-compile&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Vendor ID:&#160;</b><br/>
ECUM_VENDOR_ID&#160;30&#160;<br/>
decimal&#160;<br/>
(= Vector-Informatik,&#160;<br/>according to&#160;HIS)&#160;<br/>
<b>Module ID:&#160;</b><br/>
ECUM_MODULE_ID &#160;&#160;<br/>
10 decimal&#160;<br/>
(according to ref.&#160;<a href="TechnicalReference_Asr_EcuMs.html#4">[4])&#160;</a><br/>
For the precise&#160;AUTOSAR Release 3.x please&#160;see the&#160;release specific documentation.&#160;<br/>
&#160;<br/>
This document describes the functionality and&#160;API of the ECU State Manager (ECUM) as a&#160;<br/>hardware independent module.&#160;<br/>
The main tasks of the ECUM are &#160;<br/>
&#160;&#160;Initialization of all&#160;BSW (Basis Software) modules&#160;in the startup phase of the&#160;<br/>
microcontroller including OS and RTE&#160;<br/>
&#160;&#160;Preparation of the microcontroller for a sleep phase and the following wakeup&#160;<br/>
&#160;&#160;Performing an ordered shutdown of the ECU&#160;<br/>
To&#160;fulfill this tasks the ECUM offers several&#160;mechanism&#160;which will be described later in this&#160;<br/>document, e.g.: &#160;<br/>
&#160;&#160;RUN Request Protocol&#160;<br/>
&#160;&#160;Time&#160;Triggered Increased Inoperation Protocol (TTII)&#160;<br/>
&#160;&#160;Wakeup validation protocol&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
15&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-16_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-16_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-16_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-16_4.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-16_5.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>2.1&#160;&#160;Architecture Overview&#160;</b><br/>
The following figure shows where the ECUM is located in the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
Figure 2-1&#160;&#160;AUTOSAR architecture&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
16&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_1.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_2.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_3.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_4.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_5.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_6.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_7.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_8.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_9.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_10.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_11.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_12.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_13.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_14.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_15.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_16.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_17.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_18.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_19.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_20.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_21.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_22.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_23.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_24.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_25.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_26.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_27.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_28.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_29.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_30.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_31.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_32.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_33.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_34.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_35.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_36.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_37.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_38.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_39.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_40.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_41.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_42.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_43.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_44.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-17_45.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
The next figure shows the interfaces&#160;to adjacent modules of the ECUM.&#160;These interfaces&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#53">are described in chapter&#160;5. &#160;</a><br/>
<b>cmp&#160;Architecture_Ov&#160;erv&#160;iew</b><br/>
<b>SW-C&#160;/ RTE</b><br/>
EcuM_ApplicationMode<br/>
«optional»<br/>
EcuM_ShutdownTarget<br/>
«optional»<br/>
Rte_Start()<br/>
«optional»<br/>
Rte_Switch_currentMode_currentMode<br/>
«optional»<br/>
«optional»<br/>
EcuM_BootTarget<br/>
«optional»<br/>
Rte_Feedback_EcuM_currentMode_currentMode<br/>
«optional»<br/>
Rte_Stop()<br/>
«optional»<br/>
EcuM_StateRequest<br/>
EcuM_KillAllRUNRequests<br/>
«optional»<br/>
<b>ComM</b><br/>
EcuM_ComM_HasRequestedRUN<br/>
<b>EcuM</b><br/>
«optional»<br/>
«optional»<br/>
<b>SchM</b><br/>
EcuM_ComM_ReleaseRUN<br/>
SchM_Init()<br/>
«optional»<br/>
«optional»<br/>
EcuM_MainFunction()<br/>
EcuM_ComM_RequestRUN<br/>
«optional»<br/>
Interrupt&#160;locking&#160;services<br/>
«optional»<br/>
ComM_Init()<br/>
«optional»<br/>
ComM_DeInit()<br/>
«optional»<br/>
StartOS()<br/>
ComM_EcuM_RunModeIndication()<br/>
«optional»<br/>
<b>AUTOSAR OS</b><br/>
ComM_EcuM_WakeUpIndication()<br/>
ShutdownOS()<br/>
«optional»<br/>
GetResource()<br/>
«optional»<br/>
NvM_Init()<br/>
ReleaseResource()<br/>
«optional»<br/>
<b>Nv&#160;M</b><br/>
NvM_ReadAll()<br/>
NvM_WriteAll()<br/>
«optional»<br/>
Interrupt&#160;locking&#160;services<br/>
«optional»<br/>
NvM_CancelWriteAll()<br/>
«optional»<br/>
NvM_KillWriteAll()<br/>
«optional»<br/>
«optional»<br/>
Dem_PreInit()<br/>
Det_Init()<br/>
«optional»<br/>
<b>Dem</b><br/>
<b>Det</b><br/>
«optional»<br/>
Dem_Init()<br/>
Det_ReportError()<br/>
«optional»<br/>
Dem_Shutdown()<br/>
«optional»<br/>
Dem_ReportErrorStatus()<br/>
«optional»<br/>
Mcu_SetMode()<br/>
WdgM_SetMode()&#160;WdgM_Init()<br/>
Mcu_GetResetReason<br/>
EcuM_GetVersionInfo<br/>
&lt;BSW&gt;_Init()<br/>
Mcu_PerformReset()<br/>
«optional»<br/>
«optional»<br/>
«optional»<br/>
Mcu_Init()<br/>
«optional»<br/>
<b>Mcu</b><br/>
<b>other&#160;BSW&#160;</b><br/>
<b>WdgM</b><br/>
<b>Modules</b><br/>
&#160;<br/>
Figure 2-2&#160;&#160;Interfaces to adjacent modules of the EcuM&#160;<br/>
Applications do not access the services of the BSW modules directly.&#160;They use the service&#160;<br/>ports provided by&#160;the BSW modules via the RTE.&#160;The service&#160;ports provided by the ECUM&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#91">are listed in chapter&#160;5.7 and are defined in&#160;</a><a href="TechnicalReference_Asr_EcuMs.html#4">[1].&#160;</a><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
17&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-18_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>3&#160;&#160;Functional Description&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The features listed in this chapter cover the complete functionality<a href="TechnicalReference_Asr_EcuMs.html#4">&#160;specified in&#160;[1].&#160;</a><br/>
The &#34;supported&#34; and &#34;not supported&#34; features are presented&#160;in&#160;the following two tables.&#160;<br/>For further information of not suppor<a href="TechnicalReference_Asr_EcuMs.html#111">ted features also see chapter&#160;7.&#160;</a><br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">The following features described in&#160;[1] are supported:&#160;</a><br/>
<b>Feature&#160;</b><br/>
Support of Run Request Protocol.&#160;<br/>
Support of time triggered increased&#160;inoperation&#160;protocol (TTII).&#160;<br/>
Configuration of different&#160;wakeup sources.&#160;<br/>
Configuration of EcuM users.&#160;<br/>
Configuration of software component name.&#160;<br/>
Configurable startup sequence of the complete BSW stack.&#160;<br/>
Possibility to add additional initialization code into the initialization lists.&#160;<br/>
Notification&#160;of the Communication&#160;Manager every time when run state is entered.&#160;<br/>
Notification&#160;of the Communication&#160;Manager if a wakeup event occurs on communication&#160;<br/>channels.&#160;<br/>
Assignment of communication channels to wakeup sources.&#160;<br/>
Configuration of different&#160;sleep modes.&#160;<br/>
Selection of&#160;different shutdown targets.&#160;<br/>
Configurable mechanism to protect critical&#160;sections is supported (e.g. by OS functions, by&#160;<br/>SCHM, assembler statements, etc.).&#160;<br/>
Support of different kinds of parameter checks which can be&#160;switched on&#160;or off.&#160;<br/>
Generation of the SW-C description&#160;file needed for the generation of the&#160;RTE.&#160;<br/>
Additional port interface&#160;operation GetState provided.&#160;<br/>
Service Port: EcuM_StateRequest&#160;<br/>
Service Port: EcuM_CurrentMode&#160;<br/>
Service Port: EcuM_ShutdownTarget&#160;<br/>
Service Port: EcuM_BootTarget&#160;<br/>
Service Port: EcuM_ApplicationMode&#160;<br/>
Table 3-1&#160;&#160;&#160;Supported SWS&#160;features&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#4">The following features described in&#160;[1] are not supported:&#160;</a><br/>
<b>Feature&#160;</b><br/>
Callout EcuMDriverInitListZero is&#160;not in post-build structure.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
18&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-19_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-19_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Feature&#160;</b><br/>
Callout&#160;EcuM_SleepActivity()&#160;is not supported.&#160;<br/>
Callout&#160;EcuM_Errorhook()&#160;is not&#160;supported.&#160;<br/>
Consistency hash checking according to&#160;AUTOSAR specification is not&#160;supported.&#160;<br/>
Handling of&#160;ECUM as supervised entity of WDGM is not supported.&#160;<br/>
Table 3-2&#160;&#160;&#160;Not supported SWS features&#160;<br/>
<b>3.2&#160;&#160;Initialization&#160;</b><br/>
The initialization of the&#160;ECUM is&#160;split into two parts: one part&#160;is&#160;the initialization before the&#160;<br/>OS is up and running and the second part must&#160;be executed when the OS is started.&#160;<br/>
&#160;<br/>
The first part will be performed by the function&#160;EcuM_Init().&#160;This function executes the&#160;<br/>DriverInitLists “EcuMDriverInitListZero” and “EcuMDriverInitListOne” where the basic&#160;driver&#160;<br/>initialization should be performed.&#160;EcuM_Init()&#160;starts the&#160;AUTOSAR&#160;OS&#160;by calling the&#160;<br/>function&#160;StartOS().&#160;<br/>
&#160;<br/>
The second part of the initialization sequence will be executed by the ECUM&#160;API&#160;<br/>EcuM_StartupTwo().&#160;The integrator must ensure that this function is called once right&#160;<br/>after the start of the OS. Within this function&#160;the DriverInitLists “EcuMDriverInitListTwo” and&#160;<br/>“EcuMDriverInitListThree” are executed. &#160;When&#160;EcuM_StartupTwo()&#160;is left&#160;and the reset&#160;<br/>reason which caused the startup needs no&#160;validation the ECU is in&#160;RUN state.&#160;<br/>
<b>3.3&#160;&#160;Startup into wakeup validation state&#160;</b><br/>
The startup procedure of the&#160;ECUM provides the possibility to enter wakeup validation&#160;<br/>state out of the startup st<a href="TechnicalReference_Asr_EcuMs.html#20">ate (refer to chapter&#160;3.4)&#160;</a>To&#160;use this feature some background&#160;<br/>information is necessary which is described in the following chapters.&#160;<br/>
&#160;<br/>
At startup time when&#160;EcuM_Init()&#160;is executed the ECUM&#160;queries the MCU module&#160;<br/>which reset reason was responsible for that&#160;startup. These&#160;reset&#160;reasons are mapped to&#160;<br/>wakeup sources.&#160;The mapping process has to&#160;be done by the user via the parameter&#160;<br/>EcuMResetReason (<a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.4&#160;&#160;Node &#34;Wakeup&#34;, GUI element “Mcu reset reason”). With this</a>&#160;<br/>mapping the ECUM has usually a valid reset reason or wakeup source respectively and&#160;<br/>therefore the transitions&#160;will be from STARTUP&#160;to RUN.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>If a MCU reset reason is mapped to one of the preconfigured&#160;wakeup sources (refer&#160;to&#160;<br/>
&#160;&#160;<a href="TechnicalReference_Asr_EcuMs.html#53">5.2) the ECUM will transit always to RUN st</a>ate if the user code, implemented in one&#160;of&#160;<br/>
the DriverInitLists, does&#160;not change this behavior.&#160;<br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
19&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-20_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
This behavior is probably not what is expected for ECU layouts which&#160;use a CAN&#160;<br/>transceiver with integrated power control and where wakeup events on the according bus&#160;<br/>must be validated. In that cases the user must change the default behavior with use of the&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#65">API functions&#160;EcuM_GetValidatedWakeupEvents()</a>,&#160;&#160;<a href="TechnicalReference_Asr_EcuMs.html#65">EcuM_ClearWakeupEvent()</a>,&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#64">EcuM_GetPendingWakeupEvents()</a>, &#160;etc. by clearing the wakeup source from the reset&#160;<br/>reason mapping if a pending wakeup event is on the hand. &#160;<br/>
<b>3.4&#160;&#160;States&#160;</b><br/>
<b>Module State&#160;</b><br/>
<b>Activities&#160;</b><br/>
<b>Point in Time&#160;</b><br/>
ECUM_STATE_STARTUP_ONE&#160;<br/>
Initialization of&#160;driver modules&#160;<br/>
Executed by&#160;EcuM_Init().&#160;<br/>
which need no&#160;OS. Drivers&#160;<br/>could be initialized by&#160;<br/>configuration (DriverInitOne)&#160;<br/>
ECUM_STATE_STARTUP_TWO&#160;<br/>
Initialization of&#160;driver or BSW&#160;<br/>
Executed by&#160;EcuM_StartupTwo().&#160;<br/>
modules&#160;which need a running&#160;<br/>OS&#160;<br/>
ECUM_STATE_APP_RUN&#160;<br/>
Check&#160;for&#160;RUN&#160;requests, ECUM&#160;&#160;Normal operation of the ECU.&#160;<br/>performs a&#160;self run request&#160;<br/>when entering this state&#160;<br/>
ECUM_STATE_APP_POST_ RUN&#160;&#160;Check for POST&#160;RUN requests&#160;<br/>
After RUN State, allows the SW-C to&#160;<br/>do some&#160;preparation for the following&#160;<br/>sleep mode.&#160;<br/>
ECUM_STATE_PREP_&#160;<br/>
Shutdown DEM.&#160;<br/>
All POST&#160;RUN request are&#160;released.&#160;<br/>
SHUTDOWN&#160;<br/>
ECUM_STATE_GO_OFF_ONE&#160;<br/>
Write back non-volatile memory,&#160;&#160;&#160;<br/>prepare system&#160;for the following&#160;<br/>shutdown or&#160;reset&#160;<br/>
ECUM_STATE_GO_SLEEP&#160;<br/>
write back non-volatile memory&#160;<br/>
&#160;<br/>
contents&#160;<br/>
ECUM_STATE_SLEEP&#160;<br/>
ECU is in physically sleep mode&#160;&#160;<br/>
ECUM_STATE_WAKEUP_ONE&#160;<br/>
Set wakeup sources in normal&#160;<br/>
&#160;<br/>
mode in callout&#160;<br/>EcuM_AL_RestartDrivers()<br/>
ECUM_STATE_WAKEUP_&#160;<br/>
Wait for the validation of a&#160;&#160;<br/>
A&#160;wakeup event occurred.&#160;<br/>
VALIDATION&#160;<br/>
wakeup&#160;event&#160;<br/>
ECUM_STATE_WAKEUP_&#160;<br/>
Result of&#160;WAKEUP_REACTION&#160;<br/>
&#160;<br/>
WAKESLEEP&#160;<br/>
state was none of&#160;TTII or RUN.&#160;<br/>
ECUM_STATE_WAKEUP_&#160;<br/>
Computes the reaction of the&#160;<br/>
&#160;<br/>
REACTION&#160;<br/>
ECU after a valid wakeup (TTII, &#160;<br/>switch to&#160;RUN&#160;state)&#160;<br/>
ECUM_STATE_TTII&#160;<br/>
Execute TTII&#160;protocol&#160;<br/>
&#160;<br/>
ECUM_STATE_WAKEUP_TWO&#160;<br/>
Initialize DEM&#160;after wakeup&#160;<br/>
&#160;<br/>
phase.&#160;<br/>
ECUM_STATE_GO_OFF_TWO&#160;<br/>
Activities implemented in&#160;API&#160;<br/>
Executed within the&#160;<br/>
EcuM_Shutdown().&#160;<br/>
ShutdownHook().&#160;<br/>
Table 3-3&#160;&#160;&#160;States&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
20&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-21_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-21_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
Figure 3-1&#160;&#160;State diagram&#160;<br/>
<b>3.5&#160;&#160;Main Functions&#160;</b><br/>
<b>3.5.1&#160;</b><br/>
<b>Run Request Protocol&#160;</b><br/>
The run request protocol is a&#160;mechanism&#160;where applications&#160;or Software Components&#160;<br/>(SW-C) have to request RUN state explicitly. If&#160;the application has nothing to do anymore it&#160;<br/>must release the previous requested RUN&#160;state. If no other SW-C has requested RUN&#160;<br/>state the ECU State Manger decides to initiate the shutdown process of the ECU.&#160;<br/>
If SW-C needs special preparation for one of the shutdown states&#160;(SLEEP, OFF,&#160;RESET)&#160;<br/>the SW-C must request POST&#160;RUN&#160;state.&#160;This is the same&#160;mechanism like requesting&#160;<br/>RUN state, which means that the POST&#160;RUN state has to be released after the job of the&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
21&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-22_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-22_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-22_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-22_4.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
application is finished. It is very important for SW-C’s&#160;which&#160;needs POST&#160;RUN state&#160;<br/>activities to request the POST&#160;RUN state before releasing the RUN request&#160;otherwise it is&#160;<br/>possible that the application doesn't get the chance to execute its POST&#160;RUN activities. &#160;<br/>
To&#160;request RUN or POST&#160;RUN state each SW-C must be a configured user&#160;of the ECU&#160;<br/>State Manager.&#160;Therefore it is&#160;necessary to define one user&#160;for each SW-C to place run&#160;<br/>requests.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>In production mode (EcuMDevErrorDetect equals to Off) the&#160;caller must&#160;assure&#160;<br/>
&#160;&#160;that the matching function pairs (requesting/releasing RUN) are called in the&#160;<br/>
expected order. I.e. RUN shall be requested only once per user until the RUN is&#160;<br/>released and release RUN must also be executed once to release a previously&#160;<br/>requested RUN state to prevent unexpected behavior of the ECUM.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.5.2&#160;</b><br/>
<b>Time Triggered Increased Inoperation Protocol&#160;</b><br/>
This mechanism provides a way&#160;to enter&#160;a step by step decreasing power consumption&#160;<br/>mode.&#160;To&#160;use the&#160;TTII feature the ECU has to&#160;fulfill the following prerequisite:&#160;<br/>
&#160;&#160;The ECU must support several sleep modes&#160;where each sleep mode presents a&#160;<br/>
different level of low-power consumption.&#160;<br/>
&#160;&#160;The&#160;TTII is timer based therefore the available timers on the ECU must&#160;be wakeup&#160;<br/>
capable.&#160;<br/>
&#160;&#160;A&#160;timer has to be configured as wakeup source for&#160;TTII&#160;<br/>
<b>3.5.3&#160;</b><br/>
<b>Wakeup Validation Protocol&#160;</b><br/>
The wakeup validation protocol provides a&#160;standardized way to recognize valid controller&#160;<br/>wakeup after a sleep phase. &#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>When the ECUM transits to SLEEP&#160;state the service&#160;NvM_WriteAll()&#160;is executed&#160;<br/>
&#160;&#160;before the controller is&#160;set into sleep. If a subsequent wakeup validation&#160;fails and the&#160;<br/>
ECUM transits into SLEEP&#160;state again, the service&#160;NvM_WriteAll()&#160;will not be&#160;<br/>executed again.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The validation of wakeup events is not done by the ECU State Manager. Only the&#160;<br/>
&#160;&#160;management of the validation is done by ECUM.&#160;This means that the&#160;<br/>
EcuM_SetWakeupEvent()&#160;must be called when a wakeup event was detected. If the&#160;<br/>wakeup event needs validation the&#160;module which performs this validation has to call&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
22&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-23_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-23_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-23_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
EcuM_ValidateWakeupEvent()&#160;to indicate the ECU State&#160;Manager about a valid&#160;<br/>wakeup event and to bring the ECU&#160;into RUN state.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Example&#160;</b><br/>
&#160;&#160;ECU is in sleep mode&#160;<br/>
&#160;<br/>
&#160;&#160;Wakeup source needs to&#160;be validated&#160;<br/>
1.&#160;<br/>
Wakeup event occurs, the&#160;driver or the validating module calls&#160;<br/>EcuM_CheckWakeup(wakeupsourceID)&#160;<br/>
2.&#160;&#160;In this callout the user/integrator of the module&#160;must implement a code sequence&#160;<br/>
which performs the correct action depending on the wakeup event ID. For example,&#160;<br/>if the wake event ID&#160;belongs to a CAN channel the code must execute the&#160;<br/>CanIf_CheckWakeup()&#160;API&#160;function&#160;which should call the&#160;<br/>EcuM_SetWakeupEvent().&#160;<br/>
3.&#160;&#160;The ECUM&#160;checks whether this wakeup source&#160;needs validation =&gt; no&#160;validation&#160;<br/>
required, ECUM&#160;marks this wakeup&#160;event as valid&#160;<br/>
4.&#160;&#160;ECUM proceed to RUN&#160;state&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Example&#160;</b><br/>
&#160;&#160;ECU is in sleep mode&#160;<br/>
&#160;<br/>
&#160;&#160;Wakeup source needs validation&#160;<br/>
1.&#160;<br/>
Wakeup event occurs, the&#160;driver or the validation module calls&#160;<br/>EcuM_CheckWakeup(wakeupSourceID)&#160;<br/>
2.&#160;&#160;The implementation of the callout must call the appropriate service to check the&#160;<br/>
wakeup event by “asking” the corresponding driver.&#160;<br/>
3.&#160;&#160;The ECUM checks whether this&#160;wakeup event needs&#160;validation =&gt; validation&#160;<br/>
required, EcuM starts timeout which limits the duration of wakeup validation (if the&#160;<br/>timeout expires the EcuM&#160;sets the ECU in sleep mode again)&#160;<br/>
4.&#160;&#160;The ECUM executes the callout EcuM_StartWakeupSources(), where activities&#160;<br/>
must be implemented to start BSW&#160;modules for the wakeup&#160;validation,&#160;e.g. setting&#160;<br/>the CAN transceiver in&#160;normal mode. &#160;<br/>
5.&#160;&#160;The ECUM&#160;executes the callout EcuM_CheckValidation(),&#160;where activities may be&#160;<br/>
implemented to perform the wakeup validation, e.g. querying the CANIF by&#160;<br/>executing CanIf_CheckValidation().&#160;<br/>
6.&#160;If the validation was successful the validating module has to call&#160;<br/>
EcuM_ValidateWakeupEvent(wakeupSourceID)&#160;<br/>
7.&#160;If the validation was not successful the&#160;ECUM executes the callout&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
23&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-24_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-24_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
EcuM_StopWakeupSources(), where activities must be implemented to stop BSW&#160;<br/>modules which where necessary for the wakeup validation, e.g. setting the CAN&#160;<br/>transceiver in sleep mode.&#160;<br/>
8.&#160;&#160;The ECUM recognizes an valid wakeup&#160;<br/>
9.&#160;&#160;ECUM proceeds to RUN state&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The wakeup validation protocol applies also for&#160;communication channels while the&#160;<br/>
&#160;<br/>
ECUM&#160;is in RUN state.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.6&#160;&#160;Error Handling&#160;</b><br/>
<b>3.6.1&#160;</b><br/>
<b>Development Error Reporting&#160;</b><br/>
By default, development errors are reported to the DET&#160;using the service&#160;<br/>Det_ReportError()as&#160;&#160;specif<a href="TechnicalReference_Asr_EcuMs.html#4">ied in&#160;[2], if development error reporting is</a>&#160;enabled (i.e.&#160;<br/>pre-compile parameter&#160;ECUM_DEV_ERROR_DETECT == STD_ON).&#160;<br/>
If another module is used for development error reporting, the function prototype for&#160;<br/>reporting the error can be configured by the integrator, but must have the same signature&#160;<br/>as the service&#160;Det_ReportError().&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#15">The reported ECUM ID can be found in chapter&#160;2.&#160;</a><br/>
The reported service IDs identify the services which are described in&#160;<a href="TechnicalReference_Asr_EcuMs.html#55">5.3. The&#160;</a>following&#160;<br/>table presents the service IDs and the related services:&#160;<br/>
<b>Service ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x00 EcuM_GetVersionInfo()&#160;<br/>
0x01 EcuM_Init()&#160;<br/>
0x02&#160;<br/>
EcuM_Shutdown() &#160;&#160;<br/>
0x03 EcuM_RequestRUN()&#160;<br/>
&#160;<br/>
&#160;<br/>
0x04 EcuM_ReleaseRUN()&#160;<br/>
0x05 EcuM_KillAllRUNRequests()&#160;<br/>
0x06 EcuM_SelectShutdownTarget()&#160;<br/>
0x07 EcuM_GetState()&#160;<br/>
0x08 EcuM_GetLastShutdownTarget()&#160;<br/>
&#160;<br/>
0x09 EcuM_GetShutdownTarget()&#160;<br/>
&#160;<br/>
0x0A EcuM_RequestPOST_RUN()&#160;<br/>
0x0B EcuM_ReleasePOST_RUN()&#160;<br/>
0x0C EcuM_SetWakeupEvent()&#160;<br/>
0x0D EcuM_GetPendingWakeupEvents()&#160;<br/>
0x0E EcuM_ComM_RequestRUN()&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
24&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-25_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Service ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x0F EcuM_SelectApplicationMode()&#160;<br/>
0x10 EcuM_ComM_ReleaseRUN()&#160;<br/>
&#160;<br/>
0x11 EcuM_GetApplicationMode()&#160;<br/>
0x12 EcuM_SelectBootTarget()&#160;<br/>
0x13 EcuM_GetBootTarget()&#160;<br/>
0x14 EcuM_ValidateWakeupEvent()&#160;<br/>
0x15 EcuM_GetValidatedWakeupEvents()&#160;<br/>
0x16 EcuM_ClearWakeupEvent()&#160;<br/>
0x17 EcuM_GetStatusOfWakeupSource()&#160;<br/>
0x18 EcuM_MainFunction()&#160;<br/>
0x19 EcuM_GetExpiredWakeupEvents()&#160;<br/>
0x1A EcuM_StartupTwo()&#160;<br/>
0x1B EcuM_ComM_HasRequestedRUN()&#160;<br/>
0x65 EcuM_CB_NfyNvMJobEnd()&#160;<br/>
0xCA EcuM_GeneratorCompatibilityError()&#160;<br/>
0xCB EcuM_AL_DriverInitZero()&#160;<br/>
Table 3-4&#160;&#160;&#160;Mapping of service IDs to services&#160;<br/>
The errors reported to DET&#160;are described in the following table:&#160;<br/>
<b>Error Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x10 ECUM_E_NOT_INITED&#160;<br/>
API service used in&#160;wrong&#160;context (without module&#160;<br/>initialization)&#160;<br/>
0x11 ECUM_E_SERVICE_DISABLED&#160;<br/>
Error code defined by&#160;AUT<a href="TechnicalReference_Asr_EcuMs.html#4">OSAR SWS (see&#160;[1]) but not used&#160;<br/></a>in this implementation.&#160;<br/>
0x12 ECUM_E_NULL_POINTER&#160;<br/>
API service&#160;called where pointer parameter is equal to&#160;<br/>NULL_PTR&#160;<br/>
0x13 ECUM_E_INVALID_PAR&#160;<br/>
API service&#160;called with&#160;wrong parameter&#160;<br/>
0x14 ECUM_E_MULTIPLE_RUN_&#160;&#160;Multiple request of RUN or&#160;POST&#160;RUN state by the same&#160;<br/>
REQUESTS&#160;<br/>
user ID&#160;<br/>
0x15 ECUM_E_MISMATCHED_RUN_R<br/>
Run release&#160;with an user ID&#160; without a&#160;matching&#160;request with&#160;<br/>
ELEASE&#160;<br/>
the same Id before&#160;<br/>
0x16 ECUM_E_STATE_PAR_OUT_OF<br/>
API services&#160;EcuM_SelectShutdownTarget() or&#160;<br/>
_RANGE&#160;<br/>
EcuM_GetShutdownTarget()&#160;called&#160;where parameter is&#160;<br/>not in expected range &#160;<br/>
0x17 ECUM_E_UNKNOWN_&#160;<br/>
Wakeup&#160;source ID is not known by ECU State Manager&#160;<br/>
WAKEUP_SOURCE&#160;<br/>
0x18 ECUM_E_PARAM_VINFO&#160;<br/>
A&#160;null pointer&#160;has been given as&#160;parameter to the&#160;API&#160;service&#160;<br/>EcuM_GetVersionInfo().&#160;<br/>
0x30 ECUM_E_OS_NOT_STARTED_S<br/>
This error will&#160;be reported if&#160;the invocation of&#160;StartOS()&#160;at&#160;<br/>
UCCESFULLY&#160;<br/>
the end of&#160;EcuM_Init()&#160;was not successful (this means&#160;<br/>EcuM_Init()&#160;returns.&#160;<br/>
0x31 ECUM_E_WRONG_ECUM_&#160;<br/>
This error will&#160;be reported if&#160;setting the ECU in OFF mode or&#160;<br/>
USAGE&#160;<br/>
performing a&#160;reset does not lead in the expected behaviour. &#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
25&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-26_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Error Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x32 ECUM_E_WAKEUP_&#160;<br/>
This error will&#160;be reported if&#160;<br/>
VALIDATION_PROT_ERROR&#160;<br/>
EcuM_ValidateWakeupEvent()&#160;was&#160;invoked without&#160;<br/>calling&#160;EcuM_SetWakeupEvent().&#160;<br/>
0x33 ECUM_E_OFF_STATE_&#160;<br/>
This error will&#160;be reported if&#160;the callout&#160;<br/>
EXPECTED&#160;<br/>
EcuM_AL_SwitchOff()&#160;does not switch off the ECU.&#160;This&#160;<br/>means&#160;EcuM_AL_SwitchOff()&#160;returns.&#160;<br/>
0x34 ECUM_E_MODULE_NOT_IN_RU<br/>
This error will&#160;be reported if&#160;<br/>
N_STATE&#160;<br/>
EcuM_SelectShutdownTarget()&#160;is called while the&#160;<br/>ECUM is&#160;not in RUN state.&#160;<br/>
0x35 ECUM_E_GENERATOR_COMPAT<br/>
This error will&#160;be reported if&#160;the ECUM or&#160;another module&#160;<br/>
IBILITY&#160;<br/>
executes the&#160;EcuM_GeneratorCompatibilityError() callout.&#160;<br/>This error code is additionally to&#160;AUTOSAR specification.&#160;<br/>
0x36 ECUM_E_EXTENDED_LIB_VER<br/>
This error will&#160;be reported if&#160;the delivery integrity check&#160;<br/>
SION_CHECK_FAILED&#160;<br/>
function&#160;VLibVersionCheck()&#160;fails.&#160;This error code is not&#160;<br/>specified by&#160;AUTOASR. It is an additional one used&#160;for error&#160;<br/>reporting in library checks.&#160;<br/>
Table 3-5&#160;&#160;&#160;Errors reported to DET&#160;<br/>
&#160;<br/>
<b>3.6.1.1&#160;&#160;Parameter Checking&#160;</b><br/>
AUTOSAR requires that&#160;API functions check&#160;the validity&#160;of their parameters.&#160;The checks in&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#27">Table 3-6 are internal p</a>arameter checks of&#160;the&#160;API functions.&#160;These checks are for&#160;<br/>development error reporting and&#160;can be en-/disabled separately.&#160;The configuration of en-<br/><a href="TechnicalReference_Asr_EcuMs.html#106">/disabling the checks is described in chapter&#160;6.2.3. En-/disabling of</a>&#160;single checks are an&#160;<br/>addition to the&#160;AUTOSAR standard which requires to en-/disable the complete&#160;parameter&#160;<br/>checking via the parameter&#160;ECUM_DEV_ERROR_DETECT.&#160;<br/>
The following table shows which parameter&#160;checks are performed on which services:&#160;<br/>
<b>Check&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Service&#160;</b><br/>
ECUM_E_GENERATOR_COMPATIBILITY<br/>
ECUM_E_NOT_INITED<br/>
ECUM_E_PARAM_VINFO<br/>
ECUM_E_STATE_PAR_OUT_OF_RANGE<br/>
ECUM_E_NULL_POINTER<br/>
ECUM_E_INVALID_PAR<br/>
ECUM_E_UNKNOWN_ WAKEUP_SOURCE<br/>
ECUM_E_MULTIPLE_RUN_ REQUESTS<br/>
ECUM_E_MISMATCHED_RUN_RELEASE<br/>
ECUM_E_OS_NOT_STARTED_SUCCESFULLY&#160;<br/>
ECUM_E_WRONG_ECUM_USAGE&#160;<br/>
ECUM_E_WAKEUP_VALIDATION_PROT_ERROR&#160;<br/>
ECUM_E_OFF_STATE_EXPECTED&#160;<br/>
ECUM_E_MODULE_NOT_IN_RUN_STATE&#160;<br/>
EcuM_Init&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_Shutdown&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
26&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-27_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Check&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Service&#160;</b><br/>
ECUM_E_GENERATOR_COMPATIBILITY<br/>
ECUM_E_NOT_INITED<br/>
ECUM_E_PARAM_VINFO<br/>
ECUM_E_STATE_PAR_OUT_OF_RANGE<br/>
ECUM_E_NULL_POINTER<br/>
ECUM_E_INVALID_PAR<br/>
ECUM_E_UNKNOWN_ WAKEUP_SOURCE<br/>
ECUM_E_MULTIPLE_RUN_ REQUESTS<br/>
ECUM_E_MISMATCHED_RUN_RELEASE<br/>
ECUM_E_OS_NOT_STARTED_SUCCESFULLY&#160;<br/>
ECUM_E_WRONG_ECUM_USAGE&#160;<br/>
ECUM_E_WAKEUP_VALIDATION_PROT_ERROR&#160;<br/>
ECUM_E_OFF_STATE_EXPECTED&#160;<br/>
ECUM_E_MODULE_NOT_IN_RUN_STATE&#160;<br/>
EcuM_GetVersionInfo&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_RequestRUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ReleaseRUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ComM_RequestRUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ComM_ReleaseRUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ComM_HasRequestedRUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_RequestPOST_RUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ReleasePOST_RUN&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_KillAllRUNRequests&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_SelectShutdownTarget&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
EcuM_GetState&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetShutdownTarget&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetLastShutdownTarget&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_SetWakeupEvent&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetPendingWakeupEvents&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ClearWakeupEvent&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_ValidateWakeupEvent&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetValidatedWakeupEvents&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetExpiredWakeupEvents&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetStatusOfWakeupSource&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_SelectApplicationMode&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GetApplicationMode&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_SelectBootTarget&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_MainFunction&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_StatupTwo&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_CB_NvyNvMJobEnd&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
EcuM_GeneratorCompatibility-<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Error()&#160;<br/>
Table 3-6&#160;&#160;&#160;Development Error&#160;detection:&#160;Assignment of checks to services&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
27&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-28_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-28_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>3.6.2&#160;</b><br/>
<b>Production Code Error Reporting&#160;</b><br/>
By default,&#160;production code related errors&#160;are reported to the DEM using the service&#160;<br/>Dem_ReportErrorStatus()<a href="TechnicalReference_Asr_EcuMs.html#4">&#160;as specified in&#160;[3], if production error&#160;</a>reporting is enabled&#160;<br/>(i.e. pre-compile parameter&#160;ECUM_PROD_ERROR_DETECT == STD_ON).&#160;<br/>
If another module is used for production code error reporting, the function prototype for&#160;<br/>reporting the error can be configured by the integrator, but must have the same signature&#160;<br/>as the service&#160;Dem_ReportErrorStatus().&#160;<br/>
The errors reported to DEM are described in the following table:&#160;<br/>
<b>Error Code&#160;</b><br/>
<b>Description&#160;</b><br/>
ECUM_E_RAM_CHECK_FAILED&#160;<br/>
RAM Hash&#160;check after a sleep phase failed&#160;<br/>
ECUM_E_ALL_RUN_REQUESTS_KILLED&#160;<br/>
API service&#160;EcuM_KillAllRUNRequest()&#160;was&#160;<br/>called&#160;<br/>
Table 3-7&#160;&#160;&#160;Errors reported to DEM&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The production error codes listed&#160;above must be&#160;defined by the DEM and&#160;are included&#160;<br/>
&#160;&#160;into the ECU State&#160;Manager by the file&#160;Dem.h&#160;(by default).&#160;<br/>
<b>&#160;</b><br/>
<b>3.6.3&#160;</b><br/>
<b>Vector specific error reporting&#160;</b><br/>
The ECUM&#160;module provides an&#160;optional consistency check that can detect incompatible&#160;<br/>configuration data. Eventual incompatibilities are detected during&#160;EcuM_Init()&#160;and are&#160;<br/>reported by the&#160;API&#160;EcuM_GeneratorCompatibilityError(). After&#160;calling&#160;<br/>EcuM_GeneratorCompatibilityError()&#160;the ECUM module will stop the initialization&#160;<br/>causing the ECUM to remain uninitialized.&#160;<br/>
&#160;<br/>
The following check is provided:&#160;<br/>
&#160;&#160;Generator versions are compatible to the&#160;implementation &#160;and compatible &#160;to the&#160;<br/>
versions &#160;of previous configuration phases.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
28&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-29_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>4&#160;&#160;Integration&#160;</b><br/>
This chapter gives necessary information for&#160;the integration of the MICROSAR ECUM into&#160;<br/>an application environment of an ECU.&#160;<br/>
<b>4.1&#160;&#160;Scope of Delivery&#160;</b><br/>
The delivery of the ECUM contains the files which are described in the chapter’<a href="TechnicalReference_Asr_EcuMs.html#29">s&#160;4.1.1 and</a>&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#29">4.1.2:&#160;</a><br/>
<b>4.1.1&#160;</b><br/>
<b>Static Files&#160;</b><br/>
<b>File Name&#160;</b><br/>
<b>Description&#160;</b><br/>
EcuM.h&#160;<br/>
Declares the interface of the MICROSAR&#160;module ECUM.&#160;<br/>
EcuM.c&#160;<br/>
Contains the implementation of the interfaces of&#160;the ECUM.&#160;<br/>
EcuM.lib&#160;<br/>
This is the library file of the ECUM (optional).&#160;<br/>
Table 4-1&#160;&#160;&#160;Static files&#160;<br/>
<b>4.1.2&#160;</b><br/>
<b>Dynamic Files&#160;</b><br/>
The dynamic files are generated&#160;by the configuration tool.&#160;<br/>
<b>File Name&#160;</b><br/>
<b>Description&#160;</b><br/>
EcuM Cfg.h&#160;<br/>
Contains the static configuration part of this module.&#160;<br/>
EcuM_Callout_Stubs.c&#160;<br/>
Template for the callout&#160;code which&#160;has to be filled by the&#160;<br/>integrator.&#160;<br/>
EcuM_Generated_Types.<br/>
Contains all&#160;provided types of the ECUM.&#160;<br/>
h&#160;<br/>
EcuM_Cbk.h&#160;<br/>
Contains the prototypes of the provided callback and callout&#160;<br/>functions.&#160;<br/>
EcuM_PBcfg.c&#160;<br/>
Contains the post build&#160;configurations.&#160;<br/>
EcuM_PrivateCfg.h&#160;<br/>
Contains configuration data which is&#160;only relevant for the ECUM&#160;<br/>implementation.&#160;This file&#160;must be only included in&#160;the ECUM&#160;<br/>implementation files.&#160;<br/>
Table 4-2&#160;&#160;&#160;Generated files&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
29&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-30_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-30_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-30_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>4.2&#160;&#160;Include Structure&#160;</b><br/>
&#160;<br/>
Figure 4-1&#160;&#160;Include structure&#160;<br/>
<b>&#160;</b><br/>
<b>Info&#160;</b><br/>
&#160;&#160;&#160;&#160;A&#160;BSW module which uses&#160;services for wakeup&#160;event reporting&#160;shall include&#160;EcuM_Cbk.h&#160;<br/>
&#160;&#160;Other&#160;BSW module shall&#160;include&#160;EcuM.h&#160;<br/>
&#160;&#160;Software Components&#160;shall include the&#160;generated&#160;file by Rte to use the services of the&#160;<br/>
ECUM (e.g.&#160;Rte_EcuM.h)&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Compiler Abstraction and Memory&#160;Mapping &#160;</b><br/>
The objects (e.g. variables, functions, constants) are declared by compiler&#160;independent&#160;<br/>definitions – the compiler abstraction definitions. Each compiler abstraction definition is&#160;<br/>assigned to a memory section.&#160;<br/>
The following table contains the memory&#160;section names and the compiler abstraction&#160;<br/>definitions defined for the ECUM and illustrate their assignment among each other.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
30&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-31_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Compiler Abstraction</b><br/>
<b>Definitions</b><br/>
GET&#160;<br/>
<b>&#160;</b><br/>
R<br/>A<br/>T<br/>
&#160;<br/>
A&#160;<br/>
<b>Memory&#160;Mapping&#160;</b><br/>
T<br/>
OOT&#160;<br/>
OINIT&#160;<br/>
<b>Sections&#160;</b><br/>
&#160;<br/>E<br/>
ST&#160;<br/>
B<br/>
N<br/>
_<br/>
_<br/>
OD<br/>
ON<br/>
AR<br/>
AR<br/>
AR&#160;<br/>
_C<br/>
_CODE_BOOT_<br/>
_C<br/>
_V<br/>
_V<br/>
_V<br/>
ECUM<br/>
ECUM_API_CODE&#160;<br/>
ECUM<br/>
ECUM_APPL_DA<br/>
ECUM_APPL_CONFIG&#160;<br/>
ECUM<br/>
ECUM<br/>
ECUM<br/>
ECUM<br/>
ECUM_START_SEC_CODE&#160;<br/>
 <br/>
&#160;<br/>
&#160;&#160; &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ECUM_START_SEC_CODE_SET_BOOT_TARGET&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ECUM_START_SEC_CODE_GET_BOOT_TARGET&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
ECUM_START_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
ECUM_START_SEC_VAR_NOINIT_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
ECUM_START_SEC_VAR_NOINIT_16BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
ECUM_START_SEC_VAR_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
ECUM_START_SEC_CONST_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ECUM_START_SEC_CONST_PBCFG&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ECUM_START_SEC_CONST_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Application buffer memory section - access from ECUM&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
 &#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
into application memory&#160;<br/>
Table 4-3&#160;&#160;&#160;Compiler abstraction and memory&#160;mapping&#160;<br/>
<b>4.4&#160;&#160;Dependencies on SW modules&#160;</b><br/>
<b>4.4.1&#160;</b><br/>
<b>AUTOSAR OS&#160;</b><br/>
This module depends&#160;on the&#160;AUTOSAR OS. It starts and performs the shutdown of OS.&#160;<br/>The ECUM needs a valid reference within the&#160;EcuC file to the configured application&#160;<br/>modes.&#160;<br/>
The usage cannot be switched off.&#160;<br/>
<b>4.4.2&#160;</b><br/>
<b>MCU&#160;</b><br/>
This module depends&#160;on the MCU driver.&#160;The&#160;ECUM&#160;uses the mode setting functionality&#160;<br/>and the service to perform an ECU reset. If a&#160;sleep mode is configured within the ECUM&#160;a&#160;<br/>valid configuration reference to MCU mode settings must exist within the EcuC.&#160;<br/>
This usage cannot be switched off.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
31&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-32_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-32_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>4.4.3&#160;</b><br/>
<b>DEM&#160;</b><br/>
The ECUM depends on the DEM.&#160;The ECUM performs the initialization and reports&#160;<br/>production errors to the DEM.&#160;<br/>
Its initialization can be enabled or disabled by&#160;the switch “Use DEM”.&#160;The error reporting&#160;<br/>can be en-/disabled by switching the configuration switch “Enable Production Error&#160;<br/>Reporting” on.&#160;<br/>
<b>4.4.4&#160;</b><br/>
<b>DET&#160;</b><br/>
The ECUM depends on the DET.&#160;The ECUM&#160;performs the initialization and reports&#160;<br/>development errors&#160;for diagnostic&#160;purposes.&#160;<br/>
Its initialization can be enabled&#160;or disabled by the configuration switch “Use&#160;DET”.&#160;The&#160;<br/>error reporting can be en-/disabled by switching the configuration switch “Enable&#160;<br/>Development Error Detection”.&#160;<br/>
<b>4.4.5&#160;</b><br/>
<b>WDGM&#160;</b><br/>
This module depends on the WDGM.&#160;The ECUM performs the initialization and via callouts&#160;<br/>it might be necessary to interact with the WDGM while entering sleep mode.&#160;Furthermore&#160;<br/>the ECUM sets the mode of the&#160;WDGM in different ECU states.&#160;<br/>
Its usage can be enabled or disabled by&#160;the switch “Use Watchdog Manager”.&#160;<br/>
<b>4.4.6&#160;</b><br/>
<b>COMM&#160;</b><br/>
This module depends on the COMM.&#160;The ECUM performs the&#160;initialization and manages&#160;<br/>the wakeup of communication channels.&#160;Additional it indicates to this module when RUN&#160;<br/>state is reached.&#160;<br/>
Its usage can be en-/disabled by the switch “Use ComM”.&#160;<br/>
<b>4.4.7&#160;</b><br/>
<b>NVM&#160;</b><br/>
The module depends&#160;on the NVM.&#160;The ECUM&#160;performs the initialization and calls&#160;<br/>NvM_ReadAll()&#160;and&#160;NvM_WriteAll()&#160;in the start up respectively in the shutdown&#160;<br/>phase.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Note that the&#160;NvM_ReadAll(),&#160;NvM_Init()&#160;and the triggering of the memory&#160;<br/>
<b>&#160;&#160;</b>stack has to be implemented manually in one&#160;of the driver init lists. Refer to&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#43">chapter&#160;4.8.2 for an example of how to initialize the memory st</a>ack.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Its usage can be enabled or disabled by the switch “Use NVRAM Manger”. &#160;This switch&#160;<br/>disables the execution of&#160;NvM_WriteAll()&#160;by ECUM module but does&#160;not prevent the&#160;<br/>user to add module initialization in&#160;one of the driver init list.&#160;<br/>
If&#160;&#160;NvM_WriteAll()&#160;is enabled, the user is able&#160;to configure a timeout for&#160;<br/>NvM_CancelWriteAll().&#160;This&#160;timeout parameter specifies the time which EcuM waits&#160;<br/>for before it calls the&#160;NvM_KillWriteAll()&#160;function (if available) or switches into ECU&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
32&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-33_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-33_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
RUN state. With an adequate value for this&#160;timeout parameter,&#160;the synchronization&#160;<br/>between NvM and EcuM is guaranteed.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;</b><br/>
<b>&#160;&#160;NvM_CancelWriteAll Usage:&#160;</b><br/>
<b>&#160;<br/></b>Note that a wait mechanism until NvM&#160;is finished has to be implemented&#160;<br/>manually in case&#160;NvM_CancelWriteAll()&#160;is called. &#160;<br/>
This caution is&#160;only valid&#160;for&#160;<b>EcuMS.c SW&#160;version number</b>&#160;smaller or equal to&#160;<br/><b>05.03.00</b>.&#160;<br/>
In case&#160;NvM_CancelWriteAll()&#160;is called by EcuM because of incoming&#160;<br/>wakeup event during&#160;NvM_WriteAll&#160;processing, the NvM component do not&#160;<br/>have to cancel destructive the currently running&#160;NvM_WriteAll&#160;job. Thus&#160;the&#160;<br/>cancel mechanism can take some time.&#160;<br/>
The EcuM does not wait until the NvM finishes, instead it transits&#160;immediately&#160;<br/>into ECU RUN state.&#160;<br/>
To&#160;avoid this, a wait mechanism for NvM shall be implemented in&#160;<br/>EcuM_DriverRestartList().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>4.4.8&#160;</b><br/>
<b>RTE&#160;</b><br/>
The module depends on the RTE. &#160;<br/>
The ECUM performs the start and stop of the&#160;RTE. Its usage can be enabled or disabled&#160;<br/>by the switch “Use Rte”.&#160;<br/>
The ECUM&#160;ensures the synchronization to&#160;RTE at each important mode switch.&#160;<br/>
In case the ECUM leaves the RUN state&#160;or&#160;enters SLEEP/OFF state it waits for the&#160;<br/>feedback from RTE before the mode switch&#160;is&#160;performed.&#160;This mechanism&#160;is activated by&#160;<br/>enabling the mode switch notification and the usage of acknowledgement mechanism to&#160;<br/>RTE.&#160;<br/>
<b>4.4.9&#160;</b><br/>
<b>SCHM&#160;</b><br/>
The module depends on the SCHM.&#160;The ECUM performs the initialization of that module.&#160;<br/>
Its usage can be enabled or disabled by the switch “Use SchM”.&#160;<br/>
<b>4.4.10&#160;&#160;Other BSW Modules&#160;</b><br/>
The module depends on other&#160;BSW modules. It performs their initialization.&#160;The&#160;<br/>configuration which modules should be initialized could be&#160;done over the configuration&#160;<br/>Node “EcuMDriverInitListOne”, &#160;“EcuMDriverInitListTwo”, “EcuMDriverInitListThree” and&#160;<br/>“EcuMDriverRestartList”.&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
33&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-34_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-34_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The initialization of the modules described above must be configured by the&#160;<br/>
&#160;&#160;integrator in one of the DriverInitLists. &#160;<br/>
<b>&#160;</b><br/>
<b>4.5&#160;</b><br/>
<b>Successive Adding of Modules&#160;</b><br/>
The MICROSAR ECUM allows&#160;the successive adding of&#160;modules during the integration&#160;<br/>phase.&#160;This means, that the integrator has the possibility to&#160;start integration with a&#160;<br/>minimum subset of modules, e.g. ECUM, MCU and OS and if the used configuration is&#160;<br/>working, to add other modules like GPT,&#160;DEM, FIM etc..&#160;<br/>
<b>4.6&#160;</b><br/>
<b>Callout execution sequences&#160;</b><br/>
This chapter describes the execution order of&#160;callouts and important function.&#160;This may be&#160;<br/>useful while integrating the software stack.&#160;<br/>
<b>STARTUP&#160;–&#160;RUN&#160;</b><br/>
&#160;&#160;EcuM_AL_DriverInitZero()&#160;<br/>
&#160;&#160;EcuM_DeterminePbConfiguration()&#160;<br/>
&#160;&#160;EcuM_AL_DriverInitOne()&#160;<br/>
&#160;&#160;StartOS()&#160;<br/>
&#160;&#160;SchM_Init()&#160;<br/>
&#160;&#160;EcuM_AL_DriverInitTwo()&#160;<br/>
&#160;&#160;Rte_Start()&#160;<br/>
&#160;&#160;EcuM_AL_DriverInitThree()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_RUN)&#160;<br/>
&#160;&#160;EcuM_OnEnterRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Run mode)&#160;<br/>
&#160;&#160;ComM_RunModeIndication()&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
34&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-35_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>RUN – RESET&#160;</b><br/>
&#160;&#160;EcuM_OnExitRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Post Run mode)&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_POST_RUN)&#160;<br/>
&#160;&#160;EcuM_OnExitPostRun()&#160;<br/>
&#160;&#160;EcuM_OnPrepShutdown()&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_SHUTDOWN)&#160;<br/>
&#160;&#160;EcuM_OnGoOffOne()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Shutdown mode)&#160;<br/>
&#160;&#160;System waits for finishing the&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;Rte_Stop()&#160;<br/>
&#160;&#160;ComM_DeInit()&#160;<br/>
&#160;&#160;ShutdownOS()&#160;<br/>
&#160;&#160;EcuM_OnGoOffTwo()&#160;<br/>
&#160;&#160;Mcu_PerformReset()&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
35&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-36_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>RUN –&#160;OFF&#160;</b><br/>
&#160;&#160;EcuM_OnExitRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Post Run mode)&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_POST_RUN)&#160;<br/>
&#160;&#160;EcuM_EnableWakeupSources()&#160;<br/>
&#160;&#160;EcuM_OnExitPostRun()&#160;<br/>
&#160;&#160;EcuM_OnPrepShutdown()&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_SHUTDOWN)&#160;<br/>
&#160;&#160;EcuM_OnGoOffOne()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Shutdown mode)&#160;<br/>
&#160;&#160;System waits for finishing the&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;Rte_Stop()&#160;<br/>
&#160;&#160;ComM_DeInit()&#160;<br/>
&#160;&#160;ShutdownOS()&#160;<br/>
&#160;&#160;EcuM_OnGoOffTwo()&#160;<br/>
&#160;&#160;EcuM_AL_SwitchOff()&#160;<br/>
&#160;&#160;Mcu_PerformReset()&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
36&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-37_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>RUN – SLEEP&#160;– RUN</b>&#160;&#160;<b>&#160;</b><br/>
&#160;&#160;EcuM_OnExitRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Post Run mode)&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_POST_RUN)&#160;<br/>
&#160;&#160;EcuM_EnableWakeupSources()&#160;<br/>
&#160;&#160;EcuM_OnExitPostRun()&#160;<br/>
&#160;&#160;EcuM_OnPrepShutdown()&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_SLEEP)&#160;<br/>
&#160;&#160;EcuM_OnGoSleep()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Shutdown mode)&#160;<br/>
&#160;&#160;System waits for finishing the&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;GetResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;EcuM_GenerateRamHash()&#160;<br/>
&#160;&#160;Mcu_SetMode()&#160;<br/>
&#160;&#160;System is in sleep mode&#160;<br/>
&#160;&#160;Occurrence of a valid wakeup event&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Wakeup mode)&#160;<br/>
&#160;&#160;EcuM_CheckRamHash()&#160;<br/>
&#160;&#160;EcuM_AL_DriverRestart()&#160;<br/>
&#160;&#160;ReleaseResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;EcuM_OnWakeupReaction()&#160;<br/>
&#160;&#160;EcuM_DisableWakeupSources()&#160;<br/>
&#160;&#160;Dem_Init()&#160;<br/>
&#160;&#160;EcuM_OnEnterRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Run mode)&#160;<br/>
&#160;&#160;ComM_RunModeIndication()&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
37&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-38_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>RUN – SLEEP&#160;– WAKEUP&#160;VALIDATION – RUN&#160;</b><br/>
&#160;&#160;EcuM_OnExitRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Post Run mode)&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_POST_RUN)&#160;<br/>
&#160;&#160;EcuM_EnableWakeupSources()&#160;<br/>
&#160;&#160;EcuM_OnExitPostRun()&#160;<br/>
&#160;&#160;EcuM_OnPrepShutdown()&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_SLEEP)&#160;<br/>
&#160;&#160;EcuM_OnGoSleep()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Shutdown mode)&#160;<br/>
&#160;&#160;System waits for finishing the&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Sleep mode)&#160;<br/>
&#160;&#160;GetResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;EcuM_GenerateRamHash()&#160;<br/>
&#160;&#160;Mcu_SetMode()&#160;<br/>
&#160;&#160;System is in sleep mode&#160;<br/>
&#160;&#160;Occurrence of a wakeup event&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Wakeup mode)&#160;<br/>
&#160;&#160;EcuM_CheckRamHash()&#160;<br/>
&#160;&#160;EcuM_AL_DriverRestart()&#160;<br/>
&#160;&#160;ReleaseResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;Wakeup detected as valid&#160;<br/>
&#160;&#160;EcuM_OnWakeupReaction()&#160;<br/>
&#160;&#160;EcuM_DisableWakeupSources()&#160;<br/>
&#160;&#160;Dem_Init()&#160;<br/>
&#160;&#160;EcuM_OnEnterRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Run mode)&#160;<br/>
&#160;&#160;ComM_RunModeIndication()&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
38&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-39_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>RUN – SLEEP&#160;– WAKEUP&#160;VALIDATION – SLEEP&#160;&#160;</b><br/>
&#160;&#160;EcuM_OnExitRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Post Run mode)&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_POST_RUN)&#160;<br/>
&#160;&#160;EcuM_EnableWakeupSources()&#160;<br/>
&#160;&#160;EcuM_OnExitPostRun()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Post Run mode)&#160;<br/>
&#160;&#160;EcuM_OnPrepShutdown()&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_SLEEP)&#160;<br/>
&#160;&#160;EcuM_OnGoSleep()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Shutdown mode)&#160;<br/>
&#160;&#160;System waits for finishing the&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Sleep mode)&#160;<br/>
&#160;&#160;GetResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;EcuM_GenerateRamHash()&#160;<br/>
&#160;&#160;Mcu_SetMode()&#160;(Sleep mode)&#160;<br/>
&#160;&#160;System is in sleep mode&#160;<br/>
&#160;&#160;Occurrence of a wakeup event&#160;<br/>
&#160;&#160;WdgM_SetMode()&#160;(Wakeup mode)&#160;<br/>
&#160;&#160;EcuM_CheckRamHash()&#160;<br/>
&#160;&#160;EcuM_AL_DriverRestart()&#160;<br/>
&#160;&#160;ReleaseResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;Wakeup detected as not valid&#160;<br/>
&#160;&#160;EcuM_OnWakeupReaction()&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_WAKE_SLEEP)&#160;<br/>
&#160;&#160;Rte_Switch_currentMode_currentMode(RTE_MODE_EcuM_Mode_SLEEP)&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
39&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-40_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;&#160;EcuM_OnGoSleep()&#160;<br/>
&#160;&#160;GetResource(RES_SCHEDULER)&#160;<br/>
&#160;&#160;EcuM_GenerateRamHash()&#160;<br/>
&#160;&#160;Mcu_SetMode()&#160;(Sleep mode)&#160;<br/>
&#160;<br/>
<b>4.7&#160;&#160;&#160;Critical code sections&#160;</b><br/>
&#160;<br/>
The ECUM&#160;has the following defined critical code sections:&#160;<br/>
&#160;&#160;ECUM_EXCLUSIVE_AREA_0: Must lock task&#160;interrupts and interrupt sources during&#160;<br/>
normal ECU modes like RUN and POST_RUN.&#160;<br/>
&#160;&#160;ECUM_EXCLUSIVE_AREA_1: Must lock SLEEP mode Interrupts. Special interrupt&#160;<br/>
control functionality has to be implemented for ECU SLEEP&#160;mode.&#160;Therefore the&#160;<br/>interrupt function set shall be used within the&#160;DaVinci Configuration tool to disable and&#160;<br/>enable these interrupts.&#160;The reason why this second exclusive are is defined is that, if&#160;<br/>the ECUM switches into SLEEP&#160;state not all interrupts are&#160;allowed to get disabled and&#160;<br/>the instructions to do this are HW dependent. &#160;<br/>
&#160;<br/>
<b>4.7.1&#160;</b><br/>
<b>Wakeup Interrupt Source Handling – General Description&#160;</b><br/>
&#160;<br/>
Wakeup interrupt sources are disabled and enabled.&#160;<br/>
Before&#160;&#160;Mcu_SetMode&#160;is called, because the ECU will change in SLEEP&#160;mode, the&#160;<br/>EcuM checks whether pending&#160;wakeups are existent.&#160;The call of Mcu&#160;API and this&#160;<br/>check shall be done while interrupts are locked.&#160;<br/>
Before it is checked whether pending wakeups are existent the wakeup interrupt&#160;<br/>sources shall get disabled in order that&#160;no wakeup interrupts are detected, until ECU&#160;<br/>goes into sleep mode. &#160;<br/>
It must also be assured that in case a&#160;wakeup event&#160;is detected as PENDING the&#160;<br/>wakeup interrupt sources are enabled again.&#160;<br/>
In case hardware specific instructions&#160;shall be used to disable or&#160;enable the wakeup&#160;<br/>interrupt sources the following procedure&#160;can be used. In other case the SchM&#160;<br/>functionality can be used for example.&#160;<br/>
<i>To&#160;be able to use hardware specific source&#160;code, an ‘interrupt function set’&#160;shall be&#160;<br/>defined as “Default Interrupt Settings”&#160;in configuration tool, for example&#160;<br/></i>InterruptFunctionSetEcuMWkupIsr<i>. For this&#160;‘function set’&#160;the suspend and&#160;<br/>restore functions must&#160;be defined, for example&#160;</i>SuspendEcuMWkupInterrupts()<i>&#160;<br/>and&#160;&#160;</i>ResumeEcuMWkpInterrupts().<i>&#160;The corresponding header file must get&#160;<br/>inserted into “Include File” list.&#160;</i><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
40&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-41_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-41_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-41_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
Within the EcuM configuration this defined interrupt function set shall be chosen in the&#160;<br/>drop down list “Sleep mode ISR handling”&#160;within the configuration tool. &#160;<br/>
&#160;<br/>
<b>4.7.2&#160;</b><br/>
<b>Interrupt Source Handling – Cautions and further Information&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;</b><br/>
&#160;&#160;OS functionalities must&#160;not be used&#160;for handling&#160;ECUM_EXCLUSIVE_AREA_1.&#160;<br/>
&#160;<br/>
&#160;&#160;In case the&#160;ISRs are configured to category 1, it is not&#160;allowed to&#160;call OS&#160;API&#160;<br/>
services, except functions&#160;DisableAlInterrupts,&#160;&#160;EnableAllInterrupts,&#160;<br/>SuspendAllInterrupts&#160;and&#160;ResumeAllInterrupts.&#160;<br/>
&#160;&#160;If ‘interrupt function set’&#160;is used the&#160;corresponding resume and restore&#160;function shall&#160;<br/>
be filled otherwise the system will not running.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>
&#160;&#160;The critical&#160;section handling apply the following&#160;parameter:&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#106">6.2.3 EcuMIrqHandling (Critical se</a>ction handling)&#160;for ECUM_EXCLUSIVE_AREA_0&#160;–&#160;<br/>SchM dependent&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#106">6.2.3 EcuMWkupIsrHandling (Sleep&#160;</a>mode ISR handling) is used for&#160;<br/>ECUM_EXCLUSIVE_AREA_1 – SchM independent&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>4.8&#160;&#160;AUTOSAR stack initialization&#160;</b><br/>
<b>4.8.1&#160;</b><br/>
<b>Configuration set selection&#160;</b><br/>
The&#160;AUTOSAR compatible mechanism to select the configuration set which should be&#160;<br/>used for module initialization considers the following aspects:&#160;<br/>
&#160;&#160;Most of the&#160;AUTOSAR modules provide a configuration reference to the provided&#160;<br/>
configuration sets &#160;<br/>
&#160;&#160;Some modules are initialized without a configuration pointer (Init-function signature&#160;<br/>
&lt;MSN&gt;_Init(void))&#160;<br/>
&#160;&#160;Some modules have a Init-function signature with configuration pointer but make no use&#160;<br/>
of it and needs to be initialized with a NULL_PTR&#160;<br/>
&#160;<br/>
To&#160;use this mechanism&#160;within ECUM, the user&#160;must distinguish between the aspects&#160;given&#160;<br/>above and make the correct confi<a href="TechnicalReference_Asr_EcuMs.html#100">guration decision (see Ch.&#160;6.2.2.1.11</a>)&#160;<br/>
&#160;&#160;Module uses a configuration pointer for its initialization:&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
41&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-42_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-42_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
Select the MSN to be initialized&#160;(e.g. Can)&#160;<br/>
&#160;<br/>
Select the corresponding configuration set (e.g. CanConfigSet)&#160;<br/>
&#160;<br/>
Select in one of the DriverInitList the MSN and the Init&#160;Function to be used (e.g.&#160;<br/>Can_Init()&#160;<br/>
&#160;<br/>
Result:&#160;The ECUM generates: “Can_Init(&amp;CanConfigSet);” in the specified&#160;<br/>DriverInitList.&#160;<br/>
&#160;&#160;Module has a void Init-function signature&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">The configuration items described in Ch.&#160;6.2.2.1.11&#160;must not be used&#160;</a><br/>
&#160;<br/>
Select in one of the DriverInitList the MSN and the Init&#160;Function to be used (e.g.&#160;<br/>ComM_Init()&#160;<br/>
&#160;<br/>
Result:&#160;The ECUM generates:&#160;ComM_Init();&#160;<br/>
&#160;<br/>
&#160;&#160;Module needs to be initialized with NULL_PTR&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_EcuMs.html#100">The configuration items described in Ch.&#160;6.2.2.1.11&#160;must not be used&#160;</a><br/>
&#160;<br/>
Select in one of the DriverInitList the MSN and the Init&#160;Function to be used (e.g.&#160;<br/>Mcu_Init())&#160;<br/>
&#160;<br/>
Result:&#160;The ECUM generates: “Mcu_Init(NULL_PTR);” in the specified&#160;<br/>DriverInitList&#160;<br/>
&#160;<br/>
Additional to the&#160;AUTOSAR mechanism the MICROSAR implementation provides the&#160;<br/>possibility to insert any kind of function into&#160;a DriverInitList by using the “Code-Segment” in&#160;<br/>the driver init lists:&#160;<br/>
&#160;&#160;The function&#160;Mcu_InitClock()&#160;must be executed in one of the DriverInitLists:&#160;<br/>
&#160;<br/>
Select or type “Code” into “Module ID”&#160;<br/>
&#160;<br/>
The code which should be executed must be inserted into&#160;<br/>“EcuMAdditionalInitCode” parameter,&#160;e.g.&#160;Mcu_InitClock(0);&#160;<br/>
&#160;<br/>
Result:&#160;The ECUM generates: “Mcu_InitClock(0);”&#160; in the specified&#160;<br/>DriverInitList.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info&#160;<br/></b>Generally, every function which does not match to the standard&#160;AUTOSAR naming&#160;and&#160;<br/>
&#160;&#160;behavior must be initialized with use&#160;of a “Code-Segement”.&#160;For example:&#160;<br/>
&#160;&#160;Fee_30_Inst2_Init()&#160;<br/>
&#160;&#160;Fls_30_ADBus01_Init()&#160;<br/>
&#160;&#160;CanTrcv_30_Tja1041_Init()&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
42&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-43_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>4.8.2&#160;</b><br/>
<b>Initialization order&#160;</b><br/>
Depending on the modules which are used within the BSW&#160;stack the following example&#160;<br/>gives an overview of a possible initialization order.&#160;<br/>
<b>Initialization Group&#160;</b><br/>
<b>Comment&#160;</b><br/>
<b>DriverInitListZero&#160;</b><br/>
&#160;<br/>
Det_Init() &#160;<br/>
<b>DriverInitListOne&#160;</b><br/>
<b>&#160;</b><br/>
Mcu_Init() &#160;<br/>
Dem_PreInit() &#160;<br/>
Mcu_InitClock(0);&#160;<br/>
Sequence to initialize PLL&#160;clock&#160;<br/>
while(MCU_PLL_LOCKED != Mcu_GetPllStatus());&#160;<br/>
Mcu_DistributePllClock();&#160;<br/>
Port_Init() &#160;<br/>
<b>DriverInitListTwo&#160;</b><br/>
&#160;<br/>
Adc, Pwm, Icu, Spi, etc.&#160;<br/>
MCAL&#160;driver initialization&#160;<br/>
Eep&#160;<br/>
Memory stack&#160;initialization&#160;<br/>
Fls&#160;<br/>
Ea&#160;<br/>
Fee&#160;<br/>
NvM_Init()&#160;<br/>
NvM_ReadAll()&#160;<br/>
Read all sequence&#160;<br/>
{&#160;<br/>
&#160; NvM_RequestResultType blockStatus;&#160;<br/>
&#160; do&#160;<br/>
&#160; {&#160;<br/>
&#160; &#160; NvM_MainFunction();&#160;<br/>
&#160; &#160; Ea_MainFunction();&#160;<br/>
&#160; &#160; Fee_MainFunction();&#160;<br/>
&#160; &#160; Eep_MainFunction();&#160;<br/>
&#160; &#160; Fls_MainFunction();&#160;<br/>
&#160; &#160; NvM_GetErrorStatus(MultiBlockID,&amp;blockStatus);&#160;<br/>
&#160; } &#160;while (blockStatus&#160;==&#160;NVM_REQ_PENDING);&#160;<br/>
}&#160;<br/>
CanTrcv&#160;<br/>
CAN stack initialization&#160;<br/>
CanDrv&#160;<br/>
CanIf&#160;<br/>
LinTrcv&#160;<br/>
LIN stack initialization&#160;<br/>
LinDrv&#160;<br/>
&#160;<br/>
LinIf&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
43&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-44_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-44_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
LinIf_GotoSleepInternal&#160;<br/>
FrTrcv&#160;<br/>
Flexray stack initialization&#160;<br/>
FrDrv&#160;<br/>
FrIf&#160;<br/>
CanSM&#160;<br/>
Bus State Manager initialization&#160;<br/>
LinSM&#160;<br/>
FrSM&#160;<br/>
Com&#160;<br/>
&#160;<br/>
NmIf&#160;<br/>
NmCan&#160;<br/>
NmFr&#160;<br/>
ComM&#160;<br/>
DCM &#160;<br/>
DEM&#160;<br/>
Could also be&#160;initialized in&#160;DriverInitListThree&#160;<br/>
<b>DriverInitListThree&#160;</b><br/>
&#160;<br/>
DEM&#160;<br/>
Could also be&#160;initialized in&#160;DriverInitListTwo&#160;<br/>
Table 4-4&#160;&#160;&#160;initialization order&#160;<br/>
<b>4.9&#160;&#160;Handling of wakeup events after ShutdownOS()&#160;</b><br/>
When shutdown target ECUM_STATE_OFF is selected the ECUM waits in state&#160;<br/>ECUM_STATE_GO_OFF_ONE until&#160;the NVM has&#160;finished with writing&#160;NVRAM data. In&#160;<br/>this state the ECUM will react on occurring wakeup events.&#160;After the data is written the&#160;<br/>function ShutdownOS() will be&#160;executed and EcuM_AL_SwitchOff() will switch off the&#160;<br/>ECU, in this time space between&#160;wakeup&#160;events may occur and a ECU reset should be&#160;<br/>the desired reaction in most cases.&#160;The integrator is responsible to implement the desired&#160;<br/>behavior into EcuM_AL_SwitchOff().&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The integrator is responsible to implement the wakeup event reaction handling after&#160;<br/>
&#160;&#160;ECUM_STATE_GO_OFF_ONE is left.&#160;<br/>
<b>&#160;</b><br/>
<b>4.10&#160;&#160;Wakeup event handling and Wakeup Validation&#160;</b><br/>
The handling of wakeup sources and wakeup validation has&#160;to&#160;be configured and&#160;<br/>implemented specific&#160;for every ECU.&#160;The following list provides&#160;a&#160;short overview which&#160;<br/>callouts are affected: &#160;<br/>
&#160;&#160;EcuM_EnableWakeupSources(), refer to Ch.&#160;<a href="TechnicalReference_Asr_EcuMs.html#83">5.6.2.19&#160;</a><br/>
&#160;&#160;EcuM_DisableWakeupSources(), refer to Ch.&#160;<a href="TechnicalReference_Asr_EcuMs.html#84">5.6.2.20&#160;</a><br/>
&#160;&#160;EcuM_CheckWakeup(), refer to Ch.&#160;<a href="TechnicalReference_Asr_EcuMs.html#86">5.6.2.23&#160;</a><br/>
&#160;&#160;EcuM_ValidateW<a href="TechnicalReference_Asr_EcuMs.html#87">akeup(), refer to Ch.&#160;5.6.2.24&#160;</a><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
44&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-45_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;&#160;EcuM_StartWakeupSources(), refer to Ch.&#160;<a href="TechnicalReference_Asr_EcuMs.html#85">5.6.2.21&#160;</a><br/>
&#160;&#160;EcuM_StopWakeupSources(), refer to Ch.&#160;<a href="TechnicalReference_Asr_EcuMs.html#86">5.6.2.22&#160;</a><br/>
&#160;<br/>
The integration task is to fill these callouts with code which match the ECU specific&#160;<br/>requirements.&#160;To&#160;give an idea what must be&#160;implemented, the following paragraphs covers&#160;<br/>three use cases:&#160;<br/>
&#160;&#160;Wakeup after a physical sleep mode&#160;<br/>
&#160;&#160;Handling of&#160;wakeup events while ECUM is in&#160;RUN state&#160;<br/>
&#160;&#160;Wakeup validation of communication channels (ECUM in RUN state)&#160;<br/>
&#160;<br/>
<b>4.10.1&#160;&#160;Wakeup after a physical sleep mode&#160;</b><br/>
<b>4.10.1.1&#160;&#160;Use case description&#160;</b><br/>
A&#160;raising edge on an ICU channel shall bring the ECUM into RUN state.&#160;A&#160;wakeup source&#160;<br/>“ECUM_WKSOURCE_ICU_CH0”&#160;is configured for that.&#160;The name of the configured ICU&#160;<br/>channel is&#160;Icu_Channel0.&#160;No wakeup validation shall be performed&#160;on that wakeup event.&#160;<br/>This wakeup event is the only active&#160;wakeup event for the desired sleep mode.&#160;<br/>
<b>4.10.1.2&#160;&#160;Execution flow&#160;</b><br/>
&#160;&#160;ECUM is in ECUM_APP_RUN no further RUN requests are existent &#160;<br/>
&#160;&#160;ECUM transits from ECUM_APP_RUN to ECUM_APP_POST_RUN&#160;<br/>
&#160;<br/>
Callout EcuM_EnableWakeupSources() is executed. &#160;<br/>
&#160;&#160;ECUM transits further to ECUM_STATE_SLEEP&#160;(ECU is physically in sleep mode)&#160;<br/>
&#160;&#160;External event triggers ICU hardware to raise an interrupt&#160;<br/>
&#160;&#160;Callout EcuM_CheckWakeup() is executed by ISR&#160;<br/>
&#160;&#160;API function EcuM_SetWakeupEvent() is executed&#160;<br/>
&#160;&#160;ECUM executes implicitly EcuM_ValidateWakeupEvent() because wakeup event is&#160;<br/>
instantly valid&#160;<br/>
&#160;&#160;ECUM transits from ECUM_STATE_SLEEP&#160;until ECUM_STATE_WAKEUP_TWO&#160;<br/>
&#160;&#160;ECUM transits from ECUM_STATE_WAKEUP_TWO to ECUM_STATE_APP_RUN&#160;<br/>
&#160;<br/>
Callout EcuM_DisableWakeupSources() is executed&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
45&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-46_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>4.10.1.3&#160;&#160;Callout implementation examples&#160;</b><br/>
void EcuM_EnableWakeupSources(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;/* Check for each configured wakeup source the corresponding bit &#160;<br/>
&#160;&#160;&#160;* is set. Here the bit for the ICU wakeup source must be set&#160;<br/>
&#160;*/&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_ICU_CH0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160; Icu_EnableNotification(Icu_Channel0);&#160;<br/>
&#160; Icu_EnableWakeup(Icu_Channel0);&#160;<br/>
&#160; Icu_SetMode(ICU_MODE_SLEEP);&#160;<br/>
&#160;}&#160;<br/>
&#160;&#160;/* … */&#160;<br/>
}&#160;<br/>
&#160;<br/>
void EcuM_CheckWakeup(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_ICU_CH0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;/* no validation necessary, so call EcuM_SetWakeupEvent() */&#160;<br/>
&#160; &#160;EcuM_SetWakeupEvent(ECUM_WKSOURCE_ICU_CH0);&#160;<br/>
&#160;}&#160;<br/>
&#160;&#160;/* … */&#160;<br/>
}&#160;<br/>
&#160;<br/>
void EcuM_DisableWakeupSource(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_ICU_CH0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160; Icu_DisableNotification(Icu_Channel0);&#160;<br/>
&#160; Icu_DisableWakeup(Icu_Channel0);&#160;<br/>
&#160; Icu_SetMode(ICU_MODE_NORMAL);&#160;<br/>
&#160;}&#160;<br/>
&#160;<br/>
}&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
46&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-47_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
<b>4.10.2&#160;&#160;Handling of wakeup events while ECUM is in RUN state&#160;</b><br/>
For this use case it is assumed that wakeup events which occur while ECUM is in RUN&#160;<br/>state are caused by communication channels.&#160;<br/>
<b>4.10.2.1&#160;&#160;Use case description&#160;</b><br/>
A&#160;wakeup capable CAN hardware is assumed.&#160;A&#160;message on a CAN channel shall be&#160;<br/>recognized and set the CAN channel into normal operation mode (which will be triggered&#160;<br/>by COMM).&#160;A&#160;wakeup source ECUM_WKSOURCE_CAN0 is&#160;configured for that. No&#160;<br/>wakeup validation will be performed. &#160;<br/>
<b>4.10.2.2&#160;&#160;Execution flow&#160;</b><br/>
&#160;&#160;ECUM is in RUN state and the CAN channel&#160;is in sleep state and is able to detect&#160;<br/>
wakeup events&#160;<br/>
&#160;&#160;Callout EcuM_CheckWakeup() is executed by ISR&#160;<br/>
&#160;&#160;API EcuM_SetWakeupEvent() is executed&#160;<br/>
&#160;&#160;ECUM executes implicitly executed ComM_WakeUpIndication() and&#160;<br/>
EcuM_ValidateWakeupEvent() because wakeup event is instantly valid.&#160;<br/>
<b>4.10.2.3&#160;&#160;Callout implementation examples&#160;</b><br/>
void EcuM_CheckWakeup(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_CAN0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;/* check if the underlaying driver has a wakeup event detected. &#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;* CanIf will execute EcuM_SetWakeupEvent() in this case.&#160;<br/>
&#160;*/&#160;<br/>
&#160; &#160;CanIf_CheckWakeup(ECUM_WKSOURCE_CAN0);&#160;<br/>
&#160;}&#160;<br/>
&#160;<br/>
}&#160;<br/>
<b>4.10.3&#160;&#160;Wakeup validation of communication&#160;channels (ECUM in RUN state)&#160;</b><br/>
<b>4.10.3.1&#160;&#160;Use case description&#160;</b><br/>
The same prerequisites as specified in Ch.<a href="TechnicalReference_Asr_EcuMs.html#47">&#160;4.10.2.1 apply</a>,&#160;but the wakeup event must be&#160;<br/>validated.&#160;<br/>
<b>4.10.3.2&#160;&#160;Execution flow&#160;</b><br/>
&#160;&#160;ECUM is in RUN state and the CAN channel&#160;is in sleep state and is able to detect&#160;<br/>
wakeup events&#160;<br/>
&#160;&#160;Callout EcuM_CheckWakeup() is executed by ISR&#160;<br/>
&#160;&#160;API EcuM_SetWakeupEvent() is&#160;executed, ECUM starts&#160;wakeup validation timeout&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
47&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-48_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;&#160;EcuM_MainFunction() triggered by SCHM&#160;<br/>
&#160;<br/>
(a) ECUM detects a pending wakeup event and executes callout&#160;<br/>EcuM_StartWakeupSources ()&#160;<br/>
&#160;<br/>
(b) ECUM executes callout&#160;EcuM_CheckValidation()&#160;<br/>
&#160;<br/>
Note: step (b) may be executed several&#160;times, with each EcuM_MainFunction()&#160;<br/>call until the wakeup event is&#160;validated or expired, but&#160;<br/>EcuM_StartWakeupSources() is executed only once.&#160;<br/>
&#160;&#160;Case Validation successful:&#160;<br/>
&#160;<br/>
API EcuM_ValidateWakeupEvent() is executed, ECUM implicitly executed&#160;<br/>ComM_WakeUpIndication()&#160;<br/>
&#160;<br/>
EcuM_MainFunction() triggered by SCHM&#160;<br/>
&#160;<br/>
ECUM stops validation timeout&#160;<br/>
&#160;&#160;Case Validation failed:&#160;<br/>
&#160;<br/>
ECUM executes callout EcuM_StopWakeupSources()&#160;<br/>
&#160;<br/>
No further wakeup related actions performed&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
48&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-49_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>4.10.3.3&#160;&#160;Callout implementation examples&#160;</b><br/>
void EcuM_CheckWakeup(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_CAN0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160; &#160;CanIf_CheckWakeup(ECUM_WKSOURCE_CAN0);&#160;<br/>
&#160;}&#160;<br/>
&#160;<br/>
}&#160;<br/>
&#160;<br/>
void EcuM_StartWakeupSources(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_CAN0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160; &#160; &#160;/* determine in which is the current Can Controller state */&#160;<br/>
&#160; &#160; &#160;(void)CanIf_GetControllerMode(0, &amp;CanIfCtrlMode);&#160;<br/>
&#160; &#160; &#160;/* in case the Can Controller is not CANIF_CS_STARTED*/&#160;<br/>
&#160; &#160; &#160;if (CANIF_CS_STARTED != CanIfCtrlMode)&#160;<br/>
&#160; &#160; &#160;{&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;/* Set the controller and transceiver mode into normal operation mode*/&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;CanIf_SetTransceiverMode(0, CANIF_TRCV_MODE_NORMAL); &#160;&#160;<br/>
&#160; &#160;CanIf_SetControllerMode(0, CANIF_CS_STOPPED);&#160;<br/>
&#160; &#160;CanIf_SetControllerMode(0, CANIF_CS_STARTED);&#160;&#160;&#160;<br/>
}&#160;<br/>
else&#160;<br/>
{&#160;<br/>
&#160; &#160; /* Stack already up and running */&#160;<br/>
}&#160;<br/>
&#160;}&#160;&#160;&#160;<br/>
}&#160;<br/>
&#160;<br/>
void EcuM_CheckValidation(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_CAN0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;/* Query the driver if the wakeup event was valid */&#160;<br/>
&#160; &#160;CanIf_CheckValidation(ECUM_WKSOURCE_CAN0);&#160;<br/>
&#160;}&#160;<br/>
&#160;<br/>
}&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
49&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-50_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-50_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
void EcuM_StopWakeupSources(EcuM_WakeupSourceType wakeupSource)&#160;<br/>
{&#160;<br/>
&#160;&#160;if ((wakeupSource &amp; ECUM_WKSOURCE_CAN0) != 0)&#160;<br/>
&#160;{&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;/* validation was not successful, set the CAN controller and&#160;<br/>
&#160;* Transceiver back to sleep mode. &#160;<br/>
&#160;*/&#160;<br/>
CanIf_SetControllerMode(0, CANIF_CS_STOPPED);&#160;<br/>
CanIf_SetControllerMode(0, CANIF_CS_SLEEP);&#160;<br/>
CanIf_SetTransceiverMode(0, CANIF_TRCV_MODE_STANDBY);&#160;<br/>
&#160;}&#160;<br/>
&#160;<br/>
}&#160;<br/>
&#160;<br/>
<b>4.10.4&#160;&#160;Notes to Mcu_SetMode()&#160;</b><br/>
The execution of&#160;Mcu_SetMode()&#160;to enter sleep mode is one&#160;of the crucial actions which&#160;<br/>are performed by ECUM.&#160;The&#160;AUTOSAR specifications are not so exact specified so that&#160;<br/>every MCU driver supplier has the same knowledge which implicit requirements have to be&#160;<br/>supported by the MCU driver. &#160;<br/>
Important to know is&#160;that&#160;the ECUM should call&#160;Mcu_SetMode()&#160;with global locked&#160;<br/>interrupts, this can be configured with the second critical<a href="TechnicalReference_Asr_EcuMs.html#40">&#160;section described in &#160;4.7.&#160;</a><br/>
If MCU driver supplier specific&#160;action are necessary, a possibility must be given to add&#160;<br/>them before and after the&#160;Mcu_SetMode()&#160;call.&#160;&#160;Therefore the&#160;Mcu_SetMode()&#160;is&#160;<br/>called within the callout&#160;EcuM_McuSetMode.&#160;This callout is always available, it can not&#160;be&#160;<br/>disabled. &#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>Use this functionality with care. &#160;&#160;<br/>
<b>&#160;&#160;</b>It is not allowed to remove the&#160;Mcu_SetMode&#160;function call from callout.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>4.11&#160;&#160;Multiple Identity&#160;ECUs&#160;</b><br/>
<b>4.11.1&#160;&#160;Restrictions when implementation variant PreCompile is&#160;used&#160;</b><br/>
The following restrictions exists&#160;if the ECUM shall be used for initializing multiple identity&#160;<br/>ECUs when the implementation variant PreCompile is used.&#160;To&#160;use the ECUM in&#160;<br/>implementation variant PreCompile is not the normal use case for such ECUs but might be&#160;<br/>considered to reduce ECU resources.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
50&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-51_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-51_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>4.11.1.1&#160;&#160;Initialization&#160;</b><br/>
The description in Ch&#160;<a href="TechnicalReference_Asr_EcuMs.html#41">4.8 does not apply</a>.&#160;The user is&#160;responsible to implement&#160;the&#160;<br/>distinction which identity is currently selected and which modules&#160;initialization applies. It is&#160;<br/>recommended to use the “Code” segment which can be selected in the DriverInitLists for&#160;<br/>this task.&#160;<br/>
<b>4.11.1.2&#160;&#160;EcuM configuration &#160;</b><br/>
If several multiple configuration containers (“/MICROSAR/EcuM/EcuMConfiguration”)&#160;<br/>within the ECUM configuration exist, the ECUM&#160;uses the first multiple configuration&#160;<br/>container as reference for its generation.&#160;<br/>
This implies that some configuration parameters cannot differ between the configuration&#160;<br/>sets, e.g.:&#160;<br/>
&#160;&#160;Sleep modes&#160;<br/>
&#160;&#160;Wakeup Sources&#160;<br/>
&#160;&#160;ECUM Users&#160;<br/>
&#160;&#160;ComM channels&#160;<br/>
&#160;&#160;TTII successors and divisors&#160;<br/>
&#160;&#160;DriverInitLists&#160;<br/>
&#160;&#160;All configuration parameters which are specified within the&#160;<br/>
“/MICROSAR/EcuM/EcuMConfiguration” – container.&#160;<br/>
<b>4.12&#160;&#160;Generated Template Files&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info&#160;<br/></b>This chapter&#160;is only applicable if DaVinci Configurator is used&#160;for ECUM generation.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
A&#160;generated template file in this&#160;document is a file which:&#160;<br/>
&#160;&#160;is generated by the generation tool&#160;at every generation process &#160;<br/>
&#160;&#160;the user can modify this&#160;template for his needs &#160;<br/>
&#160;&#160;the changes made by the user&#160;will not be overwritten at the next generation process&#160;<br/>
&#160;<br/>
In order not to overwrite the&#160;changes made by the user, the template file contains special&#160;<br/>comments, where the user must insert his code in between.&#160;The comments have the&#160;<br/>following format:&#160;<br/>
/**********************************************************************************&#160;<br/>&#160;* DO NOT CHANGE THIS COMMENT! &lt;USERBLOCK $Variable_Name&gt; DO NOT CHANGE THIS COMMENT &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;<br/>***********************************************************************************/&#160;<br/>&#160;<br/>/**********************************************************************************&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
51&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-52_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-52_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;* DO NOT CHANGE THIS COMMENT! &lt;/USERBLOCK&gt; DO NOT CHANGE THIS COMMENT &#160; &#160;&#160;<br/>***********************************************************************************/&#160;<br/>&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>Do not modify or delete the comments. &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>Example:&#160;</b><br/>
The following example explains where code could be implemented:&#160;<br/>
FUNC(void, ECUM_CODE) EcuM_OnEnterRun(void)&#160;<br/>{&#160;<br/>&#160;&#160;/* A */&#160;<br/>/***************************************************************************************&#160;<br/>&#160;* DO NOT CHANGE THIS COMMENT! &#160;&lt;USERBLOCK EcuM_OnEnterRun&gt; &#160;DO NOT CHANGE THIS COMMENT!&#160;<br/>&#160;**************************************************************************************/&#160;<br/>&#160;&#160;/* B */&#160;<br/>&#160;&#160;return;&#160;<br/>/***************************************************************************************&#160;<br/>&#160;* DO NOT CHANGE THIS COMMENT! &#160;&lt;/USERBLOCK&gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; DO NOT CHANGE THIS COMMENT!&#160;<br/>&#160;***************************************************************************************/&#160;<br/>&#160;<br/>&#160;&#160;/* C */&#160;<br/>}&#160;/* End of EcuM_OnEnterRun() */&#160;<br/>
&#160;<br/>A and C: all modifications before and after will be deleted at the next generation process&#160;<br/>
B: all modifications will not be deleted&#160;<br/>
&#160;<br/>&#160;<br/>The ECUM&#160;provides the following generated template files:&#160;<br/>
&#160;&#160;EcuM_Callout_Stubs.c &#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
52&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-53_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5&#160;&#160;API Description&#160;</b><br/>
<b>5.1&#160;</b><br/>
<b>Interfaces Overview&#160;</b><br/>
<a href="TechnicalReference_Asr_EcuMs.html#16">See chapter&#160;2.1.&#160;</a><br/>
<b>5.2&#160;&#160;Type Definitions&#160;</b><br/>
ECUM types are described in the following tables:&#160;<br/>
<b>Type Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value Range&#160;</b><br/>
EcuM_StateType&#160;&#160;uint8&#160;<br/>
Encodes all&#160;states and&#160;&#160;ECUM_SUBSTATE_MASK &#160;<br/>sub states provided by&#160;&#160;Get the current state by&#160;ANDing the state&#160;<br/>
the ECU State&#160;<br/>
with this mask.&#160;All&#160;states are delivered&#160;<br/>
Manager&#160;<br/>
including substates.&#160;<br/>
ECUM_STATE_STARTUP&#160;<br/>
STARTUP&#160;super state&#160;<br/>
ECUM_STATE_STARTUP_ONE&#160;<br/>
Initialization&#160;of drivers which don’t need OS&#160;<br/>support&#160;<br/>
ECUM_STATE_STARTUP_TWO&#160;<br/>
Initialization&#160;of drivers which need OS&#160;<br/>support&#160;<br/>
ECUM_STATE_WAKEUP&#160;<br/>
WAKEUP&#160;super state&#160;<br/>
ECUM_STATE_WAKEUP_ONE&#160;<br/>
Reinitializing of drivers for normal&#160;<br/>operation&#160;<br/>
ECUM_STATE_WAKEUP_VALIDATION&#160;<br/>
Waits for validation of a&#160;wakeup event&#160;<br/>
ECUM_STATE_WAKEUP_REACTION&#160;<br/>
Computes the appropriate wakeup reaction<br/>
ECUM_STATE_WAKEUP_TWO&#160;<br/>
Prepares the ECU for RUN state&#160;<br/>
ECUM_STATE_WAKEUP_WAKESLEEP&#160;<br/>
A&#160;short system phase where the ECU&#160;<br/>transit from a wakeup directly to sleep&#160;<br/>again&#160;<br/>
ECUM_STATE_WAKEUP_TTII&#160;<br/>
Performs the&#160;TTII protocol&#160;<br/>
ECUM_STATE_RUN&#160;<br/>
Normal ECU operation super state&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
53&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-54_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Type Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value Range&#160;</b><br/>
ECUM_STATE_APP_RUN&#160;<br/>
ECU is in normal operation state&#160;<br/>
ECUM_STATE_APP_POST_RUN&#160;<br/>
ECU performs POST&#160;RUN activities&#160;<br/>
ECUM_STATE_SHUTDOWN&#160;<br/>
Shutdown super state&#160;<br/>
ECUM_STATE_PREP_SHUTDOWN&#160;<br/>
Prepares the ECU for the following&#160;<br/>shutdown sequence&#160;<br/>
ECUM_STATE_GO_SLEEP&#160;<br/>
Activation of the wakeup sources&#160;<br/>
ECUM_STATE_GO_OFF_ONE&#160;<br/>
Shutdown of&#160;system services&#160;<br/>
ECUM_STATE_GO_OFF_TWO&#160;<br/>
Performs a RESET&#160;or switches of the ECU<br/>
ECUM_STATE_SLEEP&#160;<br/>
ECU is in sleep state (this information&#160;<br/>cannot be retrieved&#160;<br/>
ECUM_STATE_OFF&#160;<br/>
ECU is without power supply (this&#160;<br/>information cannot be retrieved)&#160;<br/>
EcuM_UserType&#160;&#160;uint8&#160;<br/>
ID of the User which&#160;<br/>
0..255&#160;<br/>
are able to request&#160;<br/>
The Range depends on&#160;the number of&#160;<br/>
RUN state.&#160;Each user&#160;<br/>
configured users&#160;<br/>
must have a&#160;unique Id.<br/>
EcuM_WakeupS<br/>
uint32&#160;<br/>
Each bit in this type&#160;<br/>
ECUM_WKSOURCE_POWER &#160;<br/>
ourceType&#160;<br/>
identifies a&#160;wakeup&#160;<br/>
Identifies a&#160;power on reset (bit 0)&#160;<br/>
source.&#160;<br/>
ECUM_WKSOURCE_RESET&#160;<br/>
Identifies a&#160;hardware reset (bit 1)&#160;<br/>
ECUM_WKSOURCE_INTERNAL_RESET &#160;<br/>
Identifies resets&#160;which only reset the core&#160;<br/>of the microcontroller but not the&#160;<br/>peripherals.&#160;This source&#160;also indicates&#160;<br/>unhandled exceptions (bit 2)&#160;<br/>
ECUM_WKSOURCE_INTERNAL_WDG &#160;<br/>
Identifies a reset by internal watchdog (bit&#160;<br/>3)&#160;<br/>
ECUM_WKSOURCE_EXTERNAL_WDG &#160;<br/>
Identifies a reset by external watchdog (bit&#160;<br/>4). (This is&#160;only possible&#160;if the hardware&#160;<br/>supports&#160;this feature)&#160;<br/>
...&#160;<br/>
Can be extended by configuration&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
54&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-55_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-55_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Type Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value Range&#160;</b><br/>
ECUM_WKSOURCE_ALL_SOURCES &#160;<br/>
Identifies each wakeup source&#160;<br/>
ECUM_WKSOURCE_NONE &#160;<br/>
Value 0.&#160;This is a MICROSAR ECUM&#160;<br/>extension and identifies an invalid wakeup&#160;<br/>source.&#160;<br/>
EcuM_WakeupSt&#160;uint8&#160;<br/>
The type describes&#160;<br/>
ECUM_WKSTATUS_NONE &#160;<br/>
atusType&#160;<br/>
possible outcomes of&#160;<br/>
No pending wakeup was detected&#160;<br/>
the WAKEUP&#160;<br/>
ECUM_WKSTATUS_PENDING &#160;<br/>
VALIDATION state.&#160;<br/>
The wakeup event was detected but&#160;not&#160;<br/>yet validated&#160;<br/>
ECUM_WKSTATUS_VALIDATED &#160;<br/>
The wakeup event is valid&#160;<br/>
ECUM_WKSTATUS_EXPIRED &#160;<br/>
The wakeup event has not been validated&#160;<br/>and has expired before.&#160;<br/>
EcuM_WakeupR&#160;uint8&#160;<br/>
The describes the&#160;<br/>
ECUM_WKACT_RUN &#160;<br/>
eactionType&#160;<br/>
possible outcomes of&#160;<br/>
Transit into&#160;RUN state&#160;<br/>
the WAKEUP&#160;<br/>
ECUM_WKACT_TTII &#160;<br/>
REACTION state&#160;<br/>
Execute the&#160;TTII protocol&#160;<br/>
ECUM_WKACT_SHUTDOWN &#160;<br/>
Directly transit to shutdown&#160;<br/>
EcuM_BootTarge&#160;uint8&#160;<br/>
Defines the&#160;boot target&#160;&#160;ECUM_BOOT_TARGET_APP &#160;<br/>
tType&#160;<br/>
which should be&#160;<br/>
Boot into application mode&#160;<br/>
chosen in the next&#160;<br/>
ECUM_BOOT_TARGET_BOOTLOADER &#160;<br/>
start up.&#160;<br/>
Boot into boot loader mode&#160;<br/>
Table 5-1&#160;&#160;&#160;Type definitions&#160;<br/>
<b>5.3&#160;&#160;Services provided by&#160;ECUM&#160;</b><br/>
The ECUM&#160;API consists of services, which are realized by function calls.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>Most of the following&#160;API functions report errors as&#160;listed&#160;in chapter&#160;<a href="TechnicalReference_Asr_EcuMs.html#23">3.6.1.&#160;</a>If an error is&#160;<br/>
&#160;&#160;detected the&#160;concerning&#160;API function will be left&#160;without any further actions.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>5.3.1&#160;</b><br/>
<b>EcuM_Init&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_Init&#160;</b>( void )&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
55&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-56_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-56_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;initializes the&#160;ECUM and&#160;initializes basic drivers. In this function drivers which are configured&#160;<br/>in DriverInitListZero and&#160;DriverInitListOne will be initialized.&#160;At the end of this function&#160;StartOS()&#160;is called&#160;<br/>and therefore&#160;this function&#160;never returns.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called by an application.&#160;<br/>
Table 5-2&#160;&#160;&#160;EcuM_Init&#160;<br/>
<b>5.3.2&#160;</b><br/>
<b>EcuM_Shutdown&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_Shutdown&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
Void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;performs a&#160;reset or&#160;switches&#160;off the ECU (depending&#160;on&#160;which shutdown target is&#160;currently&#160;<br/>chosen). If the ECU&#160;should be switched&#160;off the callout&#160;EcuM_AL_SwitchOff()&#160;must implement the&#160;<br/>specific code.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>This function shall be&#160;called inside the OS&#160;ShutdownHook()&#160;routine.&#160;The&#160;<br/>
&#160;&#160;integrator is&#160;responsible&#160;to perform this task.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called by an application.&#160;<br/>
Table 5-3&#160;&#160;&#160;EcuM_Shutdown&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
56&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-57_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-57_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.3&#160;</b><br/>
<b>EcuM_GetVersionInfo&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_GetVersionInfo&#160;</b>( Std_VersionInfoType *versioninfo )&#160;<br/>
<b>Parameter&#160;</b><br/>
versioninfo&#160;<br/>
Pointer with the version information&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service returns the version information of the ECU State Manager.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;available, dependently on&#160;ECUM_VERSION_INFO_API.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called by an application.&#160;<br/>
Table 5-4&#160;&#160;&#160;EcuM_GetVersionInfo&#160;<br/>
<b>5.3.4&#160;</b><br/>
<b>EcuM_RequestRUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_RequestRUN&#160;</b>( EcuM_UserType user )&#160;<br/>
<b>Parameter&#160;</b><br/>
user&#160;<br/>
User ID&#160;which requests&#160;the RUN state&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Request accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Request not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
Places&#160;a RUN request for this user. Users are normally&#160;application and resource&#160;manager like&#160;<br/>Communication Manager.&#160;The tracking&#160;of the requests is specific for each user. &#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>RUN request will be ignored after an&#160;API call to&#160;EcuM_KillAllRUNRequest().&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-5&#160;&#160;&#160;EcuM_RequestRUN&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
57&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-58_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.5&#160;</b><br/>
<b>EcuM_ReleaseRUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_ReleaseRUN&#160;</b>( EcuM_UserType user )&#160;<br/>
<b>Parameter&#160;</b><br/>
user&#160;<br/>
User ID&#160;which releases&#160;the run request&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Release accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Release not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
Releases the&#160;RUN request previously done with a call to&#160;EcuM_RequestRUN().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-6&#160;&#160;&#160;EcuM_ReleaseRUN&#160;<br/>
<b>5.3.6&#160;</b><br/>
<b>EcuM_ComM_RequestRUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_ComM_RequestRUN&#160;</b>( NetworkHandleType channel )&#160;<br/>
<b>Parameter&#160;</b><br/>
channel&#160;<br/>
ID of the communication channel requesting the RUN state.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Request accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Request not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;shall be&#160;used&#160;by the Com Manager to&#160;request RUN&#160;state.&#160;The behavior is identical to&#160;<br/>EcuM_RequestRUN().RUN request will be ignored&#160;after an&#160;API call to&#160;EcuM_KillAllRUNRequest().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
&#160;<br/>
The configured&#160;communication channels are obtained&#160;from the ECUC file.&#160;This means that a valid&#160;<br/>
COMM configuration&#160;must be&#160;available&#160;at generation&#160;time of the ECUM.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-7&#160;&#160;&#160;EcuM_ComM_RequestRUN&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
58&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-59_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.7&#160;</b><br/>
<b>EcuM_ComM_ReleaseRUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_ComM_ReleaseRUN&#160;</b>( NetworkHandleType channel )&#160;<br/>
<b>Parameter&#160;</b><br/>
channel&#160;<br/>
ID of the communication channel requesting the RUN state.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Request accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Request not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
Releases the&#160;RUN request previously done with a call to&#160;EcuM_ComM_RequestRUN().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
&#160;<br/>
The configured&#160;communication channels are obtained&#160;from the ECUC file.&#160;This means that a valid&#160;<br/>
COMM configuration&#160;must be&#160;available&#160;at generation&#160;time of the ECUM.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-8&#160;&#160;&#160;EcuM_ComM_ReleaseRUN&#160;<br/>
<b>5.3.8&#160;</b><br/>
<b>EcuM_ComM_HasRequestedRUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Boolean&#160;<b>EcuM_ComM_HasRequestedRUN&#160;</b>( EcuM_ChannelHandleType channel )&#160;<br/>
<b>Parameter&#160;</b><br/>
channel&#160;<br/>
ID of the communication channel requesting the RUN state.&#160;<br/>
<b>Return code&#160;</b><br/>
TRUE&#160;<br/>
the channel has requested&#160;RUN state&#160;<br/>
FALSE&#160;<br/>
the channel has not requested RUN state&#160;<br/>
<b>Functional Description&#160;</b><br/>
This service&#160;returns&#160;TRUE&#160;if the channel given as&#160;parameter has actually requested RUN&#160;state,&#160;the service&#160;<br/>returns&#160;FALSE&#160;in the other case.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
&#160;<br/>
The configured&#160;communication channels are obtained&#160;from the ECUC file.&#160;This means that a valid&#160;<br/>
COMM configuration&#160;must be&#160;available&#160;at generation&#160;time of the ECUM.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-9&#160;&#160;&#160;EcuM_ComM_HasRequestedRUN&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
59&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-60_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.9&#160;</b><br/>
<b>EcuM_RequestPOST_RUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_RequestPOST_RUN&#160;</b>( EcuM_UserType user )&#160;<br/>
<b>Parameter&#160;</b><br/>
User&#160;<br/>
User ID&#160;which requests&#160;the post run request.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Request accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Request not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
Places&#160;a POST&#160;RUN request for this user. Users are&#160;normally application and resource manager like COM&#160;<br/>Manager.&#160;The tracking of the requests&#160;are specific&#160;for each user. POST&#160;RUN request will be ignored after&#160;<br/>an&#160;API call to&#160;EcuM_KillAllRUNRequest().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-10&#160;EcuM_RequestPOST_RUN&#160;<br/>
<b>5.3.10&#160;&#160;EcuM_ReleasePOST_RUN&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_ReleasePOST_RUN&#160;</b>( EcuM_UserType user )&#160;<br/>
<b>Parameter&#160;</b><br/>
User&#160;<br/>
User ID&#160;which releases&#160;the post run request&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Release accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Release not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
Releases POST&#160;RUN requests previously&#160;done with a&#160;call to&#160;EcuM_RequestPOST_RUN().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-11&#160;&#160;EcuM_ReleasePOST_RUN&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
60&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-61_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-61_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-61_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.11&#160;&#160;EcuM_KillAllRUNRequests&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_KillAllRUNRequests&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Deletes all RUN and POST&#160;RUN requests and initiates an ECU reset. &#160;&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>&#160;<br/>
&#160;&#160;&#160;&#160;This service was introduced for the&#160;Com Manager to perform software&#160;<br/>
resets in the case of network errors. Only the Com Manager should use&#160;<br/>this service.&#160;<br/>
&#160;&#160;After a call to this function all RUN requests will be rejected and wakeup&#160;<br/>
events will be ignored.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;</b><br/>
&#160;&#160;<b>&#160;EcuM_KillAllRunRequests:</b>&#160;<br/>
&#160;<br/>
&#160;&#160;its usage is&#160;only intended for emergency shutdown&#160;<br/>
&#160;&#160;it sets the shutdown target to RESET&#160;<br/>
&#160;&#160;this shutdown target cannot be modified because:&#160;<br/>
EcuM_SelectShutDownTarget&#160;checks whether&#160;EcuM_KillAllRunRequest<br/>was called before and in this case the function is left&#160;with NOT_OK&#160;<br/>
EcuM_SelectShutDownTarget&#160;call before&#160;EcuM_KillAllRunRequest<br/>
is&#160;<br/>
called makes no sense, because the shutdown target will be modified to&#160;<br/>RESET&#160;within EcuM_KillAllRunRequest.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;available, dependently on&#160;ECUM_KILL_ALL_RUNREQUEST_API.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-12&#160;EcuM_KillAllRUNRequests&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
61&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-62_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-62_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.12&#160;&#160;EcuM_SelectShutdownTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_SelectShutdownTarget&#160;</b>( EcuM_StateType target,&#160;<br/>
&#160; &#160; uint8 mode )&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
The selected&#160;shutdown target must be one of:&#160;<br/>
&#160;<br/>
ECUM_STATE_SLEEP&#160;<br/>
&#160;<br/>
ECUM_STATE_RESET&#160;<br/>
&#160;<br/>
ECUM_STATE_OFF&#160;<br/>
mode&#160;<br/>
If the selected&#160;target is&#160;ECUM_STATE_SLEEP&#160;this parameter is&#160;an index into&#160;<br/>the selected&#160;sleep mode. If the selected&#160;target is not&#160;ECUM_STATE_SLEEP&#160;<br/>this parameter will be ignored, so the value of the parameter does not matter.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
the shutdown&#160;target was accepted &#160;<br/>
E_NOT_OK&#160;<br/>
the shutdown&#160;target was not accepted&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service selects a shutdown target in which the shutdown&#160;sequence should&#160;switch.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>This&#160;service can only be used while the ECUM is&#160;in RUN&#160;state in order to enable&#160;the wakeup&#160;<br/>
&#160;&#160;sources.&#160;Please refer to&#160;<a href="TechnicalReference_Asr_EcuMs.html#83">5.6.2.19&#160;EcuM_EnableWakeupSources&#160;for more information.&#160;</a><br/>
<b>&#160;</b><br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
&#160;<br/>
The ECU State Manager does not define any mechanism to resolve issues arising from parallel&#160;<br/>
requests. It is rather assumed that&#160;there&#160;will be one application which is ECU&#160;specific and handles these&#160;<br/>kinds of&#160;issues.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-13&#160;EcuM_SelectShutdownTarget&#160;<br/>
<b>5.3.13&#160;&#160;EcuM_GetState&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_GetState&#160;</b>( EcuM_StateType *state )&#160;<br/>
<b>Parameter&#160;</b><br/>
state&#160;<br/>
Reference to the current state of the ECUM.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
The parameter state was&#160;not a&#160;NULL_PTR.&#160;<br/>
E_NOT_OK&#160;<br/>
The parameter state was&#160;a&#160;NULL_PTR.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
62&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-63_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
Returns the&#160;current module state of the ECUM.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called by an application.&#160;<br/>
Table 5-14&#160;EcuM_GetState&#160;<br/>
<b>5.3.14&#160;&#160;EcuM_GetShutdownTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_GetShutdownTarget&#160;</b>( EcuM_StateType *target,&#160;<br/>
&#160; &#160; uint8 *sleepmode )&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
One of these values:&#160;<br/>
&#160;<br/>
ECUM_STATE_SLEEP&#160;<br/>
&#160;<br/>
ECUM_STATE_RESET&#160;<br/>
&#160;<br/>
ECUM_STATE_OFF&#160;<br/>
sleepmode&#160;<br/>
If the target is&#160;ECUM_STATE_SLEEP&#160;the index of the chosen&#160;sleep mode is&#160;<br/>returned else&#160;sleep mode is&#160;always set to 0.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
both parameters&#160;where not&#160;NULL_PTR&#160;&#160;&#160;<br/>
E_NOT_OK&#160;<br/>
both parameters&#160;where&#160;NULL_PTR&#160;<br/>
<b>Functional Description&#160;</b><br/>
Returns the&#160;current selected&#160;shutdown target.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-15&#160;EcuM_GetShutdownTarget&#160;<br/>
<b>5.3.15&#160;&#160;EcuM_GetLastShutdownTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_GetLastShutdownTarget&#160;</b>( EcuM_StateType *target,&#160;<br/>
&#160; &#160; uint8 *sleepmode )&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
63&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-64_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
One of these values:&#160;<br/>
&#160;<br/>
ECUM_STATE_SLEEP&#160;<br/>
&#160;<br/>
ECUM_STATE_RESET&#160;<br/>
&#160;<br/>
ECUM_STATE_OFF&#160;<br/>
sleepmode&#160;<br/>
If the target is&#160;ECUM_STATE_SLEEP&#160;the index of the chosen&#160;sleep&#160;mode is&#160;<br/>returned else&#160;sleep mode is&#160;always set to 0.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
both parameters&#160;where not&#160;NULL_PTR&#160;&#160;&#160;<br/>
E_NOT_OK&#160;<br/>
both parameters&#160;where&#160;NULL_PTR&#160;<br/>
<b>Functional Description&#160;</b><br/>
The return value describes the ECU state from which&#160;the last wakeup or power up occurred.&#160;This function&#160;<br/>always&#160;shall return the&#160;same&#160;value until the next shutdown.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-16&#160;EcuM_GetLastShutdownTarget&#160;<br/>
<b>5.3.16&#160;&#160;EcuM_GetPendingWakeupEvents&#160;</b><br/>
<b>Prototype&#160;</b><br/>
EcuM_WakeupSourceType&#160;<b>EcuM_GetPendingWakeupEvents&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
EcuM_WakeupSourceType&#160;<br/>
Every bit set in the return value indicates a wakeup&#160;source where the&#160;<br/>validation is in&#160;progress.&#160;<br/>
<b>Functional Description&#160;</b><br/>
Returns all&#160;wakeup events where the validation is in progress.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant and non interruptible.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in interrupt context.&#160;<br/>
Table 5-17&#160;EcuM_GetPendingWakeupEvents&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
64&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-65_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.17&#160;&#160;EcuM_ClearWakeupEvent&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_ClearWakeupEvent&#160;</b>( EcuM_WakeupSourceType sources )&#160;<br/>
<b>Parameter&#160;</b><br/>
Sources&#160;<br/>
Every wakeup&#160;source set in&#160;the value will be cleared&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
-- &#160;<br/>
<b>Functional Description&#160;</b><br/>
Clears the pending, validated and expired wakeup&#160;events&#160;which are passed by the parameter.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant and non interruptible.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in interrupt context.&#160;<br/>
Table 5-18&#160;EcuM_GetPendingWakeupEvents&#160;<br/>
<b>5.3.18&#160;&#160;EcuM_GetValidatedWakeupEvents&#160;</b><br/>
<b>Prototype&#160;</b><br/>
EcuM_WakeupSourceType&#160;<b>EcuM_GetValidatedWakeupEvents&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
EcuM_WakeupSourceType&#160;<br/>
ID of the wakeup source&#160;which&#160;caused the wakeup of&#160;the ECU.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;returns&#160;wakeup event which causes&#160;the&#160;wakeup&#160;of the microcontroller&#160;from the previous&#160;sleep&#160;<br/>mode.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant and non interruptible.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;available, dependently on&#160;ECUM_GET_VALIDATED_WAKEUP_EVENTS_API.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-19&#160;EcuM_GetValidatedWakeupEvents&#160;<br/>
<b>5.3.19&#160;&#160;EcuM_GetExpiredWakeupEvents&#160;</b><br/>
<b>Prototype&#160;</b><br/>
EcuM_WakeupSourceType&#160;<b>EcuM_GetExpiredWakeupEvents&#160;</b>( void )&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
65&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-66_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
EcuM_WakeupSourceType&#160;<br/>
IDs of&#160;the wakeup&#160;sources&#160;where the validation has failed.&#160;<br/>
<b>Functional Description&#160;</b><br/>
Returns all&#160;wakeup sources where the validation&#160;has&#160;failed from the previous&#160;wakeup phase.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;available, dependently on&#160;ECUM_GET_EXPIRED_WAKEUP_EVENTS_API.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-20&#160;EcuM_GetExpiredWakeupEvents&#160;<br/>
<b>5.3.20&#160;&#160;EcuM_GetStatusOfWakeupSource&#160;</b><br/>
<b>Prototype&#160;</b><br/>
EcuM_WakeupStatusType&#160;<b>EcuM_GetStatusOfWakeupSource&#160;</b>( EcuM_WakeupSourceType&#160;<br/>sources )&#160;<br/>
<b>Parameter&#160;</b><br/>
sources&#160;<br/>
ID of a wakeup source&#160;<br/>
or a mask&#160;with several encoded&#160;wakeup&#160;sources&#160;<br/>
or&#160;ECUM_WKSOURCE_ALL_SOURCES&#160;<br/>
<b>Return code&#160;</b><br/>
ECUM_WKSTATUS_NONE &#160;<br/>
No pending&#160;wakeup event&#160;was detected&#160;for the passed wakeup source.&#160;<br/>
ECUM_WKSTATUS_VALIDATED&#160;&#160;The wakeup&#160;source caused the ECU wakeup.&#160;<br/>
ECUM_WKSTATUS_PENDING&#160;<br/>
A&#160;wakeup event was detected but not yet validated.&#160;<br/>
ECUM_WKSTATUS_EXPIRED&#160;<br/>
A&#160;wakeup event has not been validated.&#160;<br/>
<b>Functional Description&#160;</b><br/>
Returns the&#160;sum status&#160;all&#160;wakeup sources passed in&#160;the parameter.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;available, dependently on&#160;ECUM_GET_STATUS_OF_WAKEUP_SOURCE_API.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-21&#160;EcuM_GetStatusOfWakeupSource&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
66&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-67_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-67_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.3.21&#160;&#160;EcuM_SelectApplicationMode&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_SelectApplicationMode&#160;</b>( AppModeType appmode )&#160;<br/>
<b>Parameter&#160;</b><br/>
appmode&#160;<br/>
Application mode for the next OS restart. Values depend on the OS&#160;<br/>configuration.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
The service always&#160;succeeds, because&#160;no parameter checking can&#160;be&#160;<br/>performed.&#160;<br/>
<b>Functional Description&#160;</b><br/>
Sets&#160;the application mode&#160;of the OS for the next restart.&#160;The application mode&#160;will be set after an intended&#160;<br/>reset.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>Deviation to&#160;AUTOSAR:&#160;return value E_NOT_OK is not provided.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-22&#160;EcuM_SelectApplicationMode&#160;<br/>
<b>5.3.22&#160;&#160;EcuM_GetApplicationMode&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_GetApplicationMode&#160;</b>( AppModeType *appmode )&#160;<br/>
<b>Parameter&#160;</b><br/>
appmode&#160;<br/>
Currently selected application mode of the OS.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Call was&#160;successful.&#160;<br/>
E_NOT_OK&#160;<br/>
Call was rejected (in the&#160;case if a&#160;NULL_PTR&#160;has been passed as&#160;<br/>argument).&#160;<br/>
<b>Functional Description&#160;</b><br/>
Returns the&#160;current selected&#160;application&#160;mode.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
67&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-68_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-68_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-23&#160;EcuM_GetApplicationMode&#160;<br/>
<b>5.3.23&#160;&#160;EcuM_SelectBootTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_SelectBootTarget&#160;</b>( EcuM_BootTargetType target )&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
The selected&#160;boot target.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Call was accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Call was rejected.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service sets&#160;the boot target to the specified&#160;value.&#160;Whenever&#160;this service is&#160;executed&#160;the callout&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#88">function&#160;EcuM_Appl_SelectBootTarget() will be exe</a>cuted implicitly. In this callout&#160;the desired&#160;behavior has&#160;<br/>to be implemented.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>This&#160;service&#160;does not perform any NULL_PTR&#160;check&#160;or UNINIT&#160;check.&#160;When&#160;such&#160;<br/>
&#160;&#160;functionality is required it must be implemented by the user in the&#160;specific callouts.&#160;<br/>
<b>&#160;</b><br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-24&#160;EcuM_SelectBootTarget&#160;<br/>
<b>5.3.24&#160;&#160;EcuM_GetBootTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_GetBootTarget&#160;</b>( EcuM_BootTargetType *target )&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
The current selected&#160;boot target.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
Call was accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Call was rejected (in the&#160;case if a&#160;NULL_PTR&#160;has been passed as&#160;<br/>argument).&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
68&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-69_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service returns the current selected boot target. Whenever this&#160;service is&#160;executed the&#160;callout function&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#89">EcuM_Appl_GetBootTarget() will b</a>e&#160;executed&#160;implicitly. In this callout the desired&#160;behavior has to be&#160;<br/>implemented.&#160; (See also description of&#160;<a href="TechnicalReference_Asr_EcuMs.html#68">5.3.23).&#160;</a><br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-25&#160;EcuM_GetBootTarget&#160;<br/>
<b>5.3.25&#160;&#160;EcuM_MainFunction&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_MainFunction&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;service implements&#160;all activities of the ECU State&#160;Manager while OS is up and running.&#160;This service&#160;<br/>must be&#160;called on a periodic basis from an adequate&#160;OS&#160;task.&#160;To&#160;determine&#160;the period the SWS suggests&#160;<br/>the following&#160;points:&#160;<br/>
&#160;<br/>
The period directly results in a possible latency&#160;for testing RUN requests.&#160;The largest acceptable&#160;<br/>
reaction time&#160;will therefore&#160;limit&#160;the maximum period for invocation.&#160;<br/>
&#160;<br/>
The service also carries out the wakeup&#160;validation protocol.&#160;The&#160;smallest validation timeout typically&#160;<br/>
should limit the period.&#160;<br/>
&#160;<br/>
As a rule of thumb, the period of this&#160;service should&#160;be in the order&#160;of half as long as the&#160;shortest time&#160;<br/>
constant mentioned in the topics above&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-26&#160;EcuM_MainFunction&#160;<br/>
<b>5.3.26&#160;&#160;EcuM_StartupTwo&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_StartupTwo&#160;</b>( void )&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
69&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-70_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;initializes&#160;drivers and manager modules&#160;which are not&#160;initialized in&#160;EcuM_Init()&#160;function,&#160;<br/>like Nvm, ComM, etc.&#160;The activities performed in this&#160;function are described in the ECU State&#160;Manager&#160;<br/>specification&#160;as STARTUP&#160;II phase.&#160;The&#160;DriverInitListTwo and DriverInitListThree will be executed in this&#160;<br/>function.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-27&#160;EcuM_StartupTwo&#160;<br/>
<b>5.4&#160;&#160;Services used by&#160;ECUM&#160;</b><br/>
In the following table services provided&#160;by other components, which are used by the&#160;<br/>ECUM are listed. For details&#160;about prototype and functionality refer to the documentation&#160;<br/>of the providing component.&#160;<br/>
Refer to ch<a href="TechnicalReference_Asr_EcuMs.html#16">apter&#160;2.1 &#160;</a><br/>
<b>5.5&#160;&#160;Callback Functions&#160;</b><br/>
This chapter describes the callback functions&#160;that are implemented&#160;by the ECUM and can&#160;<br/>be invoked by other modules.&#160;The prototypes of&#160;the callback functions&#160;are provided in the&#160;<br/>header file&#160;EcuM_Cbk.h&#160;by the ECUM.&#160;<br/>
<b>5.5.1&#160;</b><br/>
<b>EcuM_CB_NfyNvMJobEnd&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_CB_NfyNvMJobEnd&#160;</b>( uint8 ServiceID, NvM_RequestResultType&#160;<br/>JobResult )&#160;<br/>
<b>Parameter&#160;</b><br/>
ServiceID&#160;<br/>
Unique service ID of NVRAM manger service.&#160;<br/>
JobResult&#160;<br/>
Covers the job result of the previous&#160;processed multi block job.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Used to notify about the end of NVRAM jobs initiated by ECUM.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
70&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-71_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is synchronous.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;available, dependently on&#160;ECUM_INCLUDE_NVRAM_MGR.&#160;<br/>
&#160;<br/>
The NVRAM manager must be configured&#160;to call this&#160;callback as&#160;a&#160;multiple block job end notification.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
This function&#160;is expected to be called in&#160;application context.&#160;<br/>
Table 5-28&#160;EcuM_CB_NfyNvMJobEnd&#160;<br/>
<b>5.5.2&#160;</b><br/>
<b>EcuM_SetWakeupEvent&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_SetWakeupEvent&#160;</b>( EcuM_WakeupSourceType event )&#160;<br/>
<b>Parameter&#160;</b><br/>
event&#160;<br/>
ID of the wakeup source&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
-- &#160;&#160;<br/>
<b>Functional Description&#160;</b><br/>
The driver&#160;or&#160;the module&#160;which validates the appropriate&#160;wakeup event must call&#160;this service to start the&#160;<br/>wakeup&#160;validation protocol. If the wakeup&#160;source&#160;needs validation the corresponding timeout&#160;will be&#160;<br/>started. If no validation is required&#160;this function&#160;implicitly calls&#160;EcuM_ValidateWakeupEvent().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;non re-entrant and non interruptible.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in interrupt context.&#160;<br/>
Table 5-29&#160;EcuM_SetWakeupEvent&#160;<br/>
<b>5.5.3&#160;</b><br/>
<b>EcuM_ValidateWakeupEvent&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_ValidateWakeupEvent&#160;</b>( EcuM_WakeupSourceType event )&#160;<br/>
<b>Parameter&#160;</b><br/>
event&#160;<br/>
ID of wakeup&#160;source&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
-- &#160;<br/>
<b>Functional Description&#160;</b><br/>
If the validation of the wakeup event&#160;was successful this service has to be called&#160;by the module which&#160;<br/>performs the&#160;validation. If&#160;no validation is&#160;required the function will&#160;be called implicitly.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
71&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-72_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This&#160;service&#160;is&#160;synchronous.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;re-entrant.&#160;<br/>
&#160;<br/>
This&#160;service is&#160;always available.&#160;<br/>
Expected Caller Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-30&#160;EcuM_ValidateWakeupEvent&#160;<br/>
&#160;<br/>
<b>5.6&#160;&#160;Configurable Interfaces&#160;</b><br/>
<b>5.6.1&#160;</b><br/>
<b>Notifications&#160;</b><br/>
The ECUM&#160;does not provide notifications.&#160;<br/>
<b>5.6.2&#160;</b><br/>
<b>&#160;Callout Functions&#160;</b><br/>
At its configurable interfaces&#160;the ECUM defines callout functions.&#160;The declarations of the&#160;<br/>callout functions are provided by&#160;the BSW module, i.e. the ECUM. It is the integrator's task&#160;<br/>to provide the corresponding function definitions.&#160;The definitions of&#160;the callouts can be&#160;<br/>adjusted to the system's needs.&#160;The ECUM callout function declarations are described in&#160;<br/>the following tables:&#160;<br/>
<b>5.6.2.1&#160;</b><br/>
<b>EcuM_AL_DriverInitZero&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_AL_DriverInitZero&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
72&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=73></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-73_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-73_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-73_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-73_4.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout shall provide driver initialization and other&#160;hardware-related startup activities for loading the&#160;<br/>post-build&#160;configuration data. &#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>If the pre-compile switch&#160;V_SUPRESS_EXTENDED_VERSION_CHECK&#160;is defined&#160;<br/>
<b>&#160;&#160;</b>the default implementation of this callout executes the Vector&#160;specific function&#160;<br/>
VLibVersionCheck().&#160;&#160;This function ensures the integrity of the delivery. &#160;<br/>
If the function call was not successful, one of the&#160;two following will occur:&#160;<br/>
&#160;&#160;development is activated: the error module (usually DET&#160;module) is&#160;<br/>
executed&#160;<br/>
&#160;&#160;production mode is activated: an endless loop&#160;will be entered.&#160;This is part of&#160;<br/>
template code and shall be adapted by user to meet current system needs. &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info&#160;<br/></b>Only pre-compile and link-time configurable modules may be used.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in EcuM_Init(), task context&#160;<br/>
&#160;<br/>
<b>5.6.2.2&#160;</b><br/>
<b>EcuM_AL_DriverInitOne&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_AL_DriverInitOne&#160;</b>(const EcuM_ConfigType *ConfigPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
ConfigPtr&#160;<br/>
Pointer to ECUM configuration structure.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The ECUM&#160;executes this callout&#160;with a NULL_PTR as&#160;<br/>
&#160;&#160;argument.&#160;<br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
73&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=74></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-74_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-74_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-74_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-74_4.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout initializes&#160;all driver modules&#160;which&#160;should&#160;be initialized&#160;before the&#160;OS&#160;is up and running.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>If the ECUM is delivered&#160;in post-build variant.&#160;The signature&#160;of this callout&#160;<br/>
&#160;&#160;changes into void EcuM_DriverInitOne_&lt;0..n&gt;(void), in order to provide the post-<br/>
build capability of the ECUM.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;is configured&#160;via configuration tool.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in&#160;EcuM_Init(), task&#160;context&#160;<br/>
Table 5-31&#160;EcuM_AL_DriverInitOne&#160;<br/>
<b>5.6.2.3&#160;</b><br/>
<b>EcuM_AL_DriverInitTwo&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_AL_DriverInitTwo&#160;</b>(const EcuM_ConfigType *ConfigPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
ConfigPtr&#160;<br/>
Pointer to ECUM configuration structure.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The ECUM&#160;executes this callout&#160;with a NULL_PTR as&#160;<br/>
&#160;&#160;argument.&#160;<br/>
<b>&#160;</b><br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Initializes driver modules which&#160;should be initialized after the OS has been started.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>If the ECUM is delivered&#160;in post-build variant.&#160;The signature&#160;of this callout&#160;<br/>
&#160;&#160;changes into void EcuM_DriverInitTwo_&lt;0..n&gt;(void), in order to provide the post-<br/>
build capability of the ECUM.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
74&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=75></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-75_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-75_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-75_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;is configured&#160;via configuration tool.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
invoked in&#160;EcuM_StartupTwo(), task&#160;context&#160;<br/>
&#160;<br/>
Invoked&#160;when&#160;module&#160;state = STARTUPII&#160;<br/>
Table 5-32&#160;EcuM_AL_DriverInitTwo&#160;<br/>
<b>5.6.2.4&#160;</b><br/>
<b>EcuM_AL_DriverInitThree&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_AL_DriverInitThree&#160;</b>(const EcuM_ConfigType *ConfigPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
ConfigPtr&#160;<br/>
Pointer to ECUM configuration structure.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The ECUM&#160;executes this callout&#160;with a NULL_PTR as&#160;<br/>
&#160;&#160;argument.&#160;<br/>
<b>&#160;</b><br/>
<b>Return code&#160;</b><br/>
void &#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout shall provide driver initialization of drivers&#160;which need OS&#160;and need valid (if the&#160;<br/>NvM_ReadAll()&#160;job was successful)&#160;NVRAM data.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>If the ECUM is delivered&#160;in post-build variant.&#160;The signature&#160;of this callout&#160;<br/>
&#160;&#160;changes into void EcuM_DriverInitOne_&lt;0..n&gt;(void), in order to provide the post-<br/>
build capability of the ECUM.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;is configured&#160;via configuration tool.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in EcuM_StartupTwo(), task context&#160;<br/>
&#160;<br/>
Invoked after&#160;Rte_Start() is&#160;executed&#160;<br/>
Table 5-33&#160;EcuM_AL_DriverInitThree&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
75&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=76></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-76_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-76_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
<b>5.6.2.5&#160;</b><br/>
<b>EcuM_DeterminePbConfiguration&#160;</b><br/>
<b>Prototype&#160;</b><br/>
EcuM_ConfigType*&#160;<b>EcuM_DeterminePbConfiguration</b>&#160;( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
EcuM_ConfigType&#160;<br/>
Pointer to the&#160;used&#160;configuration set.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout should determine which post-build&#160;configuration should be used by the ECUM.&#160;This&#160;has to be&#160;<br/>done by the integrator.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>This callout&#160;will only be activated when the implementation of the module is&#160;<br/>
&#160;&#160;delivered as post-build variant.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in&#160;EcuM_Init(), task&#160;context&#160;<br/>
&#160;<br/>
Invoked between&#160;EcuM_AL_DriverInitZero()&#160;and&#160;EcuM_AL_DriverInitOne()&#160;<br/>
Table 5-34&#160;EcuM_DeterminePbConfiguration&#160;<br/>
<b>5.6.2.6&#160;</b><br/>
<b>EcuM_AL_SwitchOff&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_AL_SwitchOff&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout shall take the code&#160;for shutting off the power&#160;supply of the ECU.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
76&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=77></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-77_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-77_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in&#160;EcuM_Shutdown(), task&#160;context&#160;<br/>
Table 5-35&#160;EcuM_AL_SwitchOff&#160;<br/>
<b>5.6.2.7&#160;</b><br/>
<b>EcuM_AL_DriverRestart&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_AL_DriverRestart&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout shall provide driver initialization and other&#160;hardware related startup activities after a&#160;wakeup&#160;<br/>event from SLEEP&#160;state.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>If the ECUM is delivered&#160;in post-build variant.&#160;The signature&#160;of this callout&#160;<br/>
&#160;&#160;changes into void EcuM_DriverRestart_&lt;0..n&gt;(void), in order to provide the post-<br/>
build capability of the ECUM.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;is configured&#160;via configuration tool.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in&#160;EcuM_MainFunction(),&#160;task context&#160;<br/>
&#160;<br/>
Invoked directly after the wakeup phase&#160;<br/>
Table 5-36&#160;EcuM_AL_DriverRestart&#160;<br/>
<b>5.6.2.8&#160;</b><br/>
<b>EcuM_GenerateRamHash&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_GenerateRamHash&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout is intended to provide a RAM&#160;integrity test.&#160;The goal of this test is to ensure that after a long&#160;<br/>SLEEP&#160;duration, RAM contents is&#160;still&#160;consistent.&#160;The&#160;RAM check itself must be provided by the integrator.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
77&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=78></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-78_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Invoked just before putting&#160;the ECU into&#160;sleep mode&#160;<br/>
Table 5-37&#160;EcuM_GenerateRamHash&#160;<br/>
<b>5.6.2.9&#160;</b><br/>
<b>EcuM_CheckRamHash&#160;</b><br/>
<b>Prototype&#160;</b><br/>
uint8&#160;<b>EcuM_CheckRamHash&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
0&#160;<br/>
Integrity test&#160;failed&#160;<br/>
1..255&#160;<br/>
Integrity test&#160;passed&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout is intended to provide a RAM&#160;integrity check previously done&#160;with&#160;<br/>EcuM_GenerateRamHash().&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Directly called after the wakeup&#160;of the ECU.&#160;<br/>
Table 5-38&#160;EcuM_CheckRamHash&#160;<br/>
<b>5.6.2.10&#160;&#160;EcuM_OnRTEStartup&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnRTEStartup&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of activities before&#160;starting the RTE.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
78&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=79></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-79_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_RTESTARTUP_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called before&#160;Rte_Start()&#160;is executed. Module state: STARTUPII&#160;<br/>
Table 5-39&#160;EcuM_OnRTEStartup&#160;<br/>
<b>5.6.2.11&#160;&#160;EcuM_OnEnterRun&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnEnterRun&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of activities before&#160;entering RUN state.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_ENTER_RUN_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called just before entering&#160;RUN state.&#160;<br/>
Table 5-40&#160;EcuM_OnEnterRun&#160;<br/>
<b>5.6.2.12&#160;&#160;EcuM_OnExitRun&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnExitRun&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of activities while leaving RUN&#160;state.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
79&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=80></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-80_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_EXIT_RUN_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called at the transition from&#160;RUN to POST&#160;RUN state.&#160;<br/>
Table 5-41&#160;EcuM_OnExitRun&#160;<br/>
<b>5.6.2.13&#160;&#160;EcuM_OnExitPostRun&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnExitPostRun&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of activities&#160;while leaving POST&#160;RUN state.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_EXIT_RUN_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called while leaving POST&#160;RUN state.&#160;<br/>
Table 5-42&#160;EcuM_OnExitPostRun&#160;<br/>
<b>5.6.2.14&#160;&#160;EcuM_OnPrepShutdown&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnPrepShutdown&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of additional activities in PREP&#160;SHUTDOWN state.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
80&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=81></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-81_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_PREP_SHUTDOWN_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called just after entering PREP&#160;SHUTDOWN state.&#160;<br/>
Table 5-43&#160;EcuM_OnPrepShutdown&#160;<br/>
<b>5.6.2.15&#160;&#160;EcuM_OnGoSleep&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnGoSleep&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of additional activities while module is in GO&#160;SLEEP&#160;state.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_GO_SLEEP_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called after entering GO&#160;SLEEP&#160;state.&#160;<br/>
Table 5-44&#160;EcuM_OnGoSleep&#160;<br/>
<b>5.6.2.16&#160;&#160;EcuM_OnGoOffOne&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnGoOffOne&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of additional activities in GO OFF I state.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
81&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=82></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-82_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_GO_OFF_ONE_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called right after entering&#160;GO OFF I state.&#160;<br/>
Table 5-45&#160;EcuM_OnGoOffOne&#160;<br/>
<b>5.6.2.17&#160;&#160;EcuM_OnGoOffTwo&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_OnGoOffTwo&#160;</b>( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
Allows the execution of additional activities in GO OFF II state.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_GO_OFF_TWO_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called right after entering&#160;GO OFF II state.&#160;<br/>
Table 5-46&#160;EcuM_OnGoOffTwo&#160;<br/>
<b>5.6.2.18&#160;&#160;EcuM_OnWakeupReaction&#160;</b><br/>
<b>Prototype&#160;</b><br/>
EcuM_WakeupReactionType&#160;<b>EcuM_OnWakeupReaction&#160;</b>( EcuM_WakeupReactionType&#160;<br/>wact )&#160;<br/>
<b>Parameter&#160;</b><br/>
wact&#160;<br/>
Default wakeup reaction after a controller wakeup.&#160;<br/>
<b>Return code&#160;</b><br/>
EcuM_WakeupReactionType&#160;<br/>
ECUM_WKACT_RUN&#160;<br/>
The ECUM should transit to RUN state.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
82&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=83></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-83_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-83_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-83_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
EcuM_WakeupReactionType&#160;<br/>
ECUM_WKACT_TTII&#160;<br/>
The ECUM should perform the&#160;TTII protocol (only possible if globally&#160;<br/>enabled).&#160;<br/>
EcuM_WakeupReactionType&#160;<br/>
ECUM_WKACT_SHUTDOWN&#160;<br/>
The ECUM should transit into SHUTDOWN&#160;sequence.&#160;<br/>
<b>Functional Description&#160;</b><br/>
Within this&#160;callout the System designer&#160;has the possibility to influence the default behavior of the ECU&#160;<br/>State Manager after a&#160;wakeup phase. If&#160;desired the integrator&#160;has the ability to set the input parameter to a&#160;<br/>value which is&#160;different as&#160;the default mechanism.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>It is not recommended to&#160;redefine the&#160;default values computed by the ECUM.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is optional.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is available dependently on&#160;ECUM_ON_WAKEUP_REACTION_CALLOUT.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called in&#160;ECUM_STATE_WAKEUP_REACTION&#160;state.&#160;<br/>
Table 5-47&#160;EcuM_OnWakeupReaction&#160;<br/>
<b>5.6.2.19&#160;&#160;EcuM_EnableWakeupSources&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_EnableWakeupSources&#160;</b>( EcuM_WakeupSourceType wakeupSource )&#160;<br/>
<b>Parameter&#160;</b><br/>
wakeupSource&#160;<br/>
Every bit set in the parameter indicates&#160;a wakeup source which&#160;should be&#160;<br/>enabled in the current sleep mode.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>If the shutdown target is ECUM_STATE_OFF, this callout&#160;<br/>
&#160;&#160;is executed&#160;with parameter value &#160;<br/>
ECUM_WKSOURCE_ALL_SOURCES.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
83&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=84></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-84_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-84_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-84_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout will be called&#160;whenever&#160;RUN state is left.&#160;Every bit set in the parameter indicates the wakeup&#160;<br/>source which&#160;should be enabled.&#160;The integrator&#160;has to&#160;take&#160;care to&#160;implement the necessary activities to&#160;<br/>enable the corresponding&#160;wakeup source.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#4">[1] proposed</a>&#160;to execute this callout in&#160;GO&#160;OFF SLEEP&#160;II state.&#160;The time between&#160;<br/>
&#160;&#160;leaving RUN state and the possibility to detect wakeup event may take&#160;a relative&#160;<br/>
long long time where wakeup events can&#160;be lost.&#160;Therefore&#160;this implementation&#160;<br/>executes this callout right after leaving RUN state.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called when RUN state is left.&#160;<br/>
Table 5-48&#160;EcuM_EnableWakeupSources&#160;<br/>
&#160;<br/>
<b>5.6.2.20&#160;&#160;EcuM_DisableWakeupSources&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_DisableWakeupSources&#160;</b>( EcuM_WakeupSourceType wakeupSource )&#160;<br/>
<b>Parameter&#160;</b><br/>
wakeupSource&#160;<br/>
Every bit set in the parameter indicates&#160;a wakeup&#160;source which&#160;was active in&#160;<br/>the previous&#160;sleep mode.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>If the shutdown target is ECUM_STATE_OFF, this callout&#160;<br/>
is executed&#160;with parameter value &#160;<br/>
ECUM_WKSOURCE_ALL_SOURCES.&#160;<br/>
<b>&#160;</b><br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout will be called&#160;whenever&#160;RUN state is entered&#160;from a previous sleep&#160;state. Every bit&#160;set in the&#160;<br/>parameter indicates the wakeup source&#160;which&#160;was enabled in the previous&#160;sleep mode.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
84&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=85></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-85_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-85_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called just before RUN&#160;state is entered&#160;<br/>
Table 5-49&#160;EcuM_DisableWakeupSources&#160;<br/>
&#160;<br/>
<b>5.6.2.21&#160;&#160;EcuM_StartWakeupSources&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_StartWakeupSources&#160;</b>( EcuM_WakeupSourceType wakeupSource )&#160;<br/>
<b>Parameter&#160;</b><br/>
wakeupSource&#160;<br/>
Every bit set in the parameter indicates&#160;a wakeup&#160;source which is&#160;enabled in&#160;<br/>the current sleep mode.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
The callout shall start the given wakeup&#160;source(s)&#160;so&#160;that they are ready to perform wakeup&#160;validation. &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info&#160;<br/></b><a href="TechnicalReference_Asr_EcuMs.html#4">Within&#160;[1] is&#160;</a>not clear how the parameter which is passed within the ECUM should be&#160;<br/>
&#160;&#160;derived, hence this implementation passed the enabled wakeup sources for the actual&#160;<br/>
chosen sleep mode.&#160;The integrator&#160;has to take&#160;care about to implement&#160;the necessary&#160;<br/>code in the&#160;corresponding wakeup sources.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called in WAKEUP&#160;ONE state&#160;<br/>
Table 5-50&#160;EcuM_StartWakeupSources&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
85&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=86></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-86_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.6.2.22&#160;&#160;EcuM_StopWakeupSources&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_StopWakeupSources&#160;</b>( EcuM_WakeupSourceType wakeupSource )&#160;<br/>
<b>Parameter&#160;</b><br/>
wakeupSource&#160;<br/>
Every bit set in the parameter indicates&#160;a wakeup&#160;source which is&#160;enabled in&#160;<br/>the current sleep mode.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout shall stop the&#160;given wakeup&#160;source(s) after unsuccessful wakeup validation. Refe<a href="TechnicalReference_Asr_EcuMs.html#85">r to&#160;5.6.2.21&#160;<br/></a>for the information how the&#160;parameter is&#160;derived.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called in WAKEUP&#160;WAKESLEEP&#160;state&#160;<br/>
Table 5-51&#160;EcuM_StopWakeupSources&#160;<br/>
<b>5.6.2.23&#160;&#160;EcuM_CheckWakeup&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_CheckWakeup&#160;</b>( EcuM_WakeupSourceType wakeupSource )&#160;<br/>
<b>Parameter&#160;</b><br/>
wakeupSource&#160;<br/>
ID of a wakeup source.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout shall be called&#160;by the ISR of&#160;a wakeup&#160;source to set up&#160;the PLL&#160;and&#160;check other&#160;wakeup&#160;<br/>sources that&#160;may be connected to the same interrupt<a href="TechnicalReference_Asr_EcuMs.html#4">. &#160;Refer to&#160;[1]&#160;</a>for more information.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in interrupt context.&#160;<br/>
Table 5-52&#160;EcuM_CheckWakeup&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
86&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=87></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-87_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.6.2.24&#160;&#160;EcuM_CheckValidation&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_CheckValidation&#160;</b>( EcuM_WakeupSourceType wakeupSource )&#160;<br/>
<b>Parameter&#160;</b><br/>
wakeupSource&#160;<br/>
Wakeup&#160;IDs of pending&#160;wakeup events.&#160;<br/>
<b>Return code&#160;</b><br/>
void &#160;<br/>
--&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout is called by the&#160;ECUM when&#160;wakeup validation of a wakeup&#160;event is necessary.&#160;The pending&#160;<br/>wakeup event(s) are&#160;passed by the parameter in order to allow the&#160;necessary reaction depending on the&#160;<br/>wakeup&#160;source.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is mandatory.&#160;<br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
This function&#160;is always available.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Invoked in task&#160;context&#160;<br/>
&#160;<br/>
Called in WAKEUP&#160;VALIDATION state&#160;<br/>
Table 5-53&#160;EcuM_CheckValidation&#160;<br/>
<b>5.6.2.25&#160;&#160;EcuM_GeneratorCompatibilityError&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_GeneratorCompatibilityError&#160;</b>( uint16 ModuleId, uint8 InstanceId&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
ModuleId&#160;<br/>
Module ID&#160;where the generator &#160;compatibility check failed&#160;<br/>
InstanceId&#160;<br/>
Instance ID&#160;where the generator compatibility check failed&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
87&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=88></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-88_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-88_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-88_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout was introduced&#160;additionally to the&#160;AUTOSAR standard. Every Vector&#160;AUTOSAR&#160;component&#160;<br/>which has the&#160;generator&#160;compatibility check implemented calls this callout if for example the&#160;expected&#160;<br/>generator version does&#160;not&#160;match the current used&#160;generator&#160;version.&#160;A&#160;detailed&#160;description when this&#160;<br/>callout is executed&#160;can be&#160;found in the corresponding&#160;documentation of the BSW module.&#160;<br/>
The generator compatibility&#160;check was&#160;introduced by Vector to recognize&#160;version inconsistency in post-<br/>build configuration data.&#160;The check is performed in the modules’&#160;Init-function. &#160;<br/>
The integrator&#160;has to implement the necessary&#160;actions to resolve such version conflicts. &#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The default implementation of this callout calls the development error module (usually&#160;<br/>
<b>&#160;&#160;</b>DET&#160;module) if the ECUM is in development mode or enters&#160;an endless&#160;loop if the&#160;<br/>
ECUM is in production&#160;mode.&#160;The endless loop is part of template code and shall&#160;be&#160;<br/>adapted by user to meet current system needs.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;is non re-entrant.&#160;<br/>
&#160;<br/>
The availability of this callout depends on&#160;the customer license or the configuration parameter&#160;<br/>
EcuMGeneratorCompatibilityError.&#160;<br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-54&#160;EcuM_GeneratorCompatibilityError&#160;<br/>
<b>5.6.2.26&#160;&#160;EcuM_Appl_SelectBootTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_Appl_SelectBootTarget&#160;</b>( EcuM_BootTargetType target )&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
The selected&#160;boot target.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
The implementation must return E_OK if&#160;no error occurs.&#160;<br/>
E_NOT_OK&#160;<br/>
The implementation must return E_NOT_OK if an error occurs.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout was introduced&#160;additionally to the&#160;AUTOSAR standard. Its intention is to be able to write the&#160;<br/>necessary code to select the boot target&#160;in which the&#160;ECU shall boot after the next reset.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The implementation of this callout depends strongly on the used boot loader and&#160;<br/>
&#160;&#160;memory&#160;stack.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
88&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=89></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-89_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-89_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-55&#160;EcuM_Appl_SelectBootTarget&#160;<br/>
<b>5.6.2.27&#160;&#160;EcuM_Appl_GetBootTarget&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>EcuM_Appl_GetBootTarget&#160;</b>( EcuM_BootTargetType *target )&#160;<br/>
<b>Parameter&#160;</b><br/>
target&#160;<br/>
The current selected&#160;boot target.&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
The implementation must return E_OK if&#160;no error occurs.&#160;<br/>
E_NOT_OK&#160;<br/>
The implementation must return E_NOT_OK if an error occurs.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout was introduced&#160;additionally to the&#160;AUTOSAR standard. Its intention is to be able to write the&#160;<br/>necessary code to retrieve&#160;the selected&#160;boot target.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The implementation of this callout depends strongly on the used boot loader and&#160;<br/>
&#160;&#160;memory&#160;stack.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-56&#160;EcuM_Appl_GetBootTarget&#160;<br/>
<b>5.6.2.28&#160;&#160;EcuM_McuSetMode&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>EcuM_McuSetMode&#160;</b>( uint8 mode_u8 )&#160;<br/>
<b>Parameter&#160;</b><br/>
mode_u8&#160;<br/>
The desired&#160;MCU mode.&#160;<br/>
<b>Return code&#160;</b><br/>
void&#160;<br/>
-&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
89&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=90></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-90_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-90_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Functional Description&#160;</b><br/>
This&#160;callout was introduced&#160;additionally to the&#160;AUTOSAR standard. Its intention is to be able to implement&#160;<br/>the Sleep Mode ISR dependent from used&#160;HW.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The implementation of this callout depends strongly on the used microcontroller.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/><b>Particularities and Limitations&#160;</b><br/>
&#160;<br/>
This function&#160;has to be filled with code by the integrator.&#160;<br/>
Call Context&#160;<br/>
&#160;<br/>
Expected to be&#160;called in application context.&#160;<br/>
Table 5-57&#160;EcuM_McuSetMode&#160;<br/>
&#160;<br/>
<b>5.6.3&#160;</b><br/>
<b>Mode switch notification functions&#160;</b><br/>
<b>5.6.3.1&#160;&#160;Appl_EcuM_currentMode_currentMode&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType Appl_EcuM_currentMode_currentMode(EcuM_ModeType mode)&#160;<br/>
<b>Parameter&#160;</b><br/>
mode&#160;<br/>
&#160;&#160;ECUM_MODE_POST_RUN&#160;<br/>
&#160;&#160;ECUM_MODE_RUN&#160;<br/>
&#160;&#160;ECUM_MODE_SHUTDOWN&#160;<br/>
&#160;&#160;ECUM_MODE_SLEEP&#160;<br/>
&#160;&#160;ECUM_MODE_STARTUP&#160;<br/>
&#160;&#160;ECUM_MODE_WAKE_SLEEP&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
The SW-C notified.&#160;<br/>
E_NOT_OK&#160;<br/>
The SW-C does not notified the mode.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;informs the SW-C about a ECUM mode&#160;change.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;&#160;This function&#160;is only available if no RTE is used.&#160;<br/>
&#160;&#160;This function&#160;is only available if current&#160;mode port is&#160;enabled.&#160;<br/>
Call context&#160;<br/>
&#160;&#160;Expected to be&#160;called in application context.&#160;<br/>
Table 5-58&#160;Appl_EcuM_currentMode_currentMode&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
90&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=91></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-91_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.6.3.2&#160;&#160;Rte_Switch_currentMode_currentMode&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<br/>Rte_Switch_currentMode_currentMode(Rte_ModeType_EcuM_Mode mode)&#160;<br/>
<b>Parameter&#160;</b><br/>
mode&#160;<br/>
&#160;&#160;RTE_MODE_EcuM_Mode_POST_RUN&#160;<br/>
&#160;&#160;RTE_MODE_EcuM_Mode_RUN&#160;<br/>
&#160;&#160;RTE_MODE_EcuM_Mode_SHUTDOWN&#160;<br/>
&#160;&#160;RTE_MODE_EcuM_Mode_SLEEP&#160;<br/>
&#160;&#160;RTE_MODE_EcuM_Mode_STARTUP&#160;<br/>
&#160;&#160;RTE_MODE_EcuM_Mode_WAKE_SLEEP&#160;<br/>
<b>Return code&#160;</b><br/>
E_OK&#160;<br/>
The SW-C notified.&#160;<br/>
E_NOT_OK&#160;<br/>
The SW-C does not notified the mode.&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;informs the SW-C about a ECUM mode&#160;change.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
&#160;&#160;This function&#160;is only available if RTE is used.&#160;<br/>
&#160;&#160;This function&#160;is only available if current&#160;mode port is&#160;enabled.&#160;<br/>
Call context&#160;<br/>
&#160;&#160;Expected to be&#160;called in application context.&#160;<br/>
Table 5-59&#160;Rte_Switch_currentMode_currentMode&#160;<br/>
<b>5.7&#160;&#160;Service Ports&#160;</b><br/>
Via Service Ports the software components (SWC) have the possibility to execute services&#160;<br/>of the ECUM with an abstract RTE interface. Hence, the software components are&#160;<br/>independent from the underlying basic software stack.&#160;<br/>
<b>5.7.1&#160;</b><br/>
<b>Client Server Interface&#160;</b><br/>
A&#160;client server interface is related to a Provide Port at the server side and a Require Port&#160;<br/>at client side. &#160;<br/>
<b>5.7.1.1&#160;&#160;Provide Ports on ECUM side&#160;</b><br/>
At the Provide Ports of&#160;the ECUM the&#160;<a href="TechnicalReference_Asr_EcuMs.html#55">API functions described in&#160;5.3 ar</a>e available as&#160;<br/>Runnable Entities.&#160;The Runnable&#160;Entities&#160;are invoked via Operations.&#160;The mapping from a&#160;<br/>SWC client call to an Operation is performed by the RTE. In this mapping the RTE adds&#160;<br/>Port Defined&#160;Argument Values to the client call of the SWC,&#160;if configured.&#160;<br/>
The following sub-chapters&#160;present the Provide Ports&#160;defined for the ECUM and the&#160;<br/>Operations defined for the Provide Ports, the&#160;API functions related to&#160;the Operations and&#160;<br/>the Port Defined&#160;Argument Values to be added by the RTE.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
91&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=92></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-92_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-92_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.7.1.1.1&#160;StateRequest Port&#160;</b><br/>
<b>Operation&#160;</b><br/>
<b>API Function&#160;</b><br/>
<b>Port Defined&#160;Argument Values&#160;</b><br/>
RequestRUN&#160;<br/>
EcuM_RequestRUN()&#160;<br/>
EcuM_UserType UserId&#160;<br/>
ReleaseRUN&#160;<br/>
EcuM_ReleaseRUN()&#160;<br/>
EcuM_UserType UserId&#160;<br/>
RequestPOSTRUN&#160;<br/>
EcuM_RequestPOST_RUN()&#160;<br/>
EcuM_UserType UserId&#160;<br/>
ReleasePOSTRUN&#160;<br/>
EcuM_ReleasePOST_RUN()&#160;<br/>
EcuM_UserType UserId&#160;<br/>
GetState&#160;<br/>
EcuM_GetStateWrapper()&#160;<br/>
EcuM_UserType UserId&#160;<br/>
Table 5-60&#160;StateRequest Port&#160;<br/>
<b>&#160;</b><br/>
<b>Info&#160;</b><br/>
&#160;<br/>
The GetState runnable above is mapped to an additional&#160;API function&#160;<br/>EcuM_GetStateWrapper()&#160;which has to be introduced because of a specification&#160;<br/>error of the ECUM.&#160;This&#160;API is not described in&#160;<a href="TechnicalReference_Asr_EcuMs.html#55">chapter&#160;5.3 because the</a>&#160;functionality is&#160;<br/>the same as&#160;EcuM_GetState(), the only difference is how the current state is given&#160;<br/>back to the&#160;caller.&#160;EcuM_GetStateWrapper()&#160;returns the&#160;current state&#160;by reference&#160;<br/>in its arguments.&#160;<br/>
The user does not have to care about which&#160;API name should be used.&#160;The generation&#160;<br/>tools handle&#160;the correct&#160;API usage.&#160;<br/>
<b>&#160;</b><br/>
<b>5.7.1.1.2&#160;ShutdownTarget Port&#160;</b><br/>
<b>Operation&#160;</b><br/>
<b>API Function&#160;</b><br/>
<b>Port Defined&#160;Argument Values&#160;</b><br/>
SelectShutdownTarget&#160;<br/>
EcuM_SelectShutdownTarget()&#160;<br/>
-&#160;<br/>
GetLastShutdownTarget&#160;<br/>
EcuM_GetLastShutdownTarget()<br/>
-&#160;<br/>
GetShutdownTarget&#160;<br/>
EcuM_GetShutdownTarget()&#160;<br/>
-&#160;<br/>
Table&#160;5-61 ShutdownTarget Port&#160;<br/>
<b>5.7.1.1.3&#160;BootTarget Port&#160;</b><br/>
<b>Operation&#160;</b><br/>
<b>API Function&#160;</b><br/>
<b>Port Defined&#160;Argument Values&#160;</b><br/>
SelectBootTarget&#160;<br/>
EcuM_SelectBootTarget()&#160;<br/>
-&#160;<br/>
GetBootTarget&#160;<br/>
EcuM_GetBootTarget()&#160;<br/>
-&#160;<br/>
Table 5-62&#160;BootTarget Port&#160;<br/>
<b>5.7.1.1.4&#160;ApplicationMode Port&#160;</b><br/>
<b>Operation&#160;</b><br/>
<b>API Function&#160;</b><br/>
<b>Port Defined&#160;Argument Values&#160;</b><br/>
SelectApplicationMode&#160;<br/>
EcuM_SelectApplicationMode()<br/>
-&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
92&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=93></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-93_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-93_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Operation&#160;</b><br/>
<b>API Function&#160;</b><br/>
<b>Port Defined&#160;Argument Values&#160;</b><br/>
GetApplicationMode&#160;<br/>
EcuM_GetApplicationMode()&#160;<br/>
-&#160;<br/>
Table 5-63&#160;ApplicationMode Port&#160;<br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>For generating this service port the configuration&#160;tool needs a&#160;valid OS configuration&#160;<br/>
&#160;&#160;within the ECUC file. If no information about an&#160;OS is found, no service&#160;Port of this kind&#160;<br/>
will be generated even though the generation of&#160;ApplicationMode port is enabled in the&#160;<br/>configuratio<a href="TechnicalReference_Asr_EcuMs.html#106">n tool (see&#160;6.2.3).&#160;</a><br/>
<b>&#160;</b><br/>
<b>5.7.1.2&#160;&#160;Require Ports on ECUM side&#160;</b><br/>
At its Require Ports the ECUM&#160;calls Operations. These Operations have to be provided by&#160;<br/>the SWCs by means of Runnable Entities.&#160;These Runnable Entities implement the&#160;<br/>callback functions expected by the ECUM.&#160;<br/>&#160;<br/>The following sub-chapters present the Require Ports defined for the ECUM, the&#160;<br/>Operations that are called&#160;from the ECUM and the related notifications, which are&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#90">described in chapter&#160;5.6.3.&#160;</a><br/>
<b>5.7.1.2.1&#160;currentMode Port&#160;</b><br/>
<b>Operation&#160;</b><br/>
<b>Rte Interface&#160;</b><br/>
<b>Mode Declaration Group&#160;</b><br/>
currentMode&#160;<br/>
Rte_Switch_currentMode_currentMode&#160;<br/>
STARTUP&#160;<br/>
RUN&#160;<br/>
POST_RUN&#160;<br/>
SLEEP&#160;<br/>
WAKE_SLEEP&#160;<br/>
SHUTDOWN&#160;<br/>
Table 5-64&#160;currentMode&#160;Port&#160;<br/>
<b>5.7.2&#160;</b><br/>
<b>Sender Receiver Interface&#160;</b><br/>
The ECUM&#160;does not provides any&#160;sender receiver interface&#160;<br/>
<b>5.8&#160;</b><br/>
<b>Software Component Template&#160;</b><br/>
The definition of the Provide Ports is described in an XML&#160;file.&#160;This&#160;file describes the&#160;<br/>ECUM as a software component with ports&#160;to which other applications can connect. &#160;<br/>
<b>5.8.1&#160;</b><br/>
<b>Generation by&#160;EAD&#160;</b><br/>
The XML&#160;file can be generated by MICROSAR&#160;EAD via the Menu “Tools-&gt;&#160;AUTOSAR-<br/>&gt;SW-C-&gt;EcuM”.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
93&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=94></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-94_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-94_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;<br/>
Figure 5-1&#160;&#160;Generate an ECUM software component template&#160;<br/>
<b>5.8.2&#160;</b><br/>
<b>Generation by&#160;DaVinci Configurator&#160;</b><br/>
The XML&#160;file will be&#160;generated in each generation process and is located at an user&#160;<br/>specified location. Please consult the documentation of the generation tool how to&#160;<br/>configure this path.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
94&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=95></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-95_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-95_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>5.8.3&#160;</b><br/>
<b>Import into DaVinci Developer&#160;</b><br/>
For further processing the generated software component template file has&#160;to be imported&#160;<br/>into DaVinci Developer.&#160;This can be done while&#160;a DaVinci-project is open by clicking “File-<br/>&gt;Import XML&#160;File...”. Choose the&#160;correct file for the import.&#160;<br/>
&#160;<br/>
Figure 5-2&#160;&#160;Import a new software component&#160;into DaVinci Developer&#160;<br/>
After importing the ECUM as software component there is a new component type in the&#160;<br/>library view available.&#160;After a double click&#160;on that component ECUM all configured ports&#160;<br/>are presented.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
95&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=96></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-96_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-96_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>6&#160;&#160;Configuration&#160;</b><br/>
In the ECUM the attributes can be&#160;configured with the following tools:&#160;<br/>
&#160;&#160;Configuration in DaVinci Configurator/EAD; for a det<a href="TechnicalReference_Asr_EcuMs.html#96">ailed description see&#160;6.2&#160;</a><br/>
&#160;&#160;Configuration with a Generic&#160;Configuration Editor.&#160;<br/>
&#160;&#160;Configuration in GENy.&#160;<br/>
<b>6.1&#160;</b><br/>
<b>Configuration Variants&#160;</b><br/>
The ECUM&#160;supports&#160;the configuration variants&#160;<br/>
&#160;&#160;VARIANT-PRE-COMPILE&#160;<br/>
&#160;&#160;VARIANT-POST-BUILD &#160;<br/>
The configuration classes of the ECUM parameters depend on the supported configuration&#160;<br/>variants. For their definitions please refer to&#160;the modules’&#160;bswmd file which is part of the&#160;<br/>delivered package.&#160;<br/>
<b>6.2&#160;&#160;Configuration of ECUM with&#160;DaVinci Configurator/EAD&#160;</b><br/>
The ECUM&#160;is configured with the help of the configuration tool DaVinci Configurator/EAD.&#160;<br/>
<b>Info</b>&#160;<br/>
&#160;&#160;In case of object delivery modifications are without effect,&#160;if a&#160;parameter is&#160;specified as&#160;a&#160;<br/>
pre-compile value. Different object code is needed for different settings.&#160;Other object&#160;<br/>files can&#160;be&#160;obtained at Vector Informatik.&#160;<br/>
&#160;<br/>
<b>6.2.1&#160;</b><br/>
<b>Start configuration of the ECUM&#160;</b><br/>
The component name of the ECU State Manager in DaVinci Configurator/EAD is “EcuM”.&#160;<br/>In the “Architecture view” (initial page) of the DaVinci Configurator/EAD, the EcuM can be&#160;<br/>opened by its context menu to start its configuration. Optionally,&#160;the EcuM can be opened&#160;<br/>for configuration with the component list under the “System” tab located at the left&#160;side of&#160;<br/>the DaVinci Configurator/EAD.&#160;<br/>
<b>6.2.2&#160;</b><br/>
<b>ECUM Configuration Perspective&#160;</b><br/>
<b>6.2.2.1&#160;</b><br/>
<b>Node &#34;Startup&#34;&#160;</b><br/>
<b>6.2.2.1.1&#160;Node &#34;Used Module&#160;Configuration&#34;&#160;</b><br/>
This node represents the configuration options for modules which provide services used&#160;<br/>by the ECUM. With the following child nodes the integrator&#160;has the possibility to specify&#160;<br/>the header files of the used&#160;modules and if the module should be used by the ECUM.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
96&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=97></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-97_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>6.2.2.1.2&#160;Node &#34;Mcu&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Mcu Include&#160;File&#160;<br/>
header&#160;<br/>
include file;&#160;<br/>
In this FileEdit&#160;element select the MCU&#160;driver&#160;<br/>
file&#160;<br/>
default:&#160;<br/>
include file.&#160;<br/>
<b>Mcu.h&#160;</b><br/>
Table 6-1&#160;&#160;&#160;Node &#34;Mcu&#34;&#160;<br/>
<b>6.2.2.1.3&#160;Node &#34;WdgM&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Use WdgM&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Enable/disable the use of the Watchdog&#160;<br/>
<b>OFF&#160;</b><br/>
Manager.&#160;<br/>
WdgM Include File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this&#160;FileEdit element select&#160;the WDGM&#160;<br/>
default:&#160;<br/>
include file.&#160;<br/>
<b>WdgM.h&#160;</b><br/>
Table 6-2&#160;&#160;&#160;Node &#34;WdgM&#34;&#160;<br/>
<b>6.2.2.1.4&#160;Node &#34;Nvm&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>
&#160;<br/>
value is written&#160;<br/>in bold&#160;<br/>
Use NVRAM&#160;Manager&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Enable/disable the use of the NVRAM &#160;<br/>
<b>OFF&#160;</b><br/>
Manager.&#160;<br/>
Nvm Include File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this FileEdit&#160;element select the NVM include&#160;<br/>
default:&#160;<br/>
file.&#160;<br/>
<b>Nvm.h&#160;</b><br/>
Nvm&#160;Types File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
Select the include file where the types of the&#160;<br/>
default:&#160;<br/>
NVM are defined.&#160;<br/>
<b>Nvm.h&#160;</b><br/>
NvM_CancelWriteAll&#160;<br/>
float 0.001..60&#160;<br/>
Contains&#160;the waiting time for ECUM in seconds.&#160;<br/>
Timeout&#160;<br/>
<b>60&#160;</b><br/>
It is the time&#160;which defines how long&#160;the&#160;ECUM&#160;<br/>will wait for NVM before it cancels the&#160;<br/>NvM_WriteAll&#160;job and transits into ECU&#160;RUN&#160;<br/>or power save state (depending from&#160;the&#160;<br/>wakeup validation result).&#160;<br/>
Table 6-3&#160;&#160;&#160;Node &#34;Nvm&#34;&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
97&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=98></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-98_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-98_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>6.2.2.1.5&#160;Node &#34;Dem&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Use Dem&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Enable/disable the use of the DEM.&#160;<br/>
<b>OFF&#160;</b><br/>
Dem Include&#160;File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this FileEdit&#160;element select the DEM include&#160;<br/>
default:&#160;<br/>
file.&#160;<br/>
<b>Dem.h&#160;</b><br/>
Table 6-4&#160;&#160;&#160;Node &#34;Dem&#34;&#160;<br/>
<b>6.2.2.1.6&#160;Node &#34;Det&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Initialize Det&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Enable/disable the use of the DET.&#160;<br/>
<b>OFF&#160;</b><br/>
Det Include File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this FileEdit&#160;element select the DET&#160;include&#160;<br/>
default:&#160;<br/>
file.&#160;<br/>
<b>Det.h&#160;</b><br/>
Table 6-5&#160;&#160;&#160;Node &#34;Det&#34;&#160;<br/>
<b>6.2.2.1.7&#160;Node &#34;ComM&#34;&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>If COMM is enabled, then a valid configuration of the COMM must be present within&#160;<br/>
&#160;&#160;the ECUC file.&#160;The configuration/generation of&#160;the ECUM will not work as expected if&#160;<br/>
no configuration is available.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Use COM Manager&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
This&#160;checkbox&#160;enables&#160;the&#160;use of the COM&#160;<br/>
<b>OFF&#160;</b><br/>
Manager.&#160;<br/>
ComM Include File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this&#160;FileEdit element select&#160;the COM&#160;<br/>
default:&#160;<br/>
Manager include file.&#160;<br/>
<b>ComM.h&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
98&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=99></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-99_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
ComM&#160;Callback File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this&#160;FileEdit element select&#160;the call back&#160;<br/>
default:&#160;<br/>
header file of the COM Manager.&#160;<br/>
<b>ComM_&#160;<br/>EcuM.h&#160;</b><br/>
Com Stack&#160;Types Include&#160;&#160;header file&#160;&#160;Include file;&#160;<br/>
This&#160;parameter specifies the name of the&#160;<br/>
File&#160;<br/>
default:&#160;<br/>
include file of the basic&#160;type definitions&#160;for the&#160;<br/>
ComStack_T<br/>
communication stack.&#160;<br/>
ypes.h&#160;<br/>
Table 6-6&#160;&#160;&#160;Node &#34;ComM&#34;&#160;<br/>
<b>6.2.2.1.8&#160;Node &#34;Rte&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Use Rte&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Enable/disable the use of the Rte.&#160;<br/>
OFF&#160;<br/>
Rte Include File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this FileEdit&#160;element select the Rte include&#160;<br/>
default:&#160;<br/>
file.&#160;<br/>
<b>Rte_Main.h&#160;</b><br/>
Table 6-7&#160;&#160;&#160;Node &#34;Rte&#34;&#160;<br/>
<b>6.2.2.1.9&#160;Node &#34;Os&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
EcuMDefaultApp Mode&#160;<br/>
AppMod<br/>
Depends on&#160;<br/>
This Edit field&#160;must be filled with the application&#160;<br/>
eType&#160;<br/>
OS&#160;<br/>
mode which should be&#160;used&#160;as default.&#160;<br/>
configuration;&#160;<br/>default:&#160;<br/>
<b>OSDEFAULTA<br/>PPMODE&#160;</b><br/>
Os include name&#160;<br/>
header&#160;<br/>
include file;&#160;<br/>
Select with this FileEdit the&#160;name of the header&#160;<br/>
file&#160;<br/>
default:&#160;<br/>
file of the OS.&#160;<br/>
<b>Os.h&#160;</b><br/>
Table 6-8&#160;&#160;&#160;Node &#34;Os&#34;&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
99&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=100></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-100_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>6.2.2.1.10&#160;&#160;Node &#34;SchM&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Use SchM&#160;<br/>
boolean&#160;<br/>
ON&#160;<br/>
Enables/disable the use of the SCHM.&#160;<br/>
<b>OFF&#160;</b><br/>
SchM include&#160;File&#160;<br/>
header file&#160;&#160;include file;&#160;<br/>
In this FileEdit&#160;element select the SCHM include&#160;<br/>
default:&#160;<br/>
file.&#160;<br/>
<b>SchM.h&#160;</b><br/>
Table 6-9&#160;&#160;&#160;Node &#34;SchM&#34;&#160;<br/>
<b>6.2.2.1.11&#160;&#160;Node “Init Configuration Sets”&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Insert&#160;<br/>
--&#160;<br/>
--&#160;<br/>
Inserts a new&#160;configuration&#160;set&#160;item.&#160;<br/>
Delete&#160;<br/>
--&#160;<br/>
--&#160;<br/>
Deletes the selected configuration set item.&#160;<br/>
Module &#160;<br/>
String&#160;<br/>
Depends on&#160;<br/>
The Module short name of the module&#160;which&#160;<br/>
parameter&#160;&#160;the available&#160;&#160;should be initialized.&#160;<br/>
modules&#160;<br/>within the&#160;<br/>configuration&#160;<br/>
ModuleRuntime&#160;<br/>
Reference&#160;&#160;Depends on&#160;<br/>
The corresponding&#160;configuration set which should&#160;<br/>
parameter&#160;&#160;the available&#160;&#160;be used for the module initialization.&#160;<br/>to a&#160;<br/>
modules&#160;<br/>
configurati<br/>
within the&#160;<br/>
on set&#160;<br/>
configuration&#160;<br/>
Table 6-10&#160;&#160;Node “Init Configuration Sets”&#160;<br/>
<b>6.2.2.1.12&#160;&#160;Nodes &#34;EcuMDriverInitListOne&#34;, &#34;EcuMDriverInitListTwo&#34;,&#160;<br/>“EcuMDriverInitListThree”, &#34;EcuMDriverRestartList&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
Insert --&#160;<br/>
<b>--&#160;</b><br/>
This button inserts a new BSW module into the&#160;<br/>table.&#160;<br/>
Delete --&#160;<br/>
<b>--&#160;</b><br/>
This button deletes the&#160;current selected&#160;BSW&#160;<br/>module&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
100&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=101></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-101_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-101_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;<br/>is written in bold&#160;<br/>
Move Up&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This button moves the current selected&#160;BSW&#160;<br/>module one row up.&#160;The&#160;order of the modules&#160;<br/>influences the order in which the Init function will&#160;<br/>be executed.&#160;<br/>
Move&#160;Down&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This button moves the current selected&#160;BSW&#160;<br/>module one row below.&#160;The order of the&#160;<br/>modules&#160;influences the order in which the Init&#160;<br/>function&#160;will be executed.&#160;<br/>
ModuleID (Table&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
In this combobox modules&#160;which are present in&#160;<br/>
column)&#160;<br/>
<b>Code&#160;</b><br/>
the ecuc&#160;configuration file are displayed.&#160;Enter&#160;<br/>the short name of the module to be initialized.&#160;<br/>Enter the keyword “Code”&#160;here to enable the&#160;<br/>field Code&#160;below.&#160;<br/>
ModuleID (Edit field)&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
Display of the current edited table item.&#160;<br/>
Init Function&#160;<br/>
C-function&#160;<br/>
<b>--&#160;</b><br/>
This&#160;parameter specifies the Init function which&#160;<br/>
identifier&#160;<br/>
<b>&#160;</b><br/>
should be used for initialization of the&#160;<br/>corresponding&#160;module.&#160;<br/>
Code&#160;<br/>
String&#160;<br/>
<b>--&#160;</b><br/>
This field allows adding&#160;extra code which is&#160;<br/>
parameter&#160;<br/>
necessary for the system initialization.&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>It is not indented to use this&#160;<br/>
&#160;&#160;field as typical source&#160;code&#160;<br/>
editor.&#160;The insertion of one&#160;<br/>line is proposed.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
Table 6-11&#160;&#160;Nodes “EcuMDriverInitListOne”, “EcuMDriverInitListTwo”, “EcuMDriverInitListThree”,&#160;“EcuMDriverRestartList”&#160;<br/>
<b>6.2.2.1.13&#160;&#160;Node Additional Includes&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Include file list&#160;<br/>
String&#160;<br/>
<b>--&#160;</b><br/>
This&#160;parameter specifies additional files&#160;to be&#160;<br/>
Paramet<br/>
included into&#160;EcuM_PBcfg.c, e.g. header files&#160;<br/>
er&#160;<br/>
where the Init() – functions are declared must&#160;<br/>be specified here.&#160;<br/>
Table 6-12&#160;Node &#34;Additional&#160;Includes&#34;&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
101&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=102></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-102_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-102_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>6.2.2.2&#160;</b><br/>
<b>Node &#34;EcuM User&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Add User&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This button adds a user&#160;of the ECU State&#160;<br/>Manager&#160;which is able to request and release&#160;<br/>RUN or POST&#160;RUN state.&#160;<br/>
Delete User&#160;<br/>
--&#160;<br/>
--&#160;<br/>
This button deletes the&#160;selected user&#160;of the&#160;<br/>ECU State Manager.&#160;<br/>
Container Name&#160;<br/>
String&#160;<br/>
<b>EcuMUserCon&#160;</b>Fill this field with unique ECU State Manager&#160;<br/>
Paramet<br/>
<b>fig&#160;</b><br/>
user&#160;names.&#160;&#160;<br/>
er&#160;<br/>
EcuMUserId Integer&#160;<br/>
1..255&#160;<br/>
The ID of the corresponding&#160;user, this ID is the&#160;<br/>
<b>1&#160;</b><br/>
port defined&#160;argument described in&#160;<a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.1.&#160;</a><br/>
Table 6-13&#160;Node &#34;EcuM User&#34;&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>For each configured user&#160;one service port will be defined.&#160;The name of the service port&#160;<br/>
&#160;&#160;corresponds exactly to the name provided here.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>6.2.2.3&#160;</b><br/>
<b>Node &#34;Time settings&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Run Self Request Period&#160;<br/>
Float Unit&#160;&#160;<b>0.100&#160;</b><br/>
How long the&#160;self run&#160;request should last must&#160;<br/>
is second&#160;<br/>
be filled in this Edit field expressed in seconds.<br/>
EcuM_ MainFunction()&#160;<br/>
Float Unit&#160;&#160;<b>0.010&#160;</b><br/>
Select&#160;with this&#160;Edit the cycle time of the&#160;<br/>
Trigger&#160;Time&#160;<br/>
is second&#160;<br/>
EcuM_MainFunction()&#160;in seconds.&#160;<br/>
Table 6-14&#160;Node &#34;Time settings&#34;&#160;<br/>
<b>6.2.2.4&#160;</b><br/>
<b>Node &#34;Wakeup&#34;&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Insert&#160;<br/>
--&#160;<br/>
--&#160;<br/>
This button adds a new&#160;wakeup source&#160;<br/>
Delete --&#160;<br/>
--&#160;<br/>
This button deletes the&#160;selected&#160;wakeup&#160;<br/>source. Per default five wakeup sources are&#160;<br/>already inserted which it is&#160;not possible to&#160;<br/>delete them.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
102&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=103></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-103_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Move&#160;Up&#160;<br/>
--&#160;<br/>
--&#160;<br/>
This button moves the selected entry one row&#160;<br/>up.&#160;<br/>
Move Down&#160;<br/>
--&#160;<br/>
--&#160;<br/>
This button moves the selected entry down.&#160;<br/>
Wakeup Source Name&#160;<br/>
String&#160;<br/>
--&#160;<br/>
This field should be filled with a valid name for&#160;<br/>
paramete<br/>
the wakeup&#160;source. &#160;<br/>
r&#160;<br/>
Wakeup&#160;Source Id&#160;<br/>
Integer&#160;<br/>
--&#160;<br/>
The ID of the corresponding&#160;wakeup&#160;source.&#160;<br/>
Validation Timeout&#160;<br/>
Float,&#160;<br/>
<b>0.000&#160;</b><br/>
This&#160;parameter specifies the maximum&#160;<br/>
unit is&#160;<br/>
&#160;<br/>
validation timeout for a wakeup&#160;source. If the&#160;<br/>
second&#160;<br/>
timeout expires the ECU is going into sleep&#160;<br/>state. Wakeup sources&#160;which don’t need&#160;<br/>validation must have a value of 0. &#160;<br/>
ComM Channel&#160;handle&#160;<br/>
--&#160;<br/>
<b>&#160;</b><br/>
Select the ComM channel&#160;handle if the wakeup&#160;<br/>source if a ComM channel. &#160;If the wakeup&#160;<br/>source is no&#160;communication channel don’t&#160;<br/>select any value.&#160;<br/>
Mcu Reset Reason&#160;<br/>
Integer&#160;<br/>
<b>-1&#160;</b><br/>
This&#160;parameter describes the mapping of&#160;reset&#160;<br/>
(these values&#160;<br/>
reasons detected by the MCU driver into&#160;<br/>
depend on Mcu&#160;&#160;wakeup&#160;sources.&#160;&#160;<br/>module&#160;<br/>
Please enter&#160;the value returned by&#160;<br/>
implementation<br/>
Mcu_GetResetReason()&#160;which should mapped&#160;<br/>
)&#160;<br/>
to the according wakeup source. &#160;<br/>
Let this field free or&#160;enter &#34;-1&#34; if the value is&#160;<br/>unknown. &#160;<br/>
If no value is configured&#160;or&#160;&#34;-1&#34; is inserted&#160;the&#160;<br/>reset reason will be mapped to&#160;<br/>ECUM_WKSOURCE_RESET.&#160;<br/>
Table 6-15&#160;Node &#34;Wakeup Sources&#34;&#160;<br/>
<b>6.2.2.5&#160;</b><br/>
<b>WdgM Modes&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in&#160;<br/>bold&#160;<br/>
WdgM Post Run&#160;<br/>
Reference&#160;&#160;<b>--&#160;</b><br/>
This&#160;WDGM mode will be&#160;selected&#160;whenever POST&#160;RUN&#160;<br/>
Mode&#160;<br/>
to WDGM&#160;<br/>
state is entered.&#160;<br/>
mode&#160;<br/>
WdgM Run&#160;Mode&#160;<br/>
Reference&#160;&#160;<b>--&#160;</b><br/>
This&#160;WDGM mode will be&#160;selected&#160;whenever RUN state&#160;<br/>
to WDGM&#160;<br/>
is entered.&#160;<br/>
mode&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
103&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=104></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-104_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in&#160;<br/>bold&#160;<br/>
WdgM Shutdown&#160;<br/>
Reference&#160;&#160;<b>--&#160;</b><br/>
This&#160;WDGM mode will be selected&#160;whenever&#160;<br/>
Mode&#160;<br/>
to WDGM&#160;<br/>
SHUTDOWN phase is entered.&#160;<br/>
mode&#160;<br/>
WdgM Wakeup&#160;<br/>
Reference&#160;&#160;<b>--&#160;</b><br/>
This&#160;WDGM mode will be selected&#160;whenever&#160;WAKEUP&#160;<br/>
Mode&#160;<br/>
to WDGM&#160;<br/>
VALIDATION&#160;state is entered.&#160;<br/>
mode&#160;<br/>
Table 6-16&#160;&#160;Node “WdgM&#160;Modes”&#160;<br/>
<b>6.2.2.6&#160;</b><br/>
<b>Node “Sleep Modes”&#160;</b><br/>
This Node does not directly display any configuration possibilities.&#160;A&#160;right click&#160;on this node&#160;<br/>will open a context menu, where sleep modes&#160;can be configured.&#160;The new configuration&#160;<br/>will be shown as a child node of “Sleep Modes”. &#160;<br/>
A&#160;right click on the child node opens a context menu, where items can be deleted or&#160;<br/>renamed.&#160;<br/>
<b>6.2.2.7&#160;</b><br/>
<b>Child Nodes of “Sleep Modes”&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default value&#160;is&#160;<br/>written in bold&#160;<br/>
Name --&#160;<br/>
<b>--&#160;</b><br/>
Display the name of the current sleep mode&#160;<br/>configuration&#160;<br/>
EcuMSleepModeId Integer&#160;<br/>
<b>0&#160;</b><br/>
This&#160;parameter specifies the ID of the sleep&#160;<br/>
0..255&#160;<br/>
mode.&#160;<br/>
Mcu Mode&#160;<br/>
--&#160;<br/>
Depends on&#160;<br/>
This&#160;parameter specifies the MCU mode which&#160;<br/>
MCU&#160;<br/>
should the ECUM&#160;select when the sleep mode&#160;<br/>
configuration&#160;<br/>
is entered.&#160;<br/>
WdgM mode&#160;<br/>
--&#160;<br/>
Depends on&#160;<br/>
This&#160;parameter specifies the WDGM mode&#160;<br/>
WDGM&#160;<br/>
which should&#160;be selected by&#160;the ECUM when&#160;<br/>
configuration&#160;<br/>
the sleep mode is entered.&#160;<br/>
Enabled Wakeup&#160;Sources&#160;--&#160;<br/>
Depends on&#160;<br/>
This&#160;parameter specifies the wakeup sources&#160;<br/>
configured&#160;<br/>
which should&#160;be enabled&#160;when the sleep&#160;mode&#160;<br/>
wakeup&#160;<br/>
is selected.&#160;<br/>
sources&#160;<br/>
Table 6-17&#160;Child Nodes of “Sleep Modes”&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
104&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=105></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-105_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-105_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-105_3.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>6.2.2.8&#160;</b><br/>
<b>Node “TTII”&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in&#160;<br/>bold&#160;<br/>
Enable TTII&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
This&#160;checkbox&#160;enables&#160;the&#160;use of the&#160;TTII protocol.&#160;<br/>
<b>OFF&#160;</b><br/>
TTII Wakeup&#160;Source&#160;&#160;Reference&#160;&#160;Depends&#160;&#160;Select in this&#160;DropDownList the wakeup&#160;source which&#160;<br/>
parameter&#160;&#160;on the&#160;<br/>
should act as wakeup&#160;source for&#160;TTII. &#160;<br/>
to&#160;<br/>
wakeup&#160;<br/>
<b>&#160;</b><br/>
configured&#160;&#160;source&#160;<br/>wakeup&#160;<br/>
configura<br/>
<b>Info</b>&#160;<br/>
sources&#160;<br/>
tion.&#160;<br/>
The selected wakeup&#160;<br/>source should be a&#160;<br/>
Default:&#160;<br/>
timer.&#160;<br/>
<b>ECUM_</b><br/>
<b>&#160;</b><br/>
<b>WKSOU</b><br/>
&#160;<br/>
<b>RCE_PO<br/>WER&#160;</b><br/>
Insert --&#160;<br/>
--&#160;<br/>
This Button inserts a new&#160;successor sleep mode for&#160;TTII&#160;<br/>use.&#160;<br/>
Delete --&#160;<br/>
<b>--&#160;</b><br/>
This Button deletes the&#160;selected&#160;sleep mode from the&#160;<br/>table.&#160;<br/>
EcuMSuccessor&#160;<br/>
Reference&#160;&#160;Depends&#160;&#160;A&#160;click into the field opens&#160;a DropDownList of the&#160;<br/>parameter&#160;&#160;on the&#160;<br/>
configured&#160;sleep mode. Select one from&#160;the list.&#160;The&#160;TTII&#160;<br/>
to&#160;<br/>
sleep&#160;<br/>
will use each&#160;sleep mode from top to bottom in this list.&#160;&#160;<br/>
configured&#160;&#160;mode&#160;<br/>
Therefore order this list from&#160;more power consuming to&#160;<br/>
sleep&#160;<br/>
configura&#160;less power&#160;consuming.&#160;<br/>
modes.&#160;<br/>
tion.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>The integrator has the&#160;<br/>responsibility to order&#160;<br/>this list from more&#160;<br/>power consuming to&#160;<br/>less power consuming.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
EcuMDivisor Integer&#160;<br/>
1&#160;This field must be filled with&#160;the divisor&#160;value for this&#160;<br/>
sleep mode.&#160;<br/>
Table 6-18&#160;Node “TTII”&#160;<br/>
<b>6.2.2.9&#160;</b><br/>
<b>Node “Shutdown”&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Default State&#160;<br/>
EcuM_<br/>
Sleep&#160;<br/>
This&#160;parameter specifies the default shutdown target&#160;<br/>
StateTy&#160;<b>Reset&#160;</b><br/>
state.&#160;<br/>
pe&#160;<br/>
Off&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
105&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=106></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-106_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Default Sleep&#160;Mode&#160;<br/>
--&#160;<br/>
&#160;<br/>
This&#160;parameter specifies the sleep mode which should&#160;<br/>be selected&#160;when the default shutdown target state is&#160;<br/>“Sleep”.&#160;<br/>
Table 6-19&#160;Node “Shutdown”&#160;<br/>
<b>6.2.3&#160;</b><br/>
<b>General Settings Perspective&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in bold<br/>
Enable Development&#160;&#160;boolean&#160;<br/>
<b>ON&#160;</b><br/>
It is&#160;the main switch&#160;over following&#160;buttons:&#160;<br/>
Error Detection&#160;<br/>
OFF&#160;<br/>
&#160;&#160;Check Parameter&#160;<br/>
&#160;&#160;Check Uninit&#160;<br/>
&#160;&#160;Det Errorhook include file&#160;<br/>
&#160;&#160;Det Errorhook Function&#160;<br/>
The checks simplify the search for errors. In production&#160;<br/>mode, this&#160;switch should be&#160;disabled to&#160;save RAM and to&#160;<br/>speed up the&#160;module.&#160;<br/>
Check Parameter&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
This&#160;check is&#160;the main switch over:&#160;<br/>
OFF&#160;<br/>
&#160;&#160;Check Pointer Parameter&#160;<br/>
&#160;&#160;Check State Parameter&#160;<br/>
&#160;&#160;Check Wakeup Source Parameter&#160;<br/>
&#160;&#160;Check BootTarget Parameter&#160;<br/>
&#160;&#160;Check SleepMode Parameter&#160;<br/>
&#160;&#160;Check User&#160;Parameter&#160;<br/>
&#160;&#160;Check ConfigType&#160;<br/>
Check Pointer&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that a pointer&#160;<br/>
Parameter&#160;<br/>
OFF&#160;<br/>
parameter is&#160;not equal to&#160;NULL_PTR.&#160;<br/>
Check State&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that a&#160;<br/>
Parameter&#160;<br/>
OFF&#160;<br/>
parameter of type EcuM_StateType is&#160;within the&#160;<br/>expected range.&#160;<br/>
Check Wakeup&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that a&#160;<br/>
Source Parameter&#160;<br/>
OFF&#160;<br/>
parameter of&#160;Type EcuM_WakeupSourceType is within&#160;<br/>the expected range.&#160;<br/>
Check BootTarget&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that a&#160;<br/>
Parameter&#160;<br/>
OFF&#160;<br/>
parameter of&#160;Type EcuM_BootTargetType is within&#160;the&#160;<br/>expected range.&#160;<br/>
Check SleepMode&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that a&#160;<br/>
Parameter&#160;<br/>
OFF&#160;<br/>
parameter of&#160;Type EcuM_SleepModeType is within&#160;the&#160;<br/>expected range.&#160;<br/>
Check User&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that a&#160;<br/>
Parameter&#160;<br/>
OFF&#160;<br/>
parameter of&#160;Type EcuM_UserType is&#160;within the&#160;<br/>expected range.&#160;<br/>
Check ConfigType&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
If the check is activated, it&#160;will be verified that the&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
106&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=107></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-107_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-107_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in bold<br/>
OFF&#160;<br/>
configuration structure of ECUM is&#160;not a&#160;NULL_PTR.&#160;<br/>
Det Errorhook&#160;<br/>
C-<br/>
Valid C-<br/>
Defines the function&#160;that is to be called&#160;in case of a&#160;<br/>
Function&#160;<br/>
function&#160;<br/>
function&#160;<br/>
Development&#160;Error.&#160;<br/>
identifier&#160;&#160;identifier,&#160;<br/>
default:&#160;<br/>
<b>Det_Repo<br/>rtError &#160;</b><br/>
Det Include File&#160;<br/>
header&#160;<br/>
Valid&#160;<br/>
Include this header to get the declaration of&#160;<br/>
file&#160;<br/>
header file,&#160;&#160;Det_ReportError.&#160;<br/>default:&#160;<br/>
<b>Det.h&#160;</b><br/>
Enable Production&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Enable this identifier in production&#160;mode, for reporting&#160;<br/>
Error Reporting&#160;<br/>
OFF&#160;<br/>
production’s&#160;errors.&#160;<br/>
Dem Errorhook&#160;<br/>
C-<br/>
Valid C-<br/>
Defines the function&#160;that is to be called&#160;in case of a&#160;<br/>
function&#160;<br/>
function&#160;<br/>
function&#160;<br/>
production error.&#160;<br/>
identifier&#160;&#160;identifier,&#160;<br/>
default:&#160;<br/>
<b>Dem_&#160;<br/>ReportErr<br/>orStatus&#160;</b><br/>
Dem Errorhook&#160;<br/>
header&#160;<br/>
Valid&#160;<br/>
Select the name of the include file where the used&#160;DEM&#160;<br/>
include file&#160;<br/>
file&#160;<br/>
header file,&#160;&#160;is declared.&#160;<br/>default:&#160;<br/>
<b>Dem.h&#160;</b><br/>
Critical Section&#160;<br/>
--&#160;<br/>
<b>UseSuspe&#160;</b>Specifies the function&#160;set that shall be&#160;called when&#160;critical&#160;<br/>
Handling&#160;<br/>
<b>ndFunctio&#160;</b>sections&#160;are&#160;entered&#160;or left.&#160;<br/><b>ns&#160;</b><br/>
<b>Info</b>&#160;<br/>
UseOSFun<br/>
This dropdown list is&#160;<br/>
ctions&#160;<br/>
disabled if the BSW&#160;<br/>
UseEnable<br/>
Scheduler&#160;is&#160;enabled&#160;<br/>
Functions&#160;<br/>
within the OS&#160;<br/>configuration tab of&#160;<br/>the ECU&#160;<br/>configuration. Hence,&#160;<br/>the functions&#160;of the&#160;<br/>Schedule Manager&#160;<br/>are used by the ECU&#160;<br/>State Manager to&#160;<br/>protect the critical&#160;<br/>sections.&#160;&#160;<br/>
<b>&#160;</b><br/>
Generate&#160;<br/>
--&#160;<br/>
<b>ON&#160;</b><br/>
Enables&#160;the generation of StateRequest Ports. If enabled&#160;<br/>
StateRequest Ports&#160;<br/>
OFF&#160;<br/>
for each ECUM user a StateRequest port will be&#160;<br/>generated.&#160;<br/>
Generate&#160;<br/>
--&#160;<br/>
<b>ON&#160;</b><br/>
Enables&#160;the generation of the&#160;ApplicationMode Port. If&#160;<br/>
ApplicationMode&#160;<br/>
OFF&#160;<br/>
enabled one&#160;Port of this kind will be generated.&#160;<br/>
Port&#160;<br/>
Generate BootTarget&#160;&#160;--&#160;<br/>
<b>ON&#160;</b><br/>
Enables&#160;the generation of the BootTarget&#160;Port. If enabled&#160;<br/>
Port&#160;<br/>
OFF&#160;<br/>
one Port of this kind&#160;will be&#160;generated.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
107&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=108></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-108_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-108_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-108_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-108_4.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in bold<br/>
Generate&#160;<br/>
--&#160;<br/>
<b>ON&#160;</b><br/>
Enables&#160;the generation of the ShutdownTarget Port. If&#160;<br/>
ShutdownTarget Port&#160;<br/>
OFF&#160;<br/>
enabled one&#160;Port of this kind will be generated.&#160;<br/>
Generate Current&#160;<br/>
-- ON&#160;This&#160;parameter enables&#160;the generation&#160;of the&#160;<br/>
Mode Port&#160;<br/>
<b>OFF&#160;</b><br/>
EcuM_CurrentMode sender-receiver interface within&#160;the&#160;<br/>SW-C description and the&#160;usage of a callback function&#160;<br/>for mode&#160;switch notification.&#160;&#160;<br/>
The used notification function depends on the ECUM&#160;<br/>parameter EcuMIncludeRte: &#160;<br/>&#160;&#160;If this parameter is&#160;set to ON the ECUM will&#160;use the&#160;<br/>
provided&#160;RTE&#160;function&#160;<br/>Rte_Switch_currentMode_currentMode(). &#160;<br/>
&#160;&#160;If the parameter EcuMIncludeRte is&#160;set to OFF the&#160;<br/>
callback function&#160;<br/>EcuM_Appl_currentMode_currentMode()&#160;will be used&#160;<br/>to notify mode switch event.&#160;<br/>
Enables&#160;the&#160;<br/>
--&#160;<br/>
<b>ON&#160;</b><br/>
This&#160;parameter enables&#160;the feedback mechanism from&#160;<br/>
Acknowledge&#160;<br/>
OFF&#160;<br/>
RTE.&#160;The ECUM leaves&#160;its main states&#160;(RUN,&#160;<br/>
Mechanism&#160;<br/>
POST_RUN,&#160;GO_SLEEP&#160;and GO_OFF_ONE) only in&#160;<br/>case the RTE achieves&#160;the&#160;current state and has&#160;<br/>informed&#160;the ECUM about&#160;it by sending&#160;a feedback.&#160;<br/>
This&#160;parameter is dependent from “Generate Current&#160;<br/>Mode Port” parameter.&#160;<br/>
<b>Info</b>&#160;<br/>This parameter is used for&#160;<br/>
&#160;<br/>
synchronization between RTE&#160;<br/>and ECUM.&#160;<br/>
&#160;<br/>
Service Component&#160;<br/>
--&#160;<br/>
service&#160;<br/>
In this field specify the Name&#160;of the service component&#160;<br/>
Name&#160;<br/>
component&#160;which will be&#160;displayed in&#160;the Rte generation tool.&#160;<br/>'s name;&#160;<br/>
<b>Info</b>&#160;<br/>
default:&#160;<br/>
Please choose different&#160;names of&#160;<br/>
<b>EcuM&#160;</b><br/>
&#160;<br/>
the service&#160;component ECUM if&#160;<br/>one DaVinci project has&#160;more&#160;<br/>than one ECUM.&#160;<br/>
&#160;<br/>
Sleep mode&#160;ISR&#160;<br/>
-- &#160;<br/>
This&#160;parameter should&#160;reference an appropriate function&#160;<br/>
handling&#160;<br/>
set which disables/enables&#160;the global interrupts.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Caution</b>&#160;<br/>Do not use an OS function for&#160;<br/>
&#160;<br/>
this parameter&#160;<br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
108&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=109></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-109_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-109_2.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is&#160;<br/>written in bold<br/>
<b>Info</b>&#160;<br/>This parameter is ECU specific&#160;<br/>
&#160;<br/>
and depends strongly on the&#160;<br/>used platform.&#160;<br/>
No transformation of the value of&#160;<br/>this parameter will be performed,&#160;<br/>i.e. the user&#160;is responsible to&#160;<br/>enter the correct syntax&#160;of this&#160;<br/>parameter.&#160;<br/>
&#160;<br/>
Table 6-20&#160;General Settings&#160;<br/>
<b>6.2.4&#160;</b><br/>
<b>Module API Perspective&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;&#160;Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;<br/>default&#160;<br/>value is&#160;<br/>written in&#160;<br/>bold&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
EcuM_GetVersionInfo()&#160;use will be&#160;enabled.&#160;<br/>
EcuM_GetVersion&#160;<br/>
OFF&#160;<br/>
Info&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
EcuM_KillAllRUNRequest()&#160;use will&#160;be enabled&#160;<br/>
EcuM_KillAllRUN&#160;<br/>
OFF&#160;<br/>
Requests&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
EcuM_GetValidatedWakeupEvents()&#160;use will be&#160;<br/>
EcuM_GetValidated<br/>
OFF&#160;<br/>
enabled&#160;<br/>
WakeupEvents&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
EcuM_GetExpiredWakeupEvents()&#160;use&#160;will be enabled&#160;<br/>
EcuM_GetExpired&#160;<br/>
OFF&#160;<br/>
WakeupEvents&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
EcuM_GetStatusOfWakeupSource()&#160;use will be&#160;enabled<br/>
EcuM_GetStatusOf&#160;<br/>
OFF&#160;<br/>
WakeupSource&#160;<br/>
Table 6-21&#160;Module&#160;API&#160;<br/>
<b>6.2.5&#160;</b><br/>
<b>Module Callouts Perspective&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnRTEStartup()&#160;will be&#160;<br/>
EcuM_OnRTE&#160;<br/>
OFF&#160;<br/>
enabled..&#160;<br/>
Startup&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnEnterRun()&#160;will be enabled.&#160;<br/>
EcuM_OnEnterRun&#160;<br/>
OFF&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
109&#160;/ 117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=110></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-110_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The default&#160;<br/>value is written&#160;<br/>in bold&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnExitRun()&#160;will be enabled.&#160;<br/>
EcuM_OnExitRun&#160;<br/>
OFF&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnExitPostRun()&#160;will be&#160;<br/>
EcuM_OnExitPost&#160;<br/>
OFF&#160;<br/>
enabled.&#160;<br/>
Run&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnPrepShutdown()&#160;will be&#160;<br/>
EcuM_OnPrep&#160;<br/>
OFF&#160;<br/>
enabled.&#160;<br/>
Shutdown&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnGoSleep()&#160;will be enabled.&#160;<br/>
EcuM_OnGoSleep&#160;<br/>
OFF&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnGoOffOne()&#160;will be enabled.&#160;<br/>
EcuM_OnGoOffOne&#160;<br/>
OFF&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnGoOffTwo()&#160;will be enabled.&#160;<br/>
EcuM_OnGoOffTwo&#160;<br/>
OFF&#160;<br/>
Enable&#160;<br/>
boolean&#160;<br/>
<b>ON&#160;</b><br/>
Use of callout&#160;EcuM_OnWakeupReaction()&#160;will be&#160;<br/>
EcuM_OnWakeupRe<br/>
OFF&#160;<br/>
enabled.&#160;<br/>
action&#160;<br/>
Enable&#160;<br/>
boolean ON&#160;<br/>
Use of callout&#160;<br/>
EcuM_GeneratorCo<br/>
<b>OFF&#160;</b><br/>
EcuM_GeneratorCompatibilityError()&#160;will be&#160;<br/>
mpatibilityError&#160;<br/>
enabled.&#160;<br/>
Table 6-22&#160;Module Callouts&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
110&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=111></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-111_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>7&#160;&#160;AUTOSAR Standard Compliance&#160;</b><br/>
<b>7.1&#160;&#160;Deviations&#160;</b><br/>
<b>7.1.1&#160;</b><br/>
<b>Service Port Generation&#160;</b><br/>
Export of SWC Description assumes an&#160;AppModeType with 8 bit data&#160;width (uint8).&#160;<br/>
<b>7.1.2&#160;</b><br/>
<b>Supervised Entity&#160;in WDGM&#160;</b><br/>
The configuration of the ECUM&#160;as a supervised entity of&#160;the WDGM is not supported.&#160;<br/>
<b>7.1.3&#160;</b><br/>
<b>Parameter “EcuMWdgMStartupModeRef” not supported&#160;</b><br/>
The configuration parameter EcuMWdgMStartupModeRef is not supported. &#160;<br/>
<b>7.1.4&#160;</b><br/>
<b>Signature and name of DriverInitLists&#160;in configuration variant “post-build”&#160;</b><br/>
The method signature&#160;of the callouts &#160;<br/>
&#160;&#160;EcuM_AL_DriverInitOne()&#160;<br/>
&#160;&#160;EcuM_AL_DriverInitTwo()&#160;<br/>
&#160;&#160;EcuM_AL_DriverInitThree()&#160;<br/>
&#160;&#160;EcuM_AL_DriverRestart()&#160;<br/>
are different as specified in&#160;<a href="TechnicalReference_Asr_EcuMs.html#4">[1] to provide more flexib</a>ility and library capability.&#160;<br/>
These callouts are replaced by&#160;function pointers stored in the EcuM_ConfigType.&#160;The&#160;<br/>configuration is transparent to the user.&#160;<br/>
<b>7.1.5&#160;</b><br/>
<b>Enabling/Disabling wakeup sources&#160;</b><br/>
The callout&#160;EcuM_EnableWakeupSources() is executed&#160;whenever&#160;RUN state is left&#160;and&#160;<br/>shutdown target is ECUM_STATE_SLEEP&#160;or ECUM_STATE_OFF.&#160;<br/>
The callout EcuM_DisableWakeupSources() is&#160;executed whenever&#160;RUN state is entered&#160;<br/>and the shutdown target is ECUM_STATE_SLEEP&#160;or ECUM_STATE_OFF.&#160;<br/>
<b>7.1.6&#160;</b><br/>
<b>Execution flow&#160;in shutdown&#160;sequence&#160;</b><br/>
The ECUM&#160;SWS specifies the following execution flow when shutdown target ECUM_-<br/>STATE_OFF is selected:&#160;<br/>&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;Rte_Stop()&#160;<br/>
&#160;&#160;ComM_DeInit()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;Wait until NvM_WriteAll() has finished.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
111&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=112></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-112_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
&#160;&#160;ShutdownOS()&#160;<br/>
&#160;<br/>
To&#160;enable a fast reaction time for wakeup events while NVRAM data&#160;is written this ECUM&#160;<br/>implementation changed this&#160;execution flow into the following sequence:&#160;<br/>&#160;<br/>
&#160;&#160;Dem_Shutdown()&#160;<br/>
&#160;&#160;NvM_WriteAll()&#160;<br/>
&#160;&#160;Wait until NvM_WriteAll() has finished&#160;<br/>
&#160;&#160;Rte_Stop()&#160;<br/>
&#160;&#160;ComM_DeInit()&#160;<br/>
&#160;&#160;ShutdownOS()&#160;<br/>
<b>7.2&#160;&#160;Additions/ Extensions&#160;</b><br/>
<b>7.2.1&#160;</b><br/>
<b>Parameter Checking&#160;</b><br/>
The internal parameter checks of the&#160;API functions can be en-/disabled separately.&#160;The&#160;<br/>AUTOSAR standard requires en-/disabling of the complete parameter checking only.&#160;For&#160;<br/>details see chapter&#160;<a href="TechnicalReference_Asr_EcuMs.html#26">3.6.1.1.&#160;</a><br/>
<b>7.2.2&#160;</b><br/>
<b>State Request service port&#160;</b><br/>
The ECUM&#160;provides&#160;an additional operation in the&#160;StateRequest port.&#160;The current state of&#160;<br/>the ECUM can be retrieved by&#160;the GetState operation.&#160;<br/>
<b>7.2.3&#160;</b><br/>
<b>Wakeup validation in each state&#160;</b><br/>
This ECUM implementation provides the possibility to perform a wakeup validation in each&#160;<br/>state, especially the validation of communication channels while ECUM is in RUN state.&#160;<br/>
<b>7.2.4&#160;</b><br/>
<b>Callout EcuM_GeneratorCompatibilityError()&#160;</b><br/>
This callout is additional to the&#160;AUTOSAR standard. Further information can be found in&#160;<br/><a href="TechnicalReference_Asr_EcuMs.html#87">chapter&#160;5.6.2.25.&#160;</a><br/>
<b>7.2.5&#160;</b><br/>
<b>Buffering of wakeup events until COMM is initialized&#160;</b><br/>
The ECUM buffers wakeup events until it is&#160;assured that COMM is initialized. Wakeup&#160;<br/>events on communication channels are propagated to COMM module.&#160;The&#160;AUTOSAR&#160;<br/>standard can not require that COMM module is&#160;already initialized when a wakeup event&#160;<br/>occur in startup phase, because of the different&#160;initialization phases and component&#160;<br/>modularization. After&#160;finishing&#160;DriverInitListThree&#160;all wakeup&#160;events&#160;on&#160;<br/>communication channels are reported to COMM.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
112&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=113></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-113_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>7.3&#160;&#160;Limitations&#160;</b><br/>
<b>7.3.1&#160;</b><br/>
<b>Link-time&#160;Configuration not supported&#160;</b><br/>
The ECUM&#160;module supports&#160;only post-build and pre-compile configuration.&#160;<br/>
<b>7.3.2&#160;</b><br/>
<b>Configuration Check via Consistency&#160;Hash not implemented&#160;</b><br/>
The consistency check as proposed by&#160;AUTOSAR is not implemented because this&#160;<br/>feature is not clearly stated enough. &#160;<br/>
<b>7.3.3&#160;</b><br/>
<b>Not implemented Callouts&#160;</b><br/>
The callouts&#160;EcuM_Errorhook()&#160;and&#160;EcuM_SleepActivity()&#160;are currently not&#160;<br/>supported.&#160;<br/>
<b>7.3.4&#160;</b><br/>
<b>References&#160;in ECUC File&#160;</b><br/>
The ECUM&#160;uses references within the ECUC file. If one of the referenced modules&#160;does&#160;<br/>not support&#160;the ECUC file the DaVinci Configurator/EAD generates a warning. Referenced&#160;<br/>modules are: OS, COMM, WDGM, MCU and BSW&#160;modules which should be initialized.&#160;<br/>
<b>7.3.5&#160;</b><br/>
<b>Not supported configuration parameters&#160;</b><br/>
Some of the specified configuration parameters are not supported.&#160;These parameters are&#160;<br/>marked with the addition “Not used” in the corresponding parameter description.&#160;The&#160;<br/>description is located within the modules bswmd file which is part of the delivery.&#160;<br/>
<b>7.3.6&#160;</b><br/>
<b>Polling of Wakeup Sources Is Not Supported&#160;</b><br/>
This ECUM implementation does&#160;not support the polling of wakeup sources,&#160;i.e. the callout&#160;<br/>EcuM_CheckWakeup() will not be executed by the&#160;ECUM itself to query the wakeup&#160;<br/>sources if a wakeup event has occurred.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
113&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=114></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-114_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>8&#160;&#160;Glossary and&#160;Abbreviations&#160;</b><br/>
<b>8.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
EAD&#160;<br/>
Embedded&#160;Architecture&#160;Designer; generation tool for MICROSAR&#160;<br/>components&#160;<br/>
DaVinci&#160;<br/>
The DaVinci&#160;Tool Suite&#160;is a design environment for the development of&#160;<br/>distributed electronic&#160;systems in the&#160;automotive&#160;domain. It consists&#160;of&#160;<br/>several tools, which may be used standalone or&#160;in combination.&#160;The&#160;<br/>DaVinci&#160;Tool&#160;Suite provides you with a seamless&#160;support throughout the&#160;<br/>development process.&#160;The functionality goes from&#160;design of distributed&#160;<br/>functions to&#160;the definition of network communication to the application&#160;<br/>development, configuration and generation (since&#160;DaVinci Configurator&#160;<br/>Pro) of networked ECUs.&#160;<br/>
For each working step a&#160;dedicated tool is available:&#160;<br/>
<b>Tool&#160;</b><br/>
<b>Description&#160;</b><br/>
DaVinci System&#160;Architect&#160;<br/>
With DaVinci System&#160;Architect you may&#160;<br/>define the distributed SW architecture of&#160;<br/>vehicles according to the&#160;AUTOSAR&#160;<br/>methodology.&#160;<br/>
DaVinci Network Designer&#160;&#160;With the DaVinci Network Designer&#160;tools&#160;<br/>
&#160;<br/>
you design the network architecture&#160;of the&#160;<br/>vehicles and&#160;the data communication on&#160;<br/>the networks.&#160;The networking data&#160;are the&#160;<br/>base for subsequent development steps&#160;<br/>like system simulation, configuration&#160;of the&#160;<br/>ECU software as well as ECU and system&#160;<br/>integration tests.&#160;<br/>
DaVinci Developer &#160;<br/>
During the ECU development you&#160;may use&#160;<br/>
&#160;<br/>
DaVinci Developer to design&#160;AUTOSAR&#160;<br/>compliant applications&#160;and to integrate&#160;<br/>them based on an&#160;AUTOSAR RTE (runtime&#160;<br/>environment).&#160;<br/>
DaVinci Configurator Pro&#160;<br/>
For MICROSAR components configuration&#160;<br/>and generation you may&#160;use the DaVinci&#160;<br/>Configurator Pro. It is the successor&#160;from&#160;<br/>EAD.&#160;<br/>
&#160;<br/>
DriverInitList&#160;<br/>
A&#160;list of basic software init functions which are executed by the EcuM in&#160;<br/>the startup phase.&#160;The ECUM provides four DriverInitList’s: &#160;<br/>
&#160;&#160;EcuMDriverInitListZero&#160;<br/>
&#160;&#160;EcuMDriverInitListOne&#160;<br/>
&#160;&#160;EcuMDriverInitListTwo&#160;<br/>
&#160;&#160;EcuMDriverInitListThree&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
114&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=115></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-115_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
MSN&#160;<br/>
Module Short name, the&#160;AUTOSAR&#160;short name of the module, e.g. Can,&#160;<br/>CanIf, EcuM, etc…&#160;<br/>
GENy&#160;<br/>
Generation tool for CANbedded and&#160;MICROSAR components&#160;<br/>
Configuration Tool&#160;<br/>
Could be EAD, DaVinci Configurator or GENy in this document.&#160;<br/>
Table 8-1&#160;&#160;&#160;Glossary&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
API Application&#160;<br/>
Programming&#160;<br/>
Interface&#160;<br/>
&#160;<br/>
AUTOSAR Automotive&#160;<br/>
Open&#160;<br/>
System&#160;<br/>
Architecture&#160;<br/>
BSW Basis&#160;<br/>
Software&#160;<br/>
CAN Controller&#160;<br/>
Area&#160;<br/>
Network&#160;<br/>
COMM Communication&#160;<br/>
Manager&#160;<br/>
DEM Diagnostic&#160;<br/>
Event&#160;<br/>
Manager&#160;<br/>
DET Development&#160;<br/>
Error&#160;<br/>
Tracer&#160;<br/>
EAD Embedded&#160;<br/>
Architecture&#160;<br/>
Designer&#160;<br/>
ECU&#160;<br/>
Electronic Control Unit&#160;<br/>
EcuC&#160;<br/>
ECU configuration description&#160;<br/>
ECUM ECU&#160;<br/>
Manager&#160;<br/>
GPT General&#160;<br/>
Purpose&#160;<br/>
Timer&#160;<br/>
HIS&#160;<br/>
Hersteller Initiative Software&#160;<br/>
ICU&#160;<br/>
Input Capture Unit&#160;<br/>
ISR&#160;<br/>
Interrupt Service Routine&#160;<br/>
MCU&#160;<br/>
Microprocessor Control Unit&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller Open System&#160;Architecture (the Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>
NVM NVRAM&#160;<br/>
Manager&#160;<br/>
NVRAM&#160;<br/>
Non Volatile&#160;Random&#160;Access Memory&#160;<br/>
OS Operating&#160;<br/>
System&#160;<br/>
Pport Provide&#160;<br/>
Port&#160;<br/>
Rport Require&#160;<br/>
Port&#160;<br/>
RTE Runtime&#160;<br/>
Environment&#160;<br/>
SCHM Scheduling&#160;<br/>
Manager&#160;<br/>
SRS&#160;<br/>
Software Requirement Specification&#160;<br/>
SWC Software&#160;<br/>
Component&#160;<br/>
SWS Software&#160;<br/>
Specification&#160;<br/>
WDGM Watchdog&#160;<br/>
Manager&#160;<br/>
PLL Phase-locked&#160;<br/>
loop&#160;<br/>
TTII&#160;<br/>
Time&#160;Triggered Increased Inoperation&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
115&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=116></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-116_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
MSN&#160;<br/>
Module Short Name&#160;<br/>
Table 8-2&#160;&#160;&#160;Abbreviations&#160;<br/>
&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
116&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name=117></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_EcuM-117_1.png"/><br/>
Technical Reference MICROSAR ECUM &#160;<br/>
&#160;<br/>
<b>9&#160;&#160;Contact&#160;</b><br/>
Visit our website for more information on&#160;<br/>&#160;<br/>&gt;&#160; &#160;News&#160;<br/>&gt;&#160; &#160;Products&#160;<br/>&gt;&#160; &#160;Demo software&#160;<br/>&gt;&#160; &#160;Support&#160;<br/>&gt;&#160; &#160;Training data&#160;<br/>&gt;&#160; &#160;Addresses&#160;<br/>&#160;<br/>
<a href="http://www.vector-informatik.com/<br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
Version: 2.07.02&#160;<br/>
117&#160;/&#160;117<br/>
based on template&#160;version 3.1&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#2">1 Document Information</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#2">1.1 History</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#4">1.2 Reference Documents</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#15">2 Introduction</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#16">2.1 Architecture Overview</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#18">3 Functional Description</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#18">3.1 Features</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#19">3.2 Initialization</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#19">3.3 Startup into wakeup validation state</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#20">3.4 States</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#21">3.5 Main Functions</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#21">3.5.1 Run Request Protocol</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#22">3.5.2 Time Triggered Increased Inoperation Protocol</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#22">3.5.3 Wakeup Validation Protocol</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#24">3.6 Error Handling</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#24">3.6.1 Development Error Reporting</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#26">3.6.1.1 Parameter Checking</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#28">3.6.2 Production Code Error Reporting</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#28">3.6.3 Vector specific error reporting</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#29">4 Integration</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#29">4.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#29">4.1.1 Static Files</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#29">4.1.2 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#30">4.2 Include Structure</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#30">4.3 Compiler Abstraction and Memory Mapping&#160;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#31">4.4 Dependencies on SW modules</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#31">4.4.1 AUTOSAR OS</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#31">4.4.2 MCU</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#32">4.4.3 DEM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#32">4.4.4 DET</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#32">4.4.5 WDGM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#32">4.4.6 COMM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#32">4.4.7 NVM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#33">4.4.8 RTE</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#33">4.4.9 SCHM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#33">4.4.10 Other BSW Modules</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#34">4.5 Successive Adding of Modules</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#34">4.6 Callout execution sequences</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#40">4.7 &#160;Critical code sections</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#40">4.7.1 Wakeup Interrupt Source Handling – General Description</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#41">4.7.2 Interrupt Source Handling – Cautions and further Information</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#41">4.8 AUTOSAR stack initialization</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#41">4.8.1 Configuration set selection</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#43">4.8.2 Initialization order</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#44">4.9 Handling of wakeup events after ShutdownOS()</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#44">4.10 Wakeup event handling and Wakeup Validation</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#45">4.10.1 Wakeup after a physical sleep mode</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#45">4.10.1.1 Use case description</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#45">4.10.1.2 Execution flow</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#46">4.10.1.3 Callout implementation examples</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2 Handling of wakeup events while ECUM is in RUN state</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2.1 Use case description</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2.2 Execution flow</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.2.3 Callout implementation examples</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.3 Wakeup validation of communication channels (ECUM in RUN state)</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.3.1 Use case description</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#47">4.10.3.2 Execution flow</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#49">4.10.3.3 Callout implementation examples</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#50">4.10.4 Notes to Mcu_SetMode()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#50">4.11 Multiple Identity ECUs</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#50">4.11.1 Restrictions when implementation variant PreCompile is used</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#51">4.11.1.1 Initialization</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#51">4.11.1.2 EcuM configuration&#160;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#51">4.12 Generated Template Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#53">5 API Description</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#53">5.1 Interfaces Overview</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#53">5.2 Type Definitions</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#55">5.3 Services provided by ECUM</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#55">5.3.1 EcuM_Init</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#56">5.3.2 EcuM_Shutdown</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#57">5.3.3 EcuM_GetVersionInfo</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#57">5.3.4 EcuM_RequestRUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#58">5.3.5 EcuM_ReleaseRUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#58">5.3.6 EcuM_ComM_RequestRUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#59">5.3.7 EcuM_ComM_ReleaseRUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#59">5.3.8 EcuM_ComM_HasRequestedRUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#60">5.3.9 EcuM_RequestPOST_RUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#60">5.3.10 EcuM_ReleasePOST_RUN</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#61">5.3.11 EcuM_KillAllRUNRequests</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#62">5.3.12 EcuM_SelectShutdownTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#62">5.3.13 EcuM_GetState</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#63">5.3.14 EcuM_GetShutdownTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#63">5.3.15 EcuM_GetLastShutdownTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#64">5.3.16 EcuM_GetPendingWakeupEvents</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#65">5.3.17 EcuM_ClearWakeupEvent</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#65">5.3.18 EcuM_GetValidatedWakeupEvents</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#65">5.3.19 EcuM_GetExpiredWakeupEvents</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#66">5.3.20 EcuM_GetStatusOfWakeupSource</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#67">5.3.21 EcuM_SelectApplicationMode</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#67">5.3.22 EcuM_GetApplicationMode</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#68">5.3.23 EcuM_SelectBootTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#68">5.3.24 EcuM_GetBootTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#69">5.3.25 EcuM_MainFunction</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#69">5.3.26 EcuM_StartupTwo</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#70">5.4 Services used by ECUM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#70">5.5 Callback Functions</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#70">5.5.1 EcuM_CB_NfyNvMJobEnd</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#71">5.5.2 EcuM_SetWakeupEvent</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#71">5.5.3 EcuM_ValidateWakeupEvent</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#72">5.6 Configurable Interfaces</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#72">5.6.1 Notifications</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#72">5.6.2 &#160;Callout Functions</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#72">5.6.2.1 EcuM_AL_DriverInitZero</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#73">5.6.2.2 EcuM_AL_DriverInitOne</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#74">5.6.2.3 EcuM_AL_DriverInitTwo</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#75">5.6.2.4 EcuM_AL_DriverInitThree</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#76">5.6.2.5 EcuM_DeterminePbConfiguration</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#76">5.6.2.6 EcuM_AL_SwitchOff</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#77">5.6.2.7 EcuM_AL_DriverRestart</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#77">5.6.2.8 EcuM_GenerateRamHash</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#78">5.6.2.9 EcuM_CheckRamHash</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#78">5.6.2.10 EcuM_OnRTEStartup</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#79">5.6.2.11 EcuM_OnEnterRun</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#79">5.6.2.12 EcuM_OnExitRun</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#80">5.6.2.13 EcuM_OnExitPostRun</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#80">5.6.2.14 EcuM_OnPrepShutdown</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#81">5.6.2.15 EcuM_OnGoSleep</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#81">5.6.2.16 EcuM_OnGoOffOne</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#82">5.6.2.17 EcuM_OnGoOffTwo</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#82">5.6.2.18 EcuM_OnWakeupReaction</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#83">5.6.2.19 EcuM_EnableWakeupSources</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#84">5.6.2.20 EcuM_DisableWakeupSources</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#85">5.6.2.21 EcuM_StartWakeupSources</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#86">5.6.2.22 EcuM_StopWakeupSources</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#86">5.6.2.23 EcuM_CheckWakeup</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#87">5.6.2.24 EcuM_CheckValidation</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#87">5.6.2.25 EcuM_GeneratorCompatibilityError</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#88">5.6.2.26 EcuM_Appl_SelectBootTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#89">5.6.2.27 EcuM_Appl_GetBootTarget</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#89">5.6.2.28 EcuM_McuSetMode</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#90">5.6.3 Mode switch notification functions</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#90">5.6.3.1 Appl_EcuM_currentMode_currentMode</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#91">5.6.3.2 Rte_Switch_currentMode_currentMode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#91">5.7 Service Ports</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#91">5.7.1 Client Server Interface</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#91">5.7.1.1 Provide Ports on ECUM side</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.1 StateRequest Port</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.2 ShutdownTarget Port</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.3 BootTarget Port</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#92">5.7.1.1.4 ApplicationMode Port</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#93">5.7.1.2 Require Ports on ECUM side</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#93">5.7.1.2.1 currentMode Port</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#93">5.7.2 Sender Receiver Interface</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#93">5.8 Software Component Template</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#93">5.8.1 Generation by EAD</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#94">5.8.2 Generation by DaVinci Configurator</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#95">5.8.3 Import into DaVinci Developer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6 Configuration</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6.1 Configuration Variants</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6.2 Configuration of ECUM with DaVinci Configurator/EAD</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6.2.1 Start configuration of the ECUM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6.2.2 ECUM Configuration Perspective</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6.2.2.1 Node &#34;Startup&#34;</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#96">6.2.2.1.1 Node &#34;Used Module Configuration&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#97">6.2.2.1.2 Node &#34;Mcu&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#97">6.2.2.1.3 Node &#34;WdgM&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#97">6.2.2.1.4 Node &#34;Nvm&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#98">6.2.2.1.5 Node &#34;Dem&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#98">6.2.2.1.6 Node &#34;Det&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#98">6.2.2.1.7 Node &#34;ComM&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#99">6.2.2.1.8 Node &#34;Rte&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#99">6.2.2.1.9 Node &#34;Os&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#100">6.2.2.1.10 Node &#34;SchM&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#100">6.2.2.1.11 Node “Init Configuration Sets”</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#100">6.2.2.1.12 Nodes &#34;EcuMDriverInitListOne&#34;, &#34;EcuMDriverInitListTwo&#34;, “EcuMDriverInitListThree”, &#34;EcuMDriverRestartList&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#101">6.2.2.1.13 Node Additional Includes</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.2 Node &#34;EcuM User&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.3 Node &#34;Time settings&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#102">6.2.2.4 Node &#34;Wakeup&#34;</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#103">6.2.2.5 WdgM Modes</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#104">6.2.2.6 Node “Sleep Modes”</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#104">6.2.2.7 Child Nodes of “Sleep Modes”</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#105">6.2.2.8 Node “TTII”</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#105">6.2.2.9 Node “Shutdown”</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#106">6.2.3 General Settings Perspective</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#109">6.2.4 Module API Perspective</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#109">6.2.5 Module Callouts Perspective</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7 AUTOSAR Standard Compliance</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1 Deviations</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1.1 Service Port Generation</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1.2 Supervised Entity in WDGM</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1.3 Parameter “EcuMWdgMStartupModeRef” not supported</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1.4 Signature and name of DriverInitLists in configuration variant “post-build”</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1.5 Enabling/Disabling wakeup sources</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#111">7.1.6 Execution flow in shutdown sequence</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#112">7.2 Additions/ Extensions</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#112">7.2.1 Parameter Checking</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#112">7.2.2 State Request service port</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#112">7.2.3 Wakeup validation in each state</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#112">7.2.4 Callout EcuM_GeneratorCompatibilityError()</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#112">7.2.5 Buffering of wakeup events until COMM is initialized</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3 Limitations</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3.1 Link-time Configuration not supported</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3.2 Configuration Check via Consistency Hash not implemented</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3.3 Not implemented Callouts</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3.4 References in ECUC File</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3.5 Not supported configuration parameters</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#113">7.3.6 Polling of Wakeup Sources Is Not Supported</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#114">8 Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_Asr_EcuMs.html#114">8.1 Glossary</a></li>
<li><a href="TechnicalReference_Asr_EcuMs.html#115">8.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_EcuMs.html#117">9 Contact</a></li>
</ul>
<hr/>
</body>
</html>
