---
title: TechnicalReference_Asr_Xcps
linkTitle: TechnicalReference_Asr_Xcps
weight: 103
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>XCP&#160;Protocol&#160;Layer&#160;<br/></b>Technical Reference&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
Version&#160;2.03.00&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
<b>Version:&#160;</b><br/>
2.03.00&#160;<br/>
<b>Status:&#160;</b><br/>
Released&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-2_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>1&#160;&#160;History&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;&#160;Remarks&#160;</b><br/>
2005-01-17&#160;&#160;1.00.00&#160;&#160;ESCAN00009143:&#160;Initial&#160;draft&#160;<br/>
Warning&#160;Text&#160;added&#160;<br/>
2005-06-22&#160;&#160;1.01.00&#160;&#160;FAQ&#160;extended:&#160;ESCAN00012356,&#160;ESCAN00012314&#160;<br/>
ESCAN00012617:&#160;Add&#160;service to&#160;retrieve XCP&#160;state&#160;<br/>
2005-12-20&#160;&#160;1.02.00&#160;&#160;ESCAN00013883:&#160;Revise Resume&#160;Mode&#160;<br/>2006-03-09&#160;&#160;1.03.00&#160;&#160;ESCAN00015608:&#160;Support&#160;command&#160;TRANSPORT_LAYER_CMD&#160;<br/>
ESCAN00015609:&#160;Support&#160;XCP&#160;on&#160;FlexRay&#160;Transport&#160;Layer&#160;<br/>
2006-04-24&#160;&#160;1.04.00&#160;&#160;ESCAN00015913:&#160;Correct&#160;filenames&#160;<br/>
Data&#160;page banking&#160;support&#160;of&#160;application callback&#160;template&#160;added&#160;<br/>
2006-05-08&#160;&#160;1.05.00&#160;&#160;ESCAN00016263:&#160;Describe&#160;support&#160;of&#160;reflected&#160;CRC16&#160;CCITT&#160;<br/>
ESCAN00016159:&#160;Add&#160;demo&#160;disclaimer&#160;to&#160;XCP&#160;Basic&#160;<br/>
2006-05-29&#160;&#160;1.06.00&#160;&#160;ESCAN00016226:&#160;Support&#160;XCP&#160;on&#160;LIN&#160;Transport&#160;Layer&#160;<br/>2006-07-20&#160;&#160;1.07.00&#160;&#160;ESCAN00012636:&#160;Add&#160;configuration with&#160;GENy&#160;<br/>
ESCAN00016956:&#160;Support&#160;AUTOSAR&#160;CRC&#160;module&#160;<br/>
2006-10-26&#160;&#160;1.08.00&#160;&#160;ESCAN00018115:&#160;DPRAM&#160;Support&#160;only&#160;available&#160;in&#160;XCP&#160;Basic&#160;<br/>
ESCAN00017948:&#160;Add&#160;paging&#160;support&#160;<br/>ESCAN00017221:&#160;Documentation&#160;of&#160;reentrant&#160;capability&#160;of&#160;all&#160;<br/>functions&#160;<br/>
2007-01-18&#160;&#160;1.09.00&#160;&#160;ESCAN00018809:&#160;Support&#160;data&#160;paging&#160;on&#160;Star12X&#160;/&#160;Cosmic&#160;<br/>2007-05-07&#160;&#160;1.10.00&#160;&#160;Description&#160;of&#160;new&#160;features added&#160;<br/>2007-09-14&#160;&#160;1.11.00&#160;&#160;Segment&#160;freeze mode&#160;now&#160;supported&#160;<br/>2008-07-23&#160;&#160;1.12.00&#160;&#160;ESCAN00028586:&#160;Support&#160;of&#160;Program_Start&#160;callback&#160;<br/>
ESCAN00017955:&#160;Support&#160;MIN_ST_PGM&#160;<br/>ESCAN00017952:&#160;Open&#160;Interface&#160;for&#160;command&#160;processing&#160;<br/>
2008-09-10&#160;&#160;1.13.00&#160;&#160;Additional&#160;pending&#160;return&#160;value&#160;of&#160;call&#160;backs&#160;added&#160;<br/>
MIN_ST&#160;configuration&#160;added&#160;<br/>
2008-12-01&#160;&#160;1.14.00&#160;&#160;ESCAN00018157:&#160;SERV_RESET&#160;is&#160;not&#160;supported&#160;<br/>
ESCAN00032344:&#160;Update of&#160;XCP&#160;Basic&#160;Limitations&#160;<br/>
2009-05-14&#160;&#160;1.15.00&#160;&#160;ESCAN00033909:&#160;New&#160;features&#160;implemented:&#160;Prog&#160;Write&#160;<br/>
Protection,&#160;Timestamps,&#160;Calibration&#160;activation&#160;<br/>
2009-07-30&#160;&#160;1.15.01&#160;&#160;Fixed&#160;some&#160;editorial&#160;errors&#160;<br/>2009-11-13&#160;&#160;1.16.00&#160;&#160;Added&#160;AUTOSAR&#160;Compiler&#160;Abstraction&#160;<br/>2010-04-30&#160;&#160;1.16.01&#160;&#160;Fixed&#160;some&#160;editorial&#160;errors&#160;<br/>2010-07-27&#160;&#160;1.16.02&#160;&#160;Fixed&#160;some&#160;editorial&#160;errors&#160;<br/>2010-08-19&#160;&#160;1.17.00&#160;&#160;ESCAN00044693:&#160;New&#160;callbacks&#160;XcpCalibrationWrite and&#160;<br/>
XcpCalibrationRead&#160;<br/>ESCAN00042867:&#160;Support&#160;Multiple&#160;Transport&#160;Layers&#160;<br/>
2010-12-10&#160;&#160;1.18.00&#160;&#160;ESCAN00045981:&#160;Add&#160;support&#160;to&#160;read&#160;out&#160;FR&#160;Parameters&#160;<br/>2011-07-20&#160;&#160;1.19.00&#160;&#160;ESCAN00049542:&#160;Describe&#160;IDT_VECTOR_MAPNAMES&#160;format&#160;in&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
2&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-3_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-3_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-3_3.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
TechRef&#160;<br/>ESCAN00043487:&#160;XCP&#160;shall&#160;support&#160;user&#160;selectable behaviour&#160;of&#160;<br/>Send Queue&#160;overrun&#160;<br/>
2011-08-04&#160;<br/>
&#160;<br/>
ESCAN00052564:&#160;Adapt&#160;ReadCcConfig Parameter&#160;to&#160;ASR3.2.1&#160;<br/>
2012-02-20&#160;&#160;1.19.01&#160;&#160;ESCAN00055214:&#160;DAQ&#160;Lists&#160;can&#160;be&#160;extended&#160;after&#160;<br/>
START_STOP_SYNCH&#160;<br/>
2012-09-03&#160;&#160;1.19.02&#160;&#160;ESCAN00061159:&#160;Provide&#160;an&#160;API&#160;to&#160;detect&#160;XCP&#160;state&#160;and usage&#160;<br/>2012-11-08&#160;&#160;1.19.03&#160;&#160;Added&#160;Option&#160;for&#160;AMD&#160;Runtime Measurement&#160;<br/>2013-02-11&#160;&#160;2.01.01&#160;&#160;Editorial&#160;Changes&#160;<br/>2013-07-08&#160;&#160;2.02.00&#160;&#160;ESCAN00070127:&#160;AR4-322/AR3_2552:&#160;Support&#160;of&#160;Vx1000&#160;<br/>
System&#160;<br/>ESCAN00070082:&#160;The&#160;API&#160;ApplXcpDaqResumeStore&#160;has&#160;a&#160;<br/>wrong&#160;description&#160;<br/>ESCAN00068639:&#160;Describe&#160;data consistency&#160;on&#160;ODT Level&#160;<br/>ESCAN00063969:&#160;WRITE_DAQ_MULTIPLE:&#160;wrong required&#160;<br/>MAX_CTO&#160;size&#160;<br/>ESCAN00062625:&#160;Provide&#160;hint&#160;how&#160;to&#160;implement&#160;DAQ&#160;Timestamp&#160;<br/>Callback&#160;<br/>ESCAN00067332:&#160;Document&#160;the&#160;usage&#160;of&#160;the&#160;<br/>Xcp_MainFunction/XcpBackground&#160;<br/>
2013-12-04&#160;&#160;2.03.00&#160;&#160;ESCAN00072401:&#160;Support&#160;custom&#160;CRC&#160;Cbk&#160;<br/>
ESCAN00072326:&#160;Support&#160;Generic&#160;GET_ID&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Please&#160;note&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
&#160;<br/>
questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>specified&#160;in your&#160;questionnaire,&#160;Vector’s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
&#160;<br/>
<b>Note&#160;for&#160;XCP&#160;Basic&#160;<br/></b>Please note,&#160;that&#160;the&#160;demo and&#160;example programs&#160;only&#160;show&#160;special&#160;aspects&#160;of&#160;the&#160;<br/>
&#160;<br/>
software.&#160;With&#160;regard&#160;to&#160;the&#160;fact&#160;that&#160;these&#160;programs&#160;are&#160;meant&#160;for&#160;demonstration&#160;<br/>purposes only,&#160;Vector&#160;Informatik’s&#160;liability&#160;shall&#160;be&#160;expressly&#160;excluded&#160;in cases&#160;of&#160;<br/>ordinary&#160;negligence,&#160;to&#160;the&#160;extent&#160;admissible by&#160;law&#160;or&#160;statute.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
3&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-4_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_Asr_Xcps.html#2"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#2"><b>History&#160;...........................................................................................................................&#160;2</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#10"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#10"><b>Overview&#160;.....................................................................................................................&#160;10</b>&#160;<br/>2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#10">Abbreviations&#160;and Items&#160;used in&#160;this&#160;paper&#160;......................................................&#160;10&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#12">2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#12">Naming Conventions&#160;........................................................................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13"><b>Functional&#160;Description&#160;...............................................................................................&#160;13</b>&#160;<br/>3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">Overview&#160;of&#160;the&#160;Functional&#160;Scope&#160;....................................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">Communication&#160;Mode Info&#160;...............................................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">3.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">Block&#160;Transfer&#160;Communication Model&#160;(XCP&#160;Professional&#160;only)&#160;.......................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">3.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">Slave Device Identification&#160;...............................................................................&#160;13&#160;<br/>3.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#13">XCP&#160;Station&#160;Identifier&#160;.......................................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#14">3.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#14">Transferring&#160;of&#160;XCP&#160;MAP&#160;Filenames&#160;................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#14">3.4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#14">Identification&#160;of&#160;FlexRay&#160;Parameters&#160;................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#14">3.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#14">Seed &amp;&#160;Key&#160;......................................................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#16">3.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#16">Checksum&#160;Calculation&#160;.....................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#17">3.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#17">Memory&#160;Protection&#160;(XCP&#160;Professional&#160;only)&#160;....................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#17">3.8&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#17">Memory&#160;Access by&#160;Application&#160;.........................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#17">3.9&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#17">Event&#160;Codes&#160;....................................................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#18">3.10&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#18">Service Request&#160;Messages&#160;(XCP&#160;Professional&#160;only)&#160;.......................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#18">3.11&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#18">User&#160;Defined&#160;Command&#160;...................................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#18">3.12&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#18">Transport&#160;Layer&#160;Command&#160;..............................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#19">3.13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#19">Synchronous&#160;Data&#160;Transfer&#160;.............................................................................&#160;19&#160;<br/>3.13.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#19">Synchronous&#160;Data&#160;Acquisition&#160;(DAQ)&#160;...............................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#19">3.13.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#19">DAQ&#160;Timestamp&#160;...............................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#20">3.13.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#20">Power-Up Data&#160;Transfer&#160;(XCP&#160;Professional&#160;only)&#160;............................&#160;20&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#20">3.13.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#20">Send Queue&#160;.....................................................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">3.13.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">Data&#160;Stimulation (STIM)&#160;(XCP&#160;Professional&#160;only).............................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">3.13.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">Bypassing&#160;(XCP&#160;Professional&#160;only)&#160;..................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">3.13.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">Data&#160;Acquisition&#160;Plug&#160;&amp;&#160;Play&#160;Mechanisms&#160;.......................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">3.13.8&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#21">Event&#160;Channel&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism&#160;...........................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#22">3.13.9&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#22">Data&#160;consistency&#160;..............................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#22">3.14&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#22">The&#160;Online&#160;Data&#160;Calibration&#160;Model&#160;..................................................................&#160;22&#160;<br/>3.14.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#22">Page Switching&#160;................................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">3.14.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">Page Switching&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism&#160;..........................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">3.14.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">Calibration&#160;Data&#160;Page&#160;Copying&#160;........................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">3.14.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">Freeze Mode Handling&#160;.....................................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">3.15&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">Flash&#160;Programming (XCP&#160;Professional&#160;only)&#160;...................................................&#160;23&#160;<br/>3.15.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#23">Flash&#160;Programming by&#160;the&#160;ECU’s&#160;Application&#160;..................................&#160;23&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
4&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-5_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#24">3.15.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#24">Flash&#160;Programming with a&#160;Flash&#160;Kernel&#160;...........................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#25">3.15.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#25">Flash&#160;Programming&#160;Write Protection&#160;................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#25">3.16&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#25">EEPROM&#160;Access (XCP&#160;Professional&#160;only)&#160;.......................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#25">3.17&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#25">Parameter&#160;Check&#160;.............................................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#26">3.18&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#26">Performance&#160;Optimizations&#160;..............................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#26">3.19&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#26">Interrupt&#160;Locks&#160;/&#160;Exclusive&#160;Areas&#160;.....................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#26">3.20&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#26">Accessing&#160;internal&#160;data&#160;....................................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#27">3.21&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#27">En-&#160;/&#160;Disabling&#160;the&#160;XCP&#160;module&#160;.......................................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#27">3.22&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#27">XCP&#160;measurement&#160;during the&#160;follow&#160;up&#160;time&#160;...................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#28"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#28"><b>Integration&#160;into&#160;the&#160;Application&#160;.................................................................................&#160;28</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#28">Files of&#160;XCP&#160;Professional&#160;................................................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#28">4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#28">Files of&#160;XCP&#160;Basic&#160;...........................................................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#29">4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#29">Version changes&#160;..............................................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#29">4.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#29">Integration&#160;of&#160;XCP&#160;into&#160;the&#160;Application&#160;.............................................................&#160;29&#160;<br/>4.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#29">Integration&#160;of&#160;XCP&#160;on&#160;CAN&#160;(XCP&#160;Professional&#160;only)&#160;........................&#160;29&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#30">4.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#30">Integration&#160;with a&#160;Proprietary&#160;XCP&#160;Transport&#160;Layer&#160;..........................&#160;30&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#32">4.4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#32">Motorola HC12&#160;with CAN&#160;Transport&#160;Layer&#160;.......................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#32">4.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#32">Compiler&#160;Abstraction&#160;and Memory&#160;Mapping&#160;.....................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#32">4.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#32">Support&#160;of&#160;Vx1000&#160;Integration..........................................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#33"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#33"><b>Feature&#160;List&#160;.................................................................................................................&#160;33</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#35"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#35"><b>Description&#160;of&#160;the&#160;API&#160;................................................................................................&#160;35</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#35">Version of&#160;the&#160;Source&#160;Code&#160;.............................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#35">6.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#35">XCP&#160;Services called&#160;by&#160;the&#160;Application&#160;............................................................&#160;36&#160;<br/></a><a href="TechnicalReference_Asr_Xcps.html#36">6.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#36">XcpInitMemory:&#160;Initialization of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;Memory&#160;.....&#160;36&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#36">6.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#36">XcpInit:&#160;Initialization of&#160;the XCP&#160;Protocol&#160;Layer&#160;................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#37">6.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#37">XcpEvent:&#160;Handling&#160;of&#160;a&#160;data acquisition&#160;event&#160;channel&#160;..................&#160;37&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#38">6.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#38">XcpStimEventStatus:&#160;Check data&#160;stimulation events&#160;.......................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#38">6.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#38">XcpBackground:&#160;Background&#160;calculation of&#160;checksum&#160;....................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#39">6.2.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#39">XcpSendEvent:&#160;Transmission&#160;of&#160;event&#160;codes...................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#39">6.2.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#39">XcpPutchar:&#160;Put&#160;a&#160;char&#160;into&#160;a&#160;service request&#160;packet&#160;......................&#160;39&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#40">6.2.8&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#40">XcpPrint:&#160;Transmission&#160;of&#160;a&#160;service request&#160;packet&#160;.........................&#160;40&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#40">6.2.9&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#40">XcpDisconnect:&#160;Disconnect&#160;from&#160;XCP&#160;master&#160;..................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#41">6.2.10&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#41">XcpSendCrm:&#160;Transmit&#160;response or&#160;error&#160;packet&#160;.............................&#160;41&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#42">6.2.11&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#42">XcpGetXcpDataPointer:&#160;Request&#160;internal&#160;data pointer&#160;.....................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#42">6.2.12&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#42">XcpControl:&#160;En-&#160;/&#160;Disable the&#160;XCP&#160;module&#160;......................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#43">6.2.13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#43">XcpGetVersionInfo:&#160;Request&#160;module version information&#160;.................&#160;43&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#43">6.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#43">XCP&#160;Protocol&#160;Layer&#160;Functions,&#160;called&#160;by&#160;the&#160;XCP&#160;Transport&#160;Layer&#160;..................&#160;43&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
5&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-6_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#44">6.3.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#44">XcpCommand:&#160;Evaluation&#160;of&#160;XCP&#160;packets&#160;and&#160;command&#160;<br/>interpreter&#160;........................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#44">6.3.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#44">XcpSendCallBack:&#160;Confirmation&#160;of&#160;the&#160;successful&#160;transmission&#160;of&#160;<br/>a XCP&#160;packet&#160;...................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#45">6.3.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#45">XcpGetSessionStatus:&#160;Get&#160;session&#160;state&#160;of&#160;XCP&#160;.............................&#160;45&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#46">6.3.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#46">XcpSetActiveTl:&#160;Set&#160;the&#160;active&#160;Transport&#160;Layer&#160;................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#46">6.3.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#46">XcpGetActiveTl:&#160;Set&#160;the&#160;active&#160;Transport&#160;Layer&#160;...............................&#160;46&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#47">6.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#47">XCP&#160;Transport&#160;Layer&#160;Services called&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;....................&#160;47&#160;<br/>6.4.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#47">&lt;Bus&gt;XcpSend:&#160;Request&#160;for&#160;the&#160;transmission&#160;of&#160;a DTO&#160;or&#160;CTO&#160;<br/>message&#160;..........................................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#47">6.4.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#47">&lt;Bus&gt;XcpSendFlush:&#160;Flush&#160;transmit&#160;buffer&#160;.....................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#48">6.4.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#48">ApplXcpInterruptEnable:&#160;Enable interrupts&#160;.......................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#49">6.4.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#49">ApplXcpInterruptDisable:&#160;Disable interrupts&#160;.....................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#49">6.4.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#49">&lt;Bus&gt;XcpTLService:&#160;Transport&#160;Layer&#160;specific&#160;commands&#160;...............&#160;49&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#50">6.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#50">Application Services called&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;....................................&#160;50&#160;<br/>6.5.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#50">ApplXcpGetPointer:&#160;Pointer&#160;conversion&#160;...........................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#51">6.5.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#51">ApplXcpGetIdData:&#160;Get&#160;MAP&#160;filenames&#160;...........................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#51">6.5.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#51">ApplXcpGetSeed:&#160;Generate&#160;a&#160;seed&#160;.................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#52">6.5.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#52">ApplXcpUnlock:&#160;Valid&#160;key&#160;and unlock resource&#160;................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#53">6.5.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#53">ApplXcpCheckReadEEPROM:&#160;Check&#160;read&#160;access&#160;from&#160;EEPROM&#160;.&#160;53&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#53">6.5.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#53">ApplXcpCheckWriteEEPROM:&#160;Check&#160;write access&#160;to&#160;the&#160;<br/>EEPROM&#160;.........................................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#54">6.5.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#54">ApplXcpCheckWriteAccess:&#160;Check&#160;address&#160;for&#160;valid write access&#160;...&#160;54&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#55">6.5.8&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#55">ApplXcpCheckReadAccess:&#160;Check&#160;address&#160;for&#160;valid read access&#160;...&#160;55&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#55">6.5.9&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#55">ApplXcpCheckDAQAccess:&#160;Check&#160;address&#160;for&#160;valid read or&#160;write&#160;<br/>access..............................................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#56">6.5.10&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#56">ApplXcpCheckProgramAccess:&#160;Check&#160;address&#160;for&#160;valid write&#160;<br/>access..............................................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#57">6.5.11&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#57">ApplXcpUserService:&#160;User&#160;defined&#160;command&#160;..................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#57">6.5.12&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#57">ApplXcpOpenCmdIf:&#160;XCP&#160;command extension&#160;interface&#160;.................&#160;57&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#58">6.5.13&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#58">ApplXcpSendStall:&#160;Resolve a&#160;transmit&#160;stall&#160;condition&#160;.......................&#160;58&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#58">6.5.14&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#58">ApplXcpDisableNormalOperation:&#160;Disable normal&#160;operation&#160;of&#160;the&#160;<br/>ECU&#160;.................................................................................................&#160;58&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#59">6.5.15&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#59">ApplXcpStartBootLoader:&#160;Start&#160;of&#160;boot&#160;loader&#160;..................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#59">6.5.16&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#59">ApplXcpReset:&#160;Perform&#160;ECU&#160;reset&#160;..................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#60">6.5.17&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#60">ApplXcpProgramStart:&#160;Prepare&#160;flash&#160;programming&#160;..........................&#160;60&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#60">6.5.18&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#60">ApplXcpFlashClear:&#160;Clear&#160;flash&#160;memory&#160;..........................................&#160;60&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#61">6.5.19&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#61">ApplXcpFlashProgram:&#160;Program&#160;flash&#160;memory&#160;................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#62">6.5.20&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#62">ApplXcpDaqResume:&#160;Resume&#160;automatic data&#160;transfer&#160;....................&#160;62&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#62">6.5.21&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#62">ApplXcpDaqResumeStore:&#160;Store DAQ&#160;lists&#160;for&#160;resume&#160;mode&#160;..........&#160;62&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#63">6.5.22&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#63">ApplXcpDaqResumeClear:&#160;Clear&#160;stored&#160;DAQ&#160;lists&#160;..........................&#160;63&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#63">6.5.23&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#63">ApplXcpCalResumeStore:&#160;Store Calibration&#160;data&#160;for&#160;resume&#160;mode&#160;.&#160;63&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
6&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-7_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#64">6.5.24&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#64">ApplXcpGetTimestamp:&#160;Returns&#160;the&#160;current&#160;timestamp&#160;...................&#160;64&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#64">6.5.25&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#64">ApplXcpGetCalPage:&#160;Get&#160;calibration&#160;page&#160;.......................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#65">6.5.26&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#65">ApplXcpSetCalPage:&#160;Set&#160;calibration&#160;page&#160;.......................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#66">6.5.27&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#66">ApplXcpCopyCalPage:&#160;Copying&#160;of&#160;calibration&#160;data pages&#160;...............&#160;66&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#67">6.5.28&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#67">ApplXcpSetFreezeMode:&#160;Setting the&#160;freeze mode&#160;of&#160;a segment......&#160;67&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#67">6.5.29&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#67">ApplXcpGetFreezeMode:&#160;Reading&#160;the&#160;freeze&#160;mode&#160;of&#160;a segment&#160;...&#160;67&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#68">6.5.30&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#68">ApplXcpRead:&#160;Read&#160;a&#160;single byte&#160;from&#160;memory&#160;..............................&#160;68&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#68">6.5.31&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#68">ApplXcpWrite:&#160;Write&#160;a single byte&#160;to&#160;RAM&#160;........................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#69">6.5.32&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#69">ApplXcpCalibrationRead:&#160;Read&#160;multiple bytes&#160;from&#160;memory&#160;...........&#160;69&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#69">6.5.33&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#69">ApplXcpCalibrationWrite:&#160;Write&#160;multiple bytes to&#160;memory&#160;................&#160;69&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#71">6.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#71">XCP&#160;Protocol&#160;Layer&#160;Functions&#160;that&#160;can&#160;be&#160;overwritten&#160;.....................................&#160;71&#160;<br/>6.6.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#71">XcpMemCpy:&#160;Copying&#160;of&#160;a&#160;memory&#160;range&#160;.......................................&#160;71&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#72">6.6.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#72">XcpMemSet:&#160;Initialization of&#160;a&#160;memory&#160;range&#160;..................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#72">6.6.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#72">XcpMemClr:&#160;Clear&#160;a&#160;memory&#160;range&#160;.................................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#73">6.6.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#73">XcpSendDto:&#160;Transmission&#160;of&#160;a data&#160;transfer&#160;object&#160;........................&#160;73&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#73">6.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#73">AUTOSAR&#160;CRC&#160;Module Services called&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;(XCP&#160;<br/>Professional&#160;Only)&#160;............................................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#75"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#75"><b>Configuration&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;..................................................................&#160;75</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#75">Configuration with GENy&#160;(XCP&#160;Professional&#160;only)&#160;...........................................&#160;75&#160;<br/>7.1.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#75">Component&#160;Selection&#160;.......................................................................&#160;75&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#76">7.1.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#76">Component&#160;Configuration&#160;................................................................&#160;76&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#88">7.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#88">Configuration without&#160;Generation&#160;Tool&#160;.............................................................&#160;88&#160;<br/>7.2.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#88">Compiler&#160;Switches&#160;...........................................................................&#160;88&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#92">7.2.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#92">Configuration of&#160;Constant&#160;Definitions&#160;...............................................&#160;92&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#93">7.2.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#93">Configuration of&#160;the&#160;CPU&#160;Type&#160;.........................................................&#160;93&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#94">7.2.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#94">Configuration of&#160;Slave Device Identification&#160;.....................................&#160;94&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#95">7.2.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#95">Configuration of&#160;the&#160;Event&#160;Channel&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism&#160;...........&#160;95&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#97">7.2.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#97">Configuration of&#160;the&#160;DAQ&#160;Time Stamped&#160;Mode&#160;................................&#160;97&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#97">7.2.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#97">Configuration of&#160;the&#160;Flash Programming&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism&#160;....&#160;97&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#98">7.2.8&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#98">Configuration of&#160;the&#160;Page&#160;Switching&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism&#160;..........&#160;98&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#98">7.2.9&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#98">Configuration of&#160;the&#160;used&#160;Transport&#160;Layer&#160;.......................................&#160;98&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#100"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#100"><b>Resource&#160;Requirements...........................................................................................&#160;100</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#101"><b>9</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#101"><b>Limitations&#160;................................................................................................................&#160;101</b>&#160;<br/>9.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#101">General&#160;Limitations&#160;........................................................................................&#160;101&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#102">9.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#102">Limitations of&#160;XCP&#160;Basic&#160;................................................................................&#160;102&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#103">9.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#103">Limitations Regarding&#160;Platforms,&#160;Compilers&#160;and&#160;Memory&#160;Models&#160;..................&#160;103&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#104"><b>10</b>&#160;&#160;<b>FAQ&#160;............................................................................................................................&#160;104</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#104">10.1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#104">Connection&#160;to&#160;MCS&#160;Not&#160;Possible&#160;...................................................................&#160;104&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
7&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-8_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#104">10.2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#104">Invalid&#160;Time Stamp&#160;Unit&#160;.................................................................................&#160;104&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#105">10.3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#105">Support&#160;of&#160;small&#160;and&#160;medium&#160;memory&#160;model&#160;................................................&#160;105&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#105">10.4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#105">Small&#160;memory&#160;model&#160;on&#160;ST10&#160;/&#160;XC16X&#160;/&#160;C16X&#160;with&#160;Tasking&#160;Compiler&#160;..........&#160;105&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#106">10.5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#106">Data&#160;Page Banking on&#160;Star12X&#160;/&#160;Metrowerks&#160;................................................&#160;106&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#106">10.6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#106">Memory&#160;model&#160;banked&#160;on Star12X&#160;/&#160;Cosmic&#160;.................................................&#160;106&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#107">10.7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#107">Reflected&#160;CRC16&#160;CCITT&#160;Checksum&#160;Calculation&#160;Algorithm&#160;............................&#160;107&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#108"><b>11</b>&#160;&#160;<b>Bibliography&#160;..............................................................................................................&#160;108</b>&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#109"><b>12</b>&#160;&#160;<b>Contact&#160;......................................................................................................................&#160;109</b>&#160;<br/></a><i><b>&#160;</b></i><br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
8&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-9_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Illustrations&#160;<br/></b><a href="TechnicalReference_Asr_Xcps.html#29">Figure&#160;4-1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#29">Integration&#160;of&#160;XCP&#160;on&#160;CAN&#160;into&#160;the&#160;application&#160;.........................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#30">Figure&#160;4-2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#30">Integration&#160;of&#160;XCP&#160;with a&#160;proprietary&#160;XCP&#160;Transport&#160;Layer&#160;......................&#160;30&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#75">Figure&#160;7-1&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#75">Component&#160;selection in&#160;GENy&#160;..................................................................&#160;75&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#76">Figure&#160;7-2&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#76">Component&#160;configuration&#160;–&#160;General&#160;settings&#160;............................................&#160;76&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#79">Figure&#160;7-3&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#79">Component&#160;configuration&#160;–&#160;Synchronous&#160;Data&#160;Acquisition&#160;.......................&#160;79&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#82">Figure&#160;7-4&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#82">Component&#160;configuration&#160;–&#160;Standard&#160;Commands&#160;....................................&#160;82&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#84">Figure&#160;7-5&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#84">Component&#160;configuration&#160;–&#160;Checksum&#160;.....................................................&#160;84&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#85">Figure&#160;7-6&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#85">Component&#160;configuration&#160;–&#160;Page&#160;Switching&#160;.............................................&#160;85&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#86">Figure&#160;7-7&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#86">Component&#160;configuration&#160;–&#160;Programming&#160;.................................................&#160;86&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#87">Figure&#160;7-8&#160;</a><br/>
<a href="TechnicalReference_Asr_Xcps.html#87">Component&#160;configuration&#160;–&#160;FlexRay&#160;Parameter&#160;.......................................&#160;87&#160;</a><br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
9&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-10_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-10_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>2&#160;&#160;Overview&#160;</b><br/>
This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;features,&#160;&#160;API,&#160;&#160;configuration&#160;&#160;and&#160;&#160;integration&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;<br/>Protocol&#160;Layer.&#160;Both&#160;XCP&#160;versions:&#160;XCP&#160;Professional&#160;and&#160;XCP&#160;Basic&#160;are&#160;covered&#160;by&#160;this&#160;<br/>document.&#160;Chapters that&#160;are&#160;only&#160;relevant&#160;for&#160;XCP&#160;Professional&#160;are&#160;marked.&#160;<br/>This document&#160;does not&#160;cover the&#160;XCP&#160;Transport Layers for CAN, FlexRay&#160;and&#160;LIN,&#160;which&#160;<br/>are available&#160;at&#160;Vector&#160;Informatik.&#160;<br/>Please&#160;refer&#160;to&#160;[IV]&#160;for&#160;further&#160;information&#160;about&#160;XCP&#160;on&#160;CAN&#160;and&#160;the&#160;integration&#160;of&#160;XCP&#160;<br/>on&#160;CAN&#160;with&#160;the&#160;Vector&#160;CANbedded&#160;software&#160;components.&#160;Further&#160;information&#160;about&#160;XCP&#160;<br/>on&#160;&#160;FlexRay&#160;&#160;Transport&#160;&#160;Layer&#160;&#160;and&#160;&#160;XCP&#160;&#160;on&#160;&#160;LIN&#160;&#160;Transport&#160;&#160;Layer&#160;&#160;can&#160;&#160;be&#160;&#160;found&#160;&#160;in&#160;&#160;its&#160;<br/>documentation.&#160;<br/>Please&#160;&#160;also&#160;&#160;refer&#160;&#160;to&#160;&#160;“The&#160;&#160;Universal&#160;&#160;Measurement&#160;&#160;and&#160;&#160;Calibration&#160;&#160;Protocol&#160;&#160;Family”&#160;<br/>specification&#160;by&#160;ASAM&#160;e.V.&#160;<br/>The&#160;XCP&#160;Protocol&#160;Layer&#160;is&#160;a&#160;hardware&#160;independent&#160;protocol&#160;that&#160;can&#160;be&#160;ported&#160;to&#160;almost&#160;<br/>any&#160;&#160;hardware.&#160;&#160;Due&#160;&#160;to&#160;&#160;there&#160;&#160;are&#160;&#160;numerous&#160;&#160;combinations&#160;&#160;of&#160;&#160;micro&#160;&#160;controllers,&#160;&#160;compilers&#160;<br/>and&#160;memory&#160;models&#160;it&#160;cannot&#160;be&#160;guaranteed&#160;that&#160;it&#160;will&#160;run&#160;properly&#160;on&#160;any&#160;of&#160;the&#160;above&#160;<br/>mentioned&#160;combinations.&#160;<br/>Please&#160;&#160;note&#160;&#160;that&#160;&#160;in&#160;&#160;this&#160;&#160;document&#160;&#160;the&#160;&#160;term&#160;&#160;Application&#160;&#160;is&#160;&#160;not&#160;&#160;used&#160;&#160;strictly&#160;&#160;for&#160;&#160;the&#160;&#160;user&#160;<br/>software&#160;but&#160;also&#160;for&#160;any&#160;higher&#160;software&#160;layer,&#160;like&#160;e.g.&#160;a&#160;Communication&#160;Control&#160;Layer.&#160;<br/>Therefore,&#160;Application&#160;refers to&#160;any&#160;of&#160;the&#160;software components&#160;using&#160;XCP.&#160;<br/>The&#160;API&#160;of&#160;the&#160;functions&#160;is&#160;described&#160;in&#160;a&#160;separate&#160;chapter&#160;at&#160;the&#160;end&#160;of&#160;this&#160;document.&#160;<br/>Referred&#160;functions are&#160;always shown&#160;in&#160;the&#160;single&#160;channel&#160;mode.&#160;&#160;<br/>
&#160;<br/>
<b>Info</b>&#160;<br/>The&#160;source&#160;code&#160;of&#160;the&#160;XCP&#160;Protocol Layer,&#160;configuration&#160;examples&#160;and&#160;<br/>
&#160;<br/>
documentation&#160;are available&#160;on&#160;the&#160;Internet&#160;at<a href="http://www.vector-informatik.de/">&#160;www.vector-informatik.de&#160;</a>in&#160;a&#160;<br/>functional restricted&#160;form.&#160;<br/>
&#160;<br/>
<b>2.1&#160;</b><br/>
<b>Abbreviations&#160;and Items&#160;used&#160;in this&#160;paper&#160;</b><br/>
&#160;<br/><b>Abbreviations&#160;</b><br/>
<b>Complete&#160;expression&#160;</b><br/>
<b>A2L&#160;</b><br/>
File Extension&#160;for&#160;an&#160;<b>A</b>SAM&#160;<b>2</b>MC&#160;<b>L</b>anguage&#160;File&#160;<br/>
<b>AML&#160;</b><br/>
<b>A</b>SAM&#160;2&#160;<b>M</b>eta&#160;<b>L</b>anguage&#160;<br/>
<b>API&#160;</b><br/>
<b>A</b>pplication&#160;<b>P</b>rogramming&#160;<b>I</b>nterface<b>&#160;</b><br/>
<b>ASAM&#160;</b><br/>
<b>A</b>ssociation for&#160;<b>S</b>tandardization of&#160;<b>A</b>utomation and&#160;<b>M</b>easuring&#160;Systems&#160;<br/>
<b>BYP&#160;</b><br/>
<b>BYP</b>assing&#160;<br/>
<b>CAN&#160;</b><br/>
<b>C</b>ontroller&#160;<b>A</b>rea&#160;<b>N</b>etwork&#160;<br/>
<b>CAL&#160;</b><br/>
<b>CAL</b>ibration&#160;<br/>
<b>CANape</b>&#160;<br/>
Calibration&#160;&#160;and&#160;&#160;Measurement&#160;&#160;Data&#160;&#160;Acquisition&#160;&#160;for&#160;&#160;Electronic&#160;&#160;Control&#160;<br/>Systems&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
10&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-11_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>CMD&#160;</b><br/>
<b>C</b>o<b>m</b>man<b>d</b>&#160;<br/>
<b>CTO&#160;</b><br/>
<b>C</b>ommand&#160;<b>T</b>ransfer&#160;<b>O</b>bject&#160;<br/>
<b>DAQ&#160;</b><br/>
Synchronous&#160;<b>D</b>ata&#160;<b>A</b>c<b>q</b>uistion&#160;<br/>
<b>DLC&#160;</b><br/>
<b>D</b>ata&#160;<b>L</b>ength&#160;<b>C</b>ode&#160;(&#160;Number&#160;of&#160;data&#160;bytes of&#160;a&#160;CAN&#160;message&#160;)&#160;<br/>
<b>DLL&#160;</b><br/>
<b>D</b>ata&#160;<b>l</b>ink&#160;<b>l</b>ayer&#160;<br/>
<b>DTO&#160;</b><br/>
<b>D</b>ata&#160;<b>T</b>ransfer&#160;<b>O</b>bject&#160;<br/>
<b>ECU&#160;</b><br/>
<b>E</b>lectronic&#160;<b>C</b>ontrol&#160;<b>U</b>nit&#160;<br/>
<b>ERR&#160;</b><br/>
<b>Err</b>or&#160;Packet&#160;<br/>
<b>EV&#160;</b><br/>
<b>Ev</b>ent&#160;packet&#160;<br/>
<b>ID&#160;</b><br/>
<b>Id</b>entifier&#160;(of&#160;a&#160;CAN&#160;message)&#160;<br/>
<b>Identifier&#160;</b><br/>
Identifies&#160;a CAN&#160;message&#160;<br/>
<b>ISR&#160;</b><br/>
<b>I</b>nterrupt&#160;<b>S</b>ervice&#160;<b>R</b>outine&#160;<br/>
<b>MCS&#160;</b><br/>
<b>M</b>aster&#160;<b>C</b>alibration&#160;<b>S</b>ystem<b>&#160;</b><br/>
<b>Message&#160;</b><br/>
One&#160;or&#160;more&#160;signals&#160;are&#160;assigned&#160;to&#160;each&#160;message.&#160;<br/>
<b>ODT&#160;</b><br/>
<b>O</b>bject&#160;<b>D</b>escriptor&#160;<b>T</b>able&#160;<br/>
<b>OEM&#160;</b><br/>
<b>O</b>riginal&#160;<b>e</b>quipment&#160;<b>m</b>anufacturer&#160;(vehicle manufacturer)&#160;<br/>
<b>PAG&#160;</b><br/>
<b>PAG</b>ing&#160;<br/>
<b>PID&#160;</b><br/>
<b>P</b>acket&#160;<b>Id</b>entifier&#160;<br/>
<b>PGM&#160;</b><br/>
<b>P</b>ro<b>g</b>ra<b>m</b>ming&#160;<br/>
<b>RAM&#160;</b><br/>
<b>R</b>andom&#160;<b>A</b>ccess&#160;<b>M</b>emory&#160;<br/>
<b>RES&#160;</b><br/>
Command&#160;<b>Res</b>ponse&#160;Packet&#160;<br/>
<b>ROM&#160;</b><br/>
<b>R</b>ead&#160;<b>O</b>nly&#160;<b>M</b>emory&#160;<br/>
<b>SERV&#160;</b><br/>
<b>Ser</b>vice Request&#160;Packet&#160;<br/>
<b>STIM&#160;</b><br/>
<b>Stim</b>ulation&#160;<br/>
<b>TCP/IP&#160;</b><br/>
<b>T</b>ransfer&#160;<b>C</b>ontrol&#160;<b>P</b>rotocol&#160;/&#160;<b>I</b>nternet&#160;<b>P</b>rotocol&#160;<br/>
<b>UDP/IP&#160;</b><br/>
<b>U</b>nified&#160;<b>D</b>ata&#160;<b>P</b>rotocol&#160;/&#160;<b>I</b>nternet&#160;<b>P</b>rotocol&#160;<br/>
<b>USB&#160;</b><br/>
<b>U</b>niversal&#160;<b>S</b>erial&#160;<b>B</b>us&#160;<br/>
<b>XCP&#160;</b><br/>
Universal&#160;Measurement&#160;and&#160;<b>C</b>alibration&#160;<b>P</b>rotocol&#160;<br/>
<b>VI&#160;</b><br/>
<b>V</b>ector&#160;<b>I</b>nformatik&#160;GmbH&#160;<br/>
&#160;<br/>
Also&#160;refer to<a href="http://www.vector-group.net/support/appnotes/AN-AND-1-108_glossary_of_can_protocol_terminology.pdf">&#160;‘AN-AND-1-108&#160;Glossary&#160;of&#160;CAN Protocol&#160;Terminology.p</a>df’, which&#160;can&#160;be&#160;<br/>found&#160;in&#160;the&#160;download&#160;area&#160;o<a href="http://www.vector-informatik.de/">f&#160;http://www.vector-informatik.de.</a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
11&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-12_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>2.2&#160;</b><br/>
<b>Naming Conventions&#160;</b><br/>
The&#160;names&#160;of&#160;the&#160;access functions&#160;provided&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;always&#160;start&#160;with&#160;a&#160;<br/>prefix&#160;&#160;that&#160;&#160;includes&#160;&#160;the&#160;&#160;characters&#160;&#160;Xcp.&#160;&#160;The&#160;&#160;characters&#160;&#160;Xcp&#160;&#160;are&#160;&#160;surrounded&#160;&#160;by&#160;&#160;an&#160;<br/>abbreviation&#160;which&#160;refers&#160;to&#160;the&#160;service&#160;or&#160;to&#160;the&#160;layer&#160;which&#160;requests&#160;a&#160;XCP&#160;service.&#160;The&#160;<br/>designation&#160;of&#160;the&#160;main&#160;services&#160;is listed&#160;below:&#160;<br/>
&#160;<br/>
<b>Naming&#160;conventions&#160;<br/></b>Xcp…&#160;<br/>
It&#160;is&#160;mandatory&#160;to use all&#160;functions&#160;beginning&#160;with Xcp…&#160;<br/>These&#160;services are called by&#160;either&#160;the&#160;data&#160;link layer&#160;or&#160;the&#160;application.&#160;<br/>They&#160;are&#160;e.g.&#160;used&#160;for&#160;the initialization of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;and&#160;for&#160;the&#160;<br/>cyclic&#160;background&#160;task.&#160;<br/>
ApplXcp...&#160;<br/>
The&#160;&#160;functions,&#160;&#160;starting&#160;&#160;with&#160;&#160;ApplXcp…&#160;&#160;are&#160;&#160;functions&#160;&#160;that&#160;&#160;are&#160;&#160;provided&#160;<br/>either&#160;by&#160;any&#160;XCP&#160;Transport&#160;Layer&#160;or&#160;the&#160;application&#160;and&#160;are&#160;called&#160;by&#160;the&#160;<br/>XCP&#160;Protocol Layer.&#160;<br/>These&#160;services are user&#160;callback&#160;functions&#160;that&#160;are application specific&#160;and have&#160;<br/>to be&#160;implemented&#160;depending&#160;on&#160;the&#160;application.&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
12&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-13_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3&#160;&#160;Functional&#160;Description&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>Overview&#160;of the&#160;Functional&#160;Scope&#160;</b><br/>
The&#160;&#160;Universal&#160;&#160;Measurement&#160;&#160;and&#160;&#160;Calibration&#160;&#160;Protocol&#160;&#160;(XCP)&#160;&#160;is&#160;&#160;standardized&#160;&#160;by&#160;&#160;the&#160;<br/>European&#160;ASAM&#160;&#160;working&#160;&#160;committee&#160;&#160;for&#160;&#160;standardization&#160;&#160;of&#160;&#160;interfaces&#160;&#160;used&#160;&#160;in&#160;&#160;calibration&#160;<br/>and&#160;measurement&#160;data&#160;acquisition.&#160;XCP&#160;is&#160;a&#160;higher&#160;level&#160;protocol&#160;used&#160;for&#160;communication&#160;<br/>between&#160;&#160;a&#160;&#160;measurement&#160;&#160;and&#160;&#160;calibration&#160;&#160;system&#160;&#160;(MCS,&#160;&#160;i.e.&#160;&#160;CANape)&#160;&#160;and&#160;&#160;an&#160;&#160;electronic&#160;<br/>control unit (ECU).&#160;<br/>
<b>3.2&#160;</b><br/>
<b>Communication Mode&#160;Info&#160;</b><br/>
In&#160;order&#160;to&#160;gather&#160;information&#160;about&#160;the&#160;XCP&#160;Slave&#160;device,&#160;e.g.&#160;the&#160;implementation&#160;version&#160;<br/>number&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;and&#160;&#160;supported&#160;&#160;communications&#160;&#160;models,&#160;&#160;the&#160;<br/>communication&#160;mode&#160;info&#160;can&#160;be&#160;enabled&#160;by&#160;the&#160;switch&#160;XCP_ENABLE_COMM_MODE_INFO.&#160;<br/>
<b>3.3&#160;</b><br/>
<b>Block&#160;Transfer&#160;Communication Model&#160;(XCP&#160;Professional&#160;only)&#160;</b><br/>
In&#160;&#160;the&#160;&#160;standard&#160;&#160;communication&#160;&#160;model,&#160;&#160;each&#160;&#160;request&#160;&#160;packet&#160;&#160;is&#160;&#160;responded&#160;&#160;by&#160;&#160;a&#160;&#160;single&#160;<br/>response&#160;packet&#160;or&#160;an&#160;error&#160;packet.&#160;To&#160;speed&#160;up&#160;memory&#160;uploads,&#160;downloads&#160;and&#160;flash&#160;<br/>programming&#160;&#160;the&#160;&#160;XCP&#160;&#160;commands&#160;&#160;UPLOAD,&#160;&#160;DOWNLOAD&#160;&#160;and&#160;&#160;PROGRAM&#160;&#160;support&#160;&#160;a&#160;<br/>block&#160;transfer&#160;mode&#160;similar to&#160;ISO/DIS&#160;15765-2.&#160;<br/>In&#160;&#160;the&#160;&#160;Master&#160;&#160;Block&#160;&#160;Transfer&#160;&#160;Mode&#160;&#160;can&#160;&#160;the&#160;&#160;master&#160;&#160;transmit&#160;&#160;subsequent&#160;&#160;(up&#160;&#160;to&#160;&#160;the&#160;<br/>maximum&#160;block&#160;size&#160;MAX_BS)&#160;request&#160;packets&#160;to&#160;the&#160;slave&#160;without&#160;getting&#160;any&#160;response&#160;<br/>in&#160;between.&#160;The&#160;slave&#160;responds after transmission&#160;of&#160;the&#160;last&#160;request&#160;packet&#160;of&#160;the&#160;block.&#160;<br/>In&#160;Slave&#160;Block&#160;Transfer&#160;Mode&#160;the&#160;slave&#160;can&#160;respond&#160;subsequent&#160;(there&#160;is&#160;no&#160;limitation)&#160;to&#160;<br/>a&#160;request&#160;without&#160;additional&#160;requests&#160;in&#160;between.&#160;<br/>Refer to&#160;chapte<a href="TechnicalReference_Asr_Xcps.html#88">r&#160;7.2.1&#160;</a>for configuration&#160;details.&#160;<br/>
<b>3.4&#160;</b><br/>
<b>Slave&#160;Device&#160;Identification&#160;</b><br/>
<b>3.4.1&#160;</b><br/>
<b>XCP&#160;Station Identifier&#160;</b><br/>
The&#160;&#160;XCP&#160;&#160;station&#160;&#160;identifier&#160;&#160;is&#160;&#160;an&#160;ASCII&#160;&#160;string&#160;&#160;that&#160;&#160;identifies&#160;&#160;the&#160;&#160;ECU’s&#160;&#160;software&#160;&#160;program&#160;<br/>version.&#160;<br/>The&#160;&#160;MCS&#160;&#160;can&#160;&#160;interpret&#160;&#160;this&#160;&#160;identifier&#160;&#160;as&#160;&#160;file&#160;&#160;name&#160;&#160;for&#160;&#160;the&#160;&#160;ECU&#160;&#160;database.&#160;&#160;The&#160;&#160;ECU&#160;<br/>developer&#160;&#160;should&#160;&#160;change&#160;&#160;the&#160;&#160;XCP&#160;&#160;station&#160;&#160;identifier&#160;&#160;with&#160;&#160;each&#160;&#160;program&#160;&#160;change.&#160;This&#160;&#160;will&#160;<br/>prevent&#160;&#160;database&#160;&#160;mix-ups&#160;&#160;and&#160;&#160;grant&#160;&#160;the&#160;&#160;correct&#160;&#160;access&#160;&#160;of&#160;&#160;measurement&#160;&#160;and&#160;&#160;calibration&#160;<br/>objects&#160;&#160;from&#160;&#160;the&#160;&#160;MCS&#160;&#160;to&#160;&#160;the&#160;&#160;ECU.&#160;&#160;Another&#160;&#160;benefit&#160;&#160;of&#160;&#160;the&#160;&#160;usage&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;station&#160;<br/>identifier&#160;is&#160;the&#160;automatic&#160;assignment&#160;of&#160;the&#160;correct&#160;ECU&#160;database&#160;at&#160;program&#160;start&#160;of&#160;the&#160;<br/>MCS&#160;via&#160;the&#160;plug&#160;&amp;&#160;play&#160;mechanism.&#160;The&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;prevents&#160;the&#160;user&#160;from&#160;<br/>selecting&#160;the&#160;wrong&#160;ECU&#160;database.&#160;<br/>Refer&#160;&#160;to&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#94">7.2.4.1&#160;&#160;(Identification&#160;&#160;by&#160;&#160;ASAM-MC2&#160;&#160;Filename&#160;&#160;without&#160;&#160;Path&#160;&#160;and&#160;<br/>Extension)&#160;</a>for configuration&#160;details.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
13&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-14_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.4.2&#160;</b><br/>
<b>XCP&#160;Generic&#160;Identification&#160;</b><br/>
The&#160;&#160;XCP&#160;provides&#160;&#160;a&#160;&#160;generic&#160;mechanism&#160;for&#160;identification&#160;&#160;by&#160;&#160;the&#160;GET_ID&#160;&#160;command.&#160;&#160;For&#160;<br/>this&#160;&#160;purpose&#160;&#160;a&#160;&#160;call-back&#160;&#160;exist&#160;&#160;which&#160;&#160;can&#160;&#160;be&#160;&#160;implemented&#160;&#160;by&#160;&#160;the&#160;&#160;user&#160;&#160;to&#160;&#160;provide&#160;&#160;the&#160;<br/>requested&#160;information.&#160;The&#160;following&#160;function&#160;&#160;<br/>
uint32&#160;<b>ApplXcpGetIdData</b>( MTABYTEPTR *pData, uint8 id )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#51">(6.5.2)</a>&#160;<br/>
has to&#160;set&#160;a&#160;pointer to&#160;the&#160;identification&#160;information&#160;based&#160;on&#160;the&#160;requested&#160;id&#160;and&#160;return&#160;<br/>the&#160;length&#160;of&#160;this information.&#160;<br/>Refer to&#160;chapte<a href="TechnicalReference_Asr_Xcps.html#94">r&#160;7.2.4.2&#160;</a>for an&#160;example&#160;implementation.&#160;<br/>&#160;<br/>
<b>3.4.3&#160;</b><br/>
<b>Identification of&#160;FlexRay&#160;Parameters&#160;</b><br/>
If&#160;the&#160;“Virtual FlexRay&#160;Parameters”&#160;feature is&#160;enabled,&#160;the&#160;parameters can&#160;be&#160;read&#160;out&#160;in&#160;a&#160;<br/>platform&#160;independent&#160;way.&#160;They&#160;will be&#160;provided&#160;as virtual measurement&#160;values that&#160;can&#160;<br/>be&#160;read&#160;at&#160;fixed&#160;memory&#160;locations&#160;with&#160;a&#160;configurable&#160;Address&#160;Extension.&#160;<br/>To&#160;calculate&#160;the&#160;memory&#160;address&#160;for each&#160;parameter please&#160;read&#160;the&#160;Technical Reference&#160;<br/>and&#160;the&#160;AUTOSAR specification&#160;of&#160;the&#160;FlexRay&#160;Driver.&#160;Each&#160;FlexRay&#160;parameter is defined&#160;<br/>with&#160;a&#160;unique&#160;ID to&#160;be&#160;used&#160;as parameter&#160;for&#160;the&#160;API&#160;call.&#160;Use&#160;this ID and&#160;multiply&#160;it&#160;with&#160;<br/>four to&#160;get&#160;the&#160;address&#160;where this variable&#160;can&#160;be&#160;measured&#160;at.&#160;<br/>If&#160;this&#160;parameter is enabled&#160;the&#160;API:&#160;<br/>&#160;<br/>
Std_ReturnType&#160;<br/>
<b>FrIf_ReadCCConfig</b>(&#160;<br/>
uint8&#160;<br/>
ClusterIdx,&#160;<br/>
uint8&#160;<br/>
FrIf_CCLLParamIndex,&#160;&#160;P2VAR(uint32,&#160;&#160;AUTOMATIC,&#160;&#160;FRIF_APPL_DATA)&#160;<br/>FrIf_CCLLParamValue )&#160;<br/>
will&#160;be&#160;called.&#160;The&#160;FlexRay&#160;parameters can&#160;be&#160;measured&#160;from&#160;CAN&#160;and&#160;FlexRay&#160;but&#160;the&#160;<br/>API&#160;is only&#160;provided&#160;if&#160;the&#160;FlexRay&#160;Interface&#160;is&#160;present.&#160;<br/>
<b>3.5&#160;</b><br/>
<b>Seed &amp; Key&#160;</b><br/>
The&#160;&#160;seed&#160;&#160;and&#160;&#160;key&#160;&#160;feature&#160;&#160;allows&#160;&#160;individual&#160;&#160;access&#160;&#160;protection&#160;&#160;for&#160;&#160;calibration,&#160;&#160;flash&#160;<br/>programming,&#160;&#160;synchronous&#160;&#160;data&#160;&#160;acquisition&#160;&#160;and&#160;&#160;data&#160;&#160;stimulation.&#160;&#160;The&#160;&#160;MCS&#160;&#160;requests&#160;&#160;a&#160;<br/>seed&#160;&#160;(a&#160;&#160;few&#160;&#160;data&#160;&#160;bytes)&#160;&#160;from&#160;&#160;the&#160;&#160;ECU&#160;&#160;and&#160;&#160;calculates&#160;&#160;a&#160;&#160;key&#160;&#160;based&#160;&#160;on&#160;&#160;a&#160;&#160;proprietary&#160;<br/>algorithm&#160;and&#160;sends&#160;it&#160;back to&#160;the&#160;ECU.&#160;<br/>
The&#160;seed&#160;&amp;&#160;key&#160;functionality&#160;can&#160;be&#160;enabled&#160;with&#160;the&#160;switch&#160;XCP_ENABLE_SEED_KEY&#160;and&#160;<br/>disabled&#160;XCP_DISABLE_SEED_KEY&#160;in&#160;order to&#160;save&#160;ROM.&#160;Also&#160;refer to&#160;chapte<a href="TechnicalReference_Asr_Xcps.html#88">r&#160;7.2.1.</a>&#160;<br/>
The&#160;application&#160;callback function&#160;<br/>
uint8&#160;&#160;<b>ApplXcpGetSeed</b>(&#160;&#160;MEMORY_ROM&#160;&#160;uint8&#160;&#160;resourceMask,&#160;&#160;BYTEPTR&#160;<br/>seed )&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#51">(6.5.3)</a>&#160;<br/>
returns&#160;a&#160;seed&#160;that&#160;is&#160;transferred&#160;to&#160;the&#160;MCS.&#160;The&#160;callback&#160;function&#160;<br/>
uint8&#160;&#160;<b>ApplXcpUnlock</b>(&#160;&#160;MEMORY_ROM&#160;&#160;uint8&#160;&#160;*key,&#160;&#160;MEMORY_ROM&#160;&#160;uint8&#160;<br/>length )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#52">(6.5.4)</a>&#160;<br/>
has to&#160;verify&#160;a&#160;received&#160;key&#160;and&#160;if&#160;appropriate&#160;return&#160;the&#160;resource&#160;that&#160;shall&#160;be&#160;unlocked.&#160;<br/>Annotation&#160;for the&#160;usage&#160;of&#160;CANape&#160;<br/>The&#160;calculation&#160;of&#160;the&#160;key&#160;is done&#160;in&#160;a&#160;DLL&#160;named&#160;SEEDKEY1.DLL,&#160;which&#160;is developed&#160;by&#160;<br/>the&#160;&#160;ECU&#160;&#160;manufacturer&#160;&#160;and&#160;&#160;which&#160;&#160;must&#160;&#160;be&#160;&#160;located&#160;&#160;in&#160;&#160;the&#160;&#160;EXEC&#160;&#160;directory&#160;&#160;of&#160;&#160;CANape.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
14&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-15_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-15_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
CANape&#160;can&#160;access&#160;the&#160;ECU&#160;only&#160;if&#160;the&#160;ECU&#160;accepts&#160;the&#160;key.&#160;If&#160;the&#160;key&#160;is&#160;not&#160;valid,&#160;the&#160;<br/>ECU&#160;stays&#160;locked.&#160;<br/>Example&#160;Implementation&#160;for SEEDKEY1.DLL&#160;<br/>The&#160;function&#160;call&#160;of&#160;ASAP1A_XCP_ComputeKeyFromSeed()&#160;is&#160;standardized&#160;by&#160;the&#160;ASAM&#160;<br/>committee.&#160;<br/>
&#160;<br/>
<b>Example&#160;<br/></b>FILE SEEDKEY1.H&#160;<br/>
&#160;<br/>
#ifndef&#160;_SEEDKEY_H_&#160;<br/>&#160;<br/>#define&#160;_SEEDKEY_H_&#160;<br/>#ifndef&#160;DllImport&#160;<br/>#define&#160;DllImport &#160;__declspec(dllimport)&#160;<br/>#endif&#160;<br/>#ifndef&#160;DllExport&#160;<br/>#define&#160;DllExport &#160;__declspec(dllexport)&#160;<br/>#endif&#160;<br/>#ifdef&#160;SEEDKEYAPI_IMPL&#160;<br/>#define&#160;SEEDKEYAPI DllExport&#160;__cdecl&#160;<br/>#else&#160;<br/>#define&#160;SEEDKEYAPI DllImport&#160;__cdecl&#160;<br/>#endif&#160;<br/>#ifdef&#160;__cplusplus&#160;<br/>extern&#160;&#34;C&#34;&#160;{&#160;<br/>#endif&#160;<br/>&#160;<br/>BOOL SEEDKEYAPI&#160;ASAP1A_XCP_ComputeKeyFromSeed( BYTE *seed,&#160;<br/>&#160;&#160;unsigned&#160;short&#160;sizeSeed,&#160;<br/>&#160;&#160;BYTE *key,&#160;<br/>&#160;&#160;unsigned&#160;short&#160;maxSizeKey,&#160;<br/>&#160;&#160;unsigned&#160;short&#160;*sizeKey&#160;<br/>&#160;&#160;);&#160;<br/>#ifdef&#160;__cplusplus&#160;<br/>}&#160;<br/>#endif&#160;<br/>#endif&#160;<br/>&#160;<br/>FILE SEEDKEY1.C&#160;<br/>#include&#160;&lt;windows.h&gt;&#160;<br/>#define&#160;SEEDKEYAPI_IMPL&#160;<br/>#include&#160;&#34;SeedKey1.h&#34;&#160;<br/>&#160;<br/>extern&#160;&#34;C&#34;&#160;{&#160;<br/>BOOL SEEDKEYAPI ASAP1A_XCP_ComputeKeyFromSeed( BYTE *seed,&#160;<br/>&#160;&#160;unsigned&#160;short&#160;sizeSeed,&#160;<br/>&#160;&#160;BYTE *key,&#160;<br/>&#160;&#160;unsigned&#160;short&#160;maxSizeKey,&#160;<br/>&#160;&#160;unsigned&#160;short&#160;*sizeKey&#160;<br/>&#160;&#160;)&#160;<br/>{ &#160;// in that example sizeSeed == 4 is expected only&#160;<br/>&#160;&#160;if( sizeSeed != 4 )&#160;return&#160;FALSE;&#160;<br/>&#160; &#160;&#160;if( maxSizeKey &lt; 4 )&#160;return&#160;FALSE;&#160;<br/>&#160; &#160;&#160;*((unsigned&#160;long*)key) *= 3;&#160;<br/>&#160; &#160;&#160;*((unsigned&#160;long*)key) &amp;= 0x55555555;&#160;<br/>&#160; &#160;&#160;*((unsigned&#160;long*)key) *= 5;&#160;&#160;<br/>&#160; &#160;&#160;*sizeKey = 4;&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
15&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-16_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
&#160; &#160;&#160;return&#160;TRUE;&#160;<br/>&#160;&#160;}&#160;<br/>}&#160;<br/>&#160;<br/>
&#160;<br/>
<b>3.6&#160;</b><br/>
<b>Checksum Calculation&#160;</b><br/>
The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;supports&#160;&#160;calculation&#160;&#160;of&#160;&#160;a&#160;&#160;checksum&#160;&#160;over&#160;&#160;a&#160;&#160;specific&#160;&#160;memory&#160;<br/>range.&#160;The&#160;XCP&#160;Protocol&#160;Layer&#160;supports&#160;all&#160;XCP&#160;ADD&#160;algorithms&#160;and&#160;the&#160;CRC16CCITT&#160;<br/>checksum&#160;calculation&#160;algorithm.&#160;<br/>XCP&#160;Professional&#160;allows&#160;the&#160;usage&#160;of&#160;the&#160;AUTOSAR&#160;CRC&#160;Module<a href="TechnicalReference_Asr_Xcps.html#108">&#160;[VII].&#160;</a>If&#160;the&#160;AUTOSAR&#160;<br/>CRC Module&#160;is used&#160;also&#160;the&#160;XCP&#160;CRC32&#160;algorithm&#160;can&#160;be&#160;used.&#160;<br/>Also&#160;refer to<a href="TechnicalReference_Asr_Xcps.html#93">&#160;7.2.2.1&#160;‘Table&#160;of&#160;Checksum&#160;Calculation&#160;Methods’.</a>&#160;<br/>If&#160;checksum&#160;calculation&#160;is enabled&#160;the&#160;background&#160;task&#160;has to&#160;be&#160;called&#160;cyclically.&#160;<br/>
<b>3.6.1&#160;</b><br/>
<b>Custom&#160;CRC calculation&#160;</b><br/>
The&#160;Protocol&#160;Layer&#160;also&#160;allows&#160;the&#160;calculation&#160;of&#160;the&#160;CRC&#160;by&#160;the&#160;application.&#160;For&#160;this&#160;the&#160;<br/>call-back:&#160;<br/>uint8&#160;&#160;<b>ApplXcpCalculateChecksum</b>(&#160;&#160;ROMBYTEPTR&#160;&#160;pMemArea,&#160;&#160;BYTEPTR&#160;&#160;pRes,&#160;<br/>uint32 length )&#160;<br/>
is&#160;&#160;called.&#160;&#160;This&#160;&#160;call-back&#160;&#160;can&#160;&#160;either&#160;&#160;calculate&#160;&#160;the&#160;&#160;checksum&#160;&#160;synchronously&#160;&#160;and&#160;&#160;return&#160;<br/>XCP_CMD_OK&#160;&#160;or&#160;it&#160;&#160;can&#160;&#160;trigger&#160;the&#160;&#160;calculation&#160;&#160;and&#160;&#160;return&#160;&#160;XCP_CMD_PENDING&#160;&#160;for&#160;asynchronous&#160;<br/>calculation&#160;of&#160;the&#160;checksum.&#160;In&#160;every&#160;case&#160;the&#160;response&#160;frame&#160;has to&#160;be&#160;assembled.&#160;<br/>
<b>3.7&#160;</b><br/>
<b>MainFunction&#160;</b><br/>
The&#160;Xcp&#160;provides a&#160;MainFunction:&#160;<br/>
void&#160;<b>XcpBackground</b>( void )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#38">(6.2.5)</a>&#160;<br/>
&#160;which&#160;must&#160;be&#160;called&#160;cyclically&#160;and&#160;performs&#160;the&#160;following&#160;tasks:&#160;<br/>
&#160;&#160;Checksum&#160;&#160;calculation&#160;&#160;which&#160;&#160;is&#160;&#160;done&#160;&#160;asynchronously&#160;&#160;in&#160;&#160;configurable&#160;&#160;chunks&#160;&#160;to&#160;<br/>
prevent&#160;extensive&#160;runtime&#160;<br/>
&#160;&#160;Resume&#160;Mode&#160;Handling&#160;<br/>
The&#160;XcpBackground&#160;is&#160;normally&#160;called&#160;by&#160;the&#160;SchM.&#160;If&#160;you&#160;use&#160;a&#160;3rd&#160;party&#160;SchM&#160;you&#160;must&#160;<br/>configure it&#160;accordingly such&#160;that&#160;the&#160;function&#160;is called&#160;cyclically.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
16&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-17_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.8&#160;</b><br/>
<b>Memory&#160;Protection (XCP&#160;Professional&#160;only)&#160;</b><br/>
If&#160;XCP_ENABLE_WRITE_PROTECTION&#160;is&#160;defined&#160;write&#160;access&#160;of&#160;specific&#160;RAM&#160;areas&#160;can&#160;<br/>be&#160;checked&#160;with&#160;the&#160;function&#160;<br/>
uint8&#160;<b>ApplXcpCheckWriteAccess</b>( MTABYTEPTR addr, uint8 size )<a href="TechnicalReference_Asr_Xcps.html#54">(6.5.7)</a>&#160;<br/>
It&#160;should&#160;only&#160;be&#160;used,&#160;if&#160;write&#160;protection&#160;of&#160;memory&#160;areas is required.&#160;<br/>
If&#160;XCP_ENABLE_READ_PROTECTION&#160;is&#160;defined&#160;read&#160;access&#160;of&#160;specific&#160;RAM&#160;areas&#160;can&#160;be&#160;<br/>checked&#160;with&#160;the&#160;function&#160;<br/>
uint8&#160;<b>ApplXcpCheckReadAccess</b>( MTABYTEPTR addr, uint8 size )&#160;<a href="TechnicalReference_Asr_Xcps.html#55">(6.5.8)</a>&#160;<br/>
It&#160;should&#160;only&#160;be&#160;used,&#160;if&#160;read&#160;protection&#160;of&#160;memory&#160;areas is required.&#160;<br/>While&#160;&#160;the&#160;&#160;first&#160;&#160;two&#160;&#160;functions&#160;&#160;are&#160;&#160;used&#160;&#160;during&#160;&#160;polling,&#160;&#160;the&#160;&#160;following&#160;&#160;function&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;<br/>DAQ/STIM access:&#160;<br/>
uint8&#160;<b>ApplXcpCheckDAQAccess</b>( DAQBYTEPTR addr, uint8 size )&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#55">(6.5.9)</a>&#160;<br/>
These&#160;&#160;functions&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;protect&#160;&#160;memory&#160;&#160;areas&#160;&#160;that&#160;&#160;are&#160;&#160;not&#160;&#160;allowed&#160;&#160;to&#160;&#160;be&#160;<br/>accessed,&#160;e.g.&#160;memory&#160;mapped&#160;registers or the&#160;xcp&#160;memory&#160;itself.&#160;<br/>
<b>3.9&#160;</b><br/>
<b>Memory&#160;Access&#160;by&#160;Application&#160;</b><br/>
There&#160;are&#160;two&#160;APIs&#160;available&#160;that&#160;allow&#160;memory&#160;access&#160;by&#160;application.&#160;Those&#160;APIs&#160;can&#160;be&#160;<br/>enabled&#160;by&#160;setting&#160;XCP_ENABLE_CALIBRATION_MEM_ACCESS_BY_APPL.&#160;Please&#160;note&#160;that&#160;these&#160;<br/>API&#160;are&#160;only&#160;used&#160;for&#160;polling&#160;access.&#160;DAQ/STIM still&#160;uses direct&#160;memory&#160;access.&#160;<br/>
uint8&#160;&#160;<b>ApplXcpCalibrationWrite</b>(&#160;&#160;MTABYTEPTR&#160;&#160;addr,&#160;&#160;uint8&#160;&#160;size,&#160;<br/>ROMBYTEPTR data )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#69">(6.5.33)</a>&#160;<br/>
uint8&#160;&#160;<b>ApplXcpCalibrationRead</b>(&#160;&#160;MTABYTEPTR&#160;&#160;addr,&#160;&#160;uint8&#160;&#160;size,&#160;<br/>BYTEPTR data )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#69">(6.5.32)</a>&#160;<br/>
<b>3.10&#160;&#160;Event&#160;Codes&#160;</b><br/>
The&#160;slave&#160;device&#160;may&#160;report&#160;events&#160;by&#160;sending&#160;asynchronous&#160;event&#160;packets&#160;(EV),&#160;which&#160;<br/>contain&#160;&#160;event&#160;&#160;codes,&#160;&#160;to&#160;&#160;the&#160;&#160;master&#160;&#160;device.&#160;&#160;The&#160;&#160;transmission&#160;&#160;is&#160;&#160;not&#160;&#160;guaranteed&#160;&#160;due&#160;&#160;to&#160;<br/>these&#160;event&#160;packets&#160;are&#160;not&#160;acknowledged.&#160;<br/>
The&#160;&#160;transmission&#160;&#160;of&#160;&#160;event&#160;&#160;codes&#160;&#160;is&#160;&#160;enabled&#160;&#160;with&#160;&#160;XCP_ENBALE_SEND_EVENT.&#160;&#160;The&#160;<br/>transmission&#160;is done&#160;by&#160;the&#160;service&#160;<br/>
void&#160;<b>XcpSendEvent</b>( uint8 evc,&#160;ROMBYTEPTR c, uint8 len&#160;)&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#39">(6.2.6)</a>&#160;<br/>
The&#160;event&#160;codes can&#160;be&#160;found&#160;in&#160;the&#160;following&#160;table.&#160;<br/>
<b>Event&#160;</b><br/>
<b>Code&#160;&#160;Description&#160;</b><br/>
EV_RESUME_MODE&#160;<br/>
0x00&#160;&#160;The&#160;slave indicates&#160;that&#160;it&#160;is&#160;starting&#160;in RESUME&#160;mode.&#160;<br/>
EV_CLEAR_DAQ&#160;<br/>
0x01&#160;&#160;The&#160;slave indicates&#160;that&#160;the&#160;DAQ&#160;configuration&#160;in&#160;non-<br/>
volatile memory&#160;has&#160;been cleared.&#160;<br/>
EV_STORE_DAQ&#160;<br/>
0x02&#160;&#160;The&#160;slave indicates&#160;that&#160;the&#160;DAQ&#160;configuration&#160;has&#160;been&#160;<br/>
stored&#160;into&#160;non-volatile&#160;memory.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
17&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-18_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
EV_STORE_CAL&#160;<br/>
0x03&#160;&#160;The&#160;slave indicates&#160;that&#160;the&#160;calibration&#160;data has&#160;been&#160;<br/>
stored.&#160;<br/>
EV_CMD_PENDING&#160;<br/>
0x05&#160;&#160;The&#160;slave requests&#160;the&#160;master&#160;to&#160;restart&#160;the&#160;time-out&#160;<br/>
detection.&#160;<br/>
EV_DAQ_OVERLOAD&#160;<br/>
0x06&#160;&#160;The&#160;slave indicates&#160;an&#160;overload&#160;situation&#160;when&#160;<br/>
transferring&#160;DAQ&#160;lists.&#160;<br/>
EV_SESSION_TERMINATED&#160;&#160;0x07&#160;&#160;The&#160;slave indicates&#160;to&#160;the master&#160;that&#160;it&#160;autonomously&#160;<br/>
decided to disconnect&#160;the current&#160;XCP&#160;session.&#160;<br/>
EV_USER&#160;<br/>
0xFE&#160;&#160;User-defined&#160;event.&#160;<br/>
EV_TRANSPORT&#160;<br/>
0xFF&#160;&#160;Transport&#160;layer&#160;specific&#160;event.&#160;<br/>
&#160;<br/>
<b>3.11&#160;&#160;Service&#160;Request Messages&#160;(XCP&#160;Professional&#160;only)&#160;</b><br/>
The&#160;slave&#160;device&#160;may&#160;request&#160;some&#160;action&#160;to&#160;be&#160;performed&#160;by&#160;the&#160;master&#160;device.&#160;This&#160;is&#160;<br/>done&#160;by&#160;the&#160;transmission&#160;of&#160;a&#160;Service&#160;&#160;Request&#160;&#160;Packet&#160;&#160;(SERV)&#160;that&#160;&#160;contains&#160;the&#160;service&#160;<br/>request&#160;&#160;code.&#160;&#160;The&#160;&#160;transmission&#160;&#160;of&#160;&#160;service&#160;&#160;request&#160;&#160;packets&#160;&#160;is&#160;&#160;asynchronous&#160;&#160;and&#160;&#160;not&#160;<br/>guaranteed&#160;due&#160;to&#160;these&#160;packets&#160;are not&#160;being&#160;acknowledged.&#160;<br/>The&#160;service&#160;request&#160;messages can&#160;be&#160;sent&#160;by&#160;the&#160;following&#160;functions&#160;<br/>
void&#160;<b>ApplXcpUserService</b>&#160;(&#160;ROMBYTEPTR&#160;uint8 c&#160;)&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#39">(6.2.7)</a>&#160;<br/>
void&#160;<b>ApplXcpPrint</b>&#160;(&#160;const&#160;uint8 *str&#160;)&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#40">(6.2.8)</a>&#160;<br/>
Refer to<a href="TechnicalReference_Asr_Xcps.html#88">&#160;7.2.1&#160;</a>for the&#160;configuration&#160;of&#160;the&#160;service&#160;request&#160;message.&#160;<br/>
<b>3.12&#160;&#160;User Defined&#160;Command&#160;</b><br/>
The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;allows&#160;&#160;having&#160;&#160;a&#160;&#160;user&#160;&#160;defined&#160;&#160;command&#160;&#160;with&#160;&#160;an&#160;&#160;application&#160;&#160;specific&#160;<br/>functionality.&#160;<br/>
The&#160;<br/>
user&#160;<br/>
defined&#160;<br/>
command&#160;<br/>
is&#160;<br/>
enabled&#160;<br/>
by&#160;<br/>
setting&#160;<br/>
XCP_ENABLE_USER_COMMAND&#160;&#160;and&#160;&#160;upon&#160;&#160;reception&#160;&#160;of&#160;&#160;the&#160;&#160;user&#160;&#160;command&#160;&#160;the&#160;&#160;following&#160;<br/>callback&#160;function&#160;is called&#160;by&#160;the&#160;XCP&#160;command&#160;processor:&#160;<br/>
uint8&#160;<b>ApplXcpUserService</b>&#160;(&#160;ROMBYTEPTR pCmd )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#57">(6.5.11)</a>&#160;<br/>
&#160;<br/>
<b>3.13&#160;&#160;Transport Layer Command&#160;</b><br/>
The&#160;transport&#160;layer&#160;commands&#160;are&#160;received&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;and&#160;processed&#160;by&#160;<br/>the&#160;&#160;XCP&#160;Transport&#160;&#160;Layer.&#160;The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;transmits&#160;&#160;the&#160;&#160;XCP&#160;&#160;response&#160;&#160;packets&#160;<br/>(RES) or XCP&#160;error packets&#160;(ERR).&#160;<br/>
The&#160;transport layer command&#160;is enabled&#160;by&#160;setting&#160;XCP_ENABLE_TL_COMMAND.&#160;&#160;&#160;<br/>Upon&#160;reception&#160;of&#160;any&#160;transport&#160;layer&#160;command&#160;the&#160;following&#160;callback&#160;function&#160;is&#160;called&#160;by&#160;<br/>the&#160;XCP&#160;command&#160;processor:&#160;<br/>
uint8&#160;<b>&lt;Bus&gt;XcpTLService</b>&#160;(&#160;ROMBYTEPTR pCmd )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#49">(6.4.5)</a>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
18&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-19_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.14&#160;&#160;Synchronous&#160;Data Transfer&#160;</b><br/>
<b>3.14.1&#160;&#160;Synchronous&#160;Data&#160;Acquisition (DAQ)&#160;<br/></b>The&#160;&#160;synchronous&#160;&#160;data&#160;&#160;transfer&#160;&#160;can&#160;&#160;be&#160;&#160;enabled&#160;&#160;with&#160;&#160;the&#160;&#160;compiler&#160;&#160;switch&#160;<br/>XCP_ENABLE_DAQ.&#160;In&#160;this&#160;mode,&#160;the&#160;MCS&#160;configures&#160;tables&#160;of&#160;memory&#160;addresses&#160;in&#160;the&#160;<br/>XCP&#160;&#160;Protocol&#160;&#160;Layer.&#160;These&#160;&#160;tables&#160;&#160;contain&#160;&#160;pointers&#160;&#160;to&#160;measurement&#160;&#160;objects,&#160;&#160;which&#160;&#160;have&#160;<br/>been&#160;&#160;configured&#160;&#160;previously&#160;&#160;for&#160;&#160;the&#160;&#160;measurement&#160;&#160;in&#160;&#160;the&#160;&#160;MCS.&#160;&#160;Each&#160;&#160;configured&#160;&#160;table&#160;&#160;is&#160;<br/>assigned&#160;to&#160;an&#160;event&#160;channel.&#160;<br/>
The&#160;&#160;function&#160;&#160;XcpEvent(x)&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;called&#160;&#160;cyclically&#160;&#160;for&#160;&#160;each&#160;&#160;event&#160;&#160;channel&#160;&#160;with&#160;&#160;the&#160;<br/>corresponding&#160;&#160;event&#160;&#160;channel&#160;&#160;number&#160;&#160;as&#160;&#160;parameter.&#160;&#160;The&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;ensure&#160;&#160;that&#160;<br/>XcpEvent&#160;is&#160;called&#160;with&#160;the&#160;correct&#160;cycle&#160;time,&#160;which&#160;is&#160;defined&#160;in&#160;the&#160;MCS.&#160;Note&#160;that&#160;the&#160;<br/>event&#160;channel&#160;numbers&#160;&#160;are&#160;given&#160;by&#160;the&#160;Configuration&#160;Tool&#160;when&#160;the&#160;Event&#160;Info&#160;feature&#160;is&#160;<br/>used.&#160;<br/>The&#160;&#160;ECU&#160;&#160;automatically&#160;&#160;transmits&#160;&#160;the&#160;&#160;current&#160;&#160;value&#160;&#160;of&#160;&#160;the&#160;&#160;measurement&#160;&#160;objects&#160;&#160;via&#160;<br/>messages&#160;to&#160;the&#160;MCS,&#160;when&#160;the&#160;function&#160;XcpEvent&#160;is&#160;executed&#160;in&#160;the&#160;ECU’s&#160;code&#160;with&#160;<br/>the&#160;corresponding&#160;event&#160;channel&#160;number.&#160;This&#160;means&#160;that&#160;the&#160;data&#160;can&#160;be&#160;transmitted&#160;at&#160;<br/>any&#160;particular point&#160;of&#160;the&#160;ECU&#160;code&#160;when&#160;the&#160;data&#160;values&#160;are valid.&#160;<br/>The&#160;data&#160;acquisition&#160;mode&#160;can&#160;be&#160;used&#160;in&#160;multiple&#160;configurations&#160;that&#160;are&#160;described&#160;within&#160;<br/>the&#160;next&#160;chapters.&#160;<br/>Annotation&#160;for&#160;the&#160;usage&#160;of&#160;CANape&#160;<br/>It&#160;is recommended&#160;to&#160;enable&#160;both&#160;data&#160;acquisition&#160;plug&#160;&amp;&#160;play&#160;mechanisms&#160;to&#160;detect&#160;the&#160;<br/>DAQ&#160;settings.&#160;<br/>
<b>3.14.2&#160;&#160;DAQ&#160;Timestamp&#160;<br/></b>There are&#160;two&#160;methods to&#160;generate&#160;timestamps&#160;for data&#160;acquisition&#160;signals.&#160;<br/>
1.&#160;By&#160;the&#160;MCS&#160;tool&#160;on&#160;reception&#160;of&#160;the&#160;message&#160;<br/>2.&#160;By&#160;the&#160;ECU&#160;(XCP&#160;slave)&#160;<br/>
The&#160;time&#160;precision&#160;of&#160;the&#160;MCS&#160;tool&#160;is&#160;adequate&#160;for&#160;the&#160;most&#160;applications;&#160;however,&#160;some&#160;<br/>applications&#160;&#160;like&#160;&#160;the&#160;&#160;monitoring&#160;&#160;of&#160;&#160;the&#160;&#160;OSEK&#160;&#160;operating&#160;&#160;system&#160;&#160;or&#160;&#160;measurement&#160;&#160;on&#160;<br/>FlexRay&#160;&#160;with&#160;&#160;an&#160;&#160;event&#160;&#160;cycle&#160;&#160;time&#160;&#160;smaller&#160;&#160;than&#160;&#160;the&#160;&#160;FlexRay&#160;&#160;cycle&#160;&#160;time&#160;&#160;require&#160;&#160;higher&#160;<br/>precision&#160;timestamps.&#160;In&#160;such&#160;cases,&#160;ECU&#160;generated&#160;timestamps are&#160;recommended.&#160;<br/>The&#160;timestamp&#160;must&#160;be&#160;implemented&#160;in&#160;a&#160;call-back&#160;which&#160;returns&#160;the&#160;current&#160;value:&#160;<br/>
XcpDaqTimestampType&#160;<b>ApplXcpGetTimestamp</b>&#160;( void )&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#64">(6.5.24)</a>&#160;<br/>
There are&#160;several possibilities to&#160;implement&#160;such&#160;a&#160;timestamp:&#160;<br/>
&#160;&#160;16bit&#160;Counter&#160;variable,&#160;incremented&#160;by&#160;software&#160;in&#160;a&#160;fast&#160;task&#160;(.e.g.&#160;1ms&#160;task)&#160;for&#160;<br/>
applications&#160;&#160;where&#160;&#160;such&#160;&#160;a&#160;&#160;resolution&#160;&#160;is&#160;&#160;sufficient&#160;&#160;and&#160;&#160;returned&#160;&#160;in&#160;&#160;the&#160;&#160;above&#160;<br/>mentioned&#160;call-back&#160;<br/>
&#160;&#160;32bit&#160;General&#160;Purpose&#160;Timer&#160;of&#160;the&#160;used&#160;µC,&#160;configured&#160;to&#160;a&#160;certain&#160;repetition&#160;rate&#160;<br/>
(e.g.&#160;1µs&#160;increment)&#160;for&#160;applications&#160;that&#160;require&#160;a&#160;high&#160;resolution&#160;of&#160;the&#160;timestamp&#160;<br/>and&#160;returned&#160;in&#160;the&#160;above&#160;mentioned&#160;call-back&#160;<br/>
The&#160;&#160;resolution&#160;&#160;and&#160;&#160;increment&#160;&#160;value&#160;&#160;of&#160;this&#160;&#160;timer&#160;&#160;must&#160;&#160;be&#160;&#160;configured&#160;&#160;in&#160;&#160;the&#160;&#160;configuration&#160;<br/>Tool (e.g.&#160;GENy) accordingly,&#160;see<a href="TechnicalReference_Asr_Xcps.html#79">&#160;7.1.2.2.</a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
19&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-20_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
For&#160;the&#160;configuration&#160;of&#160;the&#160;DAQ&#160;time&#160;stamped&#160;mode&#160;refer&#160;to&#160;chapte<a href="TechnicalReference_Asr_Xcps.html#97">r&#160;7.2.6&#160;(Configuration&#160;<br/>of&#160;the&#160;DAQ&#160;Time&#160;Stamped&#160;Mode).</a>&#160;<br/>
<b>3.14.3&#160;&#160;Power-Up Data Transfer&#160;(XCP&#160;Professional&#160;only)&#160;<br/></b>Power-up&#160;data&#160;&#160;transfer&#160;&#160;(also&#160;&#160;called&#160;&#160;resume&#160;mode)&#160;&#160;allows&#160;&#160;automatic&#160;&#160;data&#160;&#160;transfer&#160;&#160;(DAQ,&#160;<br/>STIM)&#160;&#160;of&#160;&#160;the&#160;&#160;slave&#160;&#160;directly&#160;&#160;after&#160;&#160;power-up.&#160;&#160;Automotive&#160;&#160;applications&#160;&#160;would&#160;&#160;e.g.&#160;&#160;be&#160;<br/>measurements&#160;during&#160;cold&#160;start.&#160;<br/>The&#160;slave&#160;and&#160;the&#160;master&#160;have&#160;to&#160;store&#160;all&#160;the&#160;necessary&#160;communication&#160;parameters&#160;for&#160;<br/>the&#160;&#160;automatic&#160;&#160;data&#160;&#160;transfer&#160;&#160;after&#160;&#160;power-up.&#160;&#160;Therefore&#160;&#160;the&#160;&#160;following&#160;&#160;functions&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;<br/>implemented&#160;in&#160;the&#160;slave.&#160;<br/>
uint8&#160;<b>ApplXcpDaqResume&#160;</b>( tXcpDaq * daq )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#62">(6.5.20)</a>&#160;<br/>
void&#160;<b>ApplXcpDaqResumeStore</b>&#160;(&#160;const&#160;tXcpDaq * daq )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#62">(6.5.21)</a>&#160;<br/>
void&#160;<b>ApplXcpDaqResumeClear&#160;</b>( void )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#63">(6.5.22)</a>&#160;<br/>
uint8&#160;<b>ApplXcpCalResumeStore&#160;</b>( void )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#63">(6.5.23)</a>&#160;<br/>
To&#160;&#160;use&#160;&#160;the&#160;&#160;resume&#160;&#160;mode&#160;&#160;the&#160;&#160;compiler&#160;&#160;switches&#160;&#160;XCP_ENBALE_DAQ&#160;&#160;and&#160;<br/>XCP_ENABLE_RESUME_MODE&#160;have&#160;to&#160;be&#160;defined.&#160;<br/>
Annotation&#160;for the&#160;usage&#160;of&#160;CANape&#160;<br/>Start&#160;the&#160;resume&#160;mode&#160;with&#160;the&#160;menu&#160;command&#160;Measurement|Start&#160;and&#160;push&#160;the&#160;button&#160;<br/>“Measure offline” on&#160;the&#160;dialog&#160;box.&#160;<br/>
<b>3.14.4&#160;&#160;Send Queue&#160;<br/></b>The&#160;send&#160;queue&#160;is&#160;used&#160;to&#160;store&#160;measurement&#160;values&#160;until&#160;they&#160;can&#160;be&#160;transmitted&#160;on&#160;the&#160;<br/>bus.&#160;This&#160;&#160;is&#160;&#160;required&#160;&#160;if&#160;&#160;the&#160;&#160;used&#160;Transport&#160;&#160;Layer&#160;&#160;does&#160;&#160;not&#160;&#160;perform&#160;&#160;buffering&#160;&#160;on&#160;&#160;its&#160;&#160;own.&#160;<br/>Vector&#160;Transport&#160;Layers do&#160;not&#160;buffer any&#160;data&#160;and&#160;therefore this&#160;feature should&#160;be&#160;used.&#160;<br/>The&#160;send&#160;queue&#160;size&#160;can&#160;be&#160;indirectly&#160;configured&#160;in&#160;the&#160;Configuration&#160;Tool.&#160;It&#160;is&#160;defined&#160;by&#160;<br/>the&#160;parameter&#160;“Memory&#160;Size”&#160;&#160;–&#160;the&#160;memory&#160;size&#160;used&#160;by&#160;the&#160;dynamic&#160;DAQ&#160;lists.&#160;As&#160;the&#160;<br/>DAQ&#160;lists&#160;are&#160;created&#160;during&#160;runtime&#160;by&#160;the&#160;tool&#160;no&#160;detailed&#160;calculation&#160;is&#160;possible.&#160;A&#160;worst&#160;<br/>case&#160;analysis&#160;can&#160;be&#160;made&#160;and&#160;the&#160;parameter&#160;should&#160;be&#160;chosen&#160;such&#160;that&#160;enough&#160;space&#160;<br/>is left&#160;for&#160;the&#160;send&#160;queue.&#160;<br/>Furthermore&#160;&#160;the&#160;&#160;behaviour&#160;&#160;of&#160;&#160;the&#160;&#160;send&#160;&#160;queue&#160;&#160;in&#160;&#160;case&#160;&#160;of&#160;&#160;an&#160;&#160;overrun&#160;&#160;condition&#160;&#160;can&#160;&#160;be&#160;<br/>influenced.&#160;There&#160;are two&#160;possible&#160;options:&#160;<br/>
1.&#160;&#160;Throw&#160;away&#160;oldest&#160;element&#160;<br/>
&#160;The&#160;oldest&#160;odt&#160;in&#160;the&#160;send&#160;queue&#160;is&#160;discarded&#160;and&#160;the&#160;new&#160;measurement&#160;value&#160;is&#160;<br/>inserted.&#160;The&#160;send&#160;queue&#160;behaves as&#160;a&#160;ring&#160;buffer.&#160;<br/>
2.&#160;&#160;Throw&#160;away&#160;latest&#160;element&#160;<br/>
&#160;&#160;The&#160;&#160;latest&#160;&#160;measurement&#160;&#160;values&#160;&#160;are&#160;&#160;discarded.&#160;&#160;The&#160;&#160;send&#160;&#160;queue&#160;&#160;behaves&#160;&#160;like&#160;&#160;a&#160;<br/>linear buffer.&#160;<br/>
The&#160;&#160;Configuration&#160;Tool&#160;&#160;option&#160;&#160;“Replace&#160;&#160;First&#160;&#160;Element”&#160;&#160;determines&#160;&#160;the&#160;&#160;default&#160;&#160;behaviour.&#160;<br/>The&#160;&#160;behaviour&#160;&#160;can&#160;&#160;be&#160;&#160;changed&#160;&#160;during&#160;&#160;runtime&#160;&#160;by&#160;&#160;modifying&#160;&#160;the&#160;&#160;variable&#160;<br/>xcp.Daq.SendQueueBehaviour.&#160;If&#160;this variable&#160;is zero linear mode&#160;is&#160;selected,&#160;if&#160;this variable&#160;<br/>is one&#160;the&#160;ring&#160;buffer mode&#160;is selected.&#160;This&#160;variable&#160;can&#160;be&#160;modified&#160;by&#160;the&#160;Master&#160;Tool.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
20&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-21_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.14.5&#160;&#160;Data Stimulation (STIM) (XCP&#160;Professional&#160;only)&#160;<br/></b>Synchronous Data&#160;Stimulation&#160;is the&#160;inverse&#160;mode&#160;of&#160;Synchronous&#160;Data&#160;Acquisition.&#160;<br/>The&#160;&#160;STIM&#160;&#160;processor&#160;&#160;buffers&#160;&#160;incoming&#160;&#160;data&#160;&#160;stimulation&#160;&#160;packets.&#160;&#160;When&#160;&#160;an&#160;&#160;event&#160;&#160;occurs&#160;<br/>(XcpEvent&#160;is&#160;called),&#160;which&#160;triggers&#160;a&#160;DAQ&#160;list&#160;in&#160;data&#160;stimulation&#160;mode,&#160;the&#160;buffered&#160;data&#160;<br/>is transferred&#160;to&#160;the&#160;slave&#160;device’s memory.&#160;<br/>
To&#160;use&#160;data&#160;stimulation&#160;the&#160;compiler&#160;switches&#160;XCP_ENBALE_DAQ&#160;and&#160;XCP_ENABLE_STIM&#160;<br/>have&#160;to&#160;be&#160;defined.&#160;<br/>
<b>3.14.6&#160;&#160;Bypassing (XCP&#160;Professional&#160;only)&#160;<br/></b>Bypassing&#160;&#160;can&#160;&#160;be&#160;&#160;realized&#160;&#160;by&#160;&#160;making&#160;&#160;use&#160;&#160;of&#160;&#160;Synchronous&#160;&#160;Data&#160;Acquisition&#160;&#160;(DAQ)&#160;&#160;and&#160;<br/>Synchronous Data&#160;Stimulation&#160;(STIM)&#160;simultaneously.&#160;<br/>State-of-the-art&#160;Bypassing&#160;also&#160;requires&#160;the&#160;administration&#160;of&#160;the&#160;bypassed&#160;functions.&#160;This&#160;<br/>administration&#160;has&#160;to&#160;be&#160;performed&#160;in&#160;a&#160;MCS&#160;like&#160;e.g.&#160;CANape.&#160;<br/>Also&#160;&#160;the&#160;&#160;slave&#160;&#160;should&#160;&#160;perform&#160;&#160;plausibility&#160;&#160;checks&#160;&#160;on&#160;&#160;the&#160;&#160;data&#160;&#160;it&#160;&#160;receives&#160;&#160;through&#160;&#160;data&#160;<br/>stimulation.&#160;&#160;The&#160;&#160;borders&#160;&#160;and&#160;&#160;actions&#160;&#160;of&#160;&#160;these&#160;&#160;checks&#160;&#160;are&#160;&#160;set&#160;&#160;by&#160;&#160;standard&#160;&#160;calibration&#160;<br/>methods.&#160;No&#160;special XCP&#160;commands&#160;are needed&#160;for this.&#160;<br/>
<b>3.14.7&#160;&#160;Data&#160;Acquisition Plug &amp; Play&#160;Mechanisms&#160;<br/></b>The&#160;XCP&#160;Protocol Layer comprises two&#160;plug&#160;&amp;&#160;play&#160;mechanisms&#160;for data&#160;acquisition:&#160;<br/>
<b>&gt;&#160;&#160;</b>general information&#160;on&#160;the&#160;DAQ&#160;processor&#160;&#160;<br/>
(enabled&#160;with&#160;XCP_ENABLE_DAQ_PROCESSOR_INFO)&#160;<br/>
<b>&gt;&#160;&#160;</b>general information&#160;on&#160;DAQ&#160;processing&#160;resolution&#160;<br/>
(enabled&#160;with&#160;XCP_ENABLE_DAQ_RESOLUTION_INFO)&#160;<br/>
The&#160;general information&#160;on&#160;the&#160;DAQ&#160;processor contains:&#160;<br/>
<b>&gt;&#160;&#160;</b>general properties&#160;of&#160;DAQ&#160;lists&#160;<br/>
<b>&gt;&#160;&#160;</b>total&#160;number&#160;of&#160;available&#160;DAQ&#160;lists and&#160;event&#160;channels&#160;<br/>
The&#160;general information&#160;on&#160;the&#160;DAQ&#160;processing&#160;resolution&#160;contains:&#160;<br/>
<b>&gt;&#160;&#160;</b>granularity&#160;and&#160;maximum&#160;size&#160;of&#160;ODT&#160;entries&#160;for both&#160;directions&#160;<br/>
<b>&gt;&#160;&#160;</b>information&#160;on&#160;the&#160;time&#160;stamp&#160;mode&#160;<br/>
<b>3.14.8&#160;&#160;Event&#160;Channel&#160;Plug &amp; Play&#160;Mechanism&#160;<br/></b>The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;supports&#160;&#160;a&#160;&#160;plug&#160;&#160;&amp;&#160;&#160;play&#160;&#160;mechanism&#160;&#160;that&#160;&#160;allows&#160;&#160;the&#160;&#160;MCS&#160;&#160;to&#160;<br/>automatically&#160;detect&#160;the&#160;available&#160;event&#160;channels in&#160;the&#160;slave.&#160;<br/>Please&#160;refer&#160;to&#160;chapter<a href="TechnicalReference_Asr_Xcps.html#95">&#160;7.2.5&#160;(Configuration&#160;of&#160;the&#160;Event&#160;Channel&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism)&#160;<br/></a>for details about&#160;the&#160;configuration&#160;of&#160;this plug&#160;&amp;&#160;play&#160;mechanism.&#160;<br/>Annotation&#160;for the&#160;usage&#160;of&#160;CANape&#160;<br/>If&#160;the&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;not&#160;built-in,&#160;you&#160;must&#160;open&#160;the&#160;dialog&#160;XCP&#160;Device&#160;Setup&#160;<br/>with&#160;the&#160;menu&#160;command&#160;Tools|Driver&#160;parameters.&#160;Go&#160;to&#160;the&#160;Event&#160;tab.&#160;Make&#160;one&#160;entry&#160;for&#160;<br/>each&#160;&#160;event&#160;&#160;channel.&#160;An&#160;&#160;event&#160;&#160;channel&#160;&#160;is&#160;&#160;an&#160;&#160;XcpEvent(x)&#160;&#160;function&#160;&#160;call&#160;&#160;in&#160;&#160;ECU&#160;&#160;source&#160;<br/>code.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
21&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-22_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.14.9&#160;&#160;Data&#160;consistency&#160;<br/></b>The&#160;&#160;Xcp&#160;&#160;supports&#160;&#160;a&#160;&#160;data&#160;&#160;consistency&#160;&#160;on&#160;&#160;ODT&#160;&#160;level.&#160;&#160;If&#160;&#160;a&#160;&#160;consistency&#160;&#160;on&#160;&#160;DAQ&#160;&#160;level&#160;&#160;is&#160;<br/>required,&#160;&#160;interrupts&#160;&#160;must&#160;&#160;be&#160;&#160;disabled&#160;&#160;prior&#160;&#160;calling&#160;&#160;XcpEvent&#160;&#160;and&#160;&#160;enabled&#160;&#160;again&#160;&#160;after&#160;&#160;the&#160;<br/>function&#160;&#160;returns.&#160;&#160;The&#160;&#160;following&#160;&#160;example&#160;&#160;demonstrates&#160;&#160;the&#160;&#160;integrity&#160;&#160;on&#160;&#160;ODT&#160;&#160;level&#160;&#160;by&#160;<br/>showing&#160;the&#160;XCP&#160;ODT&#160;frames&#160;as&#160;sent&#160;on&#160;the&#160;bus.&#160;Two&#160;Events&#160;(x,&#160;y)&#160;are&#160;configured&#160;with&#160;<br/>DAQ&#160;list&#160;DAQ1&#160;assigned&#160;to&#160;Event(x)&#160;and&#160;DAQ&#160;list&#160;DAQ2&#160;assigned&#160;to&#160;Event(y).&#160;A&#160;call&#160;of&#160;the&#160;<br/>XcpEvent&#160;&#160;function&#160;&#160;with&#160;&#160;the&#160;&#160;respective&#160;&#160;event&#160;&#160;channel&#160;&#160;number&#160;&#160;will&#160;&#160;then&#160;&#160;trigger&#160;&#160;the&#160;<br/>transmission&#160;of&#160;the&#160;associated&#160;DAQ&#160;list.&#160;<br/>Example1:&#160;a&#160;call&#160;of&#160;XcpEvent(x)&#160;is&#160;interrupted&#160;by&#160;a&#160;call&#160;of&#160;Xcp_Event(y).&#160;This&#160;is&#160;allowed&#160;as&#160;<br/>long&#160;&#160;as&#160;&#160;the&#160;&#160;interrupt&#160;&#160;locks&#160;&#160;are&#160;&#160;provided&#160;&#160;by&#160;&#160;the&#160;&#160;Schedule&#160;&#160;Manager&#160;&#160;(default&#160;&#160;with&#160;<br/>MICROSAR stack).&#160;<br/>Example2:&#160;&#160;a&#160;&#160;call&#160;&#160;of&#160;&#160;Xcp_Event(x)&#160;&#160;is&#160;&#160;interrupted&#160;&#160;by&#160;&#160;a&#160;&#160;call&#160;&#160;of&#160;&#160;Xcp_Event(x).&#160;As&#160;&#160;a&#160;&#160;result&#160;&#160;a&#160;<br/>DAQ&#160;&#160;list&#160;&#160;is&#160;&#160;interrupted&#160;&#160;by&#160;&#160;itself.&#160;&#160;This&#160;&#160;is&#160;&#160;not&#160;&#160;allowed&#160;&#160;and&#160;&#160;must&#160;&#160;be&#160;&#160;prevented&#160;&#160;by&#160;&#160;data&#160;<br/>consistency&#160;on&#160;DAQ&#160;level. For this use&#160;a&#160;interrupt&#160;lock&#160;when&#160;calling&#160;Xcp_Event()&#160;<br/>
&#160;<br/>
DAQ1&#160;<br/>
DAQ2&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ODT0&#160;<br/>
ODT3&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ODT1&#160;<br/>
ODT4&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
ODT2&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;Example1&#160;<br/>
&#160;ODT0&#160;&#160;&#160;ODT1&#160;&#160;&#160;ODT3&#160;&#160;&#160;ODT4&#160;&#160;&#160;ODT2&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;Example2&#160;<br/>
&#160;ODT0&#160;&#160;&#160;ODT1&#160;&#160;&#160;ODT0&#160;&#160;&#160;ODT1&#160;&#160;&#160;ODT2&#160;&#160;&#160;ODT2&#160;<br/>
Figure&#160;3-1&#160;Data&#160;consistency&#160;<br/>
&#160;<br/>
<b>3.15&#160;&#160;The&#160;Online&#160;Data Calibration Model&#160;</b><br/>
<b>3.15.1&#160;&#160;Page&#160;Switching&#160;<br/></b>The&#160;&#160;MCS&#160;&#160;can&#160;&#160;switch&#160;&#160;between&#160;&#160;a&#160;&#160;flash&#160;&#160;page&#160;&#160;and&#160;&#160;a&#160;&#160;RAM&#160;&#160;page.&#160;&#160;The&#160;&#160;XCP&#160;&#160;command&#160;<br/>SET_CAL_PAGE&#160;is&#160;used&#160;to&#160;activate&#160;the&#160;required&#160;page.&#160;The&#160;page&#160;switching&#160;is enabled&#160;with&#160;<br/>the&#160;XCP_ENABLE_CALIBRATION_PAGE&#160;definition.&#160;<br/>
The&#160;following&#160;application&#160;callback&#160;functions have&#160;to&#160;be&#160;implemented:&#160;<br/>
uint8&#160;<b>ApplXcpGetCalPage</b>&#160;(&#160;uint8 segment, uint8 mode&#160;)&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#64">(6.5.25)</a>&#160;<br/>
uint8&#160;<b>ApplXcpSetCalPage</b>&#160;(&#160;uint8 segment, uint8 page, uint8 mode&#160;<br/>
)&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#65">(6.5.26)</a>&#160;<br/>
&#160;<br/>
Annotation&#160;for the&#160;usage&#160;of&#160;CANape&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
22&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-23_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Open&#160;&#160;the&#160;&#160;dialog&#160;&#160;XCP&#160;&#160;Device&#160;&#160;Setup&#160;&#160;with&#160;&#160;the&#160;&#160;menu&#160;&#160;command&#160;Tools|Driver&#160;&#160;Configuration.&#160;<br/>Go&#160;to&#160;the&#160;tab&#160;“FLASH”.&#160;Activate&#160;page&#160;switching.&#160;Enter&#160;a&#160;flash&#160;selector&#160;value&#160;e.g.&#160;1&#160;and&#160;a&#160;<br/>Ram&#160;selector e.g.&#160;0.&#160;<br/>
<b>3.15.2&#160;&#160;Page&#160;Switching Plug&#160;&amp; Play&#160;Mechanism&#160;<br/></b>The&#160;MCS&#160;can&#160;be&#160;automatically&#160;configured&#160;if&#160;the&#160;page&#160;switching&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;<br/>used.&#160;This&#160;mechanism&#160;comprises&#160;<br/>
<b>&gt;&#160;&#160;</b>general information&#160;about&#160;the&#160;paging&#160;processor&#160;<br/>
Also&#160;refer&#160;to&#160;chapter<a href="TechnicalReference_Asr_Xcps.html#98">&#160;7.2.8&#160;(Configuration&#160;of&#160;the&#160;Page&#160;Switching&#160;Plug&#160;&amp;&#160;Play&#160;Mechanism)&#160;<br/></a>and&#160;to&#160;the&#160;XCP&#160;Specification&#160;[II].&#160;<br/>The&#160;&#160;page&#160;&#160;switching&#160;&#160;plug&#160;&#160;&amp;&#160;&#160;play&#160;&#160;mechanism&#160;&#160;is&#160;&#160;enabled&#160;&#160;with&#160;&#160;the&#160;&#160;switch&#160;<br/>XCP_ENABLE_PAGE_INFO.&#160;<br/>
<b>3.15.3&#160;&#160;Calibration Data&#160;Page&#160;Copying&#160;<br/></b>Calibration&#160;data&#160;page&#160;copying&#160;is&#160;performed&#160;by&#160;the&#160;XCP&#160;command&#160;COPY_CAL_PAGE.&#160;To&#160;<br/>enable&#160;this&#160;feature&#160;the&#160;compiler switch&#160;XCP_ENABLE_PAGE_COPY&#160;has to&#160;be&#160;set.&#160;<br/>
For&#160;&#160;calibration&#160;&#160;data&#160;&#160;page&#160;&#160;copying&#160;&#160;the&#160;&#160;following&#160;&#160;application&#160;&#160;callback&#160;&#160;function&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;<br/>provided&#160;by&#160;the&#160;application:&#160;<br/>
uint8&#160;<b>ApplXcpCopyCalPage</b>( uint8&#160;srcSeg, &#160;uint8&#160;srcPage,&#160;<br/>
&#160; &#160;&#160;uint8 destSeg, uint8 destPage )&#160;<a href="TechnicalReference_Asr_Xcps.html#66">(6.5.27)</a>&#160;<br/>
<b>3.15.4&#160;&#160;Freeze&#160;Mode&#160;Handling&#160;<br/></b>Freeze&#160;mode&#160;handling&#160;is&#160;performed&#160;by&#160;the&#160;XCP&#160;commands&#160;SET_SEGMENT_MODE&#160;and&#160;<br/>GET_SEGMENT_MODE.&#160;<br/>
To&#160;<br/>
enable&#160;<br/>
this&#160;<br/>
feature&#160;<br/>
the&#160;<br/>
compiler&#160;<br/>
switch&#160;<br/>
XCP_ENABLE_PAGE_FREEZE&#160;has to&#160;be&#160;set.&#160;<br/>
For&#160;freeze&#160;mode&#160;handling&#160;the&#160;following&#160;application&#160;callback&#160;functions&#160;have&#160;to&#160;be&#160;provided&#160;<br/>by&#160;the&#160;application:&#160;<br/>
void&#160;<b>ApplXcpSetFreezeMode</b>( uint8 segment, uint8 mode )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#67">(6.5.28)</a>&#160;<br/>
uint8&#160;<b>ApplXcpGetFreezeMode</b>( uint8 segment )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#67">(6.5.29)</a>&#160;<br/>
<b>3.16&#160;&#160;Flash Programming (XCP&#160;Professional&#160;only)&#160;</b><br/>
There are&#160;two&#160;methods available&#160;for the&#160;programming&#160;of&#160;flash&#160;memory.&#160;<br/>
<b>&gt;&#160;&#160;</b>Flash&#160;programming&#160;by&#160;the&#160;ECU’s application&#160;<br/>
<b>&gt;&#160;&#160;</b>Flash&#160;programming&#160;with&#160;a&#160;flash&#160;kernel&#160;<br/>
Depending&#160;on&#160;the&#160;hardware&#160;it&#160;might&#160;not&#160;be&#160;possible&#160;to&#160;reprogram&#160;an&#160;internal&#160;flash&#160;sector,&#160;<br/>while&#160;a&#160;program&#160;is&#160;running&#160;from&#160;another&#160;sector.&#160;In&#160;this&#160;case&#160;the&#160;usage&#160;of&#160;a&#160;special&#160;flash&#160;<br/>kernel is necessary.&#160;<br/>
<b>3.16.1&#160;&#160;Flash Programming&#160;by&#160;the&#160;ECU’s&#160;Application&#160;<br/></b>If&#160;&#160;the&#160;&#160;internal&#160;&#160;flash&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;reprogrammed&#160;&#160;and&#160;&#160;the&#160;&#160;microcontroller&#160;&#160;allows&#160;&#160;to&#160;<br/>simultaneously&#160;&#160;reprogram&#160;&#160;and&#160;&#160;execute&#160;&#160;code&#160;&#160;from&#160;&#160;the&#160;&#160;flash&#160;&#160;the&#160;&#160;programming&#160;&#160;can&#160;&#160;be&#160;<br/>performed&#160;with&#160;the&#160;ECU’s&#160;application&#160;that&#160;contains&#160;the&#160;XCP.&#160;This&#160;method&#160;is&#160;also&#160;used&#160;for&#160;<br/>the&#160;programming&#160;of&#160;external&#160;flash.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
23&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-24_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
The&#160;&#160;flash&#160;&#160;programming&#160;&#160;is&#160;&#160;done&#160;&#160;with&#160;&#160;the&#160;&#160;following&#160;&#160;XCP&#160;&#160;commands&#160;&#160;PROGRAM_START,&#160;<br/>PROGRAM_RESET,&#160;<br/>
PROGRAM_CLEAR,&#160;<br/>
PROGRAM,&#160;<br/>
PROGRAM_NEXT,&#160;<br/>
PROGRAM_MAX,&#160;PROGRAM_RESET,&#160;PROGRAM_FORMAT1,&#160;PROGRAM_VERIFY1.&#160;<br/>The&#160;&#160;flash&#160;&#160;prepare,&#160;&#160;flash&#160;&#160;program&#160;&#160;and&#160;&#160;the&#160;&#160;clear&#160;&#160;routines&#160;&#160;are&#160;&#160;platform&#160;&#160;dependent&#160;&#160;and&#160;<br/>therefore have&#160;to&#160;be&#160;implemented&#160;by&#160;the&#160;application.&#160;<br/>
uint8&#160;<b>ApplXcpProgramStart</b>( void )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#60">(6.5.17)</a>&#160;<br/>
uint8&#160;<b>ApplXcpFlashClear</b>( MTABYTEPTR a, uint32 size )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#60">(6.5.18)</a>&#160;<br/>
uint8&#160;<b>ApplXcpFlashProgram</b>(&#160;ROMBYTEPTR data,&#160;&#160;<br/>
&#160; &#160;&#160;MTABYTEPTR a, uint8 size )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#61">(6.5.19)</a>&#160;<br/>
The&#160;flash&#160;programming&#160;is enabled&#160;with&#160;the&#160;switch&#160;XCP_ENABLE_PROGRAM.&#160;<br/>
Annotation&#160;for the&#160;usage&#160;of&#160;CANape&#160;<br/>Open&#160;&#160;the&#160;&#160;dialog&#160;&#160;XCP&#160;&#160;Device&#160;&#160;Setup&#160;&#160;with&#160;&#160;the&#160;&#160;menu&#160;&#160;command&#160;Tools|Driver&#160;&#160;Configuration.&#160;<br/>Go&#160;to&#160;the&#160;tab&#160;“FLASH”&#160;and&#160;select&#160;the&#160;entry&#160;“Direct” in&#160;the&#160;flash&#160;kernel drop&#160;down&#160;list.&#160;<br/>
<b>3.16.1.1&#160;&#160;Flash Programming&#160;Plug &amp; Play&#160;Mechanism&#160;<br/></b>The&#160;&#160;MCS&#160;&#160;(like&#160;&#160;e.g.&#160;&#160;CANape)&#160;&#160;can&#160;&#160;get&#160;&#160;information&#160;&#160;about&#160;&#160;the&#160;&#160;Flash&#160;&#160;and&#160;&#160;the&#160;&#160;Flash&#160;<br/>programming&#160;process&#160;from&#160;the&#160;ECU.&#160;The&#160;following&#160;information&#160;is provided&#160;by&#160;the&#160;ECU:&#160;<br/>
<b>&gt;&#160;&#160;</b>number&#160;of&#160;sectors, start address&#160;or length&#160;of&#160;each&#160;sector&#160;<br/>
<b>&gt;&#160;&#160;</b>the&#160;program&#160;sequence&#160;number,&#160;clear sequence&#160;number and&#160;programming&#160;method&#160;<br/>
<b>&gt;&#160;&#160;</b>additional information&#160;about&#160;compression,&#160;encryption&#160;<br/>
Also&#160;&#160;refer&#160;&#160;to&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#97">7.2.7&#160;&#160;(Configuration&#160;&#160;of&#160;&#160;the&#160;&#160;Flash&#160;&#160;Programming&#160;&#160;Plug&#160;&#160;&amp;&#160;&#160;Play&#160;<br/>Mechanism) an</a>d&#160;to&#160;the&#160;XCP&#160;Specification&#160;[II].&#160;<br/>The&#160;&#160;flash&#160;&#160;programming&#160;&#160;plug&#160;&#160;&amp;&#160;&#160;play&#160;&#160;mechanism&#160;&#160;is&#160;&#160;enabled&#160;&#160;with&#160;&#160;the&#160;&#160;switch&#160;<br/>XCP_ENABLE_PROGRAM_INFO.&#160;<br/>
<b>3.16.2&#160;&#160;Flash Programming&#160;with&#160;a&#160;Flash Kernel&#160;<br/></b>A&#160;&#160;flash&#160;&#160;kernel&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;used&#160;&#160;for&#160;&#160;the&#160;&#160;flash&#160;&#160;programming&#160;&#160;if&#160;&#160;it&#160;&#160;is&#160;&#160;not&#160;&#160;possible&#160;&#160;to&#160;<br/>simultaneously&#160;&#160;reprogram&#160;&#160;and&#160;&#160;execute&#160;&#160;code&#160;&#160;from&#160;&#160;the&#160;&#160;flash.&#160;&#160;Even&#160;&#160;though&#160;&#160;the&#160;<br/>reprogrammed&#160;sector&#160;and&#160;the&#160;sector the&#160;code&#160;is executed&#160;from&#160;are&#160;different&#160;sectors.&#160;<br/>The&#160;application&#160;callback function&#160;<br/>
uint8&#160;<b>ApplXcpDisableNormalOperation</b>( MTABYTEPTR a, uint16 size&#160;<br/>
)&#160;&#160;<br/>
&#160;<a href="TechnicalReference_Asr_Xcps.html#58">(6.5.14)</a>&#160;<br/>
is&#160;&#160;called&#160;&#160;prior&#160;&#160;to&#160;&#160;the&#160;&#160;flash&#160;&#160;kernel&#160;&#160;download&#160;&#160;in&#160;&#160;the&#160;&#160;RAM.&#160;&#160;Within&#160;&#160;this&#160;&#160;function&#160;&#160;the&#160;&#160;normal&#160;<br/>operation&#160;of&#160;the&#160;ECU&#160;has&#160;to&#160;be&#160;stopped&#160;and&#160;the&#160;flash&#160;kernel&#160;download&#160;can&#160;be&#160;prepared.&#160;<br/>Due&#160;&#160;to&#160;&#160;the&#160;&#160;flash&#160;&#160;kernel&#160;&#160;is&#160;&#160;downloaded&#160;&#160;in&#160;&#160;the&#160;&#160;RAM&#160;&#160;typically&#160;&#160;data&#160;&#160;gets&#160;&#160;lost&#160;&#160;and&#160;&#160;no&#160;&#160;more&#160;<br/>normal&#160;operation&#160;of&#160;the&#160;ECU&#160;is possible.&#160;<br/>The&#160;&#160;flash&#160;&#160;programming&#160;&#160;with&#160;&#160;a&#160;&#160;flash&#160;&#160;kernel&#160;&#160;is&#160;&#160;enabled&#160;&#160;with&#160;&#160;the&#160;&#160;switch&#160;<br/>XCP_ENABLE_BOOTLOADER_DOWNLOAD.&#160;<br/>
Annotation&#160;for the&#160;usage&#160;of&#160;CANape&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
1&#160;Command not&#160;supported&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
24&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-25_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
The&#160;flash&#160;kernel&#160;is&#160;loaded&#160;by&#160;CANape&#160;into&#160;the&#160;microcontroller’s&#160;RAM&#160;via&#160;XCP&#160;whenever&#160;<br/>the&#160;flash&#160;memory&#160;has&#160;to&#160;be&#160;reprogrammed.&#160;The&#160;flash&#160;kernel&#160;contains&#160;the&#160;necessary&#160;flash&#160;<br/>routines,&#160;&#160;its&#160;&#160;own&#160;&#160;CAN-Driver&#160;&#160;and&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;implementation&#160;&#160;to&#160;&#160;communicate&#160;&#160;via&#160;&#160;the&#160;<br/>CAN interface&#160;with&#160;CANape.&#160;<br/>Every&#160;&#160;flash&#160;&#160;kernel&#160;&#160;must&#160;&#160;be&#160;&#160;customized&#160;&#160;to&#160;&#160;the&#160;&#160;microcontroller&#160;&#160;and&#160;&#160;the&#160;&#160;flash&#160;&#160;type&#160;&#160;being&#160;<br/>used.&#160;CANape&#160;already&#160;includes&#160;some&#160;flash&#160;kernels&#160;for&#160;several&#160;microcontrollers.&#160;There&#160;is&#160;<br/>also&#160;&#160;an&#160;&#160;application&#160;&#160;note&#160;&#160;available&#160;&#160;by&#160;&#160;Vector&#160;&#160;Informatik&#160;&#160;GmbH&#160;&#160;that&#160;&#160;describes&#160;&#160;the&#160;<br/>development&#160;of&#160;a&#160;proprietary&#160;flash&#160;kernel.&#160;<br/>Open&#160;&#160;the&#160;&#160;dialog&#160;&#160;XCP&#160;&#160;Device&#160;&#160;Setup&#160;&#160;with&#160;&#160;the&#160;&#160;menu&#160;&#160;command&#160;Tools|Driver&#160;&#160;Configuration.&#160;<br/>Go&#160;to&#160;the&#160;tab&#160;“FLASH”,&#160;and&#160;select&#160;in&#160;the&#160;‘flash&#160;kernel’&#160;drop&#160;down&#160;list,&#160;the&#160;corresponding&#160;<i>fkl</i>&#160;<br/>file&#160;for the&#160;microcontroller being&#160;used.&#160;<br/>
<b>3.16.3&#160;&#160;Flash Programming&#160;Write&#160;Protection&#160;<br/></b>If&#160;&#160;XCP_ENABLE_PROGRAMMING_WRITE_PROTECTION&#160;&#160;is&#160;&#160;defined&#160;&#160;write&#160;&#160;access&#160;&#160;of&#160;&#160;specific&#160;<br/>FLASH areas can&#160;be&#160;checked&#160;with&#160;the&#160;function&#160;<br/>
uint8&#160;<b>ApplXcpCheckProgramAccess</b>( MTABYTEPTR addr, uint32&#160;size )<a href="TechnicalReference_Asr_Xcps.html#56">(6.5.10)</a>&#160;<br/>
It&#160;should&#160;only&#160;be&#160;used,&#160;if&#160;write&#160;protection&#160;of&#160;flash&#160;areas is required.&#160;<br/>
<b>3.17&#160;&#160;EEPROM&#160;Access&#160;(XCP&#160;Professional&#160;only)&#160;</b><br/>
For&#160;&#160;uploading&#160;&#160;data&#160;&#160;from&#160;&#160;the&#160;&#160;ECU&#160;&#160;to&#160;&#160;a&#160;&#160;MCS&#160;&#160;the&#160;&#160;XCP&#160;&#160;commands&#160;&#160;SHORT_UPLOAD&#160;&#160;and&#160;<br/>UPLOAD&#160;&#160;are&#160;&#160;used.&#160;The&#160;&#160;switch&#160;&#160;XCP_ENABLE_READ_EEPROM&#160;&#160;allows&#160;&#160;EEPROM&#160;&#160;access&#160;&#160;for&#160;<br/>these&#160;commands.&#160;<br/>Before&#160;reading&#160;from&#160;an&#160;address&#160;it&#160;is&#160;checked&#160;within&#160;the&#160;following&#160;callback function&#160;whether&#160;<br/>EEPROM&#160;or RAM&#160;is accessed:&#160;<br/>
uint8&#160;<b>ApplXcpCheckReadEEPROM&#160;</b><br/>
( MTABYTEPTR addr, uint8 size, BYTEPTR data )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#53">(6.5.5)</a>&#160;<br/>
The&#160;EEPROM&#160;access&#160;is directly&#160;performed&#160;within&#160;this&#160;function.&#160;<br/>For&#160;&#160;downloading&#160;&#160;data&#160;&#160;from&#160;&#160;the&#160;&#160;MCS&#160;&#160;to&#160;&#160;the&#160;&#160;ECU&#160;&#160;the&#160;&#160;XCP&#160;&#160;commands&#160;<br/>SHORT_DOWNLOAD,&#160;DOWNLOAD, DOWNLOAD_NEXT&#160;and&#160;DOWNLOAD_MAX&#160;can&#160;be&#160;<br/>used.&#160;&#160;The&#160;&#160;switch&#160;&#160;XCP_ENABLE_WRITE_EEPROM&#160;&#160;allows&#160;&#160;the&#160;&#160;EEPROM&#160;&#160;access&#160;&#160;for&#160;&#160;these&#160;<br/>commands.&#160;<br/>Also&#160;&#160;before&#160;&#160;writing&#160;&#160;to&#160;&#160;an&#160;&#160;address&#160;&#160;within&#160;&#160;the&#160;&#160;following&#160;&#160;callback&#160;&#160;function&#160;&#160;it&#160;&#160;is&#160;&#160;checked&#160;<br/>whether EEPROM&#160;or RAM&#160;is accessed&#160;<br/>
uint8&#160;<b>ApplXcpCheckWriteEEPROM</b>&#160;<br/>
( MTABYTEPTR addr, uint8 size, ROMBYTEPTR data )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#53">(6.5.6)</a>&#160;<br/>
<b>3.18&#160;&#160;Parameter&#160;Check&#160;</b><br/>
As&#160;&#160;long&#160;&#160;as&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;is&#160;&#160;not&#160;&#160;thoroughly&#160;&#160;tested&#160;&#160;together&#160;&#160;with&#160;&#160;the&#160;&#160;XCP&#160;<br/>Transport&#160;Layer&#160;and&#160;the&#160;application,&#160;the&#160;parameter&#160;check&#160;should&#160;be&#160;enabled.&#160;This&#160;is&#160;done&#160;<br/>by&#160;setting&#160;the&#160;compiler switch&#160;XCP_ENABLE_PARAMETER_CHECK.&#160;<br/>
The&#160;parameter check&#160;may&#160;be&#160;removed&#160;in&#160;order to&#160;save&#160;code&#160;space.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
25&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-26_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.19&#160;&#160;Performance&#160;Optimizations&#160;</b><br/>
The&#160;XCP&#160;Protocol&#160;Layer&#160;is&#160;a&#160;platform&#160;comprehensive&#160;higher&#160;software&#160;layer&#160;and&#160;therefore&#160;<br/>platform&#160;&#160;specific&#160;&#160;optimizations&#160;&#160;are&#160;&#160;not&#160;&#160;implemented.&#160;&#160;However&#160;&#160;it&#160;&#160;is&#160;&#160;possible&#160;&#160;to&#160;&#160;apply&#160;<br/>platform&#160;specific optimizations.&#160;<br/>The&#160;following&#160;memory&#160;access&#160;functions can&#160;be&#160;overwritten&#160;by&#160;either&#160;macros&#160;or&#160;functions:&#160;<br/>
void&#160;<b>XcpMemCpy</b>( DAQBYTEPTR dest,&#160;&#160;<br/>
ROMDAQBYTEPTR src, uint16 n )&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#71">(6.6.1)</a>&#160;<br/>
void&#160;<b>XcpMemSet</b>( BYTEPTR p, uint16 n, uint8 b )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#72">(6.6.2)</a>&#160;<br/>
static void&#160;<b>XcpMemClr</b>( BYTEPTR p, uint16 n )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#72">(6.6.3)</a>&#160;<br/>
It&#160;&#160;is&#160;&#160;recommended&#160;&#160;to&#160;&#160;use&#160;&#160;DMA&#160;&#160;access&#160;&#160;as&#160;&#160;far&#160;&#160;as&#160;&#160;possible&#160;&#160;for&#160;&#160;faster&#160;&#160;execution&#160;&#160;of&#160;&#160;these&#160;<br/>services.&#160;<br/>The&#160;&#160;transmission&#160;&#160;of&#160;&#160;data&#160;&#160;transfer&#160;&#160;objects&#160;&#160;(DTO)&#160;&#160;could&#160;&#160;also&#160;&#160;be&#160;&#160;optimized&#160;&#160;e.g.&#160;&#160;by&#160;&#160;using&#160;<br/>DMA.&#160;Therefore&#160;the&#160;following&#160;function&#160;has&#160;to&#160;be&#160;overwritten&#160;<br/>
void&#160;<b>XcpSendDto</b>( const xcpDto_t *dto )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#73">(6.6.4)</a>&#160;<br/>
The&#160;above&#160;listed&#160;functions&#160;can&#160;be&#160;overwritten&#160;by&#160;defining&#160;a&#160;macro&#160;with&#160;the&#160;functions&#160;name&#160;<br/>that&#160;is included&#160;in&#160;the&#160;XCP&#160;Protocol Layer component.&#160;<br/>
<b>3.20&#160;&#160;Interrupt&#160;Locks&#160;/&#160;Exclusive&#160;Areas&#160;</b><br/>
The&#160;&#160;functions&#160;&#160;XcpEvent,&#160;&#160;XcpSendCallBack,&#160;&#160;XcpBackground&#160;&#160;and&#160;&#160;XcpCommand&#160;&#160;are&#160;<br/>not&#160;&#160;reentrant.&#160;&#160;If&#160;&#160;one&#160;&#160;of&#160;&#160;these&#160;&#160;functions&#160;&#160;may&#160;&#160;interrupt&#160;&#160;one&#160;&#160;of&#160;&#160;the&#160;&#160;others,&#160;&#160;the&#160;&#160;functions&#160;&#160;or&#160;<br/>macros&#160;&#160;ApplXcpInterruptEnable&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#48">(6.4.3)&#160;&#160;</a>and&#160;&#160;ApplXcpInterruptDisable&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#49">(6.4.4)&#160;<br/></a>have&#160;to&#160;be&#160;defined&#160;to&#160;protect&#160;critical&#160;sections&#160;in&#160;the&#160;code&#160;from&#160;being&#160;interrupted.&#160;The&#160;time&#160;<br/>periods&#160;&#160;are&#160;&#160;as&#160;&#160;short&#160;&#160;as&#160;&#160;possible,&#160;&#160;but&#160;&#160;note&#160;&#160;that&#160;&#160;&lt;Bus&gt;XcpSend&#160;&#160;is&#160;&#160;called&#160;&#160;with&#160;&#160;disabled&#160;<br/>interrupts!&#160;<br/>If&#160;used&#160;with&#160;a&#160;Vector&#160;Transport&#160;Layer&#160;the&#160;Xcp&#160;Protocol&#160;Layer&#160;makes&#160;use&#160;of&#160;the&#160;&#160;exclusive&#160;<br/>areas&#160;&#160;of&#160;&#160;the&#160;Transport&#160;&#160;Layer.&#160;A&#160;&#160;usage&#160;&#160;priority&#160;&#160;must&#160;&#160;be&#160;&#160;kept&#160;&#160;in&#160;&#160;mind:&#160;&#160;CanXcp&#160;&#160;&gt;&#160;&#160;FrXcp&#160;&#160;&gt;&#160;<br/>TcpIpXcp&#160;&gt;&#160;LinXcp.&#160;This&#160;means&#160;if&#160;two&#160;Transport&#160;Layers&#160;are&#160;used&#160;(e.g.&#160;CanXcp&#160;and&#160;FrXcp)&#160;<br/>the&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;uses&#160;&#160;the&#160;&#160;exclusive&#160;&#160;area&#160;&#160;of&#160;&#160;the&#160;&#160;first&#160;&#160;Transport&#160;&#160;Layer&#160;&#160;(CanXcp&#160;&#160;in&#160;&#160;the&#160;<br/>given&#160;example).&#160;<br/>
<b>3.21&#160;&#160;Accessing internal&#160;data&#160;</b><br/>
The&#160;function&#160;&#160;<br/>
void&#160;<b>XcpGetXcpDataPointer</b>&#160;(&#160;P2VAR(tXcpData,&#160;AUTOMATIC,&#160;<br/>
XCP_APPL_DATA) *pXcpData&#160;&#160;)&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#42">(6.2.11)</a>&#160;<br/>
provides&#160;&#160;access&#160;&#160;to&#160;&#160;the&#160;&#160;internal&#160;&#160;data&#160;&#160;structure&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;module.&#160;&#160;By&#160;&#160;means&#160;&#160;of&#160;&#160;this&#160;<br/>function&#160;the&#160;internal&#160;data&#160;can&#160;be&#160;preset&#160;to&#160;a&#160;certain&#160;value.&#160;This&#160;can&#160;be&#160;used&#160;to&#160;process&#160;a&#160;<br/>measurement&#160;&#160;further&#160;&#160;that&#160;&#160;has&#160;&#160;been&#160;&#160;started&#160;&#160;in&#160;&#160;application&#160;&#160;mode&#160;&#160;but&#160;&#160;is&#160;&#160;finished&#160;&#160;in&#160;&#160;boot&#160;<br/>mode.&#160;&#160;<br/>As the&#160;whole&#160;data&#160;can&#160;be&#160;accessed,&#160;it&#160;must&#160;be&#160;handled&#160;with&#160;care.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
26&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-27_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-27_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>3.22&#160;&#160;En-&#160;/&#160;Disabling the&#160;XCP&#160;module&#160;</b><br/>
The&#160;function&#160;&#160;<br/>
void&#160;<b>XcpControl</b>&#160;(&#160;uint8 command )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#42">(6.2.12)</a>&#160;<br/>
can&#160;be&#160;used&#160;to&#160;en-&#160;or&#160;disable&#160;the&#160;XCP&#160;module&#160;during&#160;run&#160;time.&#160;Thus&#160;the&#160;XCP&#160;functionality&#160;<br/>can&#160;be&#160;controlled&#160;by&#160;the&#160;application.&#160;<br/>Furthermore&#160;&#160;two&#160;&#160;macros&#160;&#160;are&#160;&#160;available:&#160;&#160;XCP_ACTIVATE&#160;&#160;and&#160;&#160;XCP_DEACTIVATE.&#160;&#160;They&#160;<br/>can&#160;be&#160;used&#160;to&#160;control&#160;the&#160;protocol&#160;and&#160;transport&#160;layer&#160;together,&#160;i.e.&#160;enabling&#160;&#160;or&#160;disabling&#160;<br/>them&#160;as&#160;a&#160;whole.&#160;<br/>
<b>3.23&#160;&#160;XCP&#160;measurement&#160;during the&#160;follow&#160;up time&#160;</b><br/>
In&#160;use&#160;cases&#160;where&#160;there&#160;is&#160;no&#160;further&#160;communication&#160;request&#160;except&#160;XCP&#160;measurement&#160;<br/>the&#160;session&#160;state&#160;of&#160;the&#160;XCP&#160;can&#160;be&#160;determined&#160;to&#160;prevent&#160;an&#160;early&#160;shutdown&#160;of&#160;the&#160;ECU.&#160;<br/>For this purpose&#160;the&#160;following&#160;API&#160;exist:&#160;<br/>
SessionStatusType&#160;<b>XcpGetSessionStatus</b>&#160;( void )&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#45">(6.3.3)</a>&#160;<br/>
&#160;<br/>
An&#160;example&#160;implementation&#160;that&#160;is called&#160;cyclically&#160;could&#160;look&#160;like&#160;the&#160;following&#160;example:&#160;<br/>
&#160;<br/>
<b>Example&#160;<br/></b>{&#160;<br/>
&#160;<br/>
&#160;&#160;SessionStatusType sessionState;&#160;<br/>&#160;<br/>&#160;&#160;sessionState = XcpGetSessionStatus();&#160;<br/>&#160;&#160;if( 0&#160;!= (sessionState &amp; SS_CONNECTED) )&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;/* Is the xcp actively used?&#160;*/&#160;<br/>&#160; &#160;&#160;if( 0 != (sessionState &amp; (SS_DAQ | SS_POLLING)) )&#160;<br/>&#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160;&#160;/* Yes, reaload timer */&#160;<br/>&#160; &#160; &#160;&#160;swTimer = XCP_TIMEOUT_TIMER_RELOAD;&#160;<br/>&#160; &#160;&#160;}&#160;<br/>&#160;&#160;}&#160;<br/>&#160;<br/>&#160;&#160;if( swTimer &gt; 0 )&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;/* No timeout so far */&#160;<br/>&#160; &#160;&#160;swTimer--;&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;else&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;/* Timer timeout happened, release&#160;xcp communication request */&#160;<br/>&#160;&#160;}&#160;<br/>}&#160;<br/>
&#160;<br/>
&#160;<br/>
Please&#160;&#160;note&#160;&#160;that&#160;&#160;polling&#160;&#160;requests&#160;&#160;may&#160;&#160;happen&#160;erratically.&#160;Therefore&#160;&#160;it&#160;&#160;is&#160;&#160;important&#160;&#160;not&#160;&#160;to&#160;<br/>choose&#160;the&#160;timeout&#160;value&#160;XCP_TIMEOUT_TIMER_RELOAD&#160;too&#160;small.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
27&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_4.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_5.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_6.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_7.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_8.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_9.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_10.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_11.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-28_12.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>4&#160;&#160;Integration&#160;into&#160;the&#160;Application&#160;</b><br/>
This&#160;&#160;chapter&#160;&#160;describes&#160;&#160;the&#160;&#160;steps&#160;&#160;for&#160;&#160;the&#160;&#160;integration&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;into&#160;&#160;an&#160;<br/>application&#160;environment&#160;of&#160;an&#160;ECU.&#160;<br/>
<b>4.1&#160;</b><br/>
<b>Files&#160;of XCP&#160;Professional&#160;</b><br/>
The&#160;XCP&#160;Protocol Layer consists&#160;of&#160;the&#160;following&#160;files.&#160;&#160;<br/>
<b>Files&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;<br/></b>XcpProf.c&#160;<br/>
XCP&#160;Professional&#160;source&#160;code.&#160;<br/>This&#160;file&#160;<b>must&#160;not&#160;</b>be&#160;changed&#160;by&#160;the&#160;user!&#160;<br/>
&#160;<br/>
XcpProf.h&#160;<br/>
API&#160;of&#160;XCP&#160;Professional.&#160;<br/>This&#160;file&#160;<b>must&#160;not&#160;</b>be&#160;changed&#160;by&#160;the&#160;user!&#160;<br/>
&#160;<br/>
_xcp_appl.c&#160;&#160;Template&#160;that&#160;contains&#160;the application callback&#160;functions of&#160;the&#160;XCP&#160;<br/>
Protocol&#160;Layer.&#160;It&#160;is&#160;just&#160;an&#160;example and has&#160;to&#160;be customized.&#160;<br/>
&#160;<br/>
v_def.h&#160;<br/>
General&#160;Vector&#160;definitions&#160;of&#160;memory&#160;qualifiers&#160;and&#160;types.&#160;<br/>This&#160;file&#160;<b>must&#160;not&#160;</b>be&#160;changed&#160;by&#160;the&#160;application!&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Additionally&#160;the&#160;following&#160;files&#160;are&#160;generated&#160;by&#160;the&#160;generation&#160;tool. If&#160;no&#160;generation&#160;tool&#160;or&#160;<br/>if&#160;CANgen&#160;is&#160;used&#160;the&#160;XPC&#160;Protocol&#160;Layer&#160;has&#160;to&#160;be&#160;customized&#160;manually.&#160;In&#160;this&#160;case&#160;the&#160;<br/>following&#160;files will be&#160;available&#160;as template.&#160;<br/>
<b>Files&#160;generated&#160;by&#160;GENy&#160;<br/></b>xcp_cfg.h&#160;<br/>
XCP&#160;Protocol&#160;Layer&#160;configuration&#160;file.&#160;<br/>
&#160;<br/>
xcp_par.c&#160;<br/>
Parameter&#160;definition&#160;for&#160;the&#160;XCP&#160;Protocol&#160;Layer.&#160;<br/>
&#160;<br/>
xcp_par.h&#160;<br/>
External&#160;declarations&#160;for&#160;the&#160;parameters.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Note&#160;that&#160;all&#160;files of&#160;XCP&#160;Professional&#160;<b>must not</b>&#160;be&#160;changed&#160;manually!&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Files&#160;of XCP&#160;Basic&#160;</b><br/>
Xcp&#160;&#160;Basic&#160;&#160;is&#160;&#160;the&#160;&#160;free&#160;&#160;Xcp&#160;&#160;implementation&#160;&#160;which&#160;&#160;can&#160;&#160;be&#160;&#160;downloaded&#160;&#160;from&#160;&#160;the&#160;&#160;Vector&#160;<br/>website.&#160;The&#160;XCP&#160;Basic&#160;Protocol Layer consists&#160;of&#160;the&#160;following&#160;files:&#160;<br/>
<b>Files&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;<br/></b>XcpBasic.c&#160;<br/>
XCP&#160;Basic&#160;source&#160;code.&#160;<br/>This&#160;file&#160;<b>must&#160;not&#160;</b>be&#160;changed&#160;by&#160;the&#160;application!&#160;<br/>
&#160;<br/>
XcpBasic.h&#160;<br/>
API&#160;of&#160;XCP&#160;Basic.&#160;<br/>This&#160;file&#160;<b>must&#160;not&#160;</b>be&#160;changed&#160;by&#160;the&#160;application!&#160;<br/>
&#160;<br/>
xcp_cfg.h&#160;<br/>
Configuration&#160;file&#160;template&#160;for&#160;the&#160;XCP&#160;Protocol&#160;Layer.&#160;<br/>It&#160;is&#160;just&#160;an&#160;example and&#160;has&#160;to&#160;be&#160;customized.&#160;<br/>
&#160;<br/>
xcp_par.c&#160;<br/>
Template&#160;with parameter&#160;definitions&#160;for&#160;the&#160;XCP&#160;Protocol&#160;Layer.&#160;<br/>It&#160;is&#160;just&#160;an&#160;example and&#160;has&#160;to&#160;be&#160;customized&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
28&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-29_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-29_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-29_3.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
xcp_par.h&#160;<br/>
Template&#160;with external&#160;declarations&#160;for&#160;the&#160;parameters.&#160;<br/>It&#160;is&#160;just&#160;an&#160;example and&#160;has&#160;to&#160;be&#160;customized&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Version&#160;changes&#160;</b><br/>
Changes&#160;and&#160;the&#160;release&#160;versions&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;are&#160;listed&#160;at&#160;the&#160;beginning&#160;of&#160;<br/>the&#160;header and&#160;source&#160;code.&#160;<br/>
<b>4.4&#160;</b><br/>
<b>Integration of&#160;XCP&#160;into the&#160;Application&#160;</b><br/>
<b>4.4.1&#160;</b><br/>
<b>Integration of&#160;XCP&#160;on&#160;CAN&#160;(XCP&#160;Professional&#160;only)&#160;</b><br/>
The&#160;Vector&#160;CANbedded&#160;stack&#160;includes&#160;optionally&#160;XCP&#160;on&#160;CAN,&#160;which&#160;comprises&#160;the&#160;XCP&#160;<br/>Protocol&#160;Layer in&#160;conjunction&#160;with&#160;the&#160;XCP&#160;on&#160;CAN&#160;Transport Layer and&#160;the&#160;CAN-Driver.&#160;&#160;&#160;<br/>Note&#160;that&#160;the&#160;CAN-Driver,&#160;which&#160;is&#160;distributed&#160;as&#160;a&#160;separate&#160;product,&#160;is&#160;only&#160;partly&#160;part&#160;of&#160;<br/>XCP&#160;on&#160;CAN.&#160;<br/>The&#160;following&#160;figure shows the&#160;interface&#160;between&#160;XCP&#160;on&#160;CAN&#160;and&#160;the&#160;application:&#160;<br/>
<b>X</b><br/>
<b>C</b><br/>
<b>P</b><br/>
<b>&#160;o</b><br/>
<b>n</b><br/>
<b>&#160;C</b><br/>
<b>A</b><br/>
<b>N</b><br/>
<b>C</b><br/>
<b>A</b><br/>
<b>N</b><br/>
<b>&#160;D</b><br/>
<b>river</b><br/>
<b>(can</b><br/>
<b>_d</b><br/>
<b>rv.c)</b><br/>
X<br/>
cpC<br/>
om<br/>
m<br/>
and<br/>
<b>X</b><br/>
<b>C</b><br/>
<b>P</b><br/>
<b>&#160;o</b><br/>
<b>n</b><br/>
<b>&#160;C</b><br/>
<b>A</b><br/>
<b>N</b><br/>
<b>In</b><br/>
<b>terface&#160;L</b><br/>
<b>ayer</b><br/>
A<br/>
pplX<br/>
cpS<br/>
end<br/>
X<br/>
cpS<br/>
endC<br/>
allback<br/>
<b>(xcp</b><br/>
<b>_can</b><br/>
<b>.c)</b><br/>
<b>X</b><br/>
<b>C</b><br/>
<b>P</b><br/>
<b>P</b><br/>
<b>ro</b><br/>
<b>to</b><br/>
<b>co</b><br/>
<b>l&#160;L</b><br/>
<b>ayer</b><br/>
<b>(&#160;X</b><br/>
<b>cp</b><br/>
<b>P</b><br/>
<b>ro</b><br/>
<b>f.c&#160;)</b><br/>
X<br/>
cpE<br/>
vent<br/>
X<br/>
cpInit<br/>
<b>A</b><br/>
<b>p</b><br/>
<b>p</b><br/>
<b>licatio</b><br/>
<b>n</b><br/>
X<br/>
cpB<br/>
ackground<br/>
A<br/>
pplX<br/>
cp..<br/>
&#160;<br/>
Figure&#160;4-1&#160;Integration&#160;of&#160;XCP&#160;on&#160;CAN&#160;into&#160;the&#160;application&#160;<br/>
&#160;<br/>
<b>Practical&#160;Procedure&#160;<br/></b>The&#160;integration&#160;of&#160;XCP&#160;on&#160;CAN&#160;can&#160;be&#160;done&#160;by&#160;following&#160;these&#160;steps:&#160;<br/>
&#160;<br/>
1.&#160;&#160;Configure XCP&#160;on&#160;CAN in&#160;the&#160;generation&#160;tool GENy&#160;and&#160;generate.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
29&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-30_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
2.&#160;&#160;Include&#160;the&#160;include&#160;header&#160;file&#160;v_inc.h&#160;into&#160;all&#160;modules&#160;that&#160;access&#160;the&#160;<br/>
XCP&#160;on&#160;CAN&#160;services&#160;or provide&#160;services&#160;that&#160;XCP&#160;on&#160;CAN&#160;uses.&#160;<br/>
3.&#160;&#160;Add&#160;all&#160;source&#160;files&#160;and&#160;generated&#160;source&#160;files&#160;in&#160;the&#160;make&#160;file&#160;and&#160;link&#160;it&#160;<br/>
together with&#160;the&#160;data&#160;link&#160;layer and&#160;the&#160;application.&#160;<br/>
4.&#160;&#160;Initialize&#160;&#160;the&#160;&#160;data&#160;&#160;link&#160;&#160;layer&#160;&#160;after&#160;&#160;each&#160;&#160;reset&#160;&#160;during&#160;&#160;start-up&#160;&#160;before&#160;<br/>
initializing&#160;XCP&#160;on&#160;CAN&#160;(interrupts&#160;have&#160;to&#160;be&#160;disabled&#160;until&#160;the&#160;complete&#160;<br/>initialization&#160;procedure&#160;is done) by&#160;calling&#160;XcpInit.&#160;<br/>
5.&#160;&#160;If&#160;required&#160;call&#160;the&#160;background&#160;function&#160;XcpBackground&#160;cyclically.&#160;<br/>
6.&#160;&#160;Integrate&#160;&#160;the&#160;&#160;desired&#160;&#160;XCP&#160;&#160;on&#160;&#160;CAN&#160;&#160;services&#160;&#160;into&#160;&#160;your&#160;&#160;application.&#160;&#160;Call&#160;<br/>
especially&#160;the&#160;function&#160;XcpEvent(channel)&#160;cyclic&#160;with&#160;the&#160;appropriate&#160;<br/>cycle&#160;time&#160;and&#160;channel&#160;number.&#160;<br/>
The&#160;&#160;XCP&#160;&#160;on&#160;&#160;CAN&#160;&#160;sources&#160;&#160;must&#160;&#160;not&#160;&#160;be&#160;&#160;changed&#160;&#160;for&#160;&#160;the&#160;&#160;integration&#160;&#160;into&#160;&#160;the&#160;<br/>application.&#160;<br/>
&#160;<br/>
<b>4.4.2&#160;</b><br/>
<b>Integration&#160;with a&#160;Proprietary&#160;XCP&#160;Transport Layer&#160;</b><br/>
The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;needs&#160;&#160;a&#160;&#160;XCP&#160;&#160;Transport&#160;&#160;Layer&#160;&#160;to&#160;&#160;transmit&#160;&#160;and&#160;&#160;receive&#160;&#160;XCP&#160;<br/>protocol&#160;&#160;messages&#160;&#160;on&#160;&#160;the&#160;&#160;communication&#160;&#160;link&#160;&#160;(CAN,&#160;&#160;FlexRay,&#160;&#160;Ethernet,&#160;&#160;SxI,&#160;&#160;…)&#160;&#160;that&#160;&#160;is&#160;<br/>used.&#160;&#160;The&#160;&#160;free&#160;&#160;Vector&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;implementation&#160;&#160;does&#160;&#160;not&#160;&#160;include&#160;&#160;the&#160;&#160;XCP&#160;<br/>Transport&#160;Layer,&#160;which&#160;typically&#160;is&#160;strongly&#160;ECU&#160;dependant.&#160;However&#160;the&#160;Vector&#160;XCP&#160;on&#160;<br/>CAN software components&#160;already&#160;includes&#160;the&#160;XCP&#160;Transport&#160;Layer&#160;for CAN.&#160;<br/>The&#160;following&#160;figure shows the&#160;interface&#160;between&#160;the&#160;transport layer and&#160;the&#160;protocol layer.&#160;<br/>
X<br/>
cpC<br/>
om<br/>
m<br/>
and<br/>
<b>X</b><br/>
<b>C</b><br/>
<b>P</b><br/>
<b>&#160;T</b><br/>
<b>ran</b><br/>
<b>sp</b><br/>
<b>o</b><br/>
<b>rt&#160;L</b><br/>
<b>ayer</b><br/>
A<br/>
pplX<br/>
cpS<br/>
end<br/>
X<br/>
cpS<br/>
endC<br/>
allback<br/>
<b>X</b><br/>
<b>C</b><br/>
<b>P</b><br/>
A<br/>
pplication&#160;-&#160;X<br/>
C<br/>
P<br/>
T<br/>
ransport&#160;Layer&#160;interface<br/>
<b>P</b><br/>
<b>ro</b><br/>
<b>to</b><br/>
<b>co</b><br/>
<b>l&#160;L</b><br/>
<b>ayer</b><br/>
<b>(&#160;X</b><br/>
<b>cp</b><br/>
<b>B</b><br/>
<b>asic.c&#160;)</b><br/>
X<br/>
cpE<br/>
vent<br/>
X<br/>
cpInit<br/>
<b>A</b><br/>
<b>p</b><br/>
<b>p</b><br/>
<b>licatio</b><br/>
<b>n</b><br/>
X<br/>
cpB<br/>
ackground<br/>
A<br/>
pplX<br/>
cp..<br/>
&#160;<br/>
Figure&#160;4-2&#160;Integration&#160;of&#160;XCP&#160;with&#160;a&#160;proprietary&#160;XCP&#160;Transport&#160;Layer&#160;<br/>
The&#160;transport&#160;layer&#160;driver&#160;has&#160;to&#160;notify&#160;the&#160;protocol&#160;layer&#160;after&#160;reception&#160;of&#160;a&#160;XCP&#160;protocol&#160;<br/>message&#160;by&#160;calling&#160;the&#160;protocol layer function&#160;XcpCommand().&#160;<br/>
The&#160;protocol&#160;layer&#160;will&#160;use&#160;the&#160;function&#160;&lt;Bus&gt;XcpSend()&#160;of&#160;the&#160;transport&#160;layer&#160;to&#160;transmit&#160;<br/>a&#160;command&#160;response&#160;message&#160;or a&#160;data&#160;acquisition&#160;message.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
30&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-31_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-31_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
After&#160;&#160;the&#160;&#160;message&#160;&#160;has&#160;&#160;been&#160;&#160;transmitted&#160;&#160;successfully,&#160;&#160;the&#160;&#160;transport&#160;&#160;layer&#160;&#160;has&#160;&#160;to&#160;&#160;call&#160;&#160;the&#160;<br/>function&#160;XcpSendCallBack()&#160;of&#160;the&#160;protocol layer to&#160;indicate&#160;this.&#160;<br/>
The&#160;&#160;functions&#160;&#160;XcpInit(),&#160;&#160;XcpEvent()&#160;&#160;and&#160;&#160;XcpBackground()&#160;&#160;are&#160;&#160;called&#160;&#160;from&#160;&#160;the&#160;<br/>ECU’s application&#160;program.&#160;<br/>
The&#160;&#160;function&#160;&#160;ApplXcpGetPointer()&#160;&#160;is&#160;&#160;used&#160;&#160;by&#160;&#160;the&#160;&#160;protocol&#160;&#160;layer&#160;&#160;to&#160;&#160;convert&#160;&#160;a&#160;&#160;32&#160;&#160;Bit&#160;<br/>address&#160;with&#160;an&#160;address extension&#160;to&#160;a&#160;valid&#160;pointer.&#160;<br/>Depending&#160;on&#160;the&#160;optional&#160;features&#160;that&#160;can&#160;be&#160;enabled&#160;upon&#160;demand&#160;further&#160;application&#160;<br/>callback&#160;&#160;functions&#160;&#160;are&#160;&#160;necessary.&#160;All&#160;&#160;application&#160;&#160;functions&#160;&#160;are&#160;&#160;indicated&#160;&#160;<a href="TechnicalReference_Asr_Xcps.html#30">in&#160;&#160;Figure&#160;&#160;4-2&#160;&#160;</a>by&#160;<br/>their&#160;prefix&#160;ApplXcp….&#160;<br/>
&#160;&#160;<br/>
<b>Example&#160;<br/></b>The&#160;following&#160;C&#160;pseudo&#160;code example shows&#160;the&#160;required&#160;software&#160;handshake&#160;between&#160;<br/>
&#160;<br/>
the&#160;protocol&#160;layer&#160;and&#160;the transport&#160;layer.&#160;The&#160;example uses&#160;a simple transport&#160;layer&#160;<br/>definition&#160;where the&#160;length of&#160;the&#160;protocol&#160;message&#160;is&#160;transmitted&#160;in&#160;the&#160;first&#160;byte of&#160;the&#160;<br/>protocol&#160;packet:&#160;<br/>&#160;<br/>
/* Initialization */&#160;<br/>XcpInit();&#160;<br/>&#160;<br/>/* Main Loop */&#160;<br/>for (;;) {&#160;<br/>&#160;<br/>&#160;&#160;/* Packet received */&#160;<br/>&#160;&#160;if (Message received) {&#160;<br/>&#160; &#160;&#160;XcpCommand(&amp;ReceiveBuffer[1]);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;<br/>&#160;&#160;/* Transmit Message Buffer available */&#160;&#160;<br/>&#160;&#160;if (Message transmitted) {&#160;<br/>&#160; &#160;&#160;XcpSendCallBack();&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;&#160;<br/>&#160;&#160;/* Background Processing */&#160;<br/>&#160;&#160;XcpBackground();&#160;<br/>}&#160;<br/>
&#160;<br/>
/* Transmit Function */&#160;<br/>void ApplXcpSend(uint8&#160;len, MEMORY_ROM BYTEPTR msg ) {&#160;<br/>&#160;&#160;TransmitBuffer[0] = len; /* This is transport layer specific */&#160;<br/>&#160;&#160;memcpy(&amp;TransmitBuffer[1],msg,len);&#160;<br/>&#160;&#160;Transmit(TransmitBuffer);&#160;<br/>}&#160;<br/>
&#160;<br/>
/* Pointer Conversion */&#160;<br/>MTABYTEPTR&#160;ApplXcpGetPointer( uint8&#160;addr_ext, uint32&#160;addr ) {&#160;<br/>&#160;&#160;Return (BYTE*)addr;&#160;<br/>}&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
31&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-32_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>4.4.3&#160;</b><br/>
<b>Motorola&#160;HC12&#160;with&#160;CAN&#160;Transport Layer&#160;</b><br/>
See&#160;the&#160;application&#160;note&#160;“AN-IMC-1-007_Integration_of_the_Vector_XCP_Driver&#160;<br/>with_a_free_CAN_Driver_v1.0.0_EN.pdf”&#160;which&#160;explains in&#160;detail&#160;how&#160;to&#160;integrate&#160;the&#160;<br/>Vector basic XCP&#160;driver into&#160;an&#160;HC12&#160;microcontroller with&#160;an&#160;existing&#160;CAN&#160;driver.&#160;<br/>&#160;<br/>
<b>4.5&#160;</b><br/>
<b>Compiler&#160;Abstraction and Memory&#160;Mapping&#160;&#160;</b><br/>
The&#160;&#160;objects&#160;&#160;(e.g.&#160;&#160;variables,&#160;&#160;functions,&#160;&#160;constants)&#160;&#160;are&#160;&#160;declared&#160;&#160;by&#160;&#160;compiler&#160;&#160;independent&#160;<br/>definitions&#160;&#160;–&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definitions.&#160;&#160;Each&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definition&#160;&#160;is&#160;<br/>assigned&#160;to&#160;a&#160;memory&#160;section.&#160;<br/>The&#160;&#160;following&#160;&#160;table&#160;&#160;contains&#160;&#160;the&#160;&#160;memory&#160;&#160;section&#160;&#160;names&#160;&#160;and&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;<br/>definitions defined&#160;for&#160;XCP,&#160;and&#160;illustrates their&#160;assignment&#160;among&#160;each&#160;other.&#160;<br/>
<b>Compiler&#160;Abstraction&#160;</b><br/>
<b>Definitions&#160;</b><br/>
&#160;<br/>
&#160;<br/>
A<br/>
&#160;<br/>
A<br/>
T<br/>
AT<br/>
T<br/>
<b>&#160;</b><br/>
A<br/>
T&#160;<br/>
D<br/>
&#160;<br/>
&#160;<br/>
_DA<br/>
NS<br/>
_DA<br/>
L_<br/>
Q<br/>
A<br/>
P<br/>
DE<br/>
<b>Memory&#160;Mapping</b><br/>
T<br/>
<b>&#160;</b><br/>
P<br/>
_CO<br/>
_DA<br/>
_M<br/>
_A<br/>
_CO<br/>
<b>Sections&#160;</b><br/>
CP<br/>
CP<br/>
CP<br/>
CP<br/>
CP<br/>
X<br/>
X<br/>
X<br/>
X<br/>
X<br/>
XCP_START_SEC_CONST_16BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
XCP_START_SEC_CONST_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
XCP_START_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
XCP_START_SEC_VAR_NOINIT_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
XCP_START_SEC_CODE&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;4-1&#160;&#160;&#160;Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;<br/>
Please&#160;&#160;see&#160;&#160;the&#160;&#160;document:&#160;&#160;“AUTOSAR_SWS_CompilerAbstraction.pdf”&#160;&#160;for&#160;&#160;details&#160;&#160;about&#160;<br/>how&#160;to&#160;use&#160;these&#160;definitions.&#160;<br/>
<b>4.6&#160;</b><br/>
<b>Support of&#160;Vx1000&#160;Integration&#160;</b><br/>
The&#160;&#160;Xcp&#160;&#160;component&#160;&#160;provides&#160;&#160;basic&#160;&#160;support&#160;&#160;for&#160;&#160;the&#160;&#160;Vx1000&#160;&#160;Hardware&#160;&#160;which&#160;&#160;can&#160;&#160;be&#160;<br/>enabled&#160;in&#160;the&#160;configuration&#160;tool.&#160;If&#160;enabled&#160;the&#160;code&#160;size&#160;is&#160;increased,&#160;yet&#160;the&#160;same&#160;API&#160;<br/>calls&#160;&#160;as&#160;&#160;used&#160;&#160;for&#160;&#160;the&#160;&#160;Xcp&#160;&#160;component&#160;&#160;are&#160;&#160;reused&#160;&#160;for&#160;&#160;the&#160;&#160;Vx&#160;&#160;which&#160;&#160;minimizes&#160;&#160;integration&#160;<br/>effort.&#160;<br/>When&#160;&#160;the&#160;&#160;option&#160;&#160;is&#160;&#160;enabled&#160;&#160;the&#160;&#160;sources&#160;&#160;provided&#160;&#160;with&#160;&#160;your&#160;&#160;Vx1000&#160;&#160;hardware&#160;&#160;must&#160;&#160;be&#160;<br/>integrated.&#160;&#160;The&#160;&#160;Xcp&#160;&#160;component&#160;&#160;includes&#160;&#160;the&#160;&#160;Vx1000.h&#160;&#160;header&#160;&#160;and&#160;&#160;makes&#160;&#160;use&#160;&#160;of&#160;&#160;the&#160;<br/>respective&#160;macros.&#160;<br/>If&#160;&#160;the&#160;&#160;Vx&#160;&#160;hardware&#160;&#160;is&#160;&#160;attached&#160;&#160;prior&#160;&#160;to&#160;&#160;ECU&#160;&#160;Initialization&#160;&#160;the&#160;&#160;Xcp&#160;&#160;software&#160;&#160;itself&#160;&#160;is&#160;<br/>deactivated,&#160;&#160;hence&#160;&#160;no&#160;&#160;access&#160;&#160;via&#160;&#160;the&#160;&#160;bus&#160;&#160;interface&#160;&#160;is&#160;&#160;possible&#160;&#160;anymore.&#160;&#160;If&#160;&#160;you&#160;&#160;want&#160;&#160;to&#160;<br/>perform&#160;measurement&#160;&#160;&amp;&#160;&#160;calibration&#160;&#160;via&#160;&#160;the&#160;bus&#160;&#160;interface&#160;&#160;again,&#160;&#160;detach&#160;&#160;the&#160;&#160;Vx&#160;&#160;hardware&#160;<br/>and&#160;perform&#160;an&#160;ECU&#160;reset.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
32&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-33_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>5&#160;&#160;Feature&#160;List&#160;</b><br/>
This&#160;general feature&#160;list&#160;describes the&#160;overall&#160;feature&#160;set&#160;of&#160;the&#160;XCP&#160;Protocol Layer.&#160;Not&#160;all&#160;<br/>of&#160;these&#160;features&#160;are&#160;available&#160;in&#160;XCP&#160;Basic.&#160;Please&#160;also&#160;refer&#160;to<a href="TechnicalReference_Asr_Xcps.html#102">&#160;9.2&#160;“Limitations&#160;of&#160;XCP&#160;<br/>Basic”.</a>&#160;<br/>
<b>Description&#160;of&#160;the&#160;XCP&#160;functionality&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Functions&#160;</b><br/>
<b>Initialization&#160;<br/></b>Initialization&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpInit&#160;<br/>ApplXcpInit&#160;<br/>
<b>Task&#160;<br/></b>Background&#160;task&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpBackground&#160;<br/>
<b>XCP&#160;Command&#160;Processor&#160;<br/></b>Command&#160;Processor&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpCommand&#160;<br/>
Transmission&#160;and Confirmation of&#160;XCP&#160;Packets&#160;<br/>
Prof,&#160;Basic&#160;<br/>
&lt;Bus&gt;XcpSend&#160;<br/>XcpSendCallBack&#160;<br/>
Transmission&#160;of&#160;Response packets&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpSendCrm&#160;<br/>
Transmission&#160;of&#160;XCP&#160;Packets&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpSendStall&#160;<br/>&lt;Bus&gt;XcpSendFlush&#160;<br/>
<b>XCP&#160;Commands&#160;<br/></b>Get&#160;Identification&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpGetIdData&#160;<br/>
Seed &amp;&#160;Key&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpGetSeed&#160;<br/>ApplXcpUnlock&#160;<br/>
Short&#160;Download&#160;<br/>
Prof&#160;<br/>
-&#160;<br/>
Modify&#160;Bits&#160;<br/>
Prof&#160;<br/>
-&#160;<br/>
Write&#160;DAQ&#160;Multiple&#160;<br/>
Prof&#160;<br/>
ApplXcpCheckDAQAccess&#160;&#160;<br/>
Transport&#160;Layer&#160;Command&#160;<br/>
Prof&#160;<br/>
&lt;Bus&gt;Xcp_TLService&#160;<br/>
Open Command&#160;Interface&#160;<br/>
Prof&#160;<br/>
ApplXcpOpenCmdIf&#160;<br/>
User&#160;command&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpUserService&#160;<br/>
<b>Data&#160;Acquisition&#160;(DAQ)&#160;<br/></b>Synchronous&#160;Data&#160;Acquisition&#160;and Stimulation&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpEvent&#160;<br/>ApplXcpCheckDAQAccess&#160;<br/>
DAQ&#160;Timestamp&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpGetTimestamp&#160;<br/>
Resume Mode&#160;<br/>
Prof&#160;<br/>
ApplXcpDaqResume&#160;<br/>ApplXcpDaqResumeStore&#160;<br/>ApplXcpDaqResumeClear&#160;<br/>ApplXcpCalResumeStore&#160;<br/>
<b>Online&#160;Data Calibration&#160;<br/></b>Calibration&#160;page&#160;switching&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpGetCalPage&#160;<br/>ApplXcpSetCalPage&#160;<br/>
Copy&#160;calibration&#160;page&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpCopyCalPage&#160;<br/>
Freeze Mode&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpSetFreezeMode&#160;<br/>ApplXcpGetFreezeMode&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
33&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-34_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Boot&#160;loader&#160;Download&#160;<br/></b>Disable normal&#160;operation&#160;of&#160;ECU&#160;<br/>
Prof&#160;<br/>
ApplXcpDisableNormalOpera<br/>tion&#160;<br/>
Start&#160;of&#160;the&#160;boot&#160;loader&#160;<br/>
Prof&#160;<br/>
ApplXcpStartBootLoader&#160;<br/>
<b>Flash&#160;Programming&#160;<br/></b>Reset&#160;of&#160;ECU&#160;<br/>
Prof&#160;<br/>
ApplXcpReset&#160;<br/>
Clear&#160;flash&#160;memory&#160;<br/>
Prof&#160;<br/>
ApplXcpFlashClear&#160;<br/>
Prepare&#160;flash&#160;programming&#160;<br/>
Prof&#160;<br/>
ApplXcpProgramStart&#160;<br/>
Program&#160;flash&#160;memory&#160;<br/>
Prof&#160;<br/>
ApplXcpFlashProgram&#160;<br/>
<b>Special&#160;Features&#160;<br/></b>Interrupt&#160;Control&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpInterruptEnable&#160;<br/>ApplXcpInterruptDisable&#160;<br/>
Event&#160;Codes&#160;<br/>
Prof&#160;<br/>
XcpSendEvent&#160;<br/>
Service Request&#160;Packets&#160;<br/>
Prof&#160;<br/>
XcpPutchar&#160;<br/>XcpPrint&#160;<br/>
Disconnect&#160;XCP&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpDisconnect&#160;<br/>
Pointer&#160;conversion&#160;<br/>
Prof,&#160;Basic&#160;<br/>
ApplXcpGetPointer&#160;<br/>
EEPROM&#160;access&#160;<br/>
Prof&#160;<br/>
ApplXcpCheckReadEEPROM&#160;<br/>ApplXcpCheckWriteEEPROM&#160;<br/>
Write protection&#160;<br/>
Prof&#160;<br/>
ApplXcpCheckWriteAccess&#160;<br/>
Read protection&#160;<br/>
Prof&#160;<br/>
ApplXcpCheckReadAccess&#160;<br/>
Overwriteable macros&#160;<br/>
Prof,&#160;Basic&#160;<br/>
XcpMemCpy&#160;<br/>XcpMemSet&#160;<br/>XcpMemClr&#160;<br/>XcpSendDto&#160;<br/>
En-&#160;/&#160;Disabling&#160;XCP&#160;module&#160;<br/>
Prof&#160;<br/>
XcpControl&#160;<br/>
Access&#160;to internal&#160;data&#160;<br/>
Prof&#160;<br/>
XcpGetXcpDataPointer&#160;<br/>
En-/Disable Calibration&#160;<br/>
Prof&#160;<br/>
-&#160;<br/>
Programming&#160;Write&#160;Protection&#160;<br/>
Prof&#160;<br/>
ApplXcpCheckProgramAccess&#160;<br/>
Session&#160;Status&#160;<br/>
Prof&#160;<br/>
XcpGetSessionStatus&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
34&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-35_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-35_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>6&#160;&#160;Description&#160;of&#160;the&#160;API&#160;</b><br/>
The&#160;XCP&#160;Protocol&#160;Layer&#160;application&#160;programming&#160;interface&#160;consists&#160;of&#160;services,&#160;which&#160;are&#160;<br/>realized&#160;&#160;by&#160;&#160;function&#160;&#160;calls.&#160;&#160;These&#160;&#160;services&#160;&#160;are&#160;&#160;called&#160;&#160;wherever&#160;&#160;they&#160;&#160;are&#160;&#160;required.&#160;&#160;They&#160;<br/>transfer&#160;&#160;information&#160;&#160;to-&#160;&#160;or&#160;&#160;take&#160;&#160;over&#160;&#160;information&#160;&#160;from&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer.&#160;&#160;This&#160;<br/>information&#160;&#160;is&#160;&#160;stored&#160;&#160;in&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;until&#160;&#160;it&#160;&#160;is&#160;&#160;not&#160;&#160;required&#160;&#160;anymore,&#160;<br/>respectively&#160;until it is changed&#160;by&#160;other&#160;operations.&#160;<br/>Examples&#160;&#160;for&#160;&#160;calling&#160;&#160;the&#160;&#160;services&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;can&#160;&#160;be&#160;&#160;found&#160;&#160;in&#160;&#160;the&#160;<br/>description&#160;of&#160;the&#160;services.&#160;<br/>
&#160;<br/>
<b>6.1&#160;</b><br/>
<b>Version of the&#160;Source&#160;Code&#160;</b><br/>
The&#160;&#160;source&#160;&#160;code&#160;&#160;version&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;is&#160;&#160;provided&#160;&#160;by&#160;&#160;three&#160;&#160;BCD&#160;&#160;coded&#160;<br/>constants:&#160;<br/>
CONST(uint8, XCP_CONST)&#160;kXcpMainVersion =&#160;&#160;<br/>(uint8)(CP_XCP_VERSION &gt;&gt; 8);&#160;<br/>
CONST(uint8, XCP_CONST)&#160;&#160;kXcpSubVersion &#160;=&#160;<br/>(uint8)(CP_XCP_ VERSION);&#160;<br/>
CONST(uint8, XCP_CONST)&#160;kXcpReleaseVersion =&#160;<br/>(uint8)(CP_XCP_RELEASE_VERSION);&#160;<br/>
&#160;<br/>
<b>Example</b>&#160;<br/>Version 1.00.00&#160;is&#160;registered&#160;as:&#160;<br/>
&#160;<br/>
kXcpMainVersion &#160; &#160;= 0x01;&#160;<br/>kXcpSubVersion &#160; &#160; = 0x00;&#160;<br/>kXcpReleaseVersion = 0x00;&#160;<br/>
&#160;<br/>
These&#160;constants&#160;are declared&#160;as external&#160;and&#160;can&#160;be&#160;read&#160;by&#160;the&#160;application&#160;at&#160;any&#160;time.&#160;<br/>Alternatively&#160;the&#160;Version&#160;can&#160;be&#160;obtained&#160;with&#160;the&#160;GetVersionInfo&#160;API&#160;if enabled:&#160;<br/>
void&#160;&#160;<b>XcpGetVersionInfo&#160;</b>(P2VAR(Std_VersionInfoType, AUTOMATIC,&#160;<br/>
XCP_APPL_DATA)&#160;XcpVerInfoPtr)&#160;&#160;<br/>
<a href="TechnicalReference_Asr_Xcps.html#43">(6.2.13)</a>&#160;<br/>
&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
35&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-36_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>6.2&#160;</b><br/>
<b>XCP&#160;Services&#160;called&#160;by&#160;the&#160;Application&#160;</b><br/>
The&#160;following&#160;XCP&#160;services&#160;that&#160;are called&#160;by&#160;the&#160;application&#160;are&#160;all&#160;not&#160;reentrant.&#160;If&#160;they&#160;<br/>are called&#160;within&#160;interrupt&#160;context&#160;at&#160;least&#160;the&#160;CAN-Interrupts&#160;have&#160;to&#160;be&#160;disabled.&#160;<br/>&#160;<br/>
<b>6.2.1&#160;</b><br/>
<b>XcpInitMemory:&#160;Initialization of&#160;the&#160;XCP&#160;Protocol&#160;Layer Memory&#160;</b><br/>
<b>XcpInitMemory&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpInitMemory</b>&#160;(&#160;void&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;service initializes the XCP&#160;Protocol&#160;Layer&#160;memory.&#160;It&#160;must&#160;be&#160;called&#160;from&#160;the&#160;application&#160;<br/>program&#160;before&#160;any&#160;other&#160;XCP&#160;function&#160;is&#160;called.&#160;This&#160;is&#160;only&#160;required&#160;if&#160;the Startup&#160;Code does&#160;not&#160;<br/>initialize the&#160;memory&#160;with zero.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service&#160;function&#160;has&#160;to&#160;be&#160;called&#160;after&#160;the&#160;initialization of&#160;XCP&#160;Transport&#160;Layer.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;global&#160;interrupts&#160;have to&#160;be&#160;disabled&#160;while this&#160;service&#160;function&#160;is&#160;executed.&#160;This&#160;function&#160;<br/>
should be&#160;called&#160;during initialization of&#160;the&#160;ECU&#160;before&#160;the&#160;interrupts&#160;have&#160;been&#160;enabled&#160;<br/>before.&#160;<br/>
&#160;<br/>
<b>6.2.2&#160;</b><br/>
<b>XcpInit:&#160;Initialization&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;</b><br/>
<b>XcpInit&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpInit</b>&#160;&#160;(&#160;void&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
36&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-37_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;service initializes the XCP&#160;Protocol&#160;Layer&#160;and its&#160;internal&#160;variables.&#160;It&#160;must&#160;be&#160;called&#160;from&#160;the&#160;<br/>application program&#160;before any&#160;other&#160;XCP&#160;function is called.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service&#160;function&#160;has&#160;to&#160;be&#160;called&#160;after&#160;the&#160;initialization of&#160;XCP&#160;Transport&#160;Layer.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;global&#160;interrupts&#160;have to&#160;be&#160;disabled&#160;while this&#160;service&#160;function&#160;is&#160;executed.&#160;This&#160;function&#160;<br/>
should be&#160;called&#160;during initialization of&#160;the&#160;ECU&#160;before&#160;the&#160;interrupts&#160;have&#160;been&#160;enabled&#160;<br/>before.&#160;<br/>
&#160;<br/>
<b>6.2.3&#160;</b><br/>
<b>XcpEvent:&#160;Handling&#160;of&#160;a&#160;data acquisition&#160;event&#160;channel&#160;</b><br/>
<b>XcpEvent&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive&#160;Channel&#160;&#160;uint8&#160;XcpEvent&#160;&#160;(&#160;uint8 event&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>event&#160;<br/>
Number&#160;of&#160;event&#160;channels&#160;to process&#160;<br/>The&#160;event&#160;channel&#160;numbers&#160;have to&#160;start&#160;at&#160;0&#160;and&#160;have to be&#160;<br/>continuous.&#160;The&#160;range&#160;is:&#160;0..x&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_EVENT_NO&#160;:&#160;&#160;&#160;&#160;Inactive (DAQ&#160;not&#160;running,&#160;Event&#160;not&#160;configured)&#160;<br/>XCP_EVENT_DAQ&#160;:&#160;&#160;&#160;DAQ&#160;active */&#160;<br/>XCP_EVENT_DAQ_OVERRUN&#160;:&#160;&#160;DAQ&#160;queue&#160;overflow&#160;<br/>XCP_EVENT_STIM&#160;:&#160;&#160;STIM&#160;active&#160;<br/>XCP_EVENT_STIM_OVERRUN&#160;:&#160;&#160;STIM&#160;data&#160;not&#160;available&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Calling&#160;XcpEvent&#160;with a&#160;particular&#160;event&#160;channel&#160;number&#160;triggers&#160;the&#160;sampling&#160;and&#160;transmission&#160;<br/>of&#160;all&#160;DAQ&#160;lists&#160;that&#160;are assigned&#160;to&#160;this&#160;event&#160;channel.&#160;<br/>The&#160;event&#160;channels&#160;are&#160;defined by&#160;the&#160;ECU&#160;developer&#160;in the&#160;application program.&#160;An MCS&#160;(e.g.&#160;<br/>CANape)&#160;must&#160;know&#160;about&#160;the&#160;meaning&#160;of&#160;the&#160;event&#160;channel&#160;numbers.&#160;These&#160;are&#160;usually&#160;<br/>described in&#160;the&#160;tool&#160;configuration&#160;files or&#160;in&#160;the&#160;interface&#160;specific&#160;part&#160;of&#160;the&#160;ASAM&#160;MC2 (ASAP2)&#160;<br/>database.&#160;<br/>Example:&#160;<br/>A&#160;motor&#160;control&#160;unit&#160;may&#160;have a&#160;10ms,&#160;a&#160;100ms&#160;and&#160;a crank&#160;synchronous&#160;event&#160;channel.&#160;In&#160;this&#160;<br/>case,&#160;the&#160;three&#160;XcpEvent&#160;calls&#160;have to&#160;be&#160;placed&#160;at&#160;the&#160;appropriate&#160;locations in&#160;the&#160;ECU’s&#160;<br/>program:&#160;<br/>xcpEvent&#160;(0);&#160;/*&#160;10ms&#160;cycle */&#160;<br/>xcpEvent&#160;(1);&#160;/*&#160;100ms&#160;cycle */&#160;<br/>xcpEvent&#160;(2);&#160;/*&#160;Crank&#160;synchronous&#160;cycle */&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
37&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-38_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>Data&#160;acquisition&#160;has&#160;to be enabled:&#160;XCP_ENABLE_DAQ&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and&#160;interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
<b>6.2.4&#160;</b><br/>
<b>XcpStimEventStatus: Check&#160;data stimulation events&#160;</b><br/>
<b>XcpStimEventStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>XcpStimEventStatus</b>&#160;&#160;(&#160;uint8&#160;event,&#160;uint8&#160;action&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code&#160;replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>event&#160;<br/>
Event&#160;channel&#160;number&#160;<br/>
action&#160;<br/>
STIM_CHECK_ODT_BUFFER&#160;:&#160;check&#160;ODT&#160;buffer&#160;<br/>STIM_RESET_ODT_BUFFER&#160;:&#160;reset&#160;ODT&#160;buffer&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0&#160;:&#160;stimulation data not&#160;available&#160;<br/>1&#160;:&#160;new&#160;stimulation data is&#160;available&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Check&#160;if&#160;data&#160;stimulation&#160;(STIM)&#160;event&#160;can&#160;perform&#160;or&#160;delete&#160;the&#160;buffers.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>Data&#160;acquisition&#160;has&#160;to be enabled:&#160;XCP_ENABLE_STIM&#160;has&#160;to be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>&#160;<br/>
<b>6.2.5&#160;</b><br/>
<b>XcpBackground:&#160;Background calculation&#160;of&#160;checksum&#160;</b><br/>
<b>XcpBackground&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpBackground</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
38&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-39_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0 :&#160;background calculation&#160;finished&#160;<br/>1 :&#160;background calculation is still&#160;in progress&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>If&#160;the&#160;XCP&#160;command&#160;for&#160;the&#160;calculation of&#160;the&#160;memory&#160;checksum&#160;has&#160;to be used&#160;for&#160;large&#160;memory&#160;<br/>areas,&#160;it&#160;might&#160;not&#160;be&#160;appropriate&#160;to&#160;block&#160;the&#160;processor&#160;for&#160;a&#160;long period&#160;of&#160;time.&#160;Therefore,&#160;the&#160;<br/>checksum&#160;calculation is&#160;divided into smaller&#160;sections&#160;that&#160;are&#160;handled&#160;in&#160;XcpBackground.&#160;<br/>Therefore&#160;XcpBackground&#160;should be&#160;called&#160;periodically&#160;whenever&#160;the&#160;ECU’s&#160;CPU&#160;is&#160;idle.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;level&#160;<br/>
&#160;<br/>
<b>6.2.6&#160;</b><br/>
<b>XcpSendEvent:&#160;Transmission of event&#160;codes&#160;</b><br/>
<b>XcpSendEvent&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpSendEvent</b>&#160;&#160;(&#160;uint8&#160;evc,&#160;ROMBYTEPTR&#160;c,&#160;uint8&#160;len&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>evc&#160;<br/>
event&#160;code&#160;<br/>
c&#160;&#160;<br/>
pointer&#160;to event&#160;data&#160;<br/>
len&#160;<br/>
event&#160;data length&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Transmission&#160;of&#160;event&#160;codes&#160;via event&#160;packets&#160;(EV).&#160;<br/>Please refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#17">&#160;3.10&#160;Event&#160;Codes.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and&#160;XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>Data&#160;acquisition&#160;has&#160;to be enabled:&#160;XCP_ENABLE_SEND_EVENT&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
&#160;<br/>
<b>6.2.7&#160;</b><br/>
<b>XcpPutchar:&#160;Put&#160;a&#160;char into a&#160;service&#160;request packet&#160;</b><br/>
<b>XcpPutchar&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive&#160;Channel&#160;&#160;void&#160;<b>XcpPutchar&#160;</b>&#160;(&#160;const&#160;uint8&#160;c&#160;)&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
39&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-40_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>c&#160;<br/>
character&#160;that&#160;is&#160;put&#160;in&#160;a&#160;service request&#160;packet&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Put&#160;a&#160;char&#160;into&#160;a&#160;service request&#160;packet&#160;(SERV).&#160;<br/>The&#160;service request&#160;packet&#160;is&#160;transmitted&#160;if&#160;either&#160;the&#160;maximum&#160;packet&#160;length&#160;is&#160;reached&#160;(the&#160;<br/>service request&#160;message&#160;packet&#160;is&#160;full)&#160;or&#160;the&#160;character&#160;0x00&#160;is&#160;out&#160;in&#160;the&#160;service request&#160;packet.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_SERV_TEXT_PUTCHAR&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
<b>6.2.8&#160;</b><br/>
<b>XcpPrint: Transmission of&#160;a&#160;service&#160;request packet&#160;</b><br/>
<b>XcpPrint&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpPrint</b>&#160;&#160;(P2CONST(uint8, AUTOMATIC, XCP_APPL_DATA)&#160;str&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>str&#160;<br/>
pointer&#160;to a&#160;string&#160;that&#160;is&#160;terminated&#160;by&#160;0x00&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Transmission&#160;of&#160;a&#160;service request&#160;packet&#160;(SERV).&#160;<br/>The&#160;string&#160;str&#160;is&#160;sent&#160;via service request&#160;packets.&#160;The&#160;string&#160;has&#160;to&#160;be&#160;terminated&#160;by&#160;0x00.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_SERV_TEXT_PRINT&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
<b>6.2.9&#160;</b><br/>
<b>XcpDisconnect:&#160;Disconnect from&#160;XCP&#160;master&#160;</b><br/>
<b>XcpDisconnect&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
40&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-41_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive&#160;Channel&#160;&#160;void&#160;<b>XcpDisconnect</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>If&#160;the&#160;XCP&#160;slave is connected&#160;to a&#160;XCP&#160;master&#160;a&#160;call&#160;of&#160;this&#160;function&#160;discontinues the&#160;connection&#160;<br/>(transition&#160;to disconnected state).&#160;If&#160;the&#160;XCP&#160;slave is not&#160;connected&#160;this&#160;function&#160;performs&#160;no&#160;<br/>action.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and&#160;interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
<b>6.2.10&#160;&#160;XcpSendCrm:&#160;Transmit response&#160;or&#160;error&#160;packet&#160;</b><br/>
<b>XcpSendCrm&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpSendCrm</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Transmission&#160;of&#160;a&#160;command response&#160;packet&#160;(RES),&#160;or&#160;error&#160;packet&#160;(ERR)&#160;if&#160;no&#160;other&#160;packet&#160;is&#160;<br/>pending.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly,&#160;XCP&#160;is&#160;in&#160;connected&#160;state and&#160;a&#160;<br/>
command&#160;packet&#160;(CMD)&#160;has&#160;been&#160;received.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
41&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-42_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>6.2.11&#160;&#160;XcpGetXcpDataPointer:&#160;Request internal&#160;data&#160;pointer&#160;</b><br/>
<b>XcpGetXcpDataPointer&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpGetXcpDataPointer</b>&#160;(&#160;tXcpData&#160;**&#160;pXcpData&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>pXcpData&#160;<br/>
pointer&#160;to store&#160;the&#160;pointer&#160;to&#160;the&#160;module internal&#160;data&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>With&#160;this&#160;function&#160;the&#160;pointer&#160;to&#160;the&#160;module&#160;internal&#160;data can&#160;be&#160;received.&#160;With&#160;this&#160;pointer&#160;the&#160;<br/>internal&#160;variable can&#160;be&#160;set&#160;to a&#160;certain configuration&#160;(e.g.&#160;after&#160;entering&#160;a&#160;boot&#160;mode where no&#160;<br/>connection&#160;shall&#160;be&#160;established again).&#160;As&#160;this&#160;pointer&#160;allows&#160;the&#160;access&#160;to all&#160;internal&#160;data it&#160;must&#160;<br/>be&#160;handled&#160;with care.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_GET_XCP_DATA_POINTER&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.2.12&#160;&#160;XcpControl:&#160;En-&#160;/&#160;Disable&#160;the&#160;XCP&#160;module&#160;</b><br/>
<b>XcpControl&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpControl</b>&#160;(&#160;uint8&#160;command&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>command&#160;<br/>
parameter&#160;to&#160;either&#160;en-&#160;or&#160;disable&#160;the&#160;module&#160;<br/>kXcpControl_Disable:&#160;disable the&#160;module&#160;<br/>kXcpControl_Enable:&#160;enable the&#160;module&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>With&#160;this&#160;function&#160;the&#160;whole module can&#160;be&#160;en-&#160;or&#160;disabled.&#160;After&#160;initialization&#160;the&#160;module&#160;is&#160;<br/>enabled.&#160;A&#160;call&#160;with parameter&#160;kXcpControl_Enable does not&#160;lead&#160;to any&#160;changed&#160;behavior.&#160;After&#160;<br/>call&#160;with parameter&#160;kXcpControl_Disable each&#160;function either&#160;called&#160;by&#160;the application or&#160;by&#160;the&#160;<br/>transport&#160;layer&#160;is&#160;directly&#160;left&#160;without&#160;any&#160;handling.&#160;&#160;<br/>Thus&#160;this&#160;function&#160;can&#160;be&#160;used&#160;to disable&#160;the&#160;XCP&#160;functionality&#160;during&#160;runtime.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
42&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-43_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_CONTROL&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.2.13&#160;&#160;XcpGetVersionInfo:&#160;Request module&#160;version information&#160;</b><br/>
<b>XcpGetVersionInfo&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpGetVersionInfo</b>&#160;(P2VAR(Std_VersionInfoType,&#160;AUTOMATIC,&#160;<br/>
XCP_APPL_DATA)&#160;XcpVerInfoPtr)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>XcpVerInfoPtr&#160;&#160;<br/>
Pointer&#160;to&#160;the&#160;location&#160;where&#160;the&#160;Version&#160;information&#160;shall&#160;be&#160;stored.&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>With&#160;this&#160;service it&#160;is&#160;possible to&#160;get&#160;the&#160;version information of&#160;this&#160;software&#160;module.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;The&#160;switch&#160;XCP_ENABLE_VERSION_INFO_API&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;task&#160;level&#160;(Re-entrant)&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.3&#160;</b><br/>
<b>XCP&#160;Protocol Layer Functions,&#160;called by&#160;the&#160;XCP&#160;Transport Layer&#160;</b><br/>
For&#160;&#160;using&#160;&#160;the&#160;&#160;following&#160;&#160;functions&#160;&#160;there&#160;&#160;are&#160;&#160;some&#160;&#160;limitations&#160;&#160;which&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;&#160;taken&#160;&#160;into&#160;<br/>consideration&#160;–&#160;especially&#160;when&#160;using&#160;an&#160;operation&#160;system&#160;like,&#160;i.e.&#160;OSEK&#160;OS:&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;ISR&#160;level&#160;for&#160;the&#160;transmission&#160;and&#160;reception&#160;of&#160;CAN&#160;messages&#160;has&#160;to&#160;be the&#160;same.&#160;<br/>
<b>&gt;&#160;&#160;</b>Interrupts&#160;must&#160;be&#160;mutually&#160;<br/>
<b>&gt;&#160;&#160;</b>No nested&#160;calls&#160;of&#160;these&#160;functions&#160;are&#160;allowed.&#160;(i.e.&#160;these&#160;functions&#160;are&#160;not&#160;reentrant)&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
43&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-44_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
All&#160;functions&#160;provided&#160;by&#160;the&#160;application&#160;must&#160;match&#160;the&#160;required&#160;interfaces.&#160;This&#160;can&#160;be&#160;<br/>ensured&#160;by&#160;including&#160;the&#160;header file&#160;in&#160;the&#160;modules&#160;which&#160;provide&#160;the&#160;required&#160;functions.&#160;If&#160;<br/>these&#160;interfaces&#160;do&#160;not&#160;match&#160;unexpected&#160;run-time&#160;behavior may&#160;occur.&#160;<br/>
&#160;<br/>
<b>6.3.1&#160;</b><br/>
<b>XcpCommand:&#160;Evaluation of&#160;XCP&#160;packets&#160;and command interpreter&#160;</b><br/>
<b>XcpCommand&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpCommand</b>&#160;&#160;(P2CONST(uint32, AUTOMATIC,&#160;<br/>
XCP_APPL_DATA)&#160;pCommand&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>pCommand&#160;<br/>
Pointer&#160;to&#160;the&#160;XCP&#160;protocol&#160;message,&#160;which must&#160;be&#160;extracted&#160;from&#160;<br/>the&#160;XCP&#160;protocol&#160;packet.&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Every&#160;time the&#160;XCP&#160;Transport&#160;Layer&#160;receives a&#160;XCP&#160;CTO&#160;Packet&#160;this&#160;function&#160;has&#160;to&#160;be&#160;called.&#160;<br/>The&#160;parameter&#160;is&#160;a pointer&#160;to&#160;the&#160;XCP&#160;protocol&#160;message,&#160;which must&#160;be extracted&#160;from&#160;the&#160;XCP&#160;<br/>protocol&#160;packet.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;to&#160;be&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.3.2&#160;</b><br/>
<b>XcpSendCallBack: Confirmation of&#160;the&#160;successful&#160;transmission of a&#160;XCP&#160;<br/>packet&#160;</b><br/>
<b>XcpSendCallBack&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>XcpSendCallBack</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
44&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-45_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0&#160;:&#160;&#160;if&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;is&#160;idle&#160;(no&#160;transmit&#160;messages&#160;are&#160;<br/>pending)&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;XCP&#160;Protocol&#160;Layer&#160;does not&#160;call&#160;&lt;Bus&gt;XcpSend&#160;again,&#160;until&#160;XcpSendCallBack&#160;has&#160;<br/>confirmed&#160;the&#160;successful&#160;transmission&#160;of&#160;the&#160;previous&#160;message.&#160;XcpSendCallBack&#160;transmits&#160;<br/>pending&#160;data acquisition&#160;messages&#160;by&#160;calling&#160;&lt;Bus&gt;XcpSend&#160;again.&#160;&#160;<br/>Note&#160;that&#160;if&#160;XcpSendCallBack&#160;is&#160;called&#160;from&#160;inside&#160;&lt;Bus&gt;XcpSend&#160;a&#160;recursion occurs,&#160;which&#160;<br/>assumes&#160;enough space&#160;on&#160;the&#160;call&#160;stack.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
<b>6.3.3&#160;</b><br/>
<b>XcpGetSessionStatus:&#160;Get&#160;session&#160;state&#160;of&#160;XCP&#160;</b><br/>
<b>XcpGetSessionStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;<br/>
SessionStatusType&#160;<b>XcpGetSessionStatus</b>&#160;&#160;(&#160;void )&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>SS_CONNECTED&#160;<br/>
XCP&#160;is&#160;connected&#160;<br/>
SS_DAQ&#160;<br/>
DAQ&#160;measurement&#160;is&#160;running&#160;<br/>
SS_POLLING&#160;<br/>
Polling&#160;is&#160;running&#160;(depending&#160;on&#160;polling&#160;rate&#160;this&#160;flag&#160;is&#160;not&#160;<br/>always&#160;set)&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;service can&#160;be&#160;used&#160;to&#160;get&#160;the&#160;session&#160;state&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer.&#160;The&#160;session&#160;state is&#160;<br/>returned as&#160;bit&#160;mask&#160;where&#160;the&#160;individual&#160;bits&#160;can&#160;be&#160;tested.&#160;<br/>E.g.&#160;this&#160;service is used&#160;by&#160;the&#160;XCP&#160;on&#160;CAN&#160;Transport&#160;Layer&#160;to&#160;determine&#160;the&#160;connection&#160;state&#160;in&#160;<br/>case&#160;multiple CAN&#160;channels&#160;are&#160;used&#160;and&#160;can&#160;be used&#160;by&#160;the&#160;application&#160;to&#160;prevent&#160;an&#160;ECU&#160;<br/>shutdown.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;to&#160;be&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
<b>&gt;&#160;&#160;</b>Enabled/Disabled&#160;by&#160;XCP_xxx_GET_SESSION_STATUS_API&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
45&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-46_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>6.3.4&#160;</b><br/>
<b>XcpSetActiveTl:&#160;Set the&#160;active&#160;Transport Layer&#160;</b><br/>
<b>XcpSetActiveTl&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpSetActiveTl</b>&#160;&#160;(&#160;uint8&#160;MaxCto,&#160;uint8&#160;MaxDto,&#160;uint8&#160;ActiveTl&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>MaxCto&#160;<br/>
Max&#160;CTO&#160;used&#160;by&#160;the&#160;respective XCP&#160;Transport&#160;Layer&#160;<br/>
MaxDto&#160;<br/>
Max&#160;DTO&#160;used&#160;by&#160;the&#160;respective XCP&#160;Transport&#160;Layer&#160;<br/>
ActiveTl&#160;<br/>
XCP_TRANSPORT_LAYER_CAN:&#160;XCP&#160;on&#160;CAN Transport Layer&#160;<br/>XCP_TRANSPORT_LAYER_FR:&#160;XCP&#160;on&#160;Fr&#160;Transport Layer&#160;<br/>XCP_TRANSPORT_LAYER_ETH:&#160;XCP&#160;on&#160;Ethernet Transport Layer&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Set&#160;the&#160;active&#160;Transport&#160;Layer&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;uses.&#160;<br/>This&#160;service is used&#160;by&#160;the&#160;XCP&#160;Transport&#160;Layers&#160;to&#160;set&#160;the&#160;Transport&#160;Layer&#160;to be&#160;used&#160;by&#160;the&#160;<br/>XCP&#160;Protocol&#160;Layer&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;to&#160;be&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
<b>6.3.5&#160;</b><br/>
<b>XcpGetActiveTl:&#160;Set the&#160;active&#160;Transport Layer&#160;</b><br/>
<b>XcpGetActiveTl&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>XcpGetActiveTl</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_TRANSPORT_LAYER_CAN:&#160;XCP&#160;on&#160;CAN Transport Layer&#160;<br/>XCP_TRANSPORT_LAYER_FR:&#160;XCP&#160;on&#160;Fr&#160;Transport Layer&#160;<br/>XCP_TRANSPORT_LAYER_ETH:&#160;XCP&#160;on&#160;Ethernet Transport Layer&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
46&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-47_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Get&#160;the&#160;active&#160;Transport&#160;Layer&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;uses.&#160;<br/>This&#160;service is used&#160;by&#160;the&#160;XCP&#160;Transport&#160;Layers&#160;to&#160;get&#160;the&#160;currently&#160;active&#160;Transport&#160;Layer&#160;used&#160;<br/>by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;to&#160;be&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.4&#160;</b><br/>
<b>XCP&#160;Transport Layer&#160;Services&#160;called by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;</b><br/>
The&#160;prototypes&#160;of&#160;the&#160;functions&#160;that&#160;are&#160;required&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;can&#160;be&#160;found&#160;in&#160;the&#160;<br/>component’s&#160;header.&#160;<br/>
&#160;<br/>
<b>6.4.1&#160;</b><br/>
<b>&lt;Bus&gt;XcpSend:&#160;Request for the&#160;transmission of a&#160;DTO&#160;or CTO&#160;message&#160;</b><br/>
<b>&lt;Bus&gt;XcpSend&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>&lt;Bus&gt;XcpSend &#160;</b>(&#160;uint8&#160;len,&#160;ROMBYTEPTR&#160;msg )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>len&#160;<br/>
Length of&#160;message&#160;data&#160;<br/>
msg&#160;<br/>
Pointer&#160;to&#160;message&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0&#160;:&#160;if&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;is&#160;idle (no&#160;transmit&#160;messages&#160;are&#160;<br/>pending)&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Requests&#160;for&#160;the&#160;transmission&#160;of&#160;a command&#160;transfer&#160;object&#160;(CTO)&#160;or&#160;data&#160;transfer&#160;object&#160;(DTO).&#160;<br/>XcpSendCallBack&#160;must&#160;be&#160;called&#160;after&#160;the&#160;successful&#160;transmission&#160;of&#160;any&#160;XCP&#160;message.&#160;The&#160;<br/>XCP&#160;Protocol&#160;Layer&#160;will&#160;not&#160;request&#160;further&#160;transmissions,&#160;until&#160;XcpSendCallBack&#160;has&#160;been&#160;<br/>called.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;(not&#160;reentrant)&#160;<br/>
<b>&gt;&#160;&#160;</b>&lt;Bus&gt;XcpSend&#160;is&#160;not&#160;defined as&#160;macro&#160;<br/>
&#160;<br/>
<b>6.4.2&#160;</b><br/>
<b>&lt;Bus&gt;XcpSendFlush:&#160;Flush transmit buffer&#160;</b><br/>
<b>&lt;Bus&gt;XcpSendFlush&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
47&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-48_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>&lt;Bus&gt;XcpSendFlush</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Flush&#160;the&#160;transmit&#160;buffer.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;function&#160;can&#160;be&#160;overwritten&#160;by&#160;the&#160;macro&#160;&lt;Bus&gt;XcpSendFlush()&#160;<br/>
&#160;<br/>
<b>6.4.3&#160;</b><br/>
<b>ApplXcpInterruptEnable:&#160;Enable&#160;interrupts&#160;</b><br/>
<b>ApplXcpInterruptEnable&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>ApplXcpInterruptEnable</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Enabling&#160;of&#160;the&#160;global&#160;interrupts.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;reentrant!&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;function&#160;ApplXcpInterruptEnable&#160;can&#160;be overwritten&#160;by&#160;the&#160;macro&#160;<br/>
ApplXcpInterruptEnable.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
48&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-49_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>6.4.4&#160;</b><br/>
<b>ApplXcpInterruptDisable:&#160;Disable&#160;interrupts&#160;</b><br/>
<b>ApplXcpInterruptDisable&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>ApplXcpInterruptDisable</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Disabling&#160;of&#160;the&#160;global&#160;interrupts.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;reentrant!&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;function&#160;ApplXcpInterruptDisable&#160;can&#160;be&#160;overwritten&#160;by&#160;the&#160;macro&#160;<br/>
ApplXcpInterruptDisable.&#160;<br/>
&#160;<br/>
<b>6.4.5&#160;</b><br/>
<b>&lt;Bus&gt;XcpTLService:&#160;Transport Layer specific&#160;commands&#160;</b><br/>
<b>&lt;Bus&gt;XcpTLService&#160;</b><br/>
Prototype&#160;<br/>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>&lt;Bus&gt;XcpTLService</b>&#160;&#160;(&#160;ROMBYTEPTR&#160;&#160;pCmd&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
Parameter&#160;<br/>pCmd&#160;<br/>
Pointer&#160;to COMMAND&#160;that&#160;has&#160;been&#160;received&#160;by&#160;the&#160;XCP&#160;Slave.&#160;<br/>
Return&#160;code&#160;<br/>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Done&#160;<br/>XCP_CMD_PENDING&#160;:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Call&#160;XcpSendCrm()&#160;when done&#160;<br/>XCP_CMD_SYNTAX&#160;:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Error&#160;<br/>XCP_CMD_BUSY&#160;:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;not&#160;executed&#160;<br/>XCP_CMD_UNKNOWN&#160;:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;not&#160;implemented&#160;optional&#160;command&#160;<br/>XCP_CMD_OUT_OF_RANGE&#160;:&#160;&#160;command&#160;parameters&#160;out&#160;of&#160;range&#160;<br/>
Functional&#160;Description&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
49&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-50_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Transport&#160;Layer&#160;specific&#160;command&#160;that&#160;is&#160;processed&#160;within the&#160;XCP&#160;Transport&#160;Layer.&#160;<br/>&#160;<br/>Particularities&#160;and&#160;Limitations&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_TL_COMMAND&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5&#160;</b><br/>
<b>Application Services&#160;called by&#160;the&#160;XCP&#160;Protocol Layer&#160;</b><br/>
The&#160;prototypes&#160;of&#160;the&#160;functions&#160;that&#160;are&#160;required&#160;by&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;can&#160;be&#160;found&#160;<br/>in&#160;the&#160;header.&#160;<br/>The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;provides&#160;&#160;application&#160;&#160;callback&#160;&#160;functions&#160;&#160;in&#160;&#160;order&#160;&#160;to&#160;&#160;perform&#160;<br/>application&#160;and&#160;hardware specific&#160;tasks.&#160;<br/>Note:&#160;All&#160;services&#160;within&#160;this&#160;chapter&#160;are&#160;called&#160;from&#160;task&#160;or&#160;interrupt&#160;level.&#160;All&#160;services&#160;are&#160;<br/>not&#160;reentrant.&#160;<br/>
<b>6.5.1&#160;</b><br/>
<b>ApplXcpGetPointer:&#160;Pointer&#160;conversion&#160;</b><br/>
<b>ApplXcpGetPointer&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;MTABYTEPTR&#160;<b>ApplXcpGetPointer&#160;&#160;</b>(&#160;uint8 addr_ext,&#160;uint32&#160;addr&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr_ext&#160;<br/>
8 bit&#160;address&#160;extension&#160;<br/>
addr&#160;<br/>
32&#160;bit&#160;address&#160;<br/>
<b>Return&#160;code&#160;<br/></b>MTABYTEPTR&#160;<br/>
Pointer&#160;to&#160;the&#160;address&#160;specified&#160;by&#160;the&#160;parameters&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;converts&#160;a&#160;memory&#160;address&#160;from&#160;XCP&#160;format&#160;(32-bit&#160;address&#160;plus 8-bit&#160;address&#160;<br/>extension)&#160;to&#160;a C&#160;style pointer.&#160;An MCS&#160;like CANape usually&#160;reads this&#160;memory&#160;addresses&#160;from&#160;<br/>the&#160;ASAP2 database&#160;or&#160;from&#160;a linker&#160;map&#160;file.&#160;<br/>The&#160;address&#160;extension&#160;may&#160;be&#160;used&#160;to&#160;distinguish different&#160;address&#160;spaces or&#160;memory&#160;types.&#160;In&#160;<br/>most&#160;cases,&#160;the&#160;address&#160;extension&#160;is&#160;not&#160;used and may&#160;be&#160;ignored.&#160;<br/>This&#160;function&#160;is&#160;used&#160;for&#160;memory&#160;transfers&#160;like DOWNLOAD&#160;and UPLOAD.&#160;<br/>Example:&#160;&#160;<br/>The&#160;following&#160;code shows&#160;an&#160;example of&#160;a&#160;typical&#160;implementation of&#160;ApplXcpGetPointer:&#160;<br/>MTABYTEPTR ApplXcpGetPointer( uint8 addr_ext, uint32 addr )&#160;<br/>{&#160;<br/>&#160;&#160;return (MTABYTEPTR)addr;&#160;<br/>}&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
50&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-51_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;overwritten&#160;by&#160;defining&#160;ApplXcpGetPointer&#160;as&#160;macro.&#160;<br/>
&#160;<br/>
<b>6.5.2&#160;</b><br/>
<b>ApplXcpGetIdData:&#160;Get&#160;Identification&#160;</b><br/>
<b>ApplXcpGetIdData&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint32&#160;<b>ApplXcpGetIdData</b>&#160;&#160;(&#160;MTABYTEPTR&#160;*pData,&#160;uint8&#160;id&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>pData&#160;<br/>
Pointer&#160;to identification&#160;information&#160;<br/>
id&#160;<br/>
Id of&#160;requested&#160;information&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint32&#160;<br/>
length&#160;of&#160;identification&#160;information&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Returns&#160;a pointer&#160;to&#160;identification information.&#160;<br/>Refer&#160;to&#160;chapter<a href="TechnicalReference_Asr_Xcps.html#14">&#160;3.4.2.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_GET_ID_GENERIC&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.3&#160;</b><br/>
<b>ApplXcpGetSeed:&#160;Generate a&#160;seed&#160;</b><br/>
<b>ApplXcpGetSeed&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;ApplXcpGetSeed&#160;&#160;(&#160;const&#160;uint8&#160;resource,&#160;<br/>
&#160;P2VAR(uint8,&#160;AUTOMATIC,&#160;XCP_APPL_DATA)&#160;seed )&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
51&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-52_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Parameter&#160;<br/></b>Resource&#160;<br/>
Resource&#160;for&#160;which the&#160;seed has&#160;to be&#160;generated&#160;<br/>XCP&#160;Professional&#160;and&#160;XPC&#160;Basic&#160;<br/>RM_CAL_PAG&#160;:&#160;&#160;&#160;to unlock&#160;the&#160;resource&#160;calibration/paging&#160;<br/>RM_DAQ&#160;:&#160;&#160;<br/>
to unlock&#160;the&#160;resource&#160;data&#160;acquisition&#160;<br/>
XCP&#160;Professional&#160;only&#160;<br/>RM_STIM&#160;:&#160;<br/>
to unlock&#160;the&#160;resource&#160;stimulation&#160;<br/>
RM_PGM&#160;:&#160;&#160;<br/>
to unlock&#160;the&#160;resource&#160;programming&#160;<br/>
Seed&#160;<br/>
Pointer&#160;to RAM&#160;where the&#160;seed has&#160;to be&#160;generated&#160;to.&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
The&#160;length&#160;of&#160;the&#160;generated&#160;seed&#160;that&#160;is&#160;returned&#160;by&#160;<i>seed</i>.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Generate a&#160;seed&#160;for&#160;the&#160;appropriate&#160;resource.&#160;<br/>The&#160;seed has&#160;a&#160;maximum&#160;length&#160;of&#160;MAX_CTO-2 bytes.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_SEED_KEY&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.4&#160;</b><br/>
<b>ApplXcpUnlock:&#160;Valid key&#160;and unlock&#160;resource&#160;</b><br/>
<b>ApplXcpUnlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;ApplXcpUnlock&#160;&#160;(P2CONST(uint8,&#160;AUTOMATIC,&#160;<br/>
XCP_APPL_DATA)&#160;key,&#160;const&#160;uint8 length&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>key&#160;<br/>
Pointer&#160;to&#160;the&#160;key.&#160;<br/>
length&#160;<br/>
Length of&#160;the&#160;key.&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP&#160;Professional&#160;and&#160;XPC&#160;Basic&#160;<br/>0&#160;:&#160;&#160;<br/>
if&#160;the&#160;key&#160;is&#160;not&#160;valid&#160;<br/>
RM_CAL_PAG&#160;:&#160;&#160;&#160;to unlock&#160;the&#160;resource&#160;calibration/paging&#160;<br/>RM_DAQ&#160;:&#160;&#160;<br/>
to unlock&#160;the&#160;resource&#160;data&#160;acquisition&#160;<br/>
XCP&#160;Professional&#160;only&#160;<br/>RM_STIM&#160;:&#160;<br/>
to unlock&#160;the&#160;resource&#160;stimulation&#160;<br/>
RM_PGM&#160;:&#160;&#160;<br/>
to&#160;unlock&#160;the&#160;resource&#160;programming&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
52&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-53_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Check&#160;the&#160;key&#160;and&#160;return the&#160;resource&#160;that&#160;has&#160;to be&#160;unlocked.&#160;<br/>Only&#160;one resource&#160;may&#160;be&#160;unlocked&#160;at&#160;one&#160;time.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_SEED_KEY&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.5&#160;</b><br/>
<b>ApplXcpCheckReadEEPROM:&#160;Check&#160;read&#160;access&#160;from&#160;EEPROM&#160;</b><br/>
<b>ApplXcpCheckReadEEPROM&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCheckReadEEPROM</b>&#160;&#160;(&#160;MTABYTEPTR&#160;addr,&#160;<br/>
&#160;<br/>
uint8&#160;size,&#160;<br/>
&#160;<br/>
BYTEPTR&#160;data&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr&#160;<br/>
Address&#160;that&#160;is&#160;checked&#160;<br/>
size&#160;<br/>
Number&#160;of&#160;bytes&#160;<br/>
data&#160;<br/>
Pointer&#160;to data&#160;<br/>(if&#160;the&#160;address&#160;is&#160;on&#160;the&#160;EEPROM&#160;the&#160;data is&#160;written&#160;here)&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;&#160;<br/>
EEPROM&#160;read&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;This&#160;is&#160;not&#160;EEPROM&#160;<br/>XCP_CMD_PENDING&#160;:&#160;&#160;EEPROM&#160;read in&#160;progress,&#160;call&#160;XcpSendCrm&#160;&#160;<br/>&#160;<br/>
when done&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Checks&#160;whether&#160;the&#160;address lies within the&#160;EEPROM&#160;memory&#160;or&#160;in&#160;the&#160;RAM&#160;area.&#160;<br/>If&#160;the&#160;area&#160;is&#160;within the&#160;EEPROM&#160;area&#160;size&#160;data&#160;byte are&#160;read&#160;from&#160;addr&#160;and written&#160;to&#160;data.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_READ_EEPROM&#160;has&#160;to be defined&#160;<br/>
&#160;<br/>
<b>6.5.6&#160;</b><br/>
<b>ApplXcpCheckWriteEEPROM:&#160;Check&#160;write&#160;access&#160;to the&#160;EEPROM&#160;</b><br/>
<b>ApplXcpCheckWriteEEPROM&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCheckWriteEEPROM</b>&#160;&#160;(&#160;MTABYTEPTR&#160;addr,&#160;<br/>
&#160;<br/>
uint8&#160;size,&#160;&#160;ROMBYTEPTR&#160;data)&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
53&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-54_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr&#160;<br/>
Address&#160;that&#160;is&#160;checked&#160;<br/>
size&#160;<br/>
number&#160;of&#160;bytes&#160;<br/>
data&#160;<br/>
pointer&#160;to data&#160;<br/>(if&#160;addr&#160;is&#160;on&#160;the&#160;EEPROM&#160;this&#160;data&#160;is&#160;written&#160;to&#160;addr)&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;&#160;<br/>
EEPROM&#160;written&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;This&#160;is&#160;not&#160;EEPROM&#160;<br/>XCP_CMD_PENDING&#160;:&#160;&#160;EEPROM&#160;write in&#160;progress,&#160;call&#160;XcpSendCrm&#160;&#160;<br/>&#160;<br/>
when done&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Checks&#160;whether&#160;the&#160;address&#160;addr&#160;is&#160;within the&#160;EEPROM&#160;memory.&#160;If&#160;not,&#160;the&#160;function&#160;returns&#160;<br/>XCP_CMD_DENIED.&#160;If&#160;it&#160;lies within,&#160;EEPROM&#160;programming&#160;is&#160;performed.&#160;The&#160;function&#160;may&#160;return&#160;<br/>during&#160;programming&#160;with&#160;XCP_CMD_PENDING&#160;or&#160;may&#160;wait&#160;until&#160;the&#160;programming&#160;sequence&#160;has&#160;<br/>finished&#160;and&#160;then&#160;returns&#160;with&#160;XCP_CMD_OK.&#160;&#160;<br/>If&#160;the&#160;programming&#160;sequence has&#160;finished,&#160;the&#160;XcpSendCrm&#160;function&#160;must&#160;be&#160;called.&#160;<br/>XcpSendCrm&#160;is&#160;an&#160;internal&#160;function&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_WRITE_EEPROM&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.7&#160;</b><br/>
<b>ApplXcpCheckWriteAccess:&#160;Check&#160;address&#160;for valid&#160;write&#160;access&#160;</b><br/>
<b>ApplXcpCheckWriteAccess&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCheckWriteAccess</b>&#160;&#160;(&#160;MTABYTEPTR&#160;address,&#160;<br/>
&#160;<br/>
uint8&#160;size&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>address&#160;<br/>
address&#160;<br/>
size&#160;<br/>
number&#160;of&#160;bytes&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;&#160;if&#160;access&#160;is&#160;denied&#160;<br/>XCP_CMD_OK&#160;:&#160;<br/>
if&#160;access&#160;is&#160;granted&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
54&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-55_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Check&#160;addresses&#160;for&#160;valid write access.&#160;A&#160;write access is&#160;enabled&#160;with the&#160;<br/>XCP_ENABLE_WRITE_PROTECTION,&#160;it&#160;should be&#160;only&#160;used,&#160;if&#160;write protection&#160;of&#160;memory&#160;<br/>areas&#160;is&#160;required&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_WRITE_PROTECTION&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Can&#160;be&#160;overwritten&#160;by&#160;the macro&#160;ApplXcpCheckWriteAccess&#160;<br/>
&#160;<br/>
<b>6.5.8&#160;</b><br/>
<b>ApplXcpCheckReadAccess:&#160;Check&#160;address&#160;for valid read&#160;access&#160;</b><br/>
<b>ApplXcpCheckReadAccess&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCheckReadAccess</b>&#160;&#160;(&#160;MTABYTEPTR&#160;address,&#160;<br/>
&#160;<br/>
uint8&#160;size&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>address&#160;<br/>
address&#160;<br/>
size&#160;<br/>
number&#160;of&#160;bytes&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;if&#160;access&#160;is&#160;denied&#160;<br/>XCP_CMD_OK&#160;:&#160;<br/>
if&#160;access&#160;is&#160;granted&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Check&#160;addresses&#160;for&#160;valid read&#160;access.&#160;A&#160;read&#160;access is enabled&#160;with the&#160;<br/>XCP_ENABLE_READ_PROTECTION,&#160;it&#160;should be&#160;only&#160;used,&#160;if&#160;read protection&#160;of&#160;memory&#160;areas&#160;<br/>is&#160;required&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_READ_PROTECTION&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Can&#160;be&#160;overwritten&#160;by&#160;the macro&#160;ApplXcpCheckReadAccess&#160;<br/>
&#160;<br/>
<b>6.5.9&#160;</b><br/>
<b>ApplXcpCheckDAQAccess:&#160;Check&#160;address&#160;for valid read&#160;or&#160;write&#160;access&#160;</b><br/>
<b>ApplXcpCheckDAQAccess&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCheckDAQAccess</b>&#160;&#160;(&#160;DAQBYTEPTR&#160;address,&#160;<br/>
&#160;<br/>
uint8&#160;size )&#160;<br/>
Multi&#160;Channel&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
55&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-56_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code&#160;replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>address&#160;<br/>
address&#160;<br/>
size&#160;<br/>
number&#160;of&#160;bytes&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;if&#160;access&#160;is&#160;denied&#160;<br/>XCP_CMD_OK&#160;:&#160;<br/>
if&#160;access&#160;is&#160;granted&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Check&#160;addresses&#160;for&#160;valid read&#160;or&#160;write access.&#160;This&#160;callback&#160;is&#160;called&#160;when a&#160;WRITE_DAQ&#160;<br/>command&#160;is&#160;performed.&#160;Therefore it&#160;is&#160;not&#160;possible to&#160;know&#160;whether&#160;this&#160;is&#160;a&#160;read or&#160;write&#160;<br/>access.&#160;Out&#160;of&#160;this&#160;reason this&#160;unified&#160;function&#160;is&#160;called.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_READ_PROTECTION&#160;or&#160;XCP_ENABLE_WRITE_PROTECTION&#160;has&#160;to&#160;<br/>
be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.10&#160;&#160;ApplXcpCheckProgramAccess:&#160;Check&#160;address&#160;for valid&#160;write&#160;access&#160;</b><br/>
<b>ApplXcpCheckProgramAccess&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCheckProgramAccess</b>&#160;&#160;(&#160;MTABYTEPTR&#160;address,&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;uint32&#160;size )&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>address&#160;<br/>
address&#160;<br/>
size&#160;<br/>
number&#160;of&#160;bytes&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;if&#160;access&#160;is&#160;denied&#160;<br/>XCP_CMD_OK&#160;:&#160;<br/>
if&#160;access&#160;is&#160;granted&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Check&#160;addresses&#160;for&#160;valid write access.&#160;A&#160;write access is&#160;enabled&#160;with the&#160;<br/>XCP_ENABLE_PROGRAMMING_WRITE_PROTECTION,&#160;it&#160;should be&#160;only&#160;used,&#160;if&#160;write protection&#160;<br/>of&#160;memory&#160;areas&#160;is&#160;required&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_PROGRAMMING_WRITE_PROTECTION&#160;has&#160;to be&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>Can&#160;be&#160;overwritten&#160;by&#160;the macro&#160;ApplXcpCheckWriteAccess&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
56&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-57_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.5.11&#160;&#160;ApplXcpUserService: User defined command&#160;</b><br/>
<b>ApplXcpUserService&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpUserService</b>&#160;(&#160;ROMBYTEPTR&#160;pCmd&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>pCmd&#160;<br/>
Pointer&#160;to&#160;XCP&#160;command packet&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;&#160;<br/>
positive&#160;response&#160;<br/>
XCP_CMD_PENDING&#160;:&#160;&#160;Call&#160;XcpSendCrm()&#160;when done&#160;<br/>XCP_CMD_SYNTAX&#160;:&#160;&#160;negative response&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Application specific&#160;user&#160;command.&#160;<br/>Please refer&#160;t<a href="TechnicalReference_Asr_Xcps.html#18">o&#160;3.12&#160;User&#160;Defined Command.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_USER_COMMAND&#160;has&#160;to&#160;be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.12&#160;&#160;ApplXcpOpenCmdIf:&#160;XCP&#160;command&#160;extension interface&#160;</b><br/>
<b>ApplXcpOpenCmdIf&#160;</b><br/>
Prototype&#160;<br/>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpOpenCmdIf</b>&#160;&#160;(&#160;ROMBYTEPTR&#160;&#160;pCmd&#160;<br/>
BYTEPTR&#160;pRes,&#160;BYTEPTR&#160;pLength&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
Parameter&#160;<br/>pCmd&#160;<br/>
Pointer&#160;to COMMAND&#160;that&#160;has&#160;been&#160;received&#160;by&#160;the&#160;XCP&#160;Slave.&#160;<br/>
pRes&#160;<br/>
Pointer&#160;to&#160;response&#160;buffer&#160;that&#160;will&#160;be&#160;sent&#160;by&#160;the&#160;XCP&#160;Slave.&#160;<br/>
pLength&#160;<br/>
Number&#160;of&#160;bytes&#160;that&#160;will&#160;be&#160;sent&#160;in&#160;the&#160;response.&#160;<br/>
Return&#160;code&#160;<br/>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Done&#160;<br/>XCP_CMD_PENDING&#160;:&#160;&#160;&#160;Call&#160;XcpSendCrm()&#160;when done&#160;<br/>XCP_CMD_ERROR&#160;:&#160;&#160;&#160;&#160;&#160;&#160;Error&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
57&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-58_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Functional&#160;Description&#160;<br/>Call&#160;back&#160;that&#160;can&#160;be&#160;used&#160;to&#160;extend the&#160;XCP&#160;commands&#160;of&#160;the&#160;XCP&#160;protocol&#160;layer.&#160;<br/>&#160;<br/>Particularities&#160;and&#160;Limitations&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;<br/>
<b>&gt;&#160;&#160;</b>Call&#160;context:&#160;Task&#160;and interrupt&#160;level&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_OPENCMDIF&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.13&#160;&#160;ApplXcpSendStall: Resolve&#160;a&#160;transmit stall&#160;condition&#160;</b><br/>
<b>ApplXcpSendStall&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive&#160;Channel&#160;&#160;uint8&#160;<b>ApplXcpSendStall</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
Parameter&#160;<br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0 :&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;successful&#160;<br/>&gt;&#160;0&#160;:&#160;&#160;successful&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Resolve a&#160;transmit&#160;stall&#160;condition&#160;in&#160;XcpPutchar&#160;or&#160;XcpSendEvent.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_SEND_EVENT&#160;or&#160;XCP_ENABLE_SERV_TEXT_PUTCHAR&#160;and&#160;<br/>
XCP_ENABLE_SEND_QUEUE&#160;are&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;function&#160;can&#160;be&#160;overwritten&#160;by&#160;the&#160;macro&#160;ApplXcpSendStall()&#160;<br/>
&#160;<br/>
<b>6.5.14&#160;&#160;ApplXcpDisableNormalOperation:&#160;Disable&#160;normal&#160;operation of&#160;the&#160;ECU&#160;</b><br/>
<b>ApplXcpDisableNormalOperation&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpDisableNormalOperation</b>&#160;&#160;(&#160;MTABYTEPTR&#160;a,&#160;<br/>
&#160;<br/>
uint16&#160;size )&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
58&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-59_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Parameter&#160;<br/></b>a&#160;<br/>
Address&#160;(where the&#160;flash&#160;kernel&#160;is&#160;downloaded to)&#160;<br/>
size&#160;<br/>
Size (of&#160;the&#160;flash&#160;kernel)&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;<br/>
download of&#160;flash&#160;kernel&#160;confirmed&#160;<br/>
XCP_CMD_DENIED&#160;:&#160;&#160;download of&#160;flash&#160;kernel&#160;refused&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Prior&#160;to&#160;the&#160;flash&#160;kernel&#160;download has&#160;the&#160;ECU’s&#160;normal&#160;operation&#160;to&#160;be&#160;stopped in&#160;order&#160;to&#160;<br/>avoid misbehavior&#160;due to&#160;data&#160;inconsistencies.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_BOOTLOADER_DOWNLAOD&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.15&#160;&#160;ApplXcpStartBootLoader: Start of&#160;boot&#160;loader&#160;</b><br/>
<b>ApplXcpStartBootLoader&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpStartBootLoader</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
This&#160;function&#160;should not&#160;return.&#160;<br/>0&#160;:&#160;<br/>
negative response&#160;<br/>
&gt; 0&#160;:&#160;<br/>
positive response&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Start&#160;of&#160;the&#160;boot&#160;loader.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_BOOTLOADER_DOWNLAOD&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.16&#160;&#160;ApplXcpReset:&#160;Perform&#160;ECU&#160;reset&#160;</b><br/>
<b>ApplXcpReset&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive&#160;Channel&#160;&#160;void&#160;<b>ApplXcpReset</b>&#160;&#160;(&#160;void )&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
59&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-60_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Perform&#160;an&#160;ECU&#160;reset&#160;after&#160;reprogramming of&#160;the&#160;application.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_PROGRAM&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.17&#160;&#160;ApplXcpProgramStart:&#160;Prepare&#160;flash programming&#160;</b><br/>
<b>ApplXcpProgramStart&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpProgramStart</b>&#160;&#160;(&#160;void&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;&#160;<br/>
Preparation&#160;done&#160;<br/>
XCP_CMD_PENDING&#160;:&#160;&#160;&#160;Call&#160;XcpSendCrm()&#160;when done&#160;<br/>XCP_CMD_ERROR&#160;:&#160;&#160;&#160;Flash&#160;programming&#160;not&#160;possible&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Prepare&#160;the&#160;ECU&#160;for&#160;flash programming.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_PROGRAM&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.18&#160;&#160;ApplXcpFlashClear:&#160;Clear flash memory&#160;</b><br/>
<b>ApplXcpFlashClear&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
60&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-61_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpFlashClear</b>&#160;&#160;(&#160;MTABYTEPTR&#160;address,&#160;<br/>
&#160;<br/>
uint32&#160;size )&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>address&#160;<br/>
Address&#160;<br/>
size&#160;<br/>
Size&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;<br/>
Flash&#160;memory&#160;erase done&#160;<br/>
XCP_CMD_PENDING&#160;:&#160;&#160;Call&#160;XcpSendCrm()&#160;when done&#160;<br/>XCP_CMD_ERROR&#160;:&#160;&#160;Flash&#160;memory&#160;erase error&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Clear&#160;the&#160;flash&#160;memory,&#160;before&#160;the&#160;flash&#160;memory&#160;will&#160;be&#160;reprogrammed.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_PROGRAM&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.19&#160;&#160;ApplXcpFlashProgram:&#160;Program&#160;flash memory&#160;</b><br/>
<b>ApplXcpFlashProgram&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpFlashProgram</b>&#160;&#160;(&#160;ROMBYTEPTR&#160;data,&#160;<br/>
&#160;<br/>
MTABYTEPTR&#160;address,&#160;<br/>
&#160;<br/>
uint8&#160;size )&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>data&#160;<br/>
Pointer&#160;to data&#160;<br/>
address&#160;<br/>
Address&#160;<br/>
size&#160;<br/>
Size&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK&#160;:&#160;<br/>
Flash&#160;memory&#160;programming&#160;finished&#160;<br/>
XCP_CMD_PENDING&#160;:&#160;Flash&#160;memory&#160;programming&#160;in progress.&#160;<br/>&#160;<br/>
XcpSendCrm&#160;has&#160;to be&#160;called&#160;when done.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
61&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-62_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Program&#160;the&#160;cleared&#160;flash memory.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_PROGRAM&#160;has&#160;to be&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.20&#160;&#160;ApplXcpDaqResume: Resume&#160;automatic&#160;data transfer&#160;</b><br/>
<b>ApplXcpDaqResume&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpDaqResume</b>&#160;&#160;(&#160;tXcpDaq&#160;*&#160;daq )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>daq&#160;<br/>
Pointer&#160;to dynamic&#160;DAQ&#160;list&#160;structure&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0 :&#160;<br/>
failed&#160;<br/>
&gt;0&#160;:&#160;<br/>
Ok&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Resume&#160;the&#160;automatic&#160;data&#160;transfer.&#160;<br/>The&#160;whole dynamic&#160;DAQ&#160;list&#160;structure&#160;that&#160;had been&#160;stored&#160;in non-volatile&#160;memory&#160;within the&#160;<br/>service&#160;ApplXcpDaqResumeStore(..)&#160;has&#160;to&#160;be&#160;restored&#160;to&#160;RAM.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_RESUME&#160;are&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.21&#160;&#160;ApplXcpDaqResumeStore:&#160;Store&#160;DAQ&#160;lists&#160;for resume&#160;mode&#160;</b><br/>
<b>ApplXcpDaqResumeStore&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;ApplXcpDaqResumeStore&#160;&#160;(P2CONST(tXcpDaq,&#160;AUTOMATIC,&#160;<br/>
XCP_APPL_DATA)&#160;daq,&#160;uint16&#160;size,&#160;uint8&#160;measurementStart&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>daq&#160;<br/>
Pointer&#160;to dynamic&#160;DAQ&#160;list&#160;structure.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
62&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-63_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
size&#160;<br/>
Size of&#160;DAQ&#160;data&#160;that&#160;needs&#160;to&#160;be&#160;stored&#160;<br/>
MeasurementStart&#160;<br/>
If&#160;&gt;&#160;0&#160;then set&#160;flag&#160;to start&#160;measurement&#160;during&#160;next&#160;init&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;application&#160;callback&#160;service has&#160;to&#160;store&#160;the&#160;whole dynamic&#160;DAQ&#160;list&#160;structure&#160;in non-<br/>volatile memory&#160;for&#160;the&#160;DAQ&#160;resume&#160;mode.&#160;Any&#160;old DAQ&#160;list&#160;configuration&#160;that&#160;might&#160;have&#160;<br/>been&#160;stored&#160;in&#160;non-volatile memory&#160;before&#160;this&#160;command,&#160;must&#160;not&#160;be&#160;applicable anymore.&#160;<br/>After&#160;a&#160;cold start&#160;or&#160;reset&#160;the&#160;dynamic&#160;DAQ&#160;list&#160;structure&#160;has&#160;to&#160;be&#160;restored&#160;by&#160;the&#160;application&#160;<br/>callback&#160;service&#160;ApplXcpDaqResume(..)&#160;when&#160;the&#160;flag&#160;measurementStart&#160;is&#160;&gt;&#160;0.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_RESUME&#160;are&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.22&#160;&#160;ApplXcpDaqResumeClear:&#160;Clear stored DAQ&#160;lists&#160;</b><br/>
<b>ApplXcpDaqResumeClear&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>ApplXcpDaqResumeClear</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;whole dynamic&#160;DAQ&#160;list&#160;structure&#160;that&#160;had been&#160;stored&#160;in non-volatile&#160;memory&#160;within the&#160;<br/>service&#160;ApplXcpDaqResumeStore(..)&#160;has&#160;to&#160;be&#160;cleared.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_RESUME&#160;are&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.23&#160;&#160;ApplXcpCalResumeStore:&#160;Store&#160;Calibration data&#160;for resume&#160;mode&#160;</b><br/>
<b>ApplXcpCalResumeStore&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single&#160;Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCalResumeStore</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
63&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-64_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0 :&#160;&#160;&#160;&#160;Storing&#160;not&#160;yet&#160;finished (STORE_CAL_REQ&#160;flag&#160;kept)&#160;<br/>&gt;0&#160;:&#160;&#160;Storing&#160;finished&#160;(STORE_CAL_REQ&#160;flag cleared)&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;application&#160;callback&#160;service has&#160;to&#160;store&#160;the&#160;current&#160;calibration&#160;data&#160;in&#160;non-volatile&#160;<br/>memory&#160;for&#160;the&#160;resume&#160;mode.&#160;<br/>After&#160;a&#160;cold start&#160;or&#160;reset&#160;the&#160;calibration&#160;data has&#160;to be&#160;restored&#160;by&#160;the&#160;application.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_RESUME&#160;are&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.24&#160;&#160;ApplXcpGetTimestamp:&#160;Returns&#160;the&#160;current&#160;timestamp&#160;</b><br/>
<b>ApplXcpGetTimestamp&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single&#160;Channel&#160;<br/>Single Receive Channel&#160;&#160;XcpDaqTimestampType&#160;<b>ApplXcpGetTimestamp</b>&#160;&#160;(&#160;void )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;<br/></b>XcpDaqTimestampType&#160;timestamp&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Returns&#160;the&#160;current&#160;timestamp.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_TIMESTAMP&#160;are defined&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;parameter&#160;kXcpDaqTimestampSize&#160;defines&#160;the&#160;timestamp&#160;size.&#160;It&#160;can&#160;either&#160;be&#160;<br/>
DAQ_TIMESTAMP_BYTE,&#160;DAQ_TIMESTAMP_WORD,&#160;DAQ_TIMESTAMP_DWORD&#160;<br/>
&#160;<br/>
<b>6.5.25&#160;&#160;ApplXcpGetCalPage: Get calibration page&#160;</b><br/>
<b>ApplXcpGetCalPage&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
64&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-65_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpGetCalPage</b>&#160;&#160;(&#160;uint8&#160;segment,&#160;uint8 mode&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>segment&#160;<br/>
Logical&#160;data segment&#160;number&#160;<br/>
mode&#160;<br/>
Access&#160;mode&#160;<br/>The&#160;access&#160;mode&#160;can&#160;be one of&#160;the&#160;following&#160;values:&#160;<br/>CAL_ECU&#160;:&#160;ECU&#160;access&#160;<br/>CAL_XCP&#160;:&#160;XCP&#160;access&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
Logical&#160;data page&#160;number&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;returns&#160;the&#160;logical&#160;number&#160;of&#160;the&#160;calibration&#160;data page&#160;that&#160;is&#160;currently&#160;activated&#160;<br/>for&#160;the&#160;specified&#160;access&#160;mode and&#160;data&#160;segment.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_TIMESTAMP&#160;are defined&#160;<br/>
&#160;<br/>
<b>6.5.26&#160;&#160;ApplXcpSetCalPage:&#160;Set calibration page&#160;</b><br/>
<b>ApplXcpSetCalPage&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpSetCalPage</b>&#160;&#160;(&#160;uint8&#160;segment,&#160;<br/>
&#160;<br/>
uint8&#160;page,&#160;uint8&#160;mode&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>segment&#160;<br/>
Logical&#160;data segment&#160;number&#160;<br/>
Page&#160;<br/>
Logical&#160;data page&#160;number&#160;<br/>
mode&#160;<br/>
Access&#160;mode&#160;<br/>CAL_ECU&#160;:&#160;the&#160;given&#160;page&#160;will&#160;be&#160;used by&#160;the&#160;slave device application&#160;<br/>CAL_XCP&#160;:&#160;the&#160;slave device&#160;XCP&#160;driver&#160;will&#160;access&#160;the&#160;given&#160;page&#160;<br/>Both&#160;flags&#160;may&#160;be&#160;set&#160;simultaneously&#160;or&#160;separately.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
65&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-66_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0&#160;:&#160;&#160;<br/>
Ok&#160;<br/>
CRC_OUT_OF_RANGE&#160;:&#160;&#160;<br/>
segment&#160;out&#160;of&#160;range&#160;<br/>
&#160;<br/>
(&#160;only&#160;one segment&#160;supported)&#160;<br/>
CRC_PAGE_NOT_VALID&#160;:&#160;&#160;<br/>
Selected&#160;page not&#160;available&#160;<br/>
CRC_PAGE_MODE_NOT_VALID&#160;:&#160;&#160;&#160;Selected&#160;page&#160;mode&#160;not&#160;available&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Set&#160;the&#160;access&#160;mode&#160;for&#160;a calibration&#160;data segment.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_DAQ&#160;and&#160;XCP_ENABLE_DAQ_TIMESTAMP&#160;are&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.27&#160;&#160;ApplXcpCopyCalPage:&#160;Copying of calibration data pages&#160;</b><br/>
<b>ApplXcpCopyCalPage&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpCopyCalPage</b>&#160;&#160;(&#160;uint8&#160;srcSeg,&#160;uint8&#160;srcPage&#160;<br/>
&#160;<br/>
uint8&#160;destSeg,&#160;uint8 destPage&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>srcSeg&#160;<br/>
Source segment&#160;<br/>
srcPage&#160;<br/>
Source page&#160;<br/>
destSeg&#160;<br/>
Destination segment&#160;<br/>
destPage&#160;<br/>
Destination page&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
0&#160;:&#160;&#160;<br/>
Ok&#160;<br/>
XCP_CMD_PENDING&#160;:&#160;&#160;<br/>
Call&#160;XcpSendCrm()&#160;when done&#160;<br/>
CRC_PAGE_NOT_VALID&#160;:&#160;&#160;<br/>
Page not&#160;available&#160;<br/>
CRC_SEGMENT_NOT_VALID&#160;:&#160;&#160;Segment&#160;not&#160;available&#160;<br/>CRC_WRITE_PROTECTED&#160;:&#160;&#160;&#160;Destination page is&#160;write protected.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Copying&#160;of&#160;calibration&#160;data pages.&#160;<br/>The&#160;pages are&#160;copied&#160;from&#160;source&#160;to&#160;destination.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_PAGE_COPY&#160;and&#160;XCP_ENABLE_DAQ_TIMEOUT&#160;are&#160;defined&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
66&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-67_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.5.28&#160;&#160;ApplXcpSetFreezeMode:&#160;Setting the&#160;freeze&#160;mode&#160;of&#160;a&#160;segment&#160;</b><br/>
<b>ApplXcpSetFreezeMode&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>ApplXcpSetFreezeMode</b>&#160;(&#160;uint8&#160;segment,&#160;uint8&#160;mode&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>segment&#160;<br/>
Segment&#160;to&#160;set&#160;freeze mode&#160;<br/>
mode&#160;<br/>
New&#160;freeze&#160;mode&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Setting&#160;the&#160;freeze&#160;mode&#160;of&#160;a&#160;certain segment.&#160;Application must&#160;store&#160;the&#160;current&#160;freeze mode&#160;<br/>of&#160;each&#160;segment.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_PAGE_FREEZE&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.29&#160;&#160;ApplXcpGetFreezeMode:&#160;Reading the&#160;freeze&#160;mode&#160;of&#160;a&#160;segment&#160;</b><br/>
<b>ApplXcpGetFreezeMode&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;uint8&#160;<b>ApplXcpGetFreezeMode</b>&#160;(&#160;uint8&#160;segment&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>segment&#160;<br/>
Segment&#160;to&#160;read&#160;freeze mode&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
Return&#160;the&#160;current&#160;freeze mode,&#160;set&#160;by&#160;ApplXcpSetFreezeMode().&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Reading&#160;the&#160;freeze&#160;mode of&#160;a certain&#160;segment.&#160;Application&#160;must&#160;store&#160;the&#160;current&#160;freeze&#160;mode&#160;<br/>of&#160;each&#160;segment&#160;and&#160;report&#160;it&#160;by&#160;the&#160;return value&#160;of&#160;this&#160;function.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_PAGE_FREEZE&#160;is&#160;defined&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
67&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-68_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.5.30&#160;&#160;ApplXcpRead:&#160;Read&#160;a&#160;single&#160;byte from&#160;memory&#160;</b><br/>
<b>ApplXcpRead&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Channel&#160;<br/>
uint8&#160;<b>ApplXcpRead</b>&#160;&#160;(&#160;uint32&#160;addr&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr&#160;<br/>
32&#160;Bit&#160;address&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
Pointer&#160;to&#160;the&#160;address&#160;specified&#160;by&#160;the&#160;parameters&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Read a&#160;single byte&#160;from&#160;the&#160;memory.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_MEM_ACCESS_BY_APPL&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.31&#160;&#160;ApplXcpWrite:&#160;Write&#160;a&#160;single&#160;byte to RAM&#160;</b><br/>
<b>ApplXcpWrite&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Channel&#160;<br/>
void&#160;<b>ApplXcpWrite</b>&#160;&#160;(&#160;uint32&#160;addr,&#160;uint8&#160;data&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr&#160;<br/>
32&#160;Bit&#160;address&#160;<br/>
data&#160;<br/>
data&#160;to be&#160;written&#160;to&#160;memory&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Write a&#160;single byte&#160;to RAM.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
68&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-69_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_MEM_ACCESS_BY_APPL&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.32&#160;&#160;ApplXcpCalibrationRead:&#160;Read&#160;multiple&#160;bytes&#160;from memory&#160;</b><br/>
<b>ApplXcpCalibrationRead&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Channel&#160;<br/>
uint8&#160;<b>ApplXcpCalibrationRead</b>&#160;&#160;(&#160;MTABYTEPTR&#160;addr,&#160;uint8&#160;size,&#160;<br/>BYTEPTR&#160;data&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr&#160;<br/>
Address pointer&#160;<br/>
Size&#160;<br/>
Number&#160;of&#160;bytes&#160;to&#160;read&#160;<br/>
Data&#160;<br/>
Pointer&#160;to data&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
Protection&#160;code&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Read multiple bytes&#160;from&#160;memory.&#160;Please&#160;note&#160;that&#160;this&#160;service is only&#160;used&#160;for&#160;polling&#160;mode.&#160;<br/>DAQ&#160;reads&#160;directly&#160;to&#160;memory.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_CALIBRATION_MEM_ACCESS_BY_APPL&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.33&#160;&#160;ApplXcpCalibrationWrite:&#160;Write&#160;multiple&#160;bytes&#160;to memory&#160;</b><br/>
<b>ApplXcpCalibrationWrite&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single&#160;Channel&#160;<br/>Single Channel&#160;<br/>
uint8&#160;<b>ApplXcpCalibrationWrite</b>&#160;&#160;(&#160;MTABYTEPTR&#160;addr,&#160;uint8&#160;size,&#160;<br/>ROMBYTEPTR&#160;data&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>addr&#160;<br/>
Address pointer&#160;<br/>
Size&#160;<br/>
Number&#160;of&#160;bytes&#160;to write&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
69&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-70_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Data&#160;<br/>
Pointer&#160;to&#160;data&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
Protection&#160;code&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Write&#160;multiple bytes&#160;to&#160;memory.&#160;Please note&#160;that&#160;this&#160;service is&#160;only&#160;used&#160;for&#160;polling&#160;mode.&#160;<br/>STIM&#160;writes directly&#160;to&#160;memory.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_CALIBRATION_MEM_ACCESS_BY_APPL&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.34&#160;&#160;ApplXcpReadChecksumValue:&#160;Read checksum value&#160;</b><br/>
<b>ApplXcpReadChecksumValue&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Channel&#160;<br/>
tXcpChecksumAddType&#160;<b>ApplXcpReadChecksumValue</b>&#160;&#160;(&#160;uint32&#160;addr&#160;<br/>)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>Addr&#160;<br/>
Address pointer&#160;<br/>
<b>Return&#160;code&#160;<br/></b>tXcpChecksumAddType&#160;New&#160;value&#160;for&#160;checksum&#160;calculation&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;used&#160;to&#160;access checksum&#160;values&#160;when no&#160;direct&#160;access&#160;to&#160;memory&#160;is&#160;allowed.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_CALIBRATION_MEM_ACCESS_BY_APPL&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.5.35&#160;&#160;ApplXcpCalculateChecksum:&#160;Custom&#160;checksum&#160;calculation&#160;</b><br/>
<b>ApplXcpCalculateChecksum&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Channel&#160;<br/>
uint8&#160;<b>ApplXcpCalculateChecksum</b>&#160;&#160;(&#160;ROMBYTEPTR&#160;pMemArea,&#160;<br/>BYTEPTR&#160;pRes,&#160;uint32&#160;length&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
70&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-71_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>pMemArea&#160;<br/>
Address pointer&#160;<br/>
pRes&#160;<br/>
Pointer&#160;to&#160;response&#160;string&#160;<br/>
Length&#160;<br/>
Length of&#160;mem&#160;area,&#160;used&#160;for&#160;checksum&#160;calculation&#160;<br/>
<b>Return&#160;code&#160;<br/></b>uint8&#160;<br/>
XCP_CMD_OK/XCP_CMD_PENDING&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Normally&#160;the&#160;XCP&#160;uses&#160;internal&#160;checksum&#160;calculation&#160;functions.&#160;If&#160;the&#160;internal&#160;checksum&#160;<br/>calculation does not&#160;fit&#160;the user&#160;requirements&#160;this&#160;call-back&#160;can&#160;be&#160;used&#160;to&#160;calculate&#160;the&#160;<br/>checksum&#160;by&#160;the&#160;application.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>XCP&#160;is&#160;initialized&#160;correctly&#160;and in&#160;connected&#160;state&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switches&#160;XCP_ENABLE_CHECKSUM&#160;and&#160;XCP_ENABLE_CUSTOM_CRC&#160;is&#160;defined&#160;<br/>
&#160;<br/>
<b>6.6&#160;</b><br/>
<b>XCP&#160;Protocol Layer Functions&#160;that can be&#160;overwritten&#160;</b><br/>
The&#160;following&#160;functions&#160;are&#160;defined&#160;within&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;and&#160;can&#160;be&#160;overwritten&#160;<br/>for optimization&#160;purposes.&#160;<br/>Note:&#160;All&#160;services&#160;within&#160;this&#160;chapter&#160;are&#160;called&#160;from&#160;task&#160;or&#160;interrupt&#160;level.&#160;All&#160;services&#160;are&#160;<br/>not&#160;reentrant.&#160;<br/>
&#160;<br/>
<b>6.6.1&#160;</b><br/>
<b>XcpMemCpy:&#160;Copying of a&#160;memory&#160;range&#160;</b><br/>
<b>XcpMemCpy&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpMemCpy</b>&#160;&#160;(&#160;DAQBYTEPTR&#160;dest,&#160;&#160;<br/>
ROMDAQBYTEPTR&#160;src,&#160;uint8&#160;n&#160;)&#160;<br/>
Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>dest&#160;<br/>
pointer&#160;to destination&#160;address&#160;<br/>
src&#160;<br/>
pointer&#160;to source&#160;address&#160;<br/>
n&#160;<br/>
number&#160;of&#160;data&#160;bytes&#160;to&#160;copy&#160;<br/>
<b>Return&#160;code&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
71&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-72_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>General&#160;memory&#160;copy&#160;function that&#160;copies a&#160;memory&#160;range&#160;from&#160;source&#160;to&#160;destination.&#160;<br/>This&#160;function&#160;is&#160;used&#160;in&#160;the&#160;inner&#160;loop of&#160;XcpEvent&#160;for&#160;data acquisition&#160;sampling.&#160;<br/>This&#160;function&#160;is&#160;already&#160;defined in&#160;the&#160;XCP&#160;Protocol&#160;Layer,&#160;but&#160;can&#160;be&#160;overwritten&#160;by&#160;a macro&#160;or&#160;<br/>function&#160;for&#160;optimization purposes.&#160;E.g.&#160;it&#160;would be&#160;possible to&#160;use&#160;DMA&#160;for&#160;faster&#160;execution.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;overwritten&#160;XcpMemCpy&#160;is&#160;defined.&#160;<br/>
&#160;<br/>
<b>6.6.2&#160;</b><br/>
<b>XcpMemSet:&#160;Initialization of&#160;a&#160;memory&#160;range&#160;</b><br/>
<b>XcpMemSet&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;void&#160;<b>XcpMemSet</b>&#160;&#160;(&#160;BYTEPTR&#160;p,&#160;uint16&#160;n,&#160;uint8&#160;b )&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>p&#160;<br/>
pointer&#160;to start&#160;address&#160;<br/>
n&#160;<br/>
number&#160;of&#160;data&#160;bytes&#160;<br/>
b&#160;<br/>
data byte&#160;to&#160;initialize with&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Initialization of&#160;n&#160;bytes starting&#160;from&#160;address&#160;p&#160;with&#160;b.&#160;<br/>This&#160;function&#160;is&#160;already&#160;defined in&#160;the&#160;XCP&#160;Protocol&#160;Layer,&#160;but&#160;can&#160;be&#160;overwritten&#160;by&#160;a macro&#160;or&#160;<br/>function&#160;for&#160;optimization purposes.&#160;E.g.&#160;it&#160;would be&#160;possible to&#160;use&#160;DMA&#160;for&#160;faster&#160;execution.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;overwritten&#160;if&#160;XcpMemSet&#160;is&#160;defined.&#160;<br/>
&#160;<br/>
<b>6.6.3&#160;</b><br/>
<b>XcpMemClr:&#160;Clear a&#160;memory&#160;range&#160;</b><br/>
<b>XcpMemClr&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single Receive Channel&#160;&#160;static&#160;void&#160;<b>XcpMemClr</b>&#160;&#160;(&#160;BYTEPTR&#160;p,&#160;uint16&#160;n&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
72&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=73></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-73_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Parameter&#160;<br/></b>p&#160;<br/>
pointer&#160;to start&#160;address&#160;<br/>
n&#160;<br/>
number&#160;of&#160;data&#160;bytes&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Initialize&#160;n&#160;data&#160;bytes&#160;starting&#160;from&#160;address&#160;p&#160;with&#160;0x00.&#160;<br/>This&#160;function&#160;is&#160;already&#160;defined in&#160;the&#160;XCP&#160;Protocol&#160;Layer,&#160;but&#160;can&#160;be&#160;overwritten&#160;by&#160;a macro&#160;or&#160;<br/>function&#160;for&#160;optimization purposes.&#160;E.g.&#160;it&#160;would be&#160;possible to&#160;use&#160;DMA&#160;for&#160;faster&#160;execution.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;overwritten&#160;if&#160;XcpMemClr&#160;is&#160;defined.&#160;<br/>
&#160;<br/>
<b>6.6.4&#160;</b><br/>
<b>XcpSendDto:&#160;Transmission of a&#160;data transfer&#160;object&#160;</b><br/>
<b>XcpSendDto&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Channel&#160;<br/>Single&#160;Receive Channel&#160;&#160;void&#160;<b>XcpSendDto</b>&#160;&#160;(const&#160;xcpDto_t&#160;*dto&#160;)&#160;<br/>Multi&#160;Channel&#160;<br/>Indexed&#160;<br/>
not&#160;supported&#160;<br/>
Code replicated&#160;<br/>
not&#160;supported&#160;<br/>
<b>Parameter&#160;<br/></b>dto&#160;<br/>
pointer&#160;to data&#160;transfer&#160;object&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Transmit&#160;a&#160;data&#160;transfer&#160;object&#160;(DTO).&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;XCP&#160;Protocol&#160;Layer&#160;has&#160;been&#160;initialized&#160;correctly&#160;and XCP&#160;is&#160;in connected&#160;state.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;switch&#160;XCP_ENABLE_DAQ&#160;is&#160;defined&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;overwritten&#160;by&#160;defining&#160;XcpSendDto.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>6.7&#160;</b><br/>
<b>AUTOSAR CRC&#160;Module&#160;Services&#160;called by&#160;the&#160;XCP&#160;Protocol Layer (XCP&#160;<br/>Professional&#160;Only)&#160;</b><br/>
The&#160;&#160;following&#160;&#160;services&#160;&#160;of&#160;&#160;the&#160;&#160;AUTOSAR&#160;&#160;CRC&#160;&#160;Module&#160;&#160;are&#160;&#160;called&#160;&#160;by&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;<br/>Layer:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
73&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=74></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-74_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Crc_CalculateCRC16(…)&#160;<br/>Crc_CalculateCRC32(…)&#160;<br/>A&#160;&#160;detailed&#160;&#160;description&#160;&#160;of&#160;&#160;the&#160;API&#160;&#160;can&#160;&#160;be&#160;&#160;found&#160;&#160;in&#160;&#160;the&#160;&#160;software&#160;&#160;specification&#160;&#160;of&#160;&#160;the&#160;&#160;CRC&#160;<br/>Modu<a href="TechnicalReference_Asr_Xcps.html#108">le&#160;[VII].</a>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
74&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=75></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-75_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-75_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>7&#160;&#160;Configuration&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;</b><br/>
This chapter describes&#160;the&#160;common&#160;options&#160;for configuring&#160;(customizing) the&#160;XCP&#160;Protocol&#160;<br/>Layer.&#160;Please&#160;note&#160;that&#160;the&#160;XCP&#160;Professional&#160;can&#160;conveniently&#160;be&#160;configured&#160;with&#160;GENy&#160;<br/>(chapte<a href="TechnicalReference_Asr_Xcps.html#75">r&#160;7.1).</a>&#160;In&#160;this&#160;case&#160;no&#160;manual&#160;configuration&#160;has&#160;to&#160;be&#160;applied&#160;to&#160;the&#160;configuration&#160;<br/>files.&#160;<br/>
&#160;<br/>
The&#160;configuration&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;without&#160;GENy&#160;can&#160;be&#160;found&#160;in&#160;chapte<a href="TechnicalReference_Asr_Xcps.html#88">r&#160;&#160;7.2.I</a>t&#160;<br/>is mainly&#160;applicable&#160;for the&#160;configuration&#160;of&#160;XCP&#160;Basic.&#160;<br/>
<b>7.1&#160;</b><br/>
<b>Configuration&#160;with GENy&#160;(XCP&#160;Professional&#160;only)&#160;</b><br/>
The&#160;XCP&#160;Protocol&#160;Layer&#160;is&#160;a&#160;higher&#160;software&#160;layer&#160;that&#160;can&#160;be&#160;configured&#160;independent&#160;of&#160;<br/>the&#160;communication&#160;system&#160;channels.&#160;Therefore&#160;in&#160;GENy&#160;the&#160;Protocol&#160;Layer&#160;component&#160;is&#160;<br/>attached&#160;&#160;to&#160;&#160;the&#160;&#160;ECU.&#160;&#160;I.e.&#160;&#160;it&#160;&#160;can&#160;&#160;be&#160;&#160;configured&#160;&#160;without&#160;&#160;associating&#160;&#160;any&#160;&#160;XCP&#160;&#160;Transport&#160;<br/>Layer in&#160;GENy.&#160;<br/>Therefore&#160;there are&#160;no&#160;database&#160;attributes defined&#160;for the&#160;XCP&#160;Protocol Layer.&#160;<br/>
<b>7.1.1&#160;</b><br/>
<b>Component Selection&#160;</b><br/>
The&#160;following&#160;figure shows the&#160;selection&#160;of&#160;the&#160;XCP&#160;Protocol&#160;Layer component:&#160;<br/>
&#160;<br/>
Figure&#160;7-1&#160;Component&#160;selection&#160;in&#160;GENy&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
75&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=76></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-76_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-76_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>7.1.2&#160;</b><br/>
<b>Component Configuration&#160;</b><br/>
<b>7.1.2.1&#160;</b><br/>
<b>General&#160;Settings&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-2&#160;Component&#160;configuration&#160;–&#160;General&#160;settings&#160;<br/>
&#160;<br/>
<b>Configuration&#160;option&#160;</b><br/>
<b>Description&#160;of&#160;configuration&#160;option&#160;</b><br/>
XCP&#160;Station&#160;Identifier&#160;<br/>
The&#160;'XCP&#160;Station&#160;Identifier'&#160;is&#160;an&#160;ASAM-MC2 filename&#160;without&#160;path&#160;<br/>and&#160;extension&#160;that&#160;identifies the&#160;ECU's&#160;software&#160;program&#160;version.&#160;<br/>It&#160;is&#160;used&#160;for&#160;slave device identification and&#160;automatic&#160;session&#160;<br/>configuration.&#160;<br/>The&#160;Master&#160;Control&#160;System&#160;(MCS)&#160;can&#160;interpret&#160;this&#160;identifier&#160;as&#160;file&#160;<br/>name&#160;for&#160;the&#160;ECU&#160;database.&#160;The&#160;ECU&#160;developer&#160;should change&#160;the&#160;<br/>XCP&#160;station&#160;identifier&#160;with each program&#160;change.&#160;This&#160;will&#160;prevent&#160;<br/>database&#160;mix-ups&#160;and&#160;grant&#160;the&#160;correct&#160;access&#160;of&#160;measurement&#160;and&#160;<br/>calibration&#160;objects&#160;from&#160;the&#160;MCS&#160;to the&#160;ECU.&#160;<br/>Another&#160;benefit&#160;of&#160;the&#160;usage&#160;of&#160;the&#160;XCP&#160;station&#160;identifier&#160;is&#160;the&#160;<br/>automatic&#160;assignment&#160;of&#160;the&#160;correct&#160;ECU&#160;database at&#160;program&#160;start&#160;<br/>of&#160;the&#160;MCS&#160;via the&#160;Plug&amp;Play&#160;mechanism.&#160;The&#160;Plug&amp;Play&#160;<br/>mechanism&#160;prevents&#160;the&#160;user&#160;to&#160;choose&#160;the&#160;wrong ECU&#160;database.&#160;<br/>
Command&#160;Parameter&#160;<br/>
Checks&#160;of&#160;the&#160;range and&#160;validity&#160;of&#160;Command&#160;Transfer&#160;Object&#160;(CTO)&#160;<br/>
Check&#160;<br/>
and Data&#160;Transfer&#160;Object&#160;(DTO)&#160;parameters.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
76&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=77></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-77_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Enable Calibration&#160;<br/>
The&#160;option&#160;'Enable Calibration'&#160;unlocks&#160;the&#160;commands&#160;<br/>-&#160;DOWNLOAD&#160;<br/>-&#160;DOWNLOAD_NEXT&#160;<br/>-&#160;DOWNLOAD_MAX&#160;<br/>-&#160;SHORT_DOWNLOAD&#160;<br/>-&#160;MODIFY_BITS&#160;<br/>If&#160;this&#160;option&#160;is&#160;disabled,&#160;these commands&#160;will&#160;return&#160;an&#160;<br/>ERR_ACCESS_DENIED&#160;error&#160;and calibration&#160;of&#160;parameters&#160;will&#160;not&#160;<br/>be&#160;possible!&#160;<br/>
Event&#160;Codes&#160;<br/>
'Event&#160;Codes'&#160;are&#160;transmitted&#160;within event&#160;packets&#160;(EV)&#160;from&#160;the&#160;<br/>slave device to&#160;the&#160;master&#160;device.&#160;<br/>The&#160;transmission&#160;is&#160;not&#160;guaranteed&#160;since&#160;event&#160;packets&#160;are&#160;not&#160;<br/>acknowledged.&#160;<br/>Please refer&#160;to&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;specification&#160;for&#160;the&#160;'Table of&#160;<br/>Event&#160;codes'.&#160;<br/>
Bootloader&#160;Download&#160;<br/>
In order&#160;to&#160;reprogram&#160;the&#160;internal&#160;flash&#160;of&#160;some&#160;microcontrollers&#160;it&#160;is&#160;<br/>necessary&#160;to&#160;use&#160;a bootloader,&#160;because&#160;code cannot&#160;be&#160;executed&#160;<br/>from&#160;flash while programming&#160;flash.&#160;<br/>
Memory&#160;Write&#160;Protection&#160;&#160;The&#160;option&#160;'Memory&#160;Write Protection'&#160;enables write access&#160;to&#160;memory&#160;<br/>
areas.&#160;<br/>I.e.&#160;prior&#160;to&#160;carrying&#160;out&#160;write access&#160;to RAM&#160;an&#160;application callback&#160;<br/>function&#160;is&#160;called&#160;and&#160;the&#160;memory&#160;address&#160;is&#160;passed&#160;as parameter.&#160;<br/>The&#160;application has&#160;to&#160;either&#160;grant&#160;or&#160;deny&#160;the&#160;memory&#160;access.&#160;<br/>
Memory&#160;Read Protection&#160;&#160;The&#160;option&#160;'Memory&#160;Read Protection'&#160;enables&#160;read access&#160;to&#160;memory&#160;<br/>
areas.&#160;<br/>I.e.&#160;prior&#160;to&#160;carrying&#160;out&#160;read access&#160;to&#160;RAM&#160;an&#160;application callback&#160;<br/>function&#160;is&#160;called&#160;and&#160;the&#160;memory&#160;address is&#160;passed&#160;as parameter.&#160;<br/>The&#160;application has&#160;to&#160;either&#160;grant&#160;or&#160;deny&#160;the&#160;memory&#160;access.&#160;<br/>
XCP&#160;Control&#160;<br/>
The&#160;option&#160;‘XCP&#160;Control’&#160;enables an&#160;API&#160;to en-&#160;or&#160;disable the&#160;XCP&#160;<br/>module (s.<a href="TechnicalReference_Asr_Xcps.html#27">&#160;3.22).</a>&#160;<br/>
Get&#160;Xcp Data Pointer&#160;<br/>
The&#160;option&#160;‘Get&#160;Xcp Data Pointer’&#160;enables&#160;an&#160;API&#160;to&#160;retrieve the&#160;<br/>pointer&#160;to&#160;the&#160;internal&#160;data of&#160;the&#160;XCP&#160;module&#160;(s.<a href="TechnicalReference_Asr_Xcps.html#26">&#160;3.21)</a>&#160;<br/>
Open Command&#160;<br/>
The&#160;‘Open Command&#160;Interface’&#160;can&#160;be&#160;used&#160;to&#160;add&#160;unsupported&#160;XCP&#160;<br/>
Interface&#160;<br/>
commands.&#160;A&#160;user&#160;call&#160;back&#160;is&#160;made available which must&#160;be&#160;<br/>implemented&#160;in the&#160;application.&#160;<br/>
Memory&#160;Mapping&#160;<br/>
Each&#160;code section&#160;(e.g.&#160;RAM&#160;and ROM&#160;variables,&#160;functions,&#160;etc.)&#160;is&#160;<br/>
Support&#160;<br/>
classified&#160;by&#160;its&#160;type&#160;(e.g.&#160;8Bit&#160;RAM,&#160;16Bit&#160;ROM,&#160;Code,&#160;etc.).&#160;<br/>If&#160;you&#160;enable this&#160;option,&#160;each code&#160;section&#160;will&#160;be&#160;enclosed in&#160;<br/>special&#160;memory&#160;mapping sections.&#160;This&#160;allows&#160;to&#160;manage&#160;the&#160;<br/>resources&#160;of&#160;the&#160;component&#160;more&#160;efficiently.&#160;<br/>
Version Info&#160;API&#160;<br/>
The&#160;'Version&#160;Info&#160;Api'&#160;option&#160;provides&#160;access&#160;to&#160;the version&#160;<br/>information&#160;of&#160;the&#160;XCP&#160;Transport&#160;Layer&#160;module.&#160;Provided&#160;<br/>informations&#160;are Module identifier,&#160;Vendor&#160;identifier&#160;and&#160;vendor&#160;<br/>specific&#160;Version&#160;numbers.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
77&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=78></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-78_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
User&#160;Config File&#160;<br/>
The&#160;configuration&#160;file&#160;xcp_cfg.h&#160;is&#160;generated&#160;by&#160;GENy.&#160;If&#160;you&#160;want&#160;<br/>to overwrite settings&#160;in&#160;the&#160;generated&#160;configuration&#160;file,&#160;you&#160;can&#160;<br/>specify&#160;a path&#160;to&#160;a&#160;user&#160;defined configuration&#160;file.&#160;<br/>The&#160;user&#160;defined&#160;configuration&#160;file&#160;will&#160;be&#160;included&#160;at&#160;the&#160;end of&#160;the&#160;<br/>generated&#160;file.&#160;Therefore&#160;definitions&#160;in&#160;the&#160;user&#160;defined&#160;configuration&#160;<br/>file&#160;can&#160;overwrite definitions&#160;in the&#160;generated&#160;configuration&#160;file.&#160;<br/>
Generic&#160;Measurement&#160;<br/>
Generic&#160;Measurement&#160;is&#160;an&#160;extension&#160;which allows&#160;the&#160;Master&#160;to&#160;<br/>take addresses&#160;for&#160;an&#160;a2l&#160;update directly&#160;from&#160;the&#160;ECU&#160;instead of&#160;the&#160;<br/>map&#160;file.&#160;<br/>
Session&#160;Status&#160;API&#160;&#160;<br/>
&#160;This&#160;API&#160;allows&#160;to determine&#160;the&#160;session&#160;status&#160;of&#160;the&#160;XCP.&#160;It&#160;can be&#160;<br/>used to&#160;check&#160;the&#160;status&#160;in order&#160;to&#160;keep&#160;the&#160;ECU&#160;awake.&#160;<br/>
Vx1000&#160;Support&#160;<br/>
Provide&#160;basic&#160;support&#160;for&#160;the&#160;Vx1000&#160;measurement&#160;hardware.&#160;If&#160;<br/>enabled the Vx&#160;software&#160;package needs&#160;to&#160;be&#160;integrated&#160;additionally. The&#160;<br/>Xcp driver&#160;then makes&#160;use of&#160;the functions&#160;provided&#160;by&#160;this&#160;package.<b>&#160;</b><br/>
EEPROM&#160;Access&#160;<br/>Read&#160;Access&#160;<br/>
The&#160;option&#160;'Read&#160;Access'&#160;allows&#160;read access&#160;to EEPROM.&#160;<br/>The&#160;routines&#160;for&#160;accessing&#160;the&#160;EEPROM&#160;have to be&#160;implemented&#160;in&#160;<br/>the&#160;application.&#160;<br/>
Write&#160;Access&#160;<br/>
The&#160;option&#160;'Write&#160;Access'&#160;allows&#160;write access&#160;to&#160;EEPROM.&#160;<br/>The&#160;routines&#160;for&#160;accessing&#160;the&#160;EEPROM&#160;have to be&#160;implemented&#160;in&#160;<br/>the&#160;application.&#160;<br/>
Service Request&#160;Message&#160;<br/>Service Request&#160;<br/>
'Service Request&#160;Messages'&#160;are always&#160;transmitted&#160;within service&#160;<br/>
Message&#160;<br/>
request&#160;packets&#160;(SERV)&#160;by&#160;the&#160;slave device,&#160;in order&#160;to&#160;request&#160;the&#160;<br/>master&#160;device to&#160;perform&#160;some&#160;action.&#160;<br/>The&#160;transmission&#160;is&#160;not&#160;guaranteed&#160;since&#160;service request&#160;packets&#160;are&#160;<br/>not&#160;acknowledged&#160;by&#160;the&#160;master&#160;device.&#160;<br/>Please also refer&#160;to&#160;the&#160;XCP&#160;Protocol&#160;Layer&#160;specification&#160;for&#160;the&#160;<br/>'Table of&#160;service request&#160;codes&#160;<br/>
Print&#160;<br/>
The&#160;function&#160;XcpPrint(..)&#160;can&#160;be&#160;used&#160;for&#160;the transmission&#160;of&#160;<br/>service request&#160;packets&#160;that&#160;contain&#160;text.&#160;<br/>
Table&#160;7-1&#160;Component&#160;configuration&#160;–&#160;General&#160;settings&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
78&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=79></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-79_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-79_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>7.1.2.2&#160;</b><br/>
<b>Synchronous&#160;Data&#160;Acquisition&#160;</b><br/>
&#160;<br/>
Figure&#160;7-3&#160;Component&#160;configuration&#160;–&#160;Synchronous&#160;Data&#160;Acquisition&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
79&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=80></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-80_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Configuration&#160;option&#160;</b><br/>
<b>Description&#160;of&#160;configuration&#160;option&#160;</b><br/>
Synchronous&#160;Data&#160;Acquisition&#160;&#160;Data&#160;elements&#160;located&#160;in&#160;the&#160;slave's&#160;memory&#160;are&#160;transmitted&#160;in&#160;<br/>(DAQ)&#160;<br/>
Data&#160;Transfer&#160;Objects&#160;(DTOs)&#160;from&#160;slave to&#160;master&#160;(DAQ)&#160;and&#160;<br/>from&#160;master&#160;to&#160;slave (STIM).&#160;<br/>The&#160;Object&#160;Description&#160;Table (ODT)&#160;describes&#160;the mapping&#160;<br/>between the&#160;synchronous&#160;data&#160;transfer&#160;objects&#160;and&#160;the&#160;slave's&#160;<br/>memory.&#160;<br/>
Send Queue&#160;<br/>
The&#160;‘Send Queue’&#160;should be&#160;enabled if&#160;more&#160;than one&#160;ODT&#160;<br/>(Object&#160;Description&#160;Table)&#160;is&#160;used&#160;and&#160;if&#160;the&#160;Transport&#160;Layer&#160;<br/>does not&#160;support&#160;data&#160;queuing&#160;or&#160;data buffering.&#160;<br/>It&#160;has&#160;to be&#160;enabled&#160;if&#160;the Vector&#160;XCP&#160;Transport&#160;Layer&#160;for&#160;CAN&#160;<br/>is&#160;enabled.&#160;<br/>
Replace&#160;First&#160;Element&#160;<br/>
If&#160;an&#160;overrun&#160;occurs&#160;the&#160;oldest&#160;element&#160;is replaced&#160;and&#160;<br/>not&#160;the&#160;newest&#160;element&#160;which&#160;is the&#160;default behaviour.&#160;<br/>
Memory&#160;Size [byte]&#160;<br/>
A&#160;memory&#160;area&#160;has&#160;to&#160;be reserved&#160;for&#160;the dynamic&#160;allocation&#160;of&#160;<br/>DAQ&#160;and&#160;ODT&#160;(Object&#160;Description&#160;Table)&#160;lists&#160;and&#160;for&#160;the&#160;<br/>transmit&#160;queue.&#160;<br/>
Prescaler&#160;<br/>
If&#160;the&#160;option&#160;'Prescaler'&#160;is&#160;enabled&#160;all&#160;DAQ&#160;lists&#160;support&#160;the&#160;<br/>prescaler&#160;for&#160;reducing&#160;the transmission&#160;period.&#160;<br/>
Overrun&#160;Indication&#160;<br/>
Overrun&#160;situations&#160;are&#160;indicated&#160;to&#160;the&#160;Master&#160;Control&#160;System.&#160;<br/>An overrun&#160;situation&#160;is&#160;e.g.&#160;an&#160;overflow&#160;of&#160;the&#160;transmit&#160;queue.&#160;<br/>
Write DAQ&#160;Multiple&#160;<br/>
This&#160;command allows&#160;downloading&#160;multiple DAQ&#160;list&#160;entries in&#160;<br/>one CMD&#160;frame.&#160;This&#160;option&#160;is&#160;only&#160;usefull&#160;when:&#160;<br/>
1.&#160;&#160;MAX_CTO&#160;is&#160;at&#160;least&#160;12&#160;bytes&#160;in size&#160;for&#160;one entry&#160;or&#160;at&#160;<br/>
least&#160;20&#160;bytes&#160;for&#160;2&#160;or&#160;more&#160;entries.&#160;<br/>
2.&#160;&#160;This&#160;feature is&#160;enabled&#160;in&#160;CANape (Extended driver&#160;<br/>
settings)&#160;<br/>
DAQ&#160;/&#160;ODT&#160;Message Header&#160;<br/>
If&#160;the&#160;option&#160;'DAQ/ODT&#160;message&#160;header'&#160;is&#160;enabled&#160;the&#160;2&#160;byte&#160;<br/>DAQ/ODT&#160;XCP&#160;Packet&#160;Identification is&#160;used:&#160;Relative ODT&#160;<br/>number&#160;(1&#160;byte),&#160;absolute DAQ&#160;list&#160;number&#160;(1&#160;byte).&#160;<br/>If&#160;the&#160;option&#160;'DAQ/ODT&#160;message&#160;header'&#160;is&#160;disabled&#160;a 1&#160;byte&#160;<br/>Packet&#160;Identification&#160;(PID)&#160;is&#160;used:&#160;Absolute&#160;ODT&#160;number.&#160;<br/>Attention:&#160;The&#160;'DAQ/ODT&#160;Message&#160;Header'&#160;must&#160;not&#160;be&#160;<br/>enabled&#160;if&#160;the&#160;XCP&#160;Transport&#160;Layer&#160;for&#160;CAN&#160;or&#160;FlexRay&#160;is&#160;<br/>enabled.&#160;<br/>
Resume Mode&#160;<br/>
The&#160;option&#160;'Resume&#160;Mode'&#160;or&#160;often&#160;also called&#160;'Cold Start&#160;<br/>Measurement'&#160;allows&#160;automatic&#160;data&#160;transfer&#160;(DAQ,&#160;STIM)&#160;<br/>directly&#160;after&#160;power-up&#160;of&#160;the&#160;slave without&#160;prior&#160;connection&#160;to&#160;<br/>the&#160;master&#160;calibration&#160;system.&#160;Also&#160;prior&#160;set&#160;calibration&#160;data can&#160;<br/>be&#160;restored.&#160;<br/>
General&#160;Info&#160;<br/>
The&#160;option&#160;'General&#160;Info'&#160;enables the&#160;XCP&#160;command&#160;<br/>GET_DAQ_PROCESSOR_INFO,&#160;which provides&#160;general&#160;<br/>information&#160;on&#160;DAQ&#160;lists.&#160;<br/>
Resolution Info&#160;<br/>
The&#160;option&#160;'Resolution&#160;Info'&#160;enables&#160;the&#160;command&#160;<br/>GET_DAQ_RESOLUTION_INFO,&#160;which provides&#160;information&#160;<br/>on&#160;the&#160;resolution&#160;of&#160;DAQ&#160;lists.&#160;<br/>
Virtual&#160;Measurement&#160;<br/>
Virtual&#160;Measurement&#160;allows&#160;to have&#160;Address&#160;Information of&#160;<br/>Measurement&#160;Values&#160;in&#160;the&#160;ECU.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
80&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=81></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-81_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Synchronous&#160;Data&#160;Stimulation (STIM)&#160;<br/>Synchronous&#160;Data&#160;Stimulation&#160;&#160;'Synchronous&#160;Data&#160;Stimulation (STIM)'&#160;is&#160;the&#160;inverse&#160;mode of&#160;<br/>(STIM)&#160;<br/>
'Synchronous&#160;Data&#160;Acquisition&#160;(DAQ)'.&#160;<br/>Data&#160;elements&#160;located&#160;in&#160;the&#160;slave's&#160;memory&#160;are&#160;transmitted&#160;in&#160;<br/>Data&#160;Transfer&#160;Objects&#160;from&#160;the&#160;master&#160;device to&#160;the&#160;slave&#160;<br/>device.&#160;<br/>These&#160;data&#160;elements&#160;are&#160;written&#160;to RAM&#160;upon&#160;XCP&#160;events.&#160;<br/>
Number&#160;of&#160;ODTs&#160;for&#160;STIM&#160;<br/>
The&#160;maximum&#160;number&#160;of&#160;Object&#160;Descriptor&#160;Tables&#160;(ODTs)&#160;for&#160;<br/>Synchronous&#160;Data&#160;Stimulation (STIM)&#160;has&#160;to&#160;be&#160;configured.&#160;<br/>
Event&#160;Info&#160;<br/>Event&#160;Info&#160;<br/>
The&#160;option&#160;'Event&#160;Info'&#160;allows&#160;to configure&#160;Plug&#160;&amp;&#160;Play&#160;<br/>Information&#160;about&#160;event&#160;channels.&#160;This&#160;information is written&#160;to&#160;<br/>XCP_events.a2l&#160;:&#160;<br/>
<b>&gt;&#160;&#160;</b>Number&#160;of&#160;event&#160;channel&#160;<br/>
<b>&gt;&#160;&#160;</b>Name&#160;of&#160;event&#160;channel&#160;<br/>
<b>&gt;&#160;&#160;</b>Measurement&#160;cycle time&#160;of&#160;event&#160;channel&#160;<br/>Direction of&#160;event&#160;channel:&#160;DAQ,&#160;STIM,&#160;DAQ&amp;STIM&#160;<br/>
Get&#160;DAQ&#160;Event&#160;Info&#160;<br/>
This&#160;option&#160;additionally&#160;enables the&#160;Xcp Command&#160;<br/>GET_DAQ_EVENT_INFO.&#160;If&#160;this&#160;option&#160;is&#160;enabled the&#160;<br/>numbering&#160;of&#160;Events&#160;is&#160;provided by&#160;the&#160;Configuration&#160;Tool&#160;and&#160;<br/>cannot&#160;be&#160;freely&#160;configured.&#160;<br/>
<b>&gt;&#160;&#160;</b>&#160;<br/>
Events&#160;<br/>
The&#160;information&#160;about&#160;event&#160;channels,&#160;which is transferred&#160;from&#160;<br/>the&#160;slave device to&#160;the&#160;master&#160;device,&#160;can&#160;be&#160;configured.&#160;<br/>Attention:&#160;The&#160;number&#160;of&#160;the&#160;event&#160;channels&#160;has&#160;to be&#160;dense&#160;<br/>and zero-based&#160;<br/>
Event&#160;Channel&#160;<br/>
For&#160;each&#160;'Event&#160;Channel'&#160;information&#160;can&#160;be&#160;configured.&#160;<br/>This&#160;information is&#160;transferred&#160;from&#160;the&#160;slave device to&#160;the&#160;<br/>master&#160;device.&#160;<br/>
Number&#160;<br/>
The&#160;event&#160;channel&#160;numbers&#160;is&#160;freely&#160;configurable&#160;if&#160;the&#160;option&#160;<br/>“Get&#160;DAQ&#160;Event&#160;Info”&#160;is&#160;disabled.&#160;Otherwise it&#160;is&#160;dense&#160;and&#160;<br/>zero-based.&#160;Therefore&#160;this&#160;number&#160;cannot&#160;be&#160;entered&#160;manually.&#160;<br/>The&#160;event&#160;channel&#160;number&#160;is&#160;passed&#160;as&#160;an&#160;argument&#160;to&#160;the&#160;<br/>function&#160;XcpEvent(..).&#160;<br/>
Name&#160;<br/>
The&#160;name&#160;of&#160;the&#160;event&#160;channel&#160;is&#160;used&#160;to identify&#160;an&#160;event&#160;<br/>within the&#160;master&#160;control&#160;system.&#160;<br/>
Cycle&#160;Time&#160;[Event&#160;Info Unit]&#160;<br/>
The&#160;'Cycle&#160;Time'&#160;of&#160;the&#160;event&#160;channel&#160;is&#160;transferred&#160;to&#160;the&#160;<br/>master&#160;control&#160;system&#160;and&#160;used&#160;to&#160;set&#160;up&#160;the&#160;master&#160;control&#160;<br/>system.&#160;<br/>
Event&#160;Info&#160;Unit&#160;<br/>
Select&#160;the&#160;resolution&#160;of&#160;the&#160;time&#160;stamp&#160;ticks.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
81&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=82></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-82_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-82_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Direction&#160;<br/>
The&#160;following&#160;data&#160;acquisition&#160;'Directions'&#160;of&#160;event&#160;channels&#160;are&#160;<br/>possible:&#160;<br/>
<b>&gt;&#160;&#160;</b>DAQ:&#160;send cyclic&#160;data&#160;transfer&#160;packets&#160;from&#160;the&#160;slave device&#160;<br/>
to&#160;the&#160;master&#160;control&#160;system&#160;<br/>
<b>&gt;&#160;&#160;</b>STIM:&#160;send&#160;cyclic&#160;data&#160;transfer&#160;packets&#160;from&#160;the&#160;master&#160;<br/>
control&#160;system&#160;to&#160;the&#160;slave device&#160;<br/>
<b>&gt;&#160;&#160;</b>DAQ/STIM:&#160;both directions are&#160;possible,&#160;but&#160;not&#160;<br/>
simultaneously&#160;<br/>
DAQ&#160;Timestamp&#160;<br/>DAQ&#160;Timestamp&#160;<br/>
Timestamps&#160;can&#160;be&#160;attached to&#160;Data&#160;Transfer&#160;Object&#160;(DTO)&#160;<br/>Packets,&#160;to avoid measurement&#160;errors&#160;due&#160;to&#160;bus&#160;latency.&#160;<br/>The&#160;timestamp unit&#160;and&#160;ticks&#160;per&#160;unit&#160;have&#160;to be&#160;defined if&#160;<br/>timestamps&#160;are&#160;used.&#160;<br/>
Fixed&#160;Timestamp&#160;<br/>
If&#160;the&#160;'Fixed&#160;Timestamp'&#160;option&#160;is&#160;selected&#160;the&#160;slave always&#160;<br/>sends Data&#160;Transfer&#160;Object&#160;(DTO)&#160;Packets&#160;in&#160;time stamped&#160;<br/>mode.&#160;<br/>Otherwise timestamps&#160;are dynamically&#160;and individually&#160;enabled&#160;<br/>for&#160;each DAQ&#160;list.&#160;<br/>
Size [byte]&#160;<br/>
Size of&#160;Timestamp.&#160;Possible timestamp&#160;sizes are&#160;1Byte,&#160;2Bytes&#160;<br/>and 4Bytes.&#160;<br/>
Timestamp&#160;Unit&#160;<br/>
Select&#160;the&#160;resolution&#160;of&#160;the&#160;time&#160;stamp&#160;ticks.&#160;<br/>
Ticks&#160;per&#160;Unit&#160;<br/>
The&#160;timestamp will&#160;increment&#160;per&#160;unit&#160;by&#160;the&#160;value&#160;specified&#160;<br/>here and&#160;wrap&#160;around&#160;if&#160;an&#160;overflow&#160;occurs.&#160;<br/>
Table&#160;7-2&#160;Component&#160;configuration&#160;–&#160;Synchronous&#160;Data&#160;Acquisition&#160;<br/>
&#160;<br/>
<b>7.1.2.3&#160;</b><br/>
<b>Standard Commands&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-4&#160;Component&#160;configuration&#160;–&#160;Standard&#160;Commands&#160;<br/>
&#160;<br/>
Configuration option&#160;<br/>
Description&#160;of&#160;configuration&#160;option&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
82&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=83></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-83_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Communication&#160;Mode Info&#160;<br/>
The&#160;XCP&#160;command&#160;'GET_COMM_MODE_INFO'&#160;returns&#160;<br/>optional&#160;information on&#160;different&#160;Communication&#160;Modes&#160;<br/>supported&#160;by&#160;the&#160;slave and also the&#160;version number&#160;of&#160;the&#160;<br/>Protocol&#160;Layer&#160;implementation.&#160;<br/>If&#160;the&#160;master&#160;block&#160;mode&#160;is&#160;supported,&#160;also&#160;the&#160;maximum&#160;<br/>allowed&#160;block&#160;size and&#160;the minimum&#160;separation&#160;time are&#160;<br/>returned.&#160;<br/>The&#160;XCP&#160;Protocol&#160;Layer&#160;supports&#160;the&#160;Standard Communication&#160;<br/>model&#160;and also&#160;the&#160;Master&#160;Block&#160;Transfer&#160;Mode and the&#160;Slave&#160;<br/>Block&#160;Transfer&#160;Mode.&#160;<br/>
Seed &amp;&#160;Key&#160;<br/>
Resources&#160;within the&#160;slave device can&#160;be&#160;protected&#160;by&#160;a 'Seed&#160;<br/>&amp;&#160;Key'&#160;mechanism.&#160;<br/>The&#160;following&#160;resources&#160;can&#160;be&#160;protected:&#160;<br/>
<b>&gt;&#160;&#160;</b>Synchronous&#160;data&#160;acquisition&#160;(DAQ)&#160;<br/>
<b>&gt;&#160;&#160;</b>Synchronous&#160;data&#160;stimulation (STIM)&#160;<br/>
<b>&gt;&#160;&#160;</b>Online&#160;calibration&#160;(CAL)&#160;<br/>
<b>&gt;&#160;&#160;</b>Programming&#160;(PGM)&#160;<br/>
Modify&#160;Bits&#160;<br/>
This&#160;command&#160;can&#160;be&#160;en-&#160;or&#160;disabled.&#160;<br/>
Short&#160;Download&#160;<br/>
This&#160;command&#160;can&#160;be&#160;en-&#160;or&#160;disabled.&#160;For&#160;bus&#160;systems&#160;with&#160;<br/>maximum&#160;data length&#160;less&#160;equal&#160;eight&#160;(e.g.&#160;CAN,&#160;LIN)&#160;this&#160;<br/>command&#160;make no&#160;sense as&#160;no&#160;data&#160;can&#160;be&#160;transported&#160;in&#160;<br/>addition&#160;to&#160;the&#160;address&#160;information.&#160;<br/>
User&#160;Defined&#160;Command&#160;<br/>
The&#160;'User&#160;Defined&#160;Command'&#160;is&#160;optional&#160;and can be&#160;<br/>implemented&#160;within the&#160;application.&#160;<br/>However&#160;it&#160;must&#160;not&#160;be&#160;used&#160;to&#160;implement&#160;functionalities done&#160;<br/>by&#160;other&#160;services.&#160;<br/>The&#160;application callback&#160;function&#160;ApplXcpUserService()&#160;is&#160;<br/>provided to perform&#160;application specific&#160;actions.&#160;<br/>
GET_ID Command&#160;<br/>
Slave&#160;identification&#160;via&#160;GET_ID&#160;Command.&#160;&#160;<br/>This&#160;option&#160;enables&#160;a&#160;call-back that&#160;is called&#160;when&#160;the&#160;<br/>XCP&#160;Master sends&#160;the&#160;GET_ID command&#160;and&#160;can&#160;be&#160;<br/>used&#160;to&#160;return the&#160;requested&#160;information&#160;(e.g.&#160;Map&#160;<br/>Filename,&#160;EPK&#160;Number, ...)<b>&#160;<br/></b>&#160;<br/>
Transport&#160;Layer&#160;Command&#160;<br/>
The&#160;option&#160;'Transport&#160;Layer&#160;Command'&#160;has&#160;to be&#160;enabled&#160;if&#160;<br/>transport&#160;layer&#160;specific&#160;commands&#160;are used&#160;and&#160;supported&#160;by&#160;<br/>the&#160;transport&#160;layer&#160;component.&#160;<br/>
Block&#160;Transfer&#160;<br/>Block&#160;Upload&#160;<br/>
The&#160;Slave Block&#160;Transfer&#160;Mode speeds&#160;up&#160;memory&#160;upload by&#160;<br/>transmitting&#160;an&#160;entire&#160;block of&#160;continuous&#160;response packets.&#160;<br/>There is only&#160;a&#160;response&#160;packet&#160;before&#160;and after&#160;transmission&#160;<br/>of&#160;the&#160;entire block.&#160;<br/>There are no&#160;limitations&#160;allowed&#160;for&#160;the&#160;master&#160;device.&#160;<br/>The&#160;slave returns whether&#160;it&#160;supports&#160;Slave Block&#160;Transfer&#160;<br/>Model&#160;in the&#160;response&#160;of&#160;the&#160;request&#160;CONNECT.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
83&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=84></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-84_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-84_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Block&#160;Download&#160;<br/>
The&#160;Master&#160;Block&#160;Transfer&#160;Mode speeds&#160;up&#160;memory&#160;download&#160;<br/>by&#160;transmitting&#160;an&#160;entire&#160;block of&#160;continuous&#160;request&#160;packets.&#160;<br/>There is only&#160;one&#160;response packet&#160;after&#160;transmission&#160;of&#160;the&#160;<br/>entire block.&#160;<br/>The&#160;XCP&#160;Master&#160;has&#160;to&#160;meet&#160;the&#160;slave's&#160;limitations&#160;of&#160;the&#160;<br/>maximum&#160;block&#160;size and the&#160;minimum&#160;separation&#160;time.&#160;These&#160;<br/>communication&#160;parameters&#160;are&#160;responded within the&#160;response&#160;<br/>to&#160;GET_COMM_MODE_INFO.&#160;<br/>
MIN_ST&#160;for&#160;Block Download&#160;<br/>
MIN_ST&#160;indicates&#160;the&#160;required&#160;minimum&#160;separation&#160;time&#160;<br/>between the&#160;packets&#160;of&#160;a&#160;block&#160;transfer&#160;from&#160;the&#160;master&#160;device&#160;<br/>to&#160;the&#160;slave device in&#160;units&#160;of&#160;100&#160;microseconds.&#160;<br/>The&#160;value&#160;given&#160;in GENy&#160;is&#160;transmitted&#160;within the&#160;response&#160;to&#160;<br/>the&#160;command&#160;GET_COMM_MODE_INFO.&#160;<br/>
Table&#160;7-3&#160;Component&#160;configuration&#160;–&#160;Standard&#160;Commands&#160;<br/>
<b>7.1.2.4&#160;</b><br/>
<b>Checksum&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-5&#160;Component&#160;configuration&#160;–&#160;Checksum&#160;<br/>
&#160;<br/>
<b>Configuration&#160;option&#160;</b><br/>
<b>Description&#160;of&#160;configuration&#160;option&#160;</b><br/>
Checksum&#160;<br/>
The&#160;XCP&#160;command BUILD_CHECKSUM&#160;returns a&#160;checksum&#160;<br/>that&#160;is&#160;calculated&#160;over&#160;the memory&#160;block&#160;defined&#160;by&#160;the&#160;Memory&#160;<br/>Transfer&#160;Address&#160;(MTA)&#160;and block&#160;size.&#160;The&#160;MTA&#160;will&#160;be&#160;post-<br/>incremented&#160;by&#160;the&#160;block&#160;size.&#160;<br/>The&#160;checksum&#160;type&#160;(size of&#160;the&#160;checksum)&#160;and&#160;the calculation&#160;<br/>method&#160;can&#160;be configured.&#160;<br/>
Custom&#160;CRC&#160;Module Support&#160;&#160;Support&#160;a&#160;custom&#160;CRC&#160;module by&#160;calling&#160;a&#160;user&#160;call-back.&#160;<br/>
Internal&#160;CRC&#160;calculation&#160;is&#160;deactivated.&#160;<br/>
AUTOSAR&#160;CRC&#160;Module&#160;<br/>
If&#160;‘AUTOSAR&#160;CRC&#160;Module Support’&#160;is&#160;enabled&#160;only&#160;the&#160;<br/>
Support&#160;<br/>
following&#160;checksum&#160;calculation methods are available:&#160;<br/>
<b>&gt;&#160;&#160;</b>CRC16_CCITT:&#160;CRC16&#160;CCITT&#160;algorithm&#160;<br/>
<b>&gt;&#160;&#160;</b>CRC32:&#160;CRC32&#160;algorithm&#160;<br/>The&#160;CRC32&#160;algorithm&#160;is&#160;only&#160;supported&#160;if&#160;the&#160;AUTOSAR&#160;CRC&#160;<br/>Module is used.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
84&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=85></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-85_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-85_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Calculation Method&#160;<br/>
The&#160;following&#160;checksum&#160;calculation methods are&#160;supported:&#160;<br/>
<b>&gt;&#160;&#160;</b>ADD_11:&#160;add a&#160;BYTE&#160;into a&#160;BYTE&#160;checksum&#160;<br/>
<b>&gt;&#160;&#160;</b>ADD_12:&#160;add a&#160;BYTE&#160;into a&#160;WORD&#160;checksum&#160;<br/>
<b>&gt;&#160;&#160;</b>ADD_14:&#160;add a&#160;BYTE&#160;into a&#160;DWORD&#160;checksum&#160;<br/>
<b>&gt;&#160;&#160;</b>ADD_22:&#160;add a&#160;WORD&#160;into&#160;a&#160;WORD&#160;checksum&#160;<br/>
<b>&gt;&#160;&#160;</b>ADD_24:&#160;add a&#160;WORD&#160;into&#160;a&#160;DWORD&#160;checksum&#160;<br/>
<b>&gt;&#160;&#160;</b>ADD_44:&#160;add a&#160;DWORD&#160;into&#160;a&#160;DWORD&#160;checksum&#160;<br/>
<b>&gt;&#160;&#160;</b>CRC16_CCITT:&#160;CRC16&#160;CCITT&#160;algorithm&#160;<br/>
<b>&gt;&#160;&#160;</b>CRC32:&#160;CRC32&#160;algorithm&#160;<br/>The&#160;CRC32&#160;algorithm&#160;is&#160;only&#160;supported&#160;if&#160;the&#160;AUTOSAR&#160;CRC&#160;<br/>Module is used.&#160;<br/>All&#160;checksum&#160;calculation algorithms&#160;except&#160;of&#160;the&#160;CRC&#160;<br/>algorithms&#160;ignore overflows.&#160;The&#160;block&#160;size&#160;has&#160;to&#160;be&#160;a&#160;multiple&#160;<br/>of&#160;the&#160;size of&#160;the&#160;type&#160;that&#160;is&#160;added.&#160;<br/>
Block&#160;Size&#160;<br/>
Please refer&#160;to&#160;the&#160;help&#160;of&#160;'Checksum'.&#160;<br/>
Table&#160;7-4&#160;Component&#160;configuration&#160;–&#160;Checksum&#160;<br/>
&#160;<br/>
<b>7.1.2.5&#160;</b><br/>
<b>Page&#160;Switching&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-6&#160;Component&#160;configuration&#160;–&#160;Page&#160;Switching&#160;<br/>
&#160;<br/>
<b>Configuration&#160;option&#160;</b><br/>
<b>Description&#160;of&#160;configuration&#160;option&#160;</b><br/>
Page Switching&#160;<br/>
If&#160;calibration&#160;page&#160;switching&#160;(PAG)&#160;is&#160;enabled&#160;the&#160;access&#160;mode&#160;<br/>calibration&#160;data&#160;segments&#160;can&#160;be&#160;set.&#160;<br/>Calibration&#160;data&#160;segments&#160;and&#160;their&#160;pages&#160;are specified&#160;by&#160;<br/>logical&#160;numbers.&#160;<br/>
General&#160;Paging&#160;Info&#160;<br/>
If&#160;'General&#160;Paging Info'&#160;is&#160;enabled&#160;the&#160;XCP&#160;command&#160;<br/>'GET_PAG_PROCESSOR_INFO'&#160;returns&#160;general&#160;information&#160;<br/>on&#160;paging.&#160;<br/>The&#160;following&#160;information&#160;is&#160;transferred&#160;from&#160;the&#160;slave device to&#160;<br/>the&#160;master&#160;device:&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;total&#160;number&#160;of&#160;segments&#160;<br/>
<b>&gt;&#160;&#160;</b>Whether&#160;the&#160;freeze&#160;mode is supported&#160;<br/>Specific&#160;information&#160;for&#160;segments&#160;or&#160;pages&#160;is&#160;so&#160;far&#160;not&#160;<br/>supported.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
85&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=86></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-86_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-86_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Copy&#160;Page&#160;<br/>
If&#160;more&#160;than one&#160;calibration&#160;page is defined,&#160;the&#160;slave&#160;can&#160;copy&#160;<br/>a calibration&#160;page&#160;into&#160;another.&#160;<br/>In principle any&#160;page&#160;of&#160;any&#160;segment&#160;can&#160;be&#160;copied&#160;to&#160;any&#160;page&#160;<br/>of&#160;any&#160;segment.&#160;However,&#160;restrictions&#160;might&#160;be&#160;possible.&#160;<br/>
Freeze Mode&#160;<br/>
If&#160;enabled&#160;the&#160;commands&#160;SET_SEGMENT_MODE&#160;and&#160;<br/>GET_SEGMENT_MODE&#160;are&#160;enabled&#160;and&#160;forwarded&#160;to&#160;the&#160;<br/>application.&#160;<br/>Enabling&#160;this&#160;feature&#160;also set&#160;the&#160;Freeze Mode Supported&#160;bit&#160;in&#160;<br/>General&#160;Paging&#160;Info&#160;<br/>
Table&#160;7-5&#160;Component&#160;configuration&#160;–&#160;Page&#160;Switching&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.1.2.6&#160;</b><br/>
<b>Programming&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-7&#160;Component&#160;configuration&#160;–&#160;Programming&#160;<br/>
&#160;<br/>
<b>Configuration&#160;option&#160;</b><br/>
<b>Description&#160;of&#160;configuration&#160;option&#160;</b><br/>
Programming&#160;<br/>
The&#160;option&#160;'Programming'&#160;enables&#160;the&#160;programming&#160;of&#160;non-<br/>volatile memory.&#160;<br/>If&#160;the&#160;internal&#160;flash&#160;of&#160;the&#160;microcontroller&#160;cannot&#160;be&#160;<br/>programmed&#160;while execution of&#160;code&#160;from&#160;the&#160;flash,&#160;the&#160;<br/>'bootloader&#160;download'&#160;functionality&#160;has&#160;to&#160;be&#160;used instead.&#160;<br/>
Programming&#160;Write&#160;Protection&#160;&#160;The&#160;option&#160;'Programming&#160;Write&#160;Protection'&#160;enables the&#160;<br/>
programming&#160;write protection&#160;of&#160;non-volatile memory..&#160;I.e.&#160;prior&#160;<br/>to carrying&#160;out&#160;write access&#160;to&#160;non-volatile memory&#160;an&#160;<br/>application callback&#160;function&#160;(see<a href="TechnicalReference_Asr_Xcps.html#56">&#160;6.5.10)</a>&#160;is&#160;called&#160;and the&#160;<br/>memory&#160;address&#160;is&#160;passed&#160;as parameter.&#160;The&#160;application has&#160;<br/>to either&#160;grant&#160;or&#160;deny&#160;the memory&#160;access.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
86&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=87></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-87_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-87_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Min_St_Pgm&#160;<br/>
This&#160;parameter&#160;defines&#160;the&#160;delay&#160;the&#160;Master&#160;should insert&#160;<br/>between two consecutive PROGRAM_NEXT&#160;commands.&#160;This&#160;<br/>parameter&#160;is&#160;only&#160;relevant&#160;if&#160;Block&#160;Mode&#160;is&#160;used.&#160;<br/>
Processor&#160;and Sector&#160;Info&#160;<br/>
The&#160;option&#160;'Processor&#160;and Sector&#160;Info'&#160;enables&#160;the commands:&#160;<br/>
<b>&gt;&#160;&#160;</b>GET_PGM_PROCESSOR_INFO&#160;<br/>
Transfers&#160;the&#160;general&#160;properties&#160;for&#160;programming and&#160;the&#160;<br/>total&#160;number&#160;of&#160;available&#160;sectors&#160;from&#160;the&#160;slave device to&#160;<br/>the&#160;master&#160;device.&#160;<br/>
<b>&gt;&#160;&#160;</b>GET_SECTOR_INFO&#160;<br/>
Transfers&#160;information&#160;on&#160;a specific&#160;sector&#160;from&#160;the&#160;slave&#160;<br/>device to the&#160;master&#160;device.&#160;<br/>
Sectors&#160;<br/>
The&#160;information&#160;for&#160;sectors,&#160;which is transferred&#160;from&#160;the&#160;slave&#160;<br/>device to the&#160;master&#160;device,&#160;can&#160;be&#160;configured.&#160;<br/>Attention:&#160;The&#160;sector&#160;number&#160;has&#160;to be&#160;dense&#160;and zero-based!&#160;<br/>
Sector&#160;<br/>
For&#160;each&#160;'Sector'&#160;information&#160;can&#160;be&#160;configured.&#160;This&#160;<br/>information&#160;is&#160;transferred&#160;from&#160;the&#160;slave device to&#160;the&#160;master&#160;<br/>device.&#160;<br/>
Number&#160;<br/>
The&#160;sector&#160;numbers&#160;have to&#160;be&#160;dense&#160;and&#160;zero-based.&#160;<br/>Therefore&#160;this&#160;number&#160;cannot&#160;be&#160;entered&#160;manually.&#160;<br/>
Name&#160;<br/>
Name&#160;of&#160;this&#160;sector.&#160;This&#160;information&#160;can&#160;be&#160;read&#160;and displayed&#160;<br/>by&#160;the&#160;Master&#160;Tool&#160;if&#160;supported.&#160;<br/>
Start&#160;Address&#160;<br/>
The&#160;'Start&#160;Address'&#160;of&#160;each sector&#160;is&#160;individually&#160;configured&#160;in&#160;<br/>the&#160;slave device and transferred&#160;to&#160;the&#160;master&#160;device.&#160;<br/>
End&#160;Address&#160;<br/>
The&#160;'End&#160;Address'&#160;of&#160;each sector&#160;is&#160;individually&#160;configured&#160;in&#160;<br/>the&#160;slave device and transferred&#160;to&#160;the&#160;master&#160;device.&#160;<br/>
Table&#160;7-6&#160;Component&#160;configuration&#160;–&#160;Programming&#160;<br/>
<b>7.1.2.7&#160;</b><br/>
<b>Fr Parameter&#160;</b><br/>
The&#160;XCP&#160;component&#160;provides&#160;a&#160;functionality&#160;to&#160;read&#160;the&#160;FlexRay&#160;Parameters&#160;as&#160;provided&#160;<br/>by&#160;the&#160;FrIf/Fr&#160;Driver.&#160;They&#160;are&#160;accessible&#160;with&#160;a&#160;configurable&#160;address&#160;extension&#160;at&#160;virtual&#160;<br/>addresses.&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;7-8&#160;Component&#160;configuration&#160;–&#160;FlexRay&#160;Parameter&#160;<br/>
&#160;<br/>
<b>Configuration&#160;option&#160;</b><br/>
<b>Description&#160;of&#160;configuration&#160;option&#160;</b><br/>
Virtual&#160;FlexRay&#160;Parameters&#160;<br/>
If&#160;the&#160;“Virtual&#160;FlexRay&#160;Parameters”&#160;feature is&#160;enabled,&#160;the&#160;<br/>parameters&#160;can&#160;be&#160;read&#160;out&#160;in a&#160;platform&#160;independent&#160;way.&#160;<br/>They&#160;will&#160;be&#160;provided as&#160;virtual&#160;measurement&#160;values&#160;that&#160;can&#160;<br/>be&#160;read&#160;at&#160;fixed&#160;memory&#160;locations.&#160;This&#160;Option&#160;is&#160;only&#160;available&#160;<br/>if&#160;the&#160;ReadCCConfig API&#160;is&#160;enabled&#160;in&#160;the&#160;FrIf&#160;and Fr&#160;Driver.&#160;<br/>
FlexRay&#160;Parameter&#160;Address&#160;<br/>
The&#160;&#34;Virtual&#160;FlexRay&#160;Parameters&#34;&#160;are&#160;accessible with this&#160;<br/>
extension&#160;<br/>
address&#160;extension.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
87&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=88></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-88_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-88_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
An&#160;&#160;a2l&#160;&#160;File&#160;&#160;named&#160;&#160;FrParam.a2l&#160;&#160;is&#160;&#160;provided&#160;&#160;and&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;read&#160;&#160;these&#160;&#160;Parameter&#160;<br/>platform&#160;independently.&#160;The&#160;a2l&#160;file&#160;describes&#160;the&#160;parameters&#160;according&#160;to&#160;the&#160;AUTOSAR&#160;<br/>3.2.1&#160;spezification.&#160;<br/>
&#160;<br/>
<b>7.1.2.8&#160;</b><br/>
<b>Generated&#160;a2l&#160;files&#160;</b><br/>
The&#160;Configuration&#160;Tool&#160;also&#160;generates&#160;multiple&#160;a2l&#160;files&#160;which&#160;can&#160;be&#160;used&#160;in&#160;the&#160;Master&#160;<br/>tool&#160;for easier integration.&#160;The&#160;following&#160;files&#160;are generated:&#160;<br/>
&#160;&#160;XCP.a2l&#160;(general protocol layer settings)&#160;<br/>&#160;&#160;XCP_daq.a2l&#160;(DAQ&#160;specific settings)&#160;<br/>&#160;&#160;XCP_events.a2l&#160;(DAQ&#160;event&#160;info)&#160;<br/>&#160;&#160;XCP_Checksum.a2l (Checksum&#160;information)&#160;<br/>
&#160;<br/>
<b>Example&#160;Master.a2l:&#160;<br/>&#160;</b><br/>
&#160;<br/>
...&#160;<br/>/begin IF_DATA XCP&#160;<br/>&#160;&#160;/include XCP.a2l&#160;<br/>&#160;&#160;<b>/begin DAQ&#160;<br/>&#160; &#160;&#160;/include XCP_daq.a2l&#160;<br/>&#160; &#160;&#160;/include&#160;XCP_events.a2l&#160;<br/>&#160; &#160;&#160;/include&#160;XCP_checksum.a2l&#160;<br/>&#160; &#160;&#160;...&#160;<br/>&#160;&#160;/end DAQ&#160;<br/></b>&#160;&#160;/include CanXCPAsr.a2l&#160;<br/>/end IF_DATA&#160;<br/>...&#160;<br/>/include bsw.a2l&#160;<br/>...<b>&#160;<br/></b>&#160;<br/>
&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Configuration&#160;without Generation Tool&#160;</b><br/>
The&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;&#160;configuration&#160;&#160;switches&#160;&#160;and&#160;&#160;constants&#160;&#160;is&#160;&#160;done&#160;&#160;in&#160;&#160;the&#160;&#160;file&#160;<br/>xcp_cfg.h.&#160;An&#160;example&#160;that&#160;contains&#160;the&#160;default configuration&#160;of&#160;XCP&#160;Basic is distributed&#160;<br/>together&#160;&#160;with&#160;&#160;XCP&#160;&#160;Basic.&#160;&#160;It&#160;&#160;is&#160;&#160;recommended&#160;&#160;to&#160;&#160;use&#160;&#160;this&#160;&#160;example&#160;&#160;as&#160;&#160;a&#160;&#160;template&#160;&#160;for&#160;&#160;the&#160;<br/>individual configuration.&#160;<br/>
<b>7.2.1&#160;</b><br/>
<b>Compiler Switches&#160;</b><br/>
Compiler&#160;switches&#160;are&#160;used&#160;to&#160;enable/disable&#160;optional&#160;functionalities&#160;in&#160;order&#160;to&#160;save&#160;code&#160;<br/>space&#160;and&#160;RAM.&#160;<br/>In&#160;&#160;the&#160;&#160;following&#160;&#160;table&#160;&#160;you&#160;&#160;will&#160;&#160;find&#160;&#160;a&#160;&#160;complete&#160;&#160;list&#160;&#160;of&#160;&#160;all&#160;&#160;configuration&#160;&#160;switches,&#160;&#160;used&#160;&#160;to&#160;<br/>control&#160;&#160;the&#160;&#160;functional&#160;&#160;units&#160;&#160;that&#160;&#160;are&#160;&#160;common&#160;&#160;to&#160;&#160;XCP&#160;&#160;Basic&#160;&#160;and&#160;&#160;XCP&#160;&#160;Professional.&#160;&#160;The&#160;<br/>default values are&#160;bold.&#160;<br/>
<b>Configuration&#160;switches&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Description&#160;</b><br/>
XCP_xxx_DAQ&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Enables/disables synchronous&#160;<br/>
data acquisition.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
88&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=89></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-89_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
XCP_xxx_DAQ_PRESCALER&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Enables/disables the&#160;DAQ&#160;<br/>
prescaler.&#160;<br/>
XCP_xxx_DAQ_OVERRUN_INDICATION&#160;ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Enables/disables the&#160;DAQ&#160;<br/>
overrun&#160;detection.&#160;<br/>
XCP_xxx_DAQ_HDR_ODT_DAQ2&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;The&#160;2 Byte DAQ/ODT&#160;XCP&#160;<br/>
Packet&#160;identification&#160;is&#160;used&#160;<br/>instead of&#160;the&#160;PID.&#160;<br/>Enabled:&#160;Relative ODT&#160;<br/>number,&#160;absolute list&#160;number&#160;<br/>(BYTE)&#160;<br/>Disabled:&#160;Absolute&#160;ODT&#160;<br/>number&#160;<br/>
XCP_xxx_DAQ_PROCESSOR_INFO&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Plug&#160;&amp;&#160;play&#160;mechanism&#160;for&#160;<br/>
the&#160;data acquisition&#160;processor.&#160;<br/>
XCP_xxx_DAQ_RESOLUTION_INFO&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Plug&#160;&amp;&#160;play&#160;mechanism&#160;for&#160;<br/>
the&#160;data acquisition&#160;resolution.&#160;<br/>
XCP_xxx_DAQ_EVENT_INFO&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Plug&#160;&amp;&#160;play&#160;mechanism&#160;for&#160;<br/>
the&#160;event&#160;definitions.&#160;<br/>
XCP_xxx_DAQ_TIMESTAMP&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;DAQ&#160;timestamps&#160;<br/>
XCP_xxx_DAQ_TIMESTAMP_FIXED&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Slave always&#160;sends DTO&#160;<br/>
Packets&#160;in&#160;time&#160;stamped&#160;<br/>mode.&#160;Otherwise are&#160;<br/>timestamps&#160;used&#160;individual&#160;by&#160;<br/>each DAQ-list.&#160;<br/>
kXcpDaqTimestampSize&#160;<br/>
DAQ_TIMESTAMP_BYTE,&#160;&#160;The&#160;size of&#160;timestamps&#160;which&#160;<br/>
DAQ_TIMESTAMP_WORD,&#160;&#160;can&#160;either&#160;be&#160;1Byte,&#160;2Bytes or&#160;<br/>
DAQ_TIMESTAMP_DWORD&#160;4Bytes.&#160;<br/>
XCP_xxx_SEED_KEY&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Seed &amp;&#160;key&#160;access&#160;protection&#160;<br/>
XCP_xxx_CHECKSUM&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Calculation of&#160;checksum&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
XCP_xxx_CRC16CCITT_REFLECTED&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Enable/disable reflected&#160;<br/>
CRC16&#160;CCITT&#160;checksum&#160;<br/>calculation algorithm.&#160;<br/>Also refer&#160;t<a href="TechnicalReference_Asr_Xcps.html#93">o&#160;7.2.2.1&#160;‘Table of&#160;<br/>Checksum&#160;Calculation&#160;<br/>Methods’.</a>&#160;<br/>
XCP_xxx_AUTOSAR_CRC_MODULE&#160;<br/>
<b>ENABLE</b>,&#160;DISABLE&#160;&#160;Usage&#160;of&#160;CRC&#160;algorithms&#160;of&#160;<br/>
AUTOSAR&#160;CRC&#160;module.&#160;<br/>
XCP_xxx_PARAMETER_CHECK&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Parameter&#160;check&#160;<br/>
XCP_xxx_SEND_QUEUE&#160;<br/>
<b>ENABLE</b>, DISABLE&#160;&#160;Transmission&#160;send&#160;queue&#160;&#160;<br/>
(shall&#160;be&#160;used&#160;in conjunction&#160;<br/>with synchronous&#160;data&#160;<br/>acquisition&#160;and&#160;stimulation).&#160;<br/>
XCP_xxx_SEND_EVENT&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Transmission&#160;of&#160;event&#160;packets&#160;<br/>
(EV)&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
2&#160;The&#160;XCP&#160;Protocol&#160;allows&#160;three identification&#160;field&#160;types&#160;for DTOs: ‘absolute&#160;ODT&#160;number’, ‘relative ODT&#160;<br/>number&#160;and absolute&#160;DAQ&#160;list number’, ‘empty&#160;identification&#160;field’&#160;(not supported)&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
89&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=90></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-90_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
XCP_xxx_USER_COMMAND&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;User&#160;defined&#160;command&#160;<br/>
XCP_xxx_TL_COMMAND&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Transport&#160;Layer&#160;command&#160;<br/>
XCP_xxx_COMM_MODE_INFO&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Communication&#160;mode&#160;info&#160;<br/>
XCP_xxx_CALIBRATION_PAGE&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Calibration&#160;data page&#160;<br/>
switching&#160;<br/>
XCP_xxx_PAGE_INFO&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Calibration&#160;data page&#160;plug &amp;&#160;<br/>
play&#160;mechanism&#160;<br/>
XCP_xxx_PAGE_COPY&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Calibration&#160;data page&#160;copying&#160;<br/>
XCP_xxx_PAGE_FREEZE&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Segment&#160;freeze mode&#160;<br/>
handling&#160;&#160;<br/>
XCP_xxx_DPRAM3&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;&#160;Supports&#160;the&#160;usage of&#160;dual&#160;<br/>
port&#160;RAM&#160;<br/>
&#160;<br/>
The&#160;following&#160;table&#160;contains&#160;an&#160;additional&#160;list&#160;of&#160;all&#160;configuration&#160;switches,&#160;used&#160;to&#160;control&#160;<br/>the&#160;&#160;functional&#160;&#160;units&#160;&#160;that&#160;&#160;are&#160;&#160;only&#160;&#160;available&#160;&#160;in&#160;&#160;XCP&#160;&#160;Professional.&#160;&#160;The&#160;&#160;default&#160;&#160;values&#160;&#160;are&#160;<br/>bold.&#160;<br/>
<b>Configuration&#160;switches&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Description&#160;</b><br/>
XCP_xxx_BLOCK_UPLOAD&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enables/disables the&#160;slave&#160;<br/>block transfer.&#160;<br/>
XCP_xxx_BLOCK_DOWNLOAD&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enables/disables the&#160;master&#160;<br/>block transfer.&#160;<br/>
XCP_xxx_WRITE_PROTECTION&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Write access&#160;to&#160;RAM&#160;<br/>
XCP_xxx_READ_PROTECTION&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Read access&#160;to&#160;RAM&#160;<br/>
XCP_xxx_READ_EEPROM&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Read access&#160;to&#160;EEPROM&#160;<br/>
XCP_xxx_WRITE_EEPROM&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Write access&#160;to&#160;EEPROM&#160;<br/>
XCP_xxx_PROGRAMMING_WRITE_PRO&#160;ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Write access&#160;to&#160;flash&#160;<br/>
TECTION&#160;<br/>XCP_xxx_PROGRAM&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Flash&#160;programming&#160;<br/>
XCP_xxx_PROGRAM_INFO&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Flash&#160;programming&#160;plug&#160;&amp;&#160;play&#160;<br/>mechanism&#160;<br/>
XCP_xxx_BOOTLOADER_DOWNLOAD&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Flash&#160;programming&#160;with a&#160;<br/>flash&#160;kernel&#160;<br/>
XCP_xxx_STIM&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enables/disables data&#160;<br/>stimulation.&#160;<br/>(also&#160;XCP_ENABLE_DAQ&#160;has&#160;to&#160;<br/>be&#160;defined in&#160;order&#160;to use data&#160;<br/>stimulation)&#160;<br/>
XCP_xxx_DAQ_RESUME&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Data&#160;acquisition&#160;resume&#160;mode.&#160;<br/>
XCP_xxx_SERV_TEXT&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Transmission&#160;of&#160;service&#160;<br/>request&#160;codes&#160;<br/>
XCP_xxx_SERV_TEXT_PUTCHAR&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Putchar&#160;function&#160;for&#160;the&#160;<br/>transmission&#160;of&#160;service request&#160;<br/>messages&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
3&#160;Not supported by&#160;XCP&#160;Professional&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
90&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=91></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-91_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
XCP_xxx_SERV_TEXT_PRINTF&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Print&#160;function&#160;for&#160;the&#160;<br/>transmission&#160;of&#160;service&#160;request&#160;<br/>messages&#160;<br/>
XCP_xxx_MEM_ACCESS_BY_APPL&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Memory&#160;access&#160;by&#160;application&#160;<br/>
XCP_xxx_MODEL_PAGED&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Support&#160;for&#160;paging&#160;/&#160;banking&#160;<br/>
XCP_xxx_SHORT_DOWNLOAD&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Support&#160;for&#160;<br/>SHORT_DOWNLOAD&#160;<br/>command&#160;<br/>
XCP_xxx_MODIFY_BITS&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Support&#160;for&#160;MODIFY_BITS&#160;<br/>command&#160;<br/>
XCP_xxx_WRITE_DAQ_MULTIPLE&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Write DAQ&#160;multiple command&#160;<br/>
XCP_xxx_GET_XCP_DATA_POINTER&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enable&#160;API&#160;for&#160;internal&#160;data&#160;<br/>access&#160;<br/>
XCP_xxx_CONTROL&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enable&#160;API&#160;for&#160;en-&#160;/&#160;disable&#160;<br/>XCP&#160;module&#160;<br/>
XCP_xxx_DEV_ERROR_DETECT&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enable Development&#160;Error&#160;<br/>check&#160;<br/>
XCP_xx_READCCCONFIG&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enable Read&#160;of&#160;FlexRay&#160;<br/>Parameters&#160;<br/>
XCP_ADDR_EXT_READCCCONFIG&#160;<br/>
0x00…0xff&#160;<br/>
Address&#160;&#160;Extension&#160;to&#160;be&#160;used&#160;<br/>for&#160;FlexRay&#160;Parameters&#160;<br/>
XCP_xxx_VECTOR_GENERICMEASUREMEN&#160;ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Support&#160;for&#160;Generic&#160;<br/>
T&#160;<br/>
Measurement&#160;feature&#160;<br/>
XCP_xxx_GET_SESSION_STATUS_API&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enable&#160;API&#160;to&#160;acquire&#160;the&#160;<br/>current&#160;session&#160;status&#160;<br/>
XCP_xxx_CUSTOM_CRC&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
Enable call-back&#160;for&#160;custom&#160;<br/>CRC&#160;calculation&#160;<br/>
XCP_xxx_GET_ID_GENERIC&#160;<br/>
ENABLE,&#160;<b>DISABLE</b>&#160;<br/>
ECU&#160;identification&#160;<br/>
&#160;<br/>
The&#160;following&#160;table&#160;contains&#160;an&#160;additional&#160;list&#160;of&#160;all&#160;configuration&#160;switches,&#160;used&#160;to&#160;control&#160;<br/>the&#160;functional&#160;units that&#160;are only&#160;available&#160;in&#160;XCP&#160;basic.&#160;The&#160;default&#160;values are bold.&#160;<br/>
<b>Configuration&#160;switches&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Description&#160;</b><br/>
XCP_ENABLE_TESTMODE4&#160;&#160;ENABLE,&#160;&#160;Test&#160;mode&#160;that&#160;allows&#160;the output&#160;of&#160;debugging&#160;<br/>
<b>DISABLE</b>&#160;&#160;information.&#160;<br/>
Not&#160;included&#160;in&#160;XCP&#160;Professional&#160;due to&#160;multiple MISRA&#160;<br/>rule violations!&#160;<br/>
&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
4&#160;Not supported by&#160;XCP&#160;Professional&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
91&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=92></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-92_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>7.2.2&#160;</b><br/>
<b>Configuration of Constant Definitions&#160;</b><br/>
The&#160;configuration&#160;of&#160;constant&#160;definitions&#160;is done&#160;as&#160;described&#160;below.&#160;&#160;<br/>The&#160;default values are&#160;bold.&#160;<br/>
<b>Constant&#160;definitions&#160;</b><br/>
<b>Range&#160;</b><br/>
<b>Default&#160;&#160;Description&#160;</b><br/>
kXcpMaxCTOMax&#160;<br/>
8..255&#160;<br/>
<b>8&#160;</b><br/>
Maximum&#160;length&#160;of&#160;XCP&#160;command&#160;transfer&#160;<br/>objects&#160;(CTO).&#160;<br/>The&#160;length&#160;of&#160;the&#160;CTO&#160;can&#160;be&#160;variable.&#160;<br/>However&#160;it&#160;has&#160;to be&#160;configured&#160;according&#160;to&#160;the&#160;<br/>used&#160;XCP&#160;Transport&#160;Layer.&#160;<br/>
kXcpMaxDTOMax&#160;<br/>
8..2555&#160;<br/>
<b>8&#160;</b><br/>
Maximum&#160;length&#160;of&#160;XCP&#160;data&#160;transfer&#160;objects&#160;<br/>(DTO).&#160;<br/>The&#160;length&#160;of&#160;the&#160;DTO&#160;can&#160;be&#160;variable.&#160;<br/>However&#160;it&#160;has&#160;to be&#160;configured&#160;according&#160;to&#160;the&#160;<br/>used&#160;XCP&#160;Transport&#160;Layer.&#160;<br/>
kXcpDaqMemSize&#160;<br/>
0..&#160;<br/>
<b>256&#160;</b><br/>
Define&#160;the&#160;amount&#160;of&#160;memory&#160;used&#160;for&#160;the&#160;DAQ&#160;<br/>
0xFFFF&#160;<br/>
lists&#160;and buffers.&#160;<br/>Also refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#100">&#160;8&#160;(Resource&#160;<br/>Requirements).</a>&#160;<br/>
kXcpSendQueueMinSize&#160;<br/>
1..0x7F&#160;&#160;<b>-&#160;</b><br/>
The&#160;minimum&#160;queue&#160;size required&#160;for&#160;DAQ.&#160;The&#160;<br/>queue&#160;size is the&#160;unallocated&#160;memory&#160;reserved&#160;<br/>by&#160;kXcpDaqMemSize.&#160;<br/>
kXcpMaxEvent&#160;<br/>
0..0xFF6&#160;&#160;<b>-&#160;</b><br/>
Number&#160;of&#160;available events&#160;in&#160;the&#160;slave (part&#160;of&#160;<br/>event&#160;channel&#160;plug&#160;&amp;&#160;play&#160;mechanism)&#160;<br/>Also refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#95">&#160;7.2.5.</a>&#160;<br/>
kXcpStimOdtCount&#160;<br/>
0..0xC0&#160;&#160;<b>0xC0&#160;</b><br/>
Maximum&#160;number&#160;of&#160;ODTs&#160;that&#160;may&#160;be&#160;used&#160;for&#160;<br/>Synchronous&#160;Data&#160;Stimulation.&#160;<br/>
kXcpChecksumMethod&#160;<br/>
-&#160;<br/>
<b>-&#160;</b><br/>
Checksum&#160;calculation method.&#160;<br/>Refer&#160;to&#160;chapter<a href="TechnicalReference_Asr_Xcps.html#93">&#160;7.2.2.1&#160;‘Table of&#160;Checksum&#160;<br/>Calculation Methods’&#160;</a>for&#160;valid values.&#160;<br/>
kXcpChecksumBlockSize&#160;&#160;1&#160;..&#160;<br/>
<b>256&#160;</b><br/>
Each&#160;call&#160;of&#160;XcpBackground&#160;calculates&#160;the&#160;<br/>
0xFFFF&#160;<br/>
checksum&#160;on&#160;the&#160;amount&#160;of&#160;bytes&#160;specified&#160;by&#160;<br/>kXcpChecksumBlockSize.&#160;<br/>
XCP_TRANSPORT_LAYER_V<br/>
0..&#160;<br/>
<b>-&#160;</b><br/>
Version of&#160;the&#160;XCP&#160;Transport&#160;Layer&#160;that&#160;is&#160;used.&#160;<br/>
ERSION&#160;<br/>
0xFFFF&#160;<br/>
(this&#160;version&#160;gets&#160;transferred&#160;to&#160;the&#160;MCS)&#160;<br/>
kXcpMaxSector&#160;<br/>
1..0xFF&#160;&#160;<b>-&#160;</b><br/>
Number&#160;of&#160;flash&#160;sectors&#160;<br/>Also refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#97">&#160;7.2.7&#160;</a><br/>
kXcpMaxSegment&#160;<br/>
1&#160;<br/>
<b>1&#160;</b><br/>
Number&#160;of&#160;memory&#160;segments&#160;<br/>Also refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#98">&#160;7.2.8.</a>&#160;<br/>
kXcpMaxPages&#160;<br/>
1..2&#160;<br/>
<b>2&#160;</b><br/>
Number&#160;of&#160;pages&#160;<br/>Also refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#98">&#160;7.2.8.</a>&#160;<br/>
NUMBER_OF_TRANSPORTLA<br/>
1..&#160;<br/>
<b>1&#160;</b><br/>
Number&#160;of&#160;used&#160;Transport&#160;Layers&#160;<br/>
YERS&#160;<br/>
XCP_TRANSPORT_LAYER_C<br/>
0..&#160;<br/>
<b>0&#160;</b><br/>
Index&#160;of&#160;Transport&#160;Layer&#160;<br/>
AN&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
5&#160;Implementation&#160;specific&#160;range.&#160;The&#160;range is&#160;8..0xFFFF&#160;according&#160;to&#160;XCP&#160;specificatio<a href="TechnicalReference_Asr_Xcps.html#108">n&#160;[I],&#160;[II].</a>&#160;<br/>
6&#160;Implementation&#160;specific&#160;range.&#160;The&#160;range is&#160;0..0xFFFE&#160;according&#160;to XCP&#160;specification<a href="TechnicalReference_Asr_Xcps.html#108">&#160;[I],&#160;[II].</a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
92&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=93></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-93_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
XCP_TRANSPORT_LAYER_F<br/>
0..&#160;<br/>
<b>1&#160;</b><br/>
Index&#160;of&#160;Transport&#160;Layer&#160;<br/>
R&#160;<br/>
XCP_TRANSPORT_LAYER_E<br/>
0..&#160;<br/>
<b>2&#160;</b><br/>
Index&#160;of&#160;Transport&#160;Layer&#160;<br/>
TH&#160;<br/>
&#160;<br/>
<b>7.2.2.1&#160;</b><br/>
<b>Table&#160;of Checksum Calculation Methods&#160;</b><br/>
<b>Constant&#160;</b><br/>
<b>Checksum&#160;calculation&#160;method&#160;</b><br/>
XCP_CHECKSUM_TYPE_ADD11&#160;<br/>
Add&#160;BYTE&#160;into&#160;a&#160;BYTE&#160;checksum,&#160;ignore&#160;overflows.&#160;<br/>
XCP_CHECKSUM_TYPE_ADD12&#160;<br/>
Add&#160;BYTE&#160;into&#160;a&#160;WORD&#160;checksum,&#160;ignore overflows&#160;<br/>
XCP_CHECKSUM_TYPE_ADD14&#160;<br/>
Add&#160;BYTE&#160;into&#160;a&#160;DWORD&#160;checksum,&#160;ignore overflows&#160;<br/>
XCP_CHECKSUM_TYPE_ADD22&#160;<br/>
Add&#160;WORD&#160;into&#160;a&#160;WORD&#160;checksum,&#160;ignore overflows,&#160;block&#160;<br/>size must&#160;be&#160;modulo 2&#160;<br/>
XCP_CHECKSUM_TYPE_ADD24&#160;<br/>
Add&#160;WORD&#160;into&#160;a&#160;DWORD&#160;checksum,&#160;ignore overflows,&#160;<br/>block size must&#160;be&#160;modulo 2&#160;<br/>
XCP_CHECKSUM_TYPE_ADD44&#160;<br/>
Add&#160;DWORD&#160;into&#160;DWORD,&#160;ignore overflows,&#160;block size&#160;<br/>must&#160;be&#160;modulo 4&#160;<br/>
XCP_CHECKSUM_TYPE_CRC16CCITT&#160;&#160;CRC16&#160;CCITT&#160;checksum&#160;calculation&#160;algorithm&#160;<br/>
Both&#160;the standard&#160;and&#160;the reflected&#160;algorithm&#160;are&#160;supported.&#160;<br/>Please refer&#160;to chapter<a href="TechnicalReference_Asr_Xcps.html#107">&#160;10.7&#160;‘Reflected&#160;CRC16&#160;CCITT&#160;<br/>Checksum&#160;Calculation&#160;Algorithm’.</a>&#160;<br/>The&#160;CRC16&#160;CCITT&#160;algorithm&#160;of&#160;the&#160;AUTOSAR&#160;CRC&#160;module&#160;<br/>is&#160;only&#160;supported&#160;by&#160;XCP&#160;Professional.&#160;<br/>
XCP_CHECKSUM_TYPE_CRC32&#160;<br/>
CRC32&#160;checksum&#160;calculation&#160;algorithm&#160;<br/>The&#160;CRC32&#160;algorithm&#160;is&#160;only&#160;supported&#160;in&#160;XCP&#160;Professional&#160;<br/>if&#160;the&#160;AUTOSAR&#160;CRC&#160;module is used.&#160;<br/>
&#160;<br/>
<b>7.2.3&#160;</b><br/>
<b>Configuration of the&#160;CPU Type&#160;&#160;</b><br/>
To&#160;provide&#160;platform&#160;independent&#160;code&#160;platform,&#160;the&#160;CPU&#160;type&#160;has&#160;to&#160;be&#160;defined.&#160;<br/>
<b>Configuration&#160;switches&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Description&#160;</b><br/>
C_CPUTYPE_xxxENDIAN&#160;<br/>
LITTLE,&#160;&#160;Definition&#160;whether&#160;the&#160;CPU&#160;is&#160;little endian&#160;(Intel&#160;<br/>
<b>BIG</b>&#160;<br/>
format)&#160;or&#160;big&#160;endian&#160;(Motorola&#160;format).&#160;<br/>
XCP_xxx_UNALIGNED_MEM_ACCESS&#160;&#160;ENABLE,&#160;&#160;Enables /&#160;disables&#160;unaligned&#160;memory&#160;access.&#160;<br/>
DISABLE&#160;&#160;If&#160;XCP_DISBLE_UNALIGNED_MEM_ACCESS&#160;is&#160;<br/>
defined&#160;WORDs&#160;are located&#160;on&#160;WORD&#160;aligned&#160;and&#160;<br/>DWORD&#160;are located on&#160;DWORD&#160;aligned&#160;addresses.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
93&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=94></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-94_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-94_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>7.2.4&#160;</b><br/>
<b>Configuration of Slave&#160;Device&#160;Identification&#160;</b><br/>
The&#160;configuration&#160;of&#160;the&#160;slave&#160;device&#160;identification&#160;and&#160;automatic&#160;session&#160;configuration&#160;is&#160;<br/>described&#160;within&#160;this chapter.&#160;Only&#160;one&#160;of&#160;the&#160;following&#160;options can&#160;be&#160;used&#160;at&#160;one&#160;time.&#160;<br/>
<b>7.2.4.1&#160;</b><br/>
<b>Identification by&#160;ASAM-MC2&#160;Filename&#160;without&#160;Path&#160;and Extension&#160;</b><br/>
If&#160;&#160;the&#160;&#160;slave&#160;&#160;device&#160;&#160;identification&#160;&#160;is&#160;&#160;done&#160;&#160;by&#160;&#160;identification&#160;&#160;with&#160;&#160;an&#160;&#160;ASAM-MC2&#160;&#160;filename&#160;<br/>without&#160;path&#160;and&#160;extension&#160;the&#160;filename&#160;length&#160;has&#160;to&#160;be&#160;defined:&#160;<br/>
#define kXcpStationIdLength&#160;<i>length</i>&#160;<br/>
and&#160;the&#160;station&#160;ID itself&#160;has to&#160;be&#160;defined&#160;as&#160;string:&#160;<br/>
const&#160;uint8 kXcpStationId[] = “<i>station ID</i>”&#160;<br/>
The&#160;range&#160;of&#160;kXcpStationIdLength&#160;is&#160;0..0xFF.&#160;<br/>
<b>7.2.4.2&#160;</b><br/>
<b>Automatic&#160;Session Configuration&#160;with MAP&#160;Filenames&#160;</b><br/>
The&#160;&#160;automatic&#160;&#160;session&#160;&#160;configuration&#160;&#160;by&#160;&#160;transferring&#160;&#160;MAP&#160;&#160;filenames&#160;&#160;is&#160;&#160;a&#160;&#160;Vector&#160;&#160;specific&#160;<br/>extension&#160;that&#160;works&#160;with&#160;CANape&#160;and&#160;can&#160;be&#160;enabled&#160;by&#160;the&#160;“XcpGetIdGeneric”&#160;attribute&#160;<br/>When&#160;&#160;this&#160;&#160;feature&#160;&#160;is&#160;&#160;enabled&#160;&#160;the&#160;API&#160;&#160;as&#160;&#160;described&#160;&#160;in<a href="TechnicalReference_Asr_Xcps.html#14">&#160;&#160;3.4.2&#160;&#160;</a>is&#160;&#160;enabled.&#160;&#160;This&#160;API&#160;&#160;will&#160;&#160;be&#160;<br/>called,&#160;should&#160;CANape&#160;request&#160;the&#160;MAP&#160;filename,&#160;and&#160;must&#160;be&#160;implemented&#160;by&#160;the&#160;user&#160;<br/>accordingly.&#160;This&#160;feature must&#160;explicitly&#160;be&#160;enabled&#160;in&#160;CANape&#160;as&#160;well!&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Example&#160;<br/></b>&#160;<br/>
&#160;&#160;&#160;<br/>
#define&#160;MAP_FORMAT 29&#160;&#160;<br/>#define&#160;MAP_NAME &#160;&#160;&#34;xcpsim&#34;&#160;&#160;<br/>&#160;&#160;<br/>uint8 MapTest[500];&#160;&#160;<br/>uint32 MapTestSize;&#160;&#160;<br/>&#160;&#160;<br/>uint32 XcpAppl_GetIdData( MTABYTEPTR *pData, uint8 id )&#160;&#160;<br/>{&#160;&#160;<br/>&#160;&#160;if( id == IDT_VECTOR_MAPNAMES )&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;MapTestSize =&#160;<br/>sprintf((char*)MapTest,&#34;%c%c%s.map&#34;,MAP_FORMAT,0,MAP_NAME);&#160;&#160;<br/>&#160; &#160;&#160;/* Result: MapTest = ”290xcpsim.map” */&#160;<br/>&#160; &#160;&#160;*pData = MapTest;&#160;&#160;<br/>&#160; &#160;&#160;return&#160;MapTestSize;&#160;&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;else&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;return&#160;0;&#160;/* Id not available */&#160;<br/>&#160;&#160;}&#160;<br/>}&#160;&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>‘MAP_FORMAT’&#160;represents&#160;the&#160;format&#160;of&#160;the&#160;MAP&#160;file.&#160;(See&#160;table&#160;below)&#160;<br/>‘0’&#160;is a&#160;counter that&#160;is used&#160;as&#160;address&#160;extension.&#160;Please&#160;set&#160;this parameter to&#160;0.&#160;<br/>Table of MAP file formats:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
94&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=95></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-95_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
&#160;&#160;1 = &#34;BorlandC 16 Bit&#34; &#160; &#160; &#160; &#160; &#160; &#160; 29 = &#34;Microsoft standard&#34;&#160;&#160;<br/>
&#160;&#160;2 = &#34;M166&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;30 = &#34;ELF/DWARF 16 Bit&#34;&#160;&#160;<br/>
&#160;&#160;3 = &#34;Watcom&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;31 = &#34;ELF/DWARF 32 Bit&#34;&#160;&#160;<br/>
&#160;&#160;4 = &#34;HiTech HC05&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 32 = &#34;Fujitsu Softune 3..8(.mps)&#34;&#160;&#160;<br/>
&#160;&#160;6 = &#34;IEEE&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;33 = &#34;Microware Hawk&#34;&#160;&#160;<br/>
&#160;&#160;7 = &#34;Cosmic&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;34 = &#34;TI C6711&#34;&#160;&#160;<br/>
&#160;&#160;8 = &#34;SDS&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 35 = &#34;Hitachi H8S&#34;&#160;&#160;<br/>
&#160;&#160;9 = &#34;Fujitsu Softune 1(.mp1)&#34; &#160; &#160; 36 = &#34;IAR HC12&#34;&#160;&#160;<br/>
&#160;&#160;10 = &#34;GNU&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;37 = &#34;Greenhill Multi 2000&#34;&#160;&#160;<br/>
&#160;&#160;11 = &#34;Keil 16x&#34; &#160; &#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;38 = &#34;LN308(MITSUBISHI) for M16C/80&#34;&#160;&#160;<br/>
&#160;&#160;12 = &#34;BorlandC 32 Bit&#34; &#160; &#160; &#160; &#160; &#160; &#160;39 = &#34;COFF settings auto detected&#34;&#160;&#160;<br/>
&#160;&#160;13 = &#34;Keil 16x (static)&#34; &#160; &#160; &#160; &#160; &#160;40 = &#34;NEC CC78K/0 v35&#34;&#160;&#160;<br/>
&#160;&#160;14 = &#34;Keil 8051&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;41 = &#34;Microsoft extended&#34;&#160;&#160;<br/>
&#160;&#160;15 = &#34;ISI&#34; &#160; &#160;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;42 = &#34;ICCAVR&#34;&#160;&#160;<br/>
&#160;&#160;16 = &#34;Hiware HC12&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;43 = &#34;Omf96 (.m96)&#34;&#160;&#160;<br/>
&#160;&#160;17 = &#34;TI TMS470&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;44 = &#34;COFF/DWARF&#34;&#160;&#160;<br/>
&#160;&#160;18 = &#34;Archimedes&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 45 = &#34;OMF96 Binary (Tasking C196)&#34;&#160;&#160;<br/>
&#160;&#160;19 = &#34;COFF&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 46 = &#34;OMF166 Binary (Keil C166)&#34;&#160;&#160;<br/>
&#160;&#160;20 = &#34;IAR&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;47 = &#34;Microware Hawk Plug&amp;Play ASCII&#34;&#160;&#160;<br/>
&#160;&#160;21 = &#34;VisualDSP&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;48 = &#34;UBROF Binary (IAR)&#34;&#160;&#160;<br/>
&#160;&#160;22 = &#34;GNU 16x&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;49 = &#34;Renesas M32R/M32192 ASCII&#34;&#160;&#160;<br/>
&#160;&#160;23 = &#34;GNU VxWorks&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;50 = &#34;OMF251 Binary (Keil C251)&#34;&#160;&#160;<br/>
&#160;&#160;24 = &#34;GNU 68k&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;51 = &#34;Microsoft standard VC8&#34;&#160;&#160;<br/>
&#160;&#160;25 = &#34;DiabData&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 52 = &#34;Microsoft VC8 Release Build (MATLAB DLL)&#34;&#160;&#160;<br/>
&#160;&#160;26 = &#34;VisualDSP DOS&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160;53 = &#34;Microsoft VC8 Debug Build (MATLAB DLL)&#34;&#160;&#160;<br/>
&#160;&#160;27 = &#34;HEW SH7055&#34; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 54 = &#34;Microsoft VC8 Debug file (pdb)&#34;&#160;&#160;<br/>
&#160;&#160;28 = &#34;Metrowerks&#34;&#160;<br/>
&#160;<br/>
<b>7.2.5&#160;</b><br/>
<b>Configuration of the&#160;Event&#160;Channel&#160;Plug &amp; Play&#160;Mechanism&#160;</b><br/>
The&#160;event&#160;channel&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;enabled&#160;with&#160;the&#160;switch&#160;<br/>
XCP_ENABLE_DAQ_EVENT_INFO&#160;<br/>
A&#160;prerequisite&#160;for&#160;the&#160;event&#160;channel&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;the&#160;general&#160;data&#160;acquisition&#160;<br/>plug&#160;&#160;&amp;&#160;&#160;play&#160;&#160;mechanism.&#160;&#160;If&#160;&#160;the&#160;&#160;mechanism&#160;&#160;is&#160;&#160;enabled&#160;&#160;the&#160;&#160;following&#160;&#160;configurations&#160;&#160;items&#160;<br/>have&#160;to&#160;be&#160;defined&#160;as&#160;described&#160;below:&#160;<br/>
<b>Constant&#160;</b><br/>
<b>Range&#160;</b><br/>
<b>Description&#160;</b><br/>
kXcpMaxEvent&#160;<br/>
0..0xFF7&#160;<br/>
Number&#160;of&#160;available events&#160;in&#160;the&#160;slave&#160;<br/>(part&#160;of&#160;event&#160;channel&#160;plug&#160;&amp;&#160;play&#160;mechanism)&#160;<br/>If&#160;the&#160;event&#160;numbers&#160;do&#160;not&#160;start&#160;at&#160;0&#160;or&#160;are&#160;not&#160;<br/>continuous&#160;this&#160;is&#160;the&#160;maximum&#160;used event&#160;channel&#160;<br/>number&#160;plus 1.&#160;<br/>
kXcpEventName[]&#160;<br/>
kXcpMaxEvent&#160;&#160;List&#160;with pointers&#160;to&#160;the&#160;event&#160;channel&#160;names&#160;that&#160;are&#160;<br/>
defined as&#160;strings.&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
7&#160;Implementation&#160;specific&#160;range.&#160;The&#160;range is&#160;0..0xFFFE&#160;according&#160;to XCP&#160;specification<a href="TechnicalReference_Asr_Xcps.html#108">&#160;[I],&#160;[II].</a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
95&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=96></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-96_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-96_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
kXcpEventNameLength[]&#160;&#160;kXcpMaxEvent&#160;&#160;Length of&#160;the&#160;event&#160;channel&#160;names&#160;without&#160;the&#160;<br/>
terminating&#160;char.&#160;<br/>
kXcpEventCycle[]&#160;<br/>
kXcpMaxEvent&#160;&#160;Cycle time of&#160;the&#160;event&#160;channels&#160;in milliseconds.&#160;<br/>
kXcpEventDirection[]&#160;<br/>
kXcpMaxEvent&#160;&#160;Direction of&#160;the&#160;event&#160;channels.&#160;<br/>
For&#160;XCP&#160;Basic&#160;valid values are:&#160;<br/>
-&#160;<br/>
kXcpEventDirectionDaq&#160;<br/>
For&#160;XCP&#160;Professional&#160;valid values&#160;are:&#160;<br/>
-&#160;<br/>
kXcpEventDirectionDaq&#160;<br/>
-&#160;<br/>
kXcpEventDirectionStim&#160;&#160;&#160;<br/>
-&#160;<br/>
kXcpEventDirectionDaqStim&#160;<br/>
&#160;<br/>
<b>Example&#160;<br/></b>&#160;<br/>
&#160;<br/>
#define&#160;XCP_ENABLE_DAQ_EVENT_INFO&#160;<br/>#define&#160;kXcpMaxEvent 3&#160;<br/>&#160;<br/>CONST(uint8, XCP_CONST) kXcpEventName_0[] =&#160;&#34;10ms&#34;;&#160;<br/>CONST(uint8, XCP_CONST) kXcpEventName_1[] =&#160;&#34;100ms DAQ&#34;;&#160;<br/>CONST(uint8, XCP_CONST) kXcpEventName_2[] =&#160;&#34;100ms STIM&#34;;&#160;<br/>CONSTP2CONST(uint8, XCP_CONST, XCP_CONST) kXcpEventName[] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;&amp;kXcpEventName_0[0],&#160;<br/>&#160;&#160;&amp;kXcpEventName_1[0],&#160;<br/>&#160;&#160;&amp;kXcpEventName_2[0]&#160;<br/>};&#160;<br/>&#160;<br/>CONST(uint8, XCP_CONST) kXcpEventNameLength[] =&#160;<br/>{&#160;<br/>&#160;&#160;4,&#160;<br/>&#160;&#160;9,&#160;<br/>&#160;&#160;10&#160;<br/>};&#160;<br/>&#160;<br/>CONST(uint8, XCP_CONST) kXcpEventCycle[] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;10,&#160;<br/>&#160;&#160;100,&#160;<br/>&#160;&#160;100&#160;<br/>};&#160;<br/>&#160;<br/>CONST(uint8, XCP_CONST) kXcpEventDirection[] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;kXcpEventDirectionDaq,&#160;&#160;<br/>&#160;&#160;kXcpEventDirectionDaq,&#160;&#160;<br/>&#160;&#160;kXcpEventDirectionStim&#160;<br/>};&#160;<br/>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
96&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=97></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-97_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>7.2.6&#160;</b><br/>
<b>Configuration of the&#160;DAQ&#160;Time&#160;Stamped&#160;Mode&#160;</b><br/>
Transmission&#160;&#160;of&#160;&#160;DAQ&#160;&#160;timestamps&#160;&#160;is&#160;&#160;enabled&#160;&#160;with&#160;&#160;XCP_ENABLE_DAQ_TIMESTAMP.&#160;&#160;If&#160;<br/>XCP_ENABLE_DAQ_TIMESTAMP_FIXED&#160;is&#160;defined&#160;all&#160;DTO&#160;Packets&#160;will&#160;be&#160;transmitted&#160;in&#160;<br/>time&#160;stamped&#160;mode.&#160;&#160;<br/>
<b>Constant&#160;</b><br/>
<b>Range&#160;</b><br/>
<b>Description&#160;</b><br/>
kXcpDaqTimestampSize&#160;<br/>
DAQ_TIMESTAMP_BYTE,&#160;<br/>
This&#160;parameter&#160;defines&#160;the&#160;<br/>
DAQ_TIMESTAMP_WORD,&#160;<br/>
size of&#160;timestamps.&#160;It&#160;can&#160;<br/>
DAQ_TIMESTAMP_DWORD&#160;<br/>
either&#160;be&#160;1&#160;byte,&#160;2&#160;bytes&#160;or&#160;4&#160;<br/>bytes.&#160;<br/>
XcpDaqTimestampType&#160;<br/>
uint8, uint16 or uint32&#160;<br/>
Type&#160;of&#160;the&#160;timestamp&#160;<br/>depends&#160;on&#160;the&#160;parameter&#160;&#160;<br/>kXcpDaqTimestampSize.&#160;<br/>
kXcpDaqTimestampUnit&#160;<br/>
DAQ_TIMESTAMP_UNIT_1NS&#160;<br/>
Unit&#160;of&#160;the&#160;timestamp&#160;<br/>
DAQ_TIMESTAMP_UNIT_10NS&#160;<br/>
(1 ns,&#160;10&#160;ns&#160;..&#160;1&#160;s)&#160;<br/>
DAQ_TIMESTAMP_UNIT_100NS&#160;&#160;&#160;<br/>
DAQ_TIMESTAMP_UNIT_1US&#160;<br/>
&#160;<br/>
DAQ_TIMESTAMP_UNIT_10US&#160;<br/>
&#160;<br/>
DAQ_TIMESTAMP_UNIT_100US&#160;<br/>DAQ_TIMESTAMP_UNIT_1MS&#160;<br/>DAQ_TIMESTAMP_UNIT_10MS&#160;<br/>DAQ_TIMESTAMP_UNIT_100MS&#160;<br/>DAQ_TIMESTAMP_UNIT_1S&#160;<br/>DAQ_TIMESTAMP_UNIT_1pS&#160;<br/>DAQ_TIMESTAMP_UNIT_10pS&#160;<br/>DAQ_TIMESTAMP_UNIT_100pS&#160;<br/>
kXcpDaqTimestampTicksPerUnit&#160;&#160;0..0xFFFF&#160;<br/>
Time stamp&#160;ticks&#160;per&#160;unit&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.2.7&#160;</b><br/>
<b>Configuration of the&#160;Flash Programming&#160;Plug &amp; Play&#160;Mechanism&#160;</b><br/>
The&#160;flash&#160;programming&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;enabled&#160;with&#160;the&#160;switch&#160;<br/>
XCP_ENABLE_PROGRAM_INFO&#160;<br/>
If&#160;the&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;enabled&#160;the&#160;number&#160;of&#160;sectors&#160;and&#160;the&#160;start&#160;address&#160;and&#160;<br/>end&#160;address&#160;of&#160;each&#160;sector&#160;has&#160;to&#160;be&#160;defined.&#160;The&#160;constants&#160;that&#160;have&#160;to&#160;be&#160;defined&#160;can&#160;<br/>be&#160;found&#160;in&#160;the&#160;following&#160;table.&#160;<br/>
<b>Constant&#160;</b><br/>
<b>Range&#160;</b><br/>
<b>Description&#160;</b><br/>
kXcpMaxSector&#160;<br/>
0..0xFF&#160;<br/>
Number&#160;of&#160;available flash sectors&#160;in the&#160;slave&#160;<br/>
kXcpSectorName[]&#160;<br/>
kXcpMaxSector&#160;&#160;List&#160;with pointers&#160;to&#160;the&#160;Sector&#160;names&#160;that&#160;are&#160;<br/>
defined as&#160;strings.&#160;<br/>
kXcpSectorNameLength&#160;<br/>
kXcpMaxSector&#160;&#160;Length of&#160;the&#160;Sector&#160;names without&#160;the&#160;terminating&#160;<br/>
char.&#160;<br/>
kXcpProgramSectorStart[]&#160;&#160;kXcpMaxSector&#160;&#160;List&#160;with the&#160;start&#160;addresses of&#160;the sectors&#160;<br/>kXcpProgramSectorEnd[]&#160;<br/>
kXcpMaxSector&#160;&#160;List&#160;with the&#160;end address&#160;of&#160;the&#160;sectors&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
97&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=98></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-98_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-98_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Example&#160;<br/>&#160;</b><br/>
&#160;<br/>
#define&#160;XCP_ENABLE_PROGRAM_INFO&#160;<br/>#define&#160;kXcpMaxSector 2&#160;<br/>&#160;<br/>CONST(XcpCharType, XCP_CONST) kXcpSectorName_0[] =&#160;&#34;Sector0&#34;;&#160;<br/>CONST(XcpCharType, XCP_CONST) kXcpSectorName_1[] =&#160;&#34;Sector1&#34;;&#160;<br/>&#160;<br/>CONSTP2CONST(XcpCharType, XCP_CONST, XCP_CONST) kXcpSectorName[] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;&amp;kXcpSectorName_0[0],&#160;<br/>&#160;&#160;&amp;kXcpSectorName_1[0]&#160;<br/>};&#160;<br/>CONST(uint8, XCP_CONST) kXcpSectorNameLength[] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;7U,&#160;<br/>&#160;&#160;7U&#160;<br/>};&#160;<br/>&#160;<br/>CONST(uint32, XCP_CONST) kXcpProgramSectorStart [] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;(uint32)0x000000u,&#160;&#160;<br/>&#160;&#160;(uint32)0x010000u,&#160;&#160;<br/>};&#160;<br/>CONST(uint32, XCP_CONST) kXcpProgramSectorEnd [] =&#160;&#160;<br/>{&#160;<br/>&#160;&#160;(uint32)0x00FFFFu,&#160;&#160;<br/>&#160;&#160;(uint32)0x01FFFFu,&#160;&#160;<br/>};&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.2.8&#160;</b><br/>
<b>Configuration of the&#160;Page&#160;Switching Plug&#160;&amp; Play&#160;Mechanism&#160;</b><br/>
The&#160;page&#160;switching&#160;plug&#160;&amp;&#160;play&#160;mechanism&#160;is&#160;enabled&#160;with&#160;the&#160;switch&#160;<br/>
XCP_ENABLE_PAGE_INFO&#160;<br/>
If&#160;&#160;the&#160;&#160;plug&#160;&#160;&amp;&#160;&#160;play&#160;&#160;mechanism&#160;&#160;is&#160;&#160;enabled&#160;&#160;the&#160;&#160;following&#160;&#160;configurations&#160;&#160;items&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;<br/>defined&#160;as&#160;described&#160;below:&#160;<br/>
<b>Constant&#160;</b><br/>
<b>Range&#160;</b><br/>
<b>Description&#160;</b><br/>
kXcpMaxSegment&#160;<br/>
0x01&#160;<br/>
Number&#160;of&#160;memory&#160;segments&#160;<br/>
kXcpMaxPages&#160;&#160;<br/>
0x01..0x02&#160;<br/>
Number&#160;of&#160;pages&#160;<br/>
&#160;<br/>
<b>7.2.9&#160;</b><br/>
<b>Configuration of the&#160;used Transport Layer&#160;</b><br/>
The&#160;XCP&#160;Protocol&#160;Layer&#160;uses&#160;a&#160;jump&#160;&#160;table&#160;to&#160;call&#160;respective&#160;Transport&#160;Layer&#160;Functions.&#160;<br/>This jump&#160;table&#160;has to&#160;contain&#160;certain&#160;Function&#160;names&#160;<br/>
<b>Constant&#160;</b><br/>
<b>Range&#160;</b><br/>
<b>Description&#160;</b><br/>
Xcp_TlApi&#160;<br/>
Number of TL&#160;&#160;Function&#160;Pointer&#160;table containing&#160;pointers&#160;to&#160;the&#160;<br/>
respective&#160;Transport&#160;Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
98&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=99></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-99_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-99_2.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>Example&#160;<br/>&#160;</b><br/>
&#160;<br/>
#define&#160;NUMBER_OF_TRANSPORTLAYERS &#160; &#160; &#160; &#160; &#160; &#160;1&#160;<br/>#define&#160;XCP_TRANSPORT_LAYER_CAN &#160; &#160; &#160; &#160; &#160; &#160; &#160;0u&#160;<br/>&#160;<br/>CONST(Xcp_TlApiType,&#160;XCP_CONST)&#160;<br/>Xcp_TlApi[NUMBER_OF_TRANSPORTLAYERS]&#160;=&#160;<br/>{&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;CanXcp_Send,&#160;/* ApplXcpSend */&#160;<br/>&#160; &#160;&#160;CanXcp_SendFlush&#160;/* ApplXcpSendFlush */&#160;<br/>&#160; &#160;&#160;#if&#160;defined&#160;( XCP_ENABLE_TL_COMMAND )&#160;<br/>&#160; &#160;&#160;,&#160;<br/>&#160; &#160;&#160;CanXcp_TLService /* ApplXcpTLService */&#160;<br/>&#160; &#160;&#160;#endif&#160;<br/>&#160;&#160;}&#160;<br/>};&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
99&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=100></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-100_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>8&#160;&#160;Resource&#160;Requirements&#160;</b><br/>
The&#160;&#160;resource&#160;&#160;requirements&#160;&#160;of&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;mainly&#160;&#160;depend&#160;&#160;on&#160;&#160;the&#160;&#160;micro&#160;<br/>controller,&#160;&#160;compiler&#160;&#160;options&#160;&#160;and&#160;&#160;configuration.&#160;&#160;Within&#160;&#160;this&#160;&#160;chapter&#160;&#160;only&#160;&#160;the&#160;&#160;configuration&#160;<br/>specific resource&#160;requirements&#160;are&#160;taken&#160;in&#160;consideration.&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
100&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=101></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-101_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>9&#160;&#160;Limitations&#160;</b><br/>
<b>9.1&#160;</b><br/>
<b>General&#160;Limitations&#160;</b><br/>
The&#160;functional limitations of&#160;the&#160;XCP&#160;Professional Version&#160;are listed&#160;below:&#160;<br/>
<b>&gt;&#160;&#160;</b>Bit stimulation&#160;is not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>Only&#160;dynamic DAQ&#160;list&#160;allocation&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;interleaved&#160;communication&#160;model is not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>Only&#160;default&#160;programming&#160;data&#160;format&#160;is supported&#160;<br/>
<b>&gt;&#160;&#160;</b>GET_SECTOR_INFO&#160;does&#160;not&#160;return&#160;sequence&#160;numbers&#160;<br/>
<b>&gt;&#160;&#160;</b>Program&#160;Verify&#160;and&#160;Program&#160;Format&#160;are not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>DAQ&#160;numbers are&#160;limited&#160;to&#160;byte&#160;size&#160;<br/>
<b>&gt;&#160;&#160;</b>DAQ&#160;does not&#160;support&#160;address&#160;extension&#160;<br/>
<b>&gt;&#160;&#160;</b>DAQ-list&#160;and&#160;event&#160;channel prioritization&#160;is not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>Event&#160;channels contain&#160;one&#160;DAQ-list&#160;<br/>
<b>&gt;&#160;&#160;</b>ODT&#160;optimization&#160;not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>Assignments&#160;of&#160;CAN identifiers to&#160;DAQ&#160;lists&#160;is not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>MAX_DTO&#160;is limited&#160;to&#160;0xFF&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;resume&#160;bits in&#160;DAQ&#160;lists&#160;are not&#160;set&#160;<br/>
<b>&gt;&#160;&#160;</b>STORE_DAQ,&#160;CLEAR_DAQ&#160;and&#160;STORE_CAL&#160;do&#160;not&#160;send&#160;an&#160;event&#160;message&#160;<br/>
<b>&gt;&#160;&#160;</b>Entering&#160;resume&#160;mode&#160;does&#160;not&#160;send&#160;an&#160;event&#160;message&#160;<br/>
<b>&gt;&#160;&#160;</b>Overload&#160;indication&#160;by&#160;an&#160;event&#160;is not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>SERV_RESET&#160;is&#160;not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;following&#160;checksum&#160;types are&#160;not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP_CRC_16&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP_CRC_32&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP_USER_DEFINED&#160;<br/>
<b>&gt;&#160;&#160;</b>Maximum&#160;checksum&#160;block size&#160;is 0xFFFF&#160;<br/>
<b>&gt;&#160;&#160;</b>Page&#160;Info&#160;and&#160;Segment&#160;Info&#160;is not&#160;supported&#160;<br/>
<b>&gt;&#160;&#160;</b>Only&#160;one&#160;segment&#160;and&#160;two&#160;pages are supported&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;seed&#160;size&#160;and&#160;key&#160;size&#160;must&#160;be&#160;equal or&#160;less&#160;MAX_CTO-2&#160;<br/>
<b>&gt;&#160;&#160;</b>Consistency&#160;only&#160;supported&#160;on&#160;ODT&#160;level&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
101&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=102></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-102_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
Planned:&#160;<br/>
<b>&gt;&#160;&#160;</b>User defined&#160;checksum&#160;calculations&#160;<br/>
<b>&gt;&#160;&#160;</b>CRC16&#160;and&#160;CRC32&#160;<br/>
<b>9.2&#160;</b><br/>
<b>Limitations&#160;of&#160;XCP&#160;Basic&#160;</b><br/>
The&#160;XCP&#160;Protocol Layer is available&#160;in&#160;two&#160;variants:&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP&#160;Professional Version&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP&#160;Basic Version&#160;<br/>
The&#160;&#160;XCP&#160;Professional&#160;Version&#160;is&#160;the&#160;‘full&#160;version’,&#160;which&#160;&#160;is&#160;also&#160;supported&#160;by&#160;the&#160;Vector&#160;<br/>generation&#160;&#160;tool&#160;&#160;GENy.&#160;&#160;The&#160;&#160;XCP&#160;&#160;Basic&#160;&#160;Version&#160;&#160;is&#160;&#160;a&#160;&#160;subset&#160;&#160;of&#160;&#160;the&#160;&#160;‘full&#160;&#160;version’,&#160;&#160;which&#160;&#160;is&#160;<br/>distributed&#160;freely&#160;via&#160;the&#160;internet&#160;and&#160;which&#160;has to&#160;be&#160;configured&#160;manually.&#160;<br/>The&#160;XCP&#160;features&#160;that&#160;are&#160;available&#160;by&#160;the&#160;XCP&#160;Professional&#160;version&#160;but&#160;not&#160;by&#160;the&#160;XCP&#160;<br/>Basic version&#160;are listed&#160;below:&#160;<br/>
<b>&gt;&#160;&#160;</b>Stimulation&#160;(Bypassing)&#160;<br/>
<b>&gt;&#160;&#160;</b>Bit stimulation8&#160;<br/>
<b>&gt;&#160;&#160;</b>Atomic bit&#160;manipulation&#160;<br/>
<b>&gt;&#160;&#160;</b>SHORT_DOWNLOAD&#160;<br/>
<b>&gt;&#160;&#160;</b>FLASH and&#160;EEPROM&#160;Programming&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;block&#160;transfer communication&#160;mode&#160;<br/>
<b>&gt;&#160;&#160;</b>Resume&#160;mode&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;transmission&#160;of&#160;service&#160;request&#160;packets&#160;<br/>
<b>&gt;&#160;&#160;</b>Memory&#160;write&#160;protection&#160;<br/>
<b>&gt;&#160;&#160;</b>Memory&#160;read&#160;protection&#160;<br/>
<b>&gt;&#160;&#160;</b>Programming&#160;write&#160;protection&#160;<br/>
<b>&gt;&#160;&#160;</b>Support of&#160;AUTOSAR&#160;CRC module&#160;<br/>
<b>&gt;&#160;&#160;</b>Access to&#160;internal data&#160;pointer&#160;<br/>
<b>&gt;&#160;&#160;</b>XCP&#160;deactivation&#160;<br/>
<b>&gt;&#160;&#160;</b>Open&#160;Command&#160;Interface&#160;<br/>
<b>&gt;&#160;&#160;</b>Transport Layer&#160;Commands&#160;<br/>
<b>&gt;&#160;&#160;</b>Configurable&#160;timestamp&#160;size&#160;<br/>
<b>&gt;&#160;&#160;</b>Disable&#160;Calibration&#160;<br/>
&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
8&#160;Not&#160;yet&#160;supported&#160;by&#160;XCP&#160;Professional&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
102&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=103></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-103_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>9.3&#160;</b><br/>
<b>Limitations&#160;Regarding Platforms,&#160;Compilers&#160;and Memory&#160;Models&#160;</b><br/>
Even&#160;though&#160;XCP&#160;Professional&#160;and&#160;XCP&#160;Basic&#160;are&#160;Protocol&#160;Layers&#160;and&#160;therefore&#160;higher&#160;<br/>software&#160;layers,&#160;they&#160;manipulate&#160;memory&#160;addresses&#160;and&#160;directly&#160;access&#160;the&#160;memory&#160;with&#160;<br/>these&#160;addresses.&#160;<br/>This&#160;&#160;might&#160;&#160;cause&#160;&#160;issues&#160;&#160;for&#160;&#160;some&#160;&#160;combinations&#160;&#160;of&#160;&#160;platforms,&#160;&#160;compilers&#160;&#160;and&#160;&#160;memory&#160;<br/>models.&#160;&#160;The&#160;&#160;following&#160;&#160;list&#160;&#160;provides&#160;&#160;all&#160;&#160;known&#160;&#160;restrictions&#160;&#160;on&#160;&#160;platforms,&#160;&#160;compilers&#160;&#160;and&#160;<br/>linkers:&#160;<br/>
<b>&gt;&#160;&#160;</b>CANoeOSEK&#160;Emulation&#160;is not&#160;supported&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
103&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=104></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-104_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-104_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-104_3.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>10&#160;&#160;FAQ&#160;</b><br/>
<b>10.1&#160;&#160;Connection to MCS&#160;Not&#160;Possible&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>After integration&#160;of&#160;XCP&#160;on&#160;CAN&#160;or integration&#160;of&#160;XCP&#160;Basic with&#160;a&#160;proprietary&#160;<br/>
&#160;<br/>
CAN-Driver does the&#160;MCS&#160;(e.g.&#160;CANape) not&#160;connect&#160;with&#160;the&#160;XCP&#160;slave,&#160;even&#160;<br/>though&#160;the&#160;CAN&#160;communication&#160;is working&#160;properly.&#160;<br/>
&#160;<br/>
The&#160;XCP&#160;protocol&#160;allows&#160;transmitting&#160;XCP&#160;packets&#160;&#160;with&#160;a&#160;variable&#160;&#160;data&#160;length.&#160;&#160;However&#160;<br/>many&#160;OEMs&#160;require&#160;that&#160;all&#160;CAN&#160;messages&#160;sent&#160;within&#160;their&#160;automotive&#160;networks&#160;have&#160;to&#160;<br/>have&#160;a&#160;static&#160;DLC.&#160;Therefore&#160;messages&#160;sent&#160;by&#160;the&#160;MCS&#160;with&#160;a&#160;DLC&#160;of&#160;less&#160;than&#160;8&#160;(e.g.&#160;<br/>CONNECT&#160;&#160;has&#160;&#160;a&#160;&#160;DLC&#160;&#160;of&#160;&#160;2)&#160;&#160;might&#160;&#160;be&#160;&#160;discarded&#160;&#160;by&#160;&#160;the&#160;&#160;ECU’s&#160;&#160;CAN-Driver&#160;&#160;and&#160;&#160;the&#160;<br/>connection&#160;is&#160;not&#160;possible.&#160;<br/>Check&#160;&#160;whether&#160;&#160;your&#160;&#160;MCS&#160;&#160;supports&#160;&#160;transmission&#160;&#160;with&#160;&#160;static&#160;&#160;DLC.&#160;&#160;This&#160;&#160;is&#160;&#160;supported&#160;&#160;by&#160;<br/>CANape&#160;since&#160;Version&#160;5.5.&#160;<br/>
&#160;<br/>
<b>10.2&#160;&#160;Invalid Time&#160;Stamp&#160;Unit&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>If&#160;using&#160;data&#160;acquisition&#160;CANape&#160;reports an&#160;error due&#160;to&#160;an&#160;invalid&#160;timestamp&#160;<br/>
&#160;<br/>
unit.&#160;<br/>
&#160;<br/>
If&#160;you&#160;are&#160;using&#160;CANape&#160;5.5.x&#160;or an&#160;earlier version&#160;please&#160;define&#160;<br/>
#define XCP_ENABLE_CANAPE_5_5_X_SUPPORT&#160;<br/>
in&#160;your user config&#160;file.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
104&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=105></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-105_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-105_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-105_3.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>10.3&#160;&#160;Support of&#160;small&#160;and&#160;medium&#160;memory&#160;model&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>How&#160;is the&#160;XCP&#160;Protocol Layer configured&#160;in&#160;order to&#160;access&#160;the&#160;whole&#160;memory&#160;<br/>
&#160;<br/>
in&#160;the&#160;small&#160;and&#160;medium&#160;memory&#160;model?&#160;<br/>
&#160;<br/>
By&#160;&#160;default&#160;&#160;The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;accesses&#160;&#160;the&#160;&#160;memory&#160;&#160;with&#160;&#160;a&#160;&#160;default&#160;&#160;pointer.&#160;&#160;I.e.&#160;&#160;in&#160;<br/>small&#160;and&#160;medium&#160;memory&#160;model&#160;a&#160;near&#160;pointer&#160;is&#160;used.&#160;If&#160;the&#160;far&#160;memory&#160;(e.g.&#160;code&#160;or&#160;<br/>read-only&#160;&#160;sections)&#160;&#160;needs&#160;&#160;to&#160;&#160;be&#160;&#160;accessed&#160;&#160;via&#160;&#160;the&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;the&#160;&#160;memory&#160;&#160;qualifiers&#160;<br/>have&#160;to&#160;be&#160;defined&#160;as&#160;far pointers by&#160;the&#160;user&#160;within&#160;the&#160;user config&#160;file.&#160;&#160;&#160;<br/>Two&#160;memory&#160;qualifiers&#160;are used&#160;to&#160;access the&#160;memory:&#160;<br/>MTABYTEPTR&#160;<br/>
#define MTABYTEPTR&#160;P2VAR(uint8, AUTOMATIC, XCP_MTA_DATA)&#160;<br/>This pointer is used to access memory for standard read and&#160;<br/>write operations&#160;<br/>
DAQBYTEPTR&#160;<br/>
#define DAQBYTEPTR&#160;P2VAR(uint8, AUTOMATIC, XCP_DAQ_DATA)&#160;<br/>This pointer is used to access memory for the Synchronous Data&#160;<br/>Acquisition&#160;<br/>
Depending&#160;&#160;on&#160;&#160;the&#160;&#160;use&#160;&#160;case,&#160;&#160;microcontroller,&#160;&#160;memory&#160;&#160;model&#160;&#160;and&#160;&#160;compiler&#160;&#160;either&#160;<br/>XCP_MEMORY_FAR&#160;&#160;or&#160;&#160;both&#160;&#160;memory&#160;&#160;qualifiers&#160;&#160;(DAQBYTEPTR&#160;&#160;and&#160;&#160;MTABYTEPTR)&#160;&#160;have&#160;&#160;to&#160;<br/>be&#160;defined&#160;by&#160;the&#160;user.&#160;Alternatively&#160;the&#160;AUTOSAR&#160;Compiler&#160;Abstraction&#160;can&#160;be&#160;used.&#160;In&#160;<br/>this case&#160;the&#160;pointer classes&#160;<br/>XCP_MTA_DATA and&#160;<br/>
XCP_DAQ_DATA&#160;<br/>
Have&#160;to&#160;be&#160;defined&#160;as&#160;“far”&#160;according&#160;to&#160;the&#160;used&#160;compiler.&#160;<br/>
<b>10.4&#160;&#160;Small&#160;memory&#160;model&#160;on ST10&#160;/&#160;XC16X&#160;/&#160;C16X&#160;with&#160;Tasking Compiler&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>How&#160;has XCP&#160;Protocol&#160;Layer to&#160;be&#160;configured&#160;in&#160;order&#160;to&#160;support small memory&#160;<br/>
&#160;<br/>
model on&#160;the&#160;following&#160;microcontrollers:&#160;ST10,&#160;XC16X,&#160;C16X&#160;with&#160;Tasking&#160;<br/>Compiler?&#160;<br/>
&#160;<br/>
If&#160;&#160;the&#160;&#160;small&#160;memory&#160;model&#160;&#160;is&#160;used&#160;&#160;and&#160;the&#160;&#160;two&#160;&#160;least&#160;&#160;significant&#160;&#160;bits&#160;of&#160;&#160;the&#160;&#160;DPP&#160;&#160;register&#160;<br/>where&#160;the&#160;data&#160;of&#160;XCP&#160;is&#160;located&#160;is&#160;not&#160;equal&#160;the&#160;default&#160;DPP&#160;register&#160;value&#160;(i.e.&#160;the&#160;two&#160;<br/>least&#160;significant&#160;bits&#160;of&#160;DPPx&#160;are&#160;unequal&#160;x,&#160;x=0..3)&#160;the&#160;configuration&#160;of&#160;the&#160;XCP&#160;Protocol&#160;<br/>Layer has to&#160;be&#160;adapted&#160;in&#160;the&#160;user config&#160;file&#160;&#160;<br/>Disable type casts from pointers to integers :&#160;<br/>
#define XCP_ENABLE_NO_P2INT_CAST&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
105&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=106></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-106_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-106_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-106_3.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-106_4.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-106_5.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>10.5&#160;&#160;Data&#160;Page&#160;Banking on Star12X&#160;/&#160;Metrowerks&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>How&#160;has the&#160;XCP&#160;Protocol Layer to&#160;be&#160;configured&#160;in&#160;order to&#160;support data&#160;page&#160;<br/>
&#160;<br/>
banking&#160;on&#160;the&#160;Star12X&#160;with&#160;Metrowerks compiler?&#160;<br/>
&#160;<br/>
In&#160;&#160;order&#160;&#160;to&#160;&#160;use&#160;&#160;data&#160;&#160;page&#160;&#160;banking&#160;&#160;the&#160;&#160;following&#160;&#160;definition&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;added&#160;&#160;to&#160;&#160;the&#160;&#160;user&#160;<br/>config&#160;file:&#160;<br/>
#define XCP_MEMORY_MODEL_PAGED&#160;<br/>
If&#160;this&#160;option&#160;is enabled&#160;far&#160;pointers&#160;are&#160;used&#160;for memory&#160;access,&#160;and&#160;address&#160;conversions&#160;<br/>are&#160;carried&#160;out&#160;in&#160;the&#160;in&#160;the&#160;application&#160;callback&#160;template&#160;_xcp_appl.c.&#160;These&#160;address&#160;<br/>conversions have&#160;to&#160;adapted&#160;to&#160;the&#160;used&#160;derivative.&#160;<br/>
&#160;<br/>
<b>Please&#160;note&#160;<br/></b>The&#160;data&#160;page&#160;banking&#160;support is implemented&#160;in&#160;the&#160;template&#160;_xcp_appl.c&#160;for&#160;<br/>
&#160;<br/>
the&#160;MC9S12XDP512.&#160;For other Star12X&#160;derivatives the&#160;template&#160;has to&#160;be&#160;<br/>adapted.&#160;<br/>
&#160;<br/>
<b>10.6&#160;&#160;Memory&#160;model&#160;banked on Star12X&#160;/&#160;Cosmic&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>How&#160;has the&#160;XCP&#160;Protocol Layer to&#160;be&#160;configured&#160;in&#160;order to&#160;support the&#160;access&#160;<br/>
&#160;<br/>
to&#160;far&#160;pages in&#160;the&#160;banked&#160;memory&#160;model on&#160;the&#160;Star12X&#160;with&#160;Cosmic compiler?&#160;<br/>
&#160;<br/>
In&#160;order&#160;to&#160;access&#160;far&#160;pages&#160;or&#160;support&#160;data&#160;page&#160;banking&#160;the&#160;following&#160;definitions&#160;have&#160;to&#160;<br/>be&#160;added&#160;to&#160;the&#160;user config&#160;file:&#160;<br/>
#define XCP_MEMORY_MODEL_PAGED&#160;<br/>
#define XCP_ENABLE_MEM_ACCESS_BY_APPL&#160;<br/>
If&#160;this&#160;option&#160;is enabled&#160;far&#160;pointers&#160;are&#160;used&#160;for memory&#160;access,&#160;and&#160;address&#160;conversions&#160;<br/>are&#160;carried&#160;out&#160;in&#160;the&#160;in&#160;the&#160;application&#160;callback&#160;template&#160;&#160;_xcp_appl.c.&#160;These&#160;address&#160;<br/>conversions have&#160;to&#160;adapted&#160;to&#160;the&#160;used&#160;derivative.&#160;<br/>
&#160;<br/>
<b>Please&#160;note&#160;<br/></b>The&#160;data&#160;page&#160;banking&#160;support is implemented&#160;in&#160;the&#160;template&#160;_xcp_appl.c&#160;for&#160;<br/>
&#160;<br/>
the&#160;MC9S12XDP512.&#160;For other Star12X&#160;derivatives the&#160;template&#160;has to&#160;be&#160;<br/>adapted.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
106&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=107></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-107_1.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-107_2.png"/><br/>
<img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-107_3.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>10.7&#160;&#160;Reflected CRC16&#160;CCITT Checksum Calculation&#160;Algorithm&#160;</b><br/>
&#160;<br/>
<b>FAQ</b>&#160;<br/>How&#160;is the&#160;reflected&#160;CRC16&#160;CCITT&#160;checksum&#160;calculation&#160;algorithm&#160;configured?&#160;<br/>
&#160;<br/>
&#160;<br/>
The&#160;&#160;XCP&#160;&#160;Protocol&#160;&#160;Layer&#160;&#160;supports&#160;&#160;both&#160;&#160;the&#160;&#160;standard&#160;&#160;CRC16&#160;&#160;CCITT&#160;&#160;algorithm&#160;&#160;and&#160;&#160;the&#160;<br/>reflected&#160;&#160;CRC16&#160;&#160;CCITT&#160;&#160;algorithm.&#160;&#160;In&#160;&#160;order&#160;&#160;to&#160;&#160;use&#160;&#160;the&#160;&#160;reflected&#160;&#160;algorithm&#160;&#160;the&#160;&#160;following&#160;<br/>definition&#160;has to&#160;be&#160;added&#160;to&#160;the&#160;user config&#160;file:&#160;<br/>
#define XCP_ENABLE_CRC16CCITT_REFLECTED&#160;<br/>
&#160;<br/>
<b>Please&#160;note&#160;<br/></b>Up&#160;to&#160;CANape&#160;version&#160;5.6.30.3&#160;(SP3)&#160;the&#160;standard CRC16&#160;CCITT&#160;algorithm&#160;is&#160;<br/>
&#160;<br/>
not&#160;supported,&#160;but&#160;the&#160;reflected&#160;one.&#160;<br/>However a&#160;user checksum&#160;calculation&#160;DLL&#160;can&#160;be&#160;used&#160;in&#160;order to&#160;use&#160;the&#160;<br/>standard algorithm&#160;with&#160;former versions of&#160;CANape.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
107&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=108></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-108_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>11&#160;&#160;Bibliography&#160;</b><br/>
This&#160;manual refers to&#160;the&#160;following&#160;documents:&#160;<br/>
[I]&#160;&#160;XCP&#160;-Part&#160;1&#160;-&#160;Overview&#160;&#160;<br/>
Version 1.1&#160;<br/>
[II]&#160;&#160;XCP&#160;-Part&#160;2-&#160;Protocol&#160;Layer&#160;Specification&#160;<br/>
Version 1.1&#160;<br/>
[III]&#160;XCP&#160;-Part&#160;5-&#160;Example Communication&#160;Sequences&#160;<br/>
Version 1.1&#160;<br/>
[IV]&#160;Technical&#160;Reference&#160;XCP&#160;on&#160;CAN&#160;Transport&#160;Layer&#160;<br/>
Version 1.6&#160;<br/>
[V]&#160;&#160;Technical&#160;Reference&#160;XCP&#160;on&#160;FlexRay&#160;Transport&#160;Layer&#160;<br/>
Version 1.9&#160;<br/>
[VI]&#160;Technical&#160;Reference&#160;XCP&#160;on&#160;LIN&#160;Transport&#160;Layer&#160;<br/>
Version 1.0&#160;<br/>
[VII]&#160;&#160;AUTOSAR&#160;Specification&#160;of&#160;CRC&#160;Routines&#160;<br/>
Release 2.0.0&#160;of&#160;2006-04-28&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
108&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name=109></a><img src="ElectricPowerSteering_TMS570_FIAT_321_website/content/en/docs/Fiasa_326_327_EPS_TMS570/HLDD/BSW/TechnicalReference_Asr_Xcp-109_1.png"/><br/>
Technical Reference&#160;XCP&#160;Protocol&#160;Layer&#160;<br/>
&#160;<br/>
<b>12&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>&#160;<br/>&gt;&#160; &#160;News&#160;<br/>&gt;&#160; &#160;Products&#160;<br/>&gt;&#160; &#160;Demo&#160;software&#160;<br/>&gt;&#160; &#160;Support&#160;<br/>&gt;&#160; &#160;Training&#160;data&#160;<br/>&gt;&#160; &#160;Addresses&#160;<br/>&#160;<br/><a href="http://www.vector-informatik.com/"><b>www.vector-informatik.com&#160;<br/></b></a>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;2.03.00&#160;<br/>
109&#160;/&#160;109&#160;<br/>
&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#2">1 History</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#10">2 Overview</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#10">2.1 Abbreviations and Items used in this paper</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#12">2.2 Naming Conventions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#13">3 Functional Description</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#13">3.1 Overview of the Functional Scope</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#13">3.2 Communication Mode Info</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#13">3.3 Block Transfer Communication Model (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#13">3.4 Slave Device Identification</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#13">3.4.1 XCP Station Identifier</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#14">3.4.2 XCP Generic Identification</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#14">3.4.3 Identification of FlexRay Parameters</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#14">3.5 Seed &amp; Key</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#16">3.6 Checksum Calculation</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#16">3.6.1 Custom CRC calculation</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#16">3.7 MainFunction</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#17">3.8 Memory Protection (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#17">3.9 Memory Access by Application</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#17">3.10 Event Codes</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#18">3.11 Service Request Messages (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#18">3.12 User Defined Command</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#18">3.13 Transport Layer Command</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#19">3.14 Synchronous Data Transfer</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#19">3.14.1 Synchronous Data Acquisition (DAQ)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#19">3.14.2 DAQ Timestamp</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#20">3.14.3 Power-Up Data Transfer (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#20">3.14.4 Send Queue</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#21">3.14.5 Data Stimulation (STIM) (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#21">3.14.6 Bypassing (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#21">3.14.7 Data Acquisition Plug &amp; Play Mechanisms</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#21">3.14.8 Event Channel Plug &amp; Play Mechanism</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#22">3.14.9 Data consistency</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#22">3.15 The Online Data Calibration Model</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#22">3.15.1 Page Switching</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#23">3.15.2 Page Switching Plug &amp; Play Mechanism</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#23">3.15.3 Calibration Data Page Copying</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#23">3.15.4 Freeze Mode Handling</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#23">3.16 Flash Programming (XCP Professional only)</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#23">3.16.1 Flash Programming by the ECU’s Application</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#24">3.16.1.1 Flash Programming Plug &amp; Play Mechanism</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#24">3.16.2 Flash Programming with a Flash Kernel</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#25">3.16.3 Flash Programming Write Protection</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#25">3.17 EEPROM Access (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#25">3.18 Parameter Check</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#26">3.19 Performance Optimizations</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#26">3.20 Interrupt Locks / Exclusive Areas</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#26">3.21 Accessing internal data</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#27">3.22 En- / Disabling the XCP module</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#27">3.23 XCP measurement during the follow up time</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#28">4 Integration into the Application</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#28">4.1 Files of XCP Professional</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#28">4.2 Files of XCP Basic</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#29">4.3 Version changes</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#29">4.4 Integration of XCP into the Application</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#29">4.4.1 Integration of XCP on CAN (XCP Professional only)</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#30">4.4.2 Integration with a Proprietary XCP Transport Layer</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#32">4.4.3 Motorola HC12 with CAN Transport Layer</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#32">4.5 Compiler Abstraction and Memory Mapping</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#32">4.6 Support of Vx1000 Integration</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#33">5 Feature List</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#35">6 Description of the API</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#35">6.1 Version of the Source Code</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#36">6.2 XCP Services called by the Application</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#36">6.2.1 XcpInitMemory: Initialization of the XCP Protocol Layer Memory</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#36">6.2.2 XcpInit: Initialization of the XCP Protocol Layer</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#37">6.2.3 XcpEvent: Handling of a data acquisition event channel</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#38">6.2.4 XcpStimEventStatus: Check data stimulation events</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#38">6.2.5 XcpBackground: Background calculation of checksum</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#39">6.2.6 XcpSendEvent: Transmission of event codes</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#39">6.2.7 XcpPutchar: Put a char into a service request packet</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#40">6.2.8 XcpPrint: Transmission of a service request packet</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#40">6.2.9 XcpDisconnect: Disconnect from XCP master</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#41">6.2.10 XcpSendCrm: Transmit response or error packet</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#42">6.2.11 XcpGetXcpDataPointer: Request internal data pointer</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#42">6.2.12 XcpControl: En- / Disable the XCP module</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#43">6.2.13 XcpGetVersionInfo: Request module version information</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#43">6.3 XCP Protocol Layer Functions, called by the XCP Transport Layer</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#44">6.3.1 XcpCommand: Evaluation of XCP packets and command interpreter</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#44">6.3.2 XcpSendCallBack: Confirmation of the successful transmission of a XCP packet</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#45">6.3.3 XcpGetSessionStatus: Get session state of XCP</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#46">6.3.4 XcpSetActiveTl: Set the active Transport Layer</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#46">6.3.5 XcpGetActiveTl: Set the active Transport Layer</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#47">6.4 XCP Transport Layer Services called by the XCP Protocol Layer</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#47">6.4.1 &lt;Bus&gt;XcpSend: Request for the transmission of a DTO or CTO message</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#47">6.4.2 &lt;Bus&gt;XcpSendFlush: Flush transmit buffer</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#48">6.4.3 ApplXcpInterruptEnable: Enable interrupts</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#49">6.4.4 ApplXcpInterruptDisable: Disable interrupts</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#49">6.4.5 &lt;Bus&gt;XcpTLService: Transport Layer specific commands</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#50">6.5 Application Services called by the XCP Protocol Layer</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#50">6.5.1 ApplXcpGetPointer: Pointer conversion</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#51">6.5.2 ApplXcpGetIdData: Get Identification</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#51">6.5.3 ApplXcpGetSeed: Generate a seed</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#52">6.5.4 ApplXcpUnlock: Valid key and unlock resource</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#53">6.5.5 ApplXcpCheckReadEEPROM: Check read access from EEPROM</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#53">6.5.6 ApplXcpCheckWriteEEPROM: Check write access to the EEPROM</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#54">6.5.7 ApplXcpCheckWriteAccess: Check address for valid write access</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#55">6.5.8 ApplXcpCheckReadAccess: Check address for valid read access</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#55">6.5.9 ApplXcpCheckDAQAccess: Check address for valid read or write access</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#56">6.5.10 ApplXcpCheckProgramAccess: Check address for valid write access</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#57">6.5.11 ApplXcpUserService: User defined command</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#57">6.5.12 ApplXcpOpenCmdIf: XCP command extension interface</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#58">6.5.13 ApplXcpSendStall: Resolve a transmit stall condition</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#58">6.5.14 ApplXcpDisableNormalOperation: Disable normal operation of the ECU</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#59">6.5.15 ApplXcpStartBootLoader: Start of boot loader</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#59">6.5.16 ApplXcpReset: Perform ECU reset</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#60">6.5.17 ApplXcpProgramStart: Prepare flash programming</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#60">6.5.18 ApplXcpFlashClear: Clear flash memory</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#61">6.5.19 ApplXcpFlashProgram: Program flash memory</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#62">6.5.20 ApplXcpDaqResume: Resume automatic data transfer</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#62">6.5.21 ApplXcpDaqResumeStore: Store DAQ lists for resume mode</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#63">6.5.22 ApplXcpDaqResumeClear: Clear stored DAQ lists</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#63">6.5.23 ApplXcpCalResumeStore: Store Calibration data for resume mode</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#64">6.5.24 ApplXcpGetTimestamp: Returns the current timestamp</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#64">6.5.25 ApplXcpGetCalPage: Get calibration page</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#65">6.5.26 ApplXcpSetCalPage: Set calibration page</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#66">6.5.27 ApplXcpCopyCalPage: Copying of calibration data pages</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#67">6.5.28 ApplXcpSetFreezeMode: Setting the freeze mode of a segment</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#67">6.5.29 ApplXcpGetFreezeMode: Reading the freeze mode of a segment</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#68">6.5.30 ApplXcpRead: Read a single byte from memory</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#68">6.5.31 ApplXcpWrite: Write a single byte to RAM</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#69">6.5.32 ApplXcpCalibrationRead: Read multiple bytes from memory</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#69">6.5.33 ApplXcpCalibrationWrite: Write multiple bytes to memory</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#70">6.5.34 ApplXcpReadChecksumValue: Read checksum value</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#70">6.5.35 ApplXcpCalculateChecksum: Custom checksum calculation</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#71">6.6 XCP Protocol Layer Functions that can be overwritten</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#71">6.6.1 XcpMemCpy: Copying of a memory range</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#72">6.6.2 XcpMemSet: Initialization of a memory range</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#72">6.6.3 XcpMemClr: Clear a memory range</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#73">6.6.4 XcpSendDto: Transmission of a data transfer object</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#73">6.7 AUTOSAR CRC Module Services called by the XCP Protocol Layer (XCP Professional Only)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#75">7 Configuration of the XCP Protocol Layer</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#75">7.1 Configuration with GENy (XCP Professional only)</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#75">7.1.1 Component Selection</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#76">7.1.2 Component Configuration</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#76">7.1.2.1 General Settings</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#79">7.1.2.2 Synchronous Data Acquisition</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#82">7.1.2.3 Standard Commands</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#84">7.1.2.4 Checksum</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#85">7.1.2.5 Page Switching</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#86">7.1.2.6 Programming</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#87">7.1.2.7 Fr Parameter</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#88">7.1.2.8 Generated a2l files</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#88">7.2 Configuration without Generation Tool</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#88">7.2.1 Compiler Switches</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#92">7.2.2 Configuration of Constant Definitions</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#93">7.2.2.1 Table of Checksum Calculation Methods</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#93">7.2.3 Configuration of the CPU Type</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#94">7.2.4 Configuration of Slave Device Identification</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#94">7.2.4.1 Identification by ASAM-MC2 Filename without Path and Extension</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#94">7.2.4.2 Automatic Session Configuration with MAP Filenames</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#95">7.2.5 Configuration of the Event Channel Plug &amp; Play Mechanism</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#97">7.2.6 Configuration of the DAQ Time Stamped Mode</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#97">7.2.7 Configuration of the Flash Programming Plug &amp; Play Mechanism</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#98">7.2.8 Configuration of the Page Switching Plug &amp; Play Mechanism</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#98">7.2.9 Configuration of the used Transport Layer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#100">8 Resource Requirements</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#101">9 Limitations</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#101">9.1 General Limitations</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#102">9.2 Limitations of XCP Basic</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#103">9.3 Limitations Regarding Platforms, Compilers and Memory Models</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#104">10 FAQ</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#104">10.1 Connection to MCS Not Possible</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#104">10.2 Invalid Time Stamp Unit</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#105">10.3 Support of small and medium memory model</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#105">Have to be defined as “far” according to the used compiler.</a>
<ul>
<li><a href="TechnicalReference_Asr_Xcps.html#105">10.4 Small memory model on ST10 / XC16X / C16X with Tasking Compiler</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#106">10.5 Data Page Banking on Star12X / Metrowerks</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#106">10.6 Memory model banked on Star12X / Cosmic</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#107">10.7 Reflected CRC16 CCITT Checksum Calculation Algorithm</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Asr_Xcps.html#108">11 Bibliography</a></li>
<li><a href="TechnicalReference_Asr_Xcps.html#109">12 Contact</a></li>
</ul>
<hr/>
</body>
</html>
